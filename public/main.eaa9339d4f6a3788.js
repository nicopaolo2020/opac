"use strict";(self.webpackChunkopac=self.webpackChunkopac||[]).push([[179],{2011:(gt,Se,P)=>{P.d(Se,{Dh:()=>ge,GT:()=>ne,Ot:()=>de,cc:()=>ye,hO:()=>Oe,on:()=>G,pX:()=>ue,xv:()=>ce});var _=P(4650),X=P(9260),V=P(462);gt=P.hmd(gt);const te=["ngOnDestroy"],ue=(be,Ne,Ue,Re={})=>new Proxy(be,{get:(Ee,xe)=>Ue.runOutsideAngular(()=>{var Ge;if(be[xe])return!(null===(Ge=Re?.spy)||void 0===Ge)&&Ge.get&&Re.spy.get(xe,be[xe]),be[xe];if(te.indexOf(xe)>-1)return()=>{};const Ae=Ne.toPromise().then($=>{const we=$&&$[xe];return"function"==typeof we?we.bind($):we&&we.then?we.then(qe=>Ue.run(()=>qe)):Ue.run(()=>we)});return new Proxy(()=>{},{get:($,we)=>Ae[we],apply:($,we,qe)=>Ae.then(Qe=>{var ft;const Je=Qe&&Qe(...qe);return!(null===(ft=Re?.spy)||void 0===ft)&&ft.apply&&Re.spy.apply(xe,qe,Je),Je})})})}),ne=(be,Ne)=>{Ne.forEach(Ue=>{Object.getOwnPropertyNames(Ue.prototype||Ue).forEach(Re=>{Object.defineProperty(be.prototype,Re,Object.getOwnPropertyDescriptor(Ue.prototype||Ue,Re))})})};class de{constructor(Ne){return Ne}}const ge=new _.OlP("angularfire2.app.options"),ce=new _.OlP("angularfire2.app.name");function G(be,Ne,Ue){const Ee="object"==typeof Ue&&Ue||{};Ee.name=Ee.name||"string"==typeof Ue&&Ue||"[DEFAULT]";const Ge=X.Z.apps.filter(Ae=>Ae&&Ae.name===Ee.name)[0]||Ne.runOutsideAngular(()=>X.Z.initializeApp(be,Ee));try{JSON.stringify(be)!==JSON.stringify(Ge.options)&&W("error",`${Ge.name} Firebase App already initialized with different options${gt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new de(Ge)}const W=(be,...Ne)=>{(0,_.X6Q)()&&typeof console<"u"&&console[be](...Ne)},Y={provide:de,useFactory:G,deps:[ge,_.R0b,[new _.FiY,ce]]};let Oe=(()=>{class be{constructor(Ue){X.Z.registerVersion("angularfire",V.q4.full,"core"),X.Z.registerVersion("angularfire",V.q4.full,"app-compat"),X.Z.registerVersion("angular",_.q4F.full,Ue.toString())}static initializeApp(Ue,Re){return{ngModule:be,providers:[{provide:ge,useValue:Ue},{provide:ce,useValue:Re}]}}}return be.\u0275fac=function(Ue){return new(Ue||be)(_.LFG(_.Lbi))},be.\u0275mod=_.oAB({type:be}),be.\u0275inj=_.cJS({providers:[Y]}),be})();function ye(be,Ne,Ue,Re,Ee){const[,xe,Ge]=globalThis.\u0275AngularfireInstanceCache.find(Ae=>Ae[0]===be)||[];if(xe)return function Ye(be,Ne){try{return be.toString()===Ne.toString()}catch{return be===Ne}}(Ee,Ge)||(pe("error",`${Ne} was already initialized on the ${Ue} Firebase App with different settings.${nt?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:Ee,was:Ge})),xe;{const Ae=Re();return globalThis.\u0275AngularfireInstanceCache.push([be,Ae,Ee]),Ae}}const nt=!!gt.hot,pe=(be,...Ne)=>{(0,_.X6Q)()&&typeof console<"u"&&console[be](...Ne)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},462:(gt,Se,P)=>{P.d(Se,{q4:()=>Bd,iC:()=>ju,fc:()=>$u,HU:()=>la,vb:()=>ua,JM:()=>rl,nk:()=>nl});var _=P(4650),X=P(259),V=P(5861),te=P(9681),ue=P(2090),ne=P(4859),de=P(1877);P(2833);const ce="@firebase/remote-config",G="0.4.4",ye=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class me{constructor(O,z,oe,ke){this.client=O,this.storage=z,this.storageCache=oe,this.logger=ke}isCachedDataFresh(O,z){if(!z)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const oe=Date.now()-z,ke=oe<=O;return this.logger.debug(`Config fetch cache check. Cache age millis: ${oe}. Cache max age millis (minimumFetchIntervalMillis setting): ${O}. Is cache hit: ${ke}.`),ke}fetch(O){var z=this;return(0,V.Z)(function*(){const[oe,ke]=yield Promise.all([z.storage.getLastSuccessfulFetchTimestampMillis(),z.storage.getLastSuccessfulFetchResponse()]);if(ke&&z.isCachedDataFresh(O.cacheMaxAgeMillis,oe))return ke;O.eTag=ke&&ke.eTag;const Be=yield z.client.fetch(O),xt=[z.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Be.status&&xt.push(z.storage.setLastSuccessfulFetchResponse(Be)),yield Promise.all(xt),Be})()}}function Me(k=navigator){return k.languages&&k.languages[0]||k.language}class Fe{constructor(O,z,oe,ke,Be,xt){this.firebaseInstallations=O,this.sdkVersion=z,this.namespace=oe,this.projectId=ke,this.apiKey=Be,this.appId=xt}fetch(O){var z=this;return(0,V.Z)(function*(){const[oe,ke]=yield Promise.all([z.firebaseInstallations.getId(),z.firebaseInstallations.getToken()]),xt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${z.projectId}/namespaces/${z.namespace}:fetch?key=${z.apiKey}`,Vn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":O.eTag||"*"},Tn={sdk_version:z.sdkVersion,app_instance_id:oe,app_instance_id_token:ke,app_id:z.appId,language_code:Me()},rn={method:"POST",headers:Vn,body:JSON.stringify(Tn)},An=fetch(xt,rn),Gt=new Promise((li,xs)=>{O.signal.addEventListener(()=>{const Wa=new Error("The operation was aborted.");Wa.name="AbortError",xs(Wa)})});let Io;try{yield Promise.race([An,Gt]),Io=yield An}catch(li){let xs="fetch-client-network";throw"AbortError"===li?.name&&(xs="fetch-timeout"),ye.create(xs,{originalErrorMessage:li?.message})}let br=Io.status;const da=Io.headers.get("ETag")||void 0;let Ws,Ft;if(200===Io.status){let li;try{li=yield Io.json()}catch(xs){throw ye.create("fetch-client-parse",{originalErrorMessage:xs?.message})}Ws=li.entries,Ft=li.state}if("INSTANCE_STATE_UNSPECIFIED"===Ft?br=500:"NO_CHANGE"===Ft?br=304:("NO_TEMPLATE"===Ft||"EMPTY_CONFIG"===Ft)&&(Ws={}),304!==br&&200!==br)throw ye.create("fetch-status",{httpStatus:br});return{status:br,eTag:da,config:Ws}})()}}class it{constructor(O,z){this.client=O,this.storage=z}fetch(O){var z=this;return(0,V.Z)(function*(){const oe=(yield z.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return z.attemptFetch(O,oe)})()}attemptFetch(O,{throttleEndTimeMillis:z,backoffCount:oe}){var ke=this;return(0,V.Z)(function*(){yield function je(k,O){return new Promise((z,oe)=>{const ke=Math.max(O-Date.now(),0),Be=setTimeout(z,ke);k.addEventListener(()=>{clearTimeout(Be),oe(ye.create("fetch-throttle",{throttleEndTimeMillis:O}))})})}(O.signal,z);try{const Be=yield ke.client.fetch(O);return yield ke.storage.deleteThrottleMetadata(),Be}catch(Be){if(!function et(k){if(!(k instanceof ue.ZR&&k.customData))return!1;const O=Number(k.customData.httpStatus);return 429===O||500===O||503===O||504===O}(Be))throw Be;const xt={throttleEndTimeMillis:Date.now()+(0,ue.$s)(oe),backoffCount:oe+1};return yield ke.storage.setThrottleMetadata(xt),ke.attemptFetch(O,xt)}})()}}class nn{constructor(O,z,oe,ke,Be){this.app=O,this._client=z,this._storageCache=oe,this._storage=ke,this._logger=Be,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Xe(k,O){const z=k.target.error||void 0;return ye.create(O,{originalErrorMessage:z&&z?.message})}const vt="app_namespace_store";class dn{constructor(O,z,oe,ke=function Dn(){return new Promise((k,O)=>{try{const z=indexedDB.open("firebase_remote_config",1);z.onerror=oe=>{O(Xe(oe,"storage-open"))},z.onsuccess=oe=>{k(oe.target.result)},z.onupgradeneeded=oe=>{0===oe.oldVersion&&oe.target.result.createObjectStore(vt,{keyPath:"compositeKey"})}}catch(z){O(ye.create("storage-open",{originalErrorMessage:z?.message}))}})}()){this.appId=O,this.appName=z,this.namespace=oe,this.openDbPromise=ke}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(O){return this.set("last_fetch_status",O)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(O){return this.set("last_successful_fetch_timestamp_millis",O)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(O){return this.set("last_successful_fetch_response",O)}getActiveConfig(){return this.get("active_config")}setActiveConfig(O){return this.set("active_config",O)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(O){return this.set("active_config_etag",O)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(O){return this.set("throttle_metadata",O)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(O){var z=this;return(0,V.Z)(function*(){const oe=yield z.openDbPromise;return new Promise((ke,Be)=>{const Vn=oe.transaction([vt],"readonly").objectStore(vt),Tn=z.createCompositeKey(O);try{const rn=Vn.get(Tn);rn.onerror=An=>{Be(Xe(An,"storage-get"))},rn.onsuccess=An=>{const Gt=An.target.result;ke(Gt?Gt.value:void 0)}}catch(rn){Be(ye.create("storage-get",{originalErrorMessage:rn?.message}))}})})()}set(O,z){var oe=this;return(0,V.Z)(function*(){const ke=yield oe.openDbPromise;return new Promise((Be,xt)=>{const Tn=ke.transaction([vt],"readwrite").objectStore(vt),rn=oe.createCompositeKey(O);try{const An=Tn.put({compositeKey:rn,value:z});An.onerror=Gt=>{xt(Xe(Gt,"storage-set"))},An.onsuccess=()=>{Be()}}catch(An){xt(ye.create("storage-set",{originalErrorMessage:An?.message}))}})})()}delete(O){var z=this;return(0,V.Z)(function*(){const oe=yield z.openDbPromise;return new Promise((ke,Be)=>{const Vn=oe.transaction([vt],"readwrite").objectStore(vt),Tn=z.createCompositeKey(O);try{const rn=Vn.delete(Tn);rn.onerror=An=>{Be(Xe(An,"storage-delete"))},rn.onsuccess=()=>{ke()}}catch(rn){Be(ye.create("storage-delete",{originalErrorMessage:rn?.message}))}})})()}createCompositeKey(O){return[this.appId,this.appName,this.namespace,O].join()}}class ar{constructor(O){this.storage=O}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var O=this;return(0,V.Z)(function*(){const z=O.storage.getLastFetchStatus(),oe=O.storage.getLastSuccessfulFetchTimestampMillis(),ke=O.storage.getActiveConfig(),Be=yield z;Be&&(O.lastFetchStatus=Be);const xt=yield oe;xt&&(O.lastSuccessfulFetchTimestampMillis=xt);const Vn=yield ke;Vn&&(O.activeConfig=Vn)})()}setLastFetchStatus(O){return this.lastFetchStatus=O,this.storage.setLastFetchStatus(O)}setLastSuccessfulFetchTimestampMillis(O){return this.lastSuccessfulFetchTimestampMillis=O,this.storage.setLastSuccessfulFetchTimestampMillis(O)}setActiveConfig(O){return this.activeConfig=O,this.storage.setActiveConfig(O)}}function ui(){return In.apply(this,arguments)}function In(){return(In=(0,V.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}!function Or(){(0,te._registerComponent)(new ne.wA("remote-config",function k(O,{instanceIdentifier:z}){const oe=O.getProvider("app").getImmediate(),ke=O.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ye.create("registration-window");if(!(0,ue.hl)())throw ye.create("indexed-db-unavailable");const{projectId:Be,apiKey:xt,appId:Vn}=oe.options;if(!Be)throw ye.create("registration-project-id");if(!xt)throw ye.create("registration-api-key");if(!Vn)throw ye.create("registration-app-id");const Tn=new dn(Vn,oe.name,z=z||"firebase"),rn=new ar(Tn),An=new de.Yd(ce);An.logLevel=de.in.ERROR;const Gt=new Fe(ke,te.SDK_VERSION,z,Be,xt,Vn),Io=new it(Gt,Tn),br=new me(Io,Tn,rn,An),da=new nn(oe,br,rn,Tn,An);return function Ge(k){const O=(0,ue.m9)(k);O._initializePromise||(O._initializePromise=O._storageCache.loadFromStorage().then(()=>{O._isInitializationComplete=!0}))}(da),da},"PUBLIC").setMultipleInstances(!0)),(0,te.registerVersion)(ce,G),(0,te.registerVersion)(ce,G,"esm2017")}();var Pn=P(8766);const mt="/firebase-messaging-sw.js",Qr="/firebase-cloud-messaging-push-scope",Xr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",mn="https://fcmregistrations.googleapis.com/v1",ur="google.c.a.c_id",Oi="google.c.a.c_l",Rt="google.c.a.ts",_t="google.c.a.e";var Un=(()=>{return(k=Un||(Un={})).PUSH_RECEIVED="push-received",k.NOTIFICATION_CLICKED="notification-clicked",Un;var k})();function en(k){const O=new Uint8Array(k);return btoa(String.fromCharCode(...O)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $n(k){const z=(k+"=".repeat((4-k.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),oe=atob(z),ke=new Uint8Array(oe.length);for(let Be=0;Be<oe.length;++Be)ke[Be]=oe.charCodeAt(Be);return ke}const Jn="fcm_token_details_db",er=5,zi="fcm_token_object_Store";function kr(){return kr=(0,V.Z)(function*(k){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Be=>Be.name).includes(Jn))return null;let O=null;return(yield(0,Pn.X3)(Jn,er,{upgrade:(oe=(0,V.Z)(function*(ke,Be,xt,Vn){var Tn;if(Be<2||!ke.objectStoreNames.contains(zi))return;const rn=Vn.objectStore(zi),An=yield rn.index("fcmSenderId").get(k);if(yield rn.clear(),An)if(2===Be){const Gt=An;if(!Gt.auth||!Gt.p256dh||!Gt.endpoint)return;O={token:Gt.fcmToken,createTime:null!==(Tn=Gt.createTime)&&void 0!==Tn?Tn:Date.now(),subscriptionOptions:{auth:Gt.auth,p256dh:Gt.p256dh,endpoint:Gt.endpoint,swScope:Gt.swScope,vapidKey:"string"==typeof Gt.vapidKey?Gt.vapidKey:en(Gt.vapidKey)}}}else if(3===Be){const Gt=An;O={token:Gt.fcmToken,createTime:Gt.createTime,subscriptionOptions:{auth:en(Gt.auth),p256dh:en(Gt.p256dh),endpoint:Gt.endpoint,swScope:Gt.swScope,vapidKey:en(Gt.vapidKey)}}}else if(4===Be){const Gt=An;O={token:Gt.fcmToken,createTime:Gt.createTime,subscriptionOptions:{auth:en(Gt.auth),p256dh:en(Gt.p256dh),endpoint:Gt.endpoint,swScope:Gt.swScope,vapidKey:en(Gt.vapidKey)}}}}),function(Be,xt,Vn,Tn){return oe.apply(this,arguments)})})).close(),yield(0,Pn.Lj)(Jn),yield(0,Pn.Lj)("fcm_vapid_details_db"),yield(0,Pn.Lj)("undefined"),function Yt(k){if(!k||!k.subscriptionOptions)return!1;const{subscriptionOptions:O}=k;return"number"==typeof k.createTime&&k.createTime>0&&"string"==typeof k.token&&k.token.length>0&&"string"==typeof O.auth&&O.auth.length>0&&"string"==typeof O.p256dh&&O.p256dh.length>0&&"string"==typeof O.endpoint&&O.endpoint.length>0&&"string"==typeof O.swScope&&O.swScope.length>0&&"string"==typeof O.vapidKey&&O.vapidKey.length>0}(O)?O:null;var oe}),kr.apply(this,arguments)}const mr="firebase-messaging-database",ci=1,He="firebase-messaging-store";let De=null;function ot(){return De||(De=(0,Pn.X3)(mr,ci,{upgrade:(k,O)=>{0===O&&k.createObjectStore(He)}})),De}function bt(k){return Lt.apply(this,arguments)}function Lt(){return Lt=(0,V.Z)(function*(k){const O=L(k),oe=yield(yield ot()).transaction(He).objectStore(He).get(O);if(oe)return oe;{const ke=yield function cn(k){return kr.apply(this,arguments)}(k.appConfig.senderId);if(ke)return yield Bt(k,ke),ke}}),Lt.apply(this,arguments)}function Bt(k,O){return jn.apply(this,arguments)}function jn(){return(jn=(0,V.Z)(function*(k,O){const z=L(k),ke=(yield ot()).transaction(He,"readwrite");return yield ke.objectStore(He).put(O,z),yield ke.done,O})).apply(this,arguments)}function A(){return(A=(0,V.Z)(function*(k){const O=L(k),oe=(yield ot()).transaction(He,"readwrite");yield oe.objectStore(He).delete(O),yield oe.done})).apply(this,arguments)}function L({appConfig:k}){return k.appId}const B=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function le(k,O){return Te.apply(this,arguments)}function Te(){return(Te=(0,V.Z)(function*(k,O){const z=yield Sn(k),oe=cr(O),ke={method:"POST",headers:z,body:JSON.stringify(oe)};let Be;try{Be=yield(yield fetch(Ct(k.appConfig),ke)).json()}catch(xt){throw B.create("token-subscribe-failed",{errorInfo:xt?.toString()})}if(Be.error)throw B.create("token-subscribe-failed",{errorInfo:Be.error.message});if(!Be.token)throw B.create("token-subscribe-no-token");return Be.token})).apply(this,arguments)}function Pt(){return(Pt=(0,V.Z)(function*(k,O){const z=yield Sn(k),oe=cr(O.subscriptionOptions),ke={method:"PATCH",headers:z,body:JSON.stringify(oe)};let Be;try{Be=yield(yield fetch(`${Ct(k.appConfig)}/${O.token}`,ke)).json()}catch(xt){throw B.create("token-update-failed",{errorInfo:xt?.toString()})}if(Be.error)throw B.create("token-update-failed",{errorInfo:Be.error.message});if(!Be.token)throw B.create("token-update-no-token");return Be.token})).apply(this,arguments)}function Ot(k,O){return tn.apply(this,arguments)}function tn(){return(tn=(0,V.Z)(function*(k,O){const oe={method:"DELETE",headers:yield Sn(k)};try{const Be=yield(yield fetch(`${Ct(k.appConfig)}/${O}`,oe)).json();if(Be.error)throw B.create("token-unsubscribe-failed",{errorInfo:Be.error.message})}catch(ke){throw B.create("token-unsubscribe-failed",{errorInfo:ke?.toString()})}})).apply(this,arguments)}function Ct({projectId:k}){return`${mn}/projects/${k}/registrations`}function Sn(k){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,V.Z)(function*({appConfig:k,installations:O}){const z=yield O.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":k.apiKey,"x-goog-firebase-installations-auth":`FIS ${z}`})})).apply(this,arguments)}function cr({p256dh:k,auth:O,endpoint:z,vapidKey:oe}){const ke={web:{endpoint:z,auth:O,p256dh:k}};return oe!==Xr&&(ke.web.applicationPubKey=oe),ke}const Jo=6048e5;function po(){return po=(0,V.Z)(function*(k){const O=yield function Qt(k,O){return jt.apply(this,arguments)}(k.swRegistration,k.vapidKey),z={vapidKey:k.vapidKey,swScope:k.swRegistration.scope,endpoint:O.endpoint,auth:en(O.getKey("auth")),p256dh:en(O.getKey("p256dh"))},oe=yield bt(k.firebaseDependencies);if(oe){if(function Zn(k,O){return O.vapidKey===k.vapidKey&&O.endpoint===k.endpoint&&O.auth===k.auth&&O.p256dh===k.p256dh}(oe.subscriptionOptions,z))return Date.now()>=oe.createTime+Jo?function Z(k,O){return _e.apply(this,arguments)}(k,{token:oe.token,createTime:Date.now(),subscriptionOptions:z}):oe.token;try{yield Ot(k.firebaseDependencies,oe.token)}catch(ke){console.warn(ke)}return Ve(k.firebaseDependencies,z)}return Ve(k.firebaseDependencies,z)}),po.apply(this,arguments)}function ta(){return ta=(0,V.Z)(function*(k){const O=yield bt(k.firebaseDependencies);O&&(yield Ot(k.firebaseDependencies,O.token),yield function H(k){return A.apply(this,arguments)}(k.firebaseDependencies));const z=yield k.swRegistration.pushManager.getSubscription();return!z||z.unsubscribe()}),ta.apply(this,arguments)}function _e(){return _e=(0,V.Z)(function*(k,O){try{const z=yield function ct(k,O){return Pt.apply(this,arguments)}(k.firebaseDependencies,O),oe=Object.assign(Object.assign({},O),{token:z,createTime:Date.now()});return yield Bt(k.firebaseDependencies,oe),z}catch(z){throw yield function go(k){return ta.apply(this,arguments)}(k),z}}),_e.apply(this,arguments)}function Ve(k,O){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,V.Z)(function*(k,O){const oe={token:yield le(k,O),createTime:Date.now(),subscriptionOptions:O};return yield Bt(k,oe),oe.token})).apply(this,arguments)}function jt(){return(jt=(0,V.Z)(function*(k,O){return(yield k.pushManager.getSubscription())||k.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:$n(O)})})).apply(this,arguments)}function hn(k){const O={from:k.from,collapseKey:k.collapse_key,messageId:k.fcmMessageId};return function Wi(k,O){if(!O.notification)return;k.notification={};const z=O.notification.title;z&&(k.notification.title=z);const oe=O.notification.body;oe&&(k.notification.body=oe);const ke=O.notification.image;ke&&(k.notification.image=ke);const Be=O.notification.icon;Be&&(k.notification.icon=Be)}(O,k),function Lr(k,O){O.data&&(k.data=O.data)}(O,k),function as(k,O){var z,oe,ke,Be,xt;if(!(O.fcmOptions||null!==(z=O.notification)&&void 0!==z&&z.click_action))return;k.fcmOptions={};const Vn=null!==(ke=null===(oe=O.fcmOptions)||void 0===oe?void 0:oe.link)&&void 0!==ke?ke:null===(Be=O.notification)||void 0===Be?void 0:Be.click_action;Vn&&(k.fcmOptions.link=Vn);const Tn=null===(xt=O.fcmOptions)||void 0===xt?void 0:xt.analytics_label;Tn&&(k.fcmOptions.analyticsLabel=Tn)}(O,k),O}function ut(k,O){const z=[];for(let oe=0;oe<k.length;oe++)z.push(k.charAt(oe)),oe<O.length&&z.push(O.charAt(oe));return z.join("")}function On(k){return B.create("missing-app-config-values",{valueName:k})}ut("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ut("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Jr{constructor(O,z,oe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ke=function Ht(k){if(!k||!k.options)throw On("App Configuration Object");if(!k.name)throw On("App Name");const O=["projectId","apiKey","appId","messagingSenderId"],{options:z}=k;for(const oe of O)if(!z[oe])throw On(oe);return{appName:k.name,projectId:z.projectId,apiKey:z.apiKey,appId:z.appId,senderId:z.messagingSenderId}}(O);this.firebaseDependencies={app:O,appConfig:ke,installations:z,analyticsProvider:oe}}_delete(){return Promise.resolve()}}function ki(k){return tr.apply(this,arguments)}function tr(){return(tr=(0,V.Z)(function*(k){try{k.swRegistration=yield navigator.serviceWorker.register(mt,{scope:Qr}),k.swRegistration.update().catch(()=>{})}catch(O){throw B.create("failed-service-worker-registration",{browserErrorMessage:O?.message})}})).apply(this,arguments)}function kn(){return(kn=(0,V.Z)(function*(k,O){if(!O&&!k.swRegistration&&(yield ki(k)),O||!k.swRegistration){if(!(O instanceof ServiceWorkerRegistration))throw B.create("invalid-sw-registration");k.swRegistration=O}})).apply(this,arguments)}function bs(){return(bs=(0,V.Z)(function*(k,O){O?k.vapidKey=O:k.vapidKey||(k.vapidKey=Xr)})).apply(this,arguments)}function us(){return us=(0,V.Z)(function*(k,O){if(!navigator)throw B.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw B.create("permission-blocked");return yield function na(k,O){return bs.apply(this,arguments)}(k,O?.vapidKey),yield function Gs(k,O){return kn.apply(this,arguments)}(k,O?.serviceWorkerRegistration),function ea(k){return po.apply(this,arguments)}(k)}),us.apply(this,arguments)}function mo(){return(mo=(0,V.Z)(function*(k,O,z){const oe=function _o(k){switch(k){case Un.NOTIFICATION_CLICKED:return"notification_open";case Un.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(O);(yield k.firebaseDependencies.analyticsProvider.get()).logEvent(oe,{message_id:z[ur],message_name:z[Oi],message_time:z[Rt],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ds(){return Ds=(0,V.Z)(function*(k,O){const z=O.data;if(!z.isFirebaseMessaging)return;k.onMessageHandler&&z.messageType===Un.PUSH_RECEIVED&&("function"==typeof k.onMessageHandler?k.onMessageHandler(hn(z)):k.onMessageHandler.next(hn(z)));const oe=z.data;(function mi(k){return"object"==typeof k&&!!k&&ur in k})(oe)&&"1"===oe[_t]&&(yield function zs(k,O,z){return mo.apply(this,arguments)}(k,z.messageType,oe))}),Ds.apply(this,arguments)}const Ss="@firebase/messaging",_i=k=>{const O=new Jr(k.getProvider("app").getImmediate(),k.getProvider("installations-internal").getImmediate(),k.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",z=>function Tr(k,O){return Ds.apply(this,arguments)}(O,z)),O},Uu=k=>{const O=k.getProvider("messaging").getImmediate();return{getToken:oe=>function qt(k,O){return us.apply(this,arguments)}(O,oe)}};function qi(){return ra.apply(this,arguments)}function ra(){return(ra=(0,V.Z)(function*(){try{yield(0,ue.eu)()}catch{return!1}return typeof window<"u"&&(0,ue.hl)()&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ln(){(0,te._registerComponent)(new ne.wA("messaging",_i,"PUBLIC")),(0,te._registerComponent)(new ne.wA("messaging-internal",Uu,"PRIVATE")),(0,te.registerVersion)(Ss,"0.12.4"),(0,te.registerVersion)(Ss,"0.12.4","esm2017")}();var cs=P(5132),sa=P(4408),Gr=P(7565);const Xc=new class Sp extends Gr.v{}(class ja extends sa.o{constructor(O,z){super(O,z),this.scheduler=O,this.work=z}schedule(O,z=0){return z>0?super.schedule(O,z):(this.delay=z,this.state=O,this.scheduler.flush(this),this)}execute(O,z){return z>0||this.closed?super.execute(O,z):this._execute(O,z)}requestAsyncId(O,z,oe=0){return null!=oe&&oe>0||null==oe&&this.delay>0?super.requestAsyncId(O,z,oe):(O.flush(this),0)}});var wo=P(4986),oa=P(8505),Vu=P(5363),Vd=P(9468);const Bd=new _.GfV("7.5.0"),Jc="__angularfire_symbol__analyticsIsSupportedValue",ls="__angularfire_symbol__analyticsIsSupported",Ha="__angularfire_symbol__remoteConfigIsSupportedValue",Ga="__angularfire_symbol__remoteConfigIsSupported",el="__angularfire_symbol__messagingIsSupportedValue",Bu="__angularfire_symbol__messagingIsSupported";globalThis[ls]||(globalThis[ls]=(0,cs.Gb)().then(k=>globalThis[Jc]=k).catch(()=>globalThis[Jc]=!1)),globalThis[Bu]||(globalThis[Bu]=qi().then(k=>globalThis[el]=k).catch(()=>globalThis[el]=!1)),globalThis[Ga]||(globalThis[Ga]=ui().then(k=>globalThis[Ha]=k).catch(()=>globalThis[Ha]=!1));const nl={async:()=>globalThis[ls],sync:()=>{const k=globalThis[Jc];if(void 0===k)throw new Error((k=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${k} in the constructor, first ensure that ${k} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${k})\`.`)("Analytics"));return k}};function rl(k,O,z){if(O){if(1===O.length)return O[0];const Be=O.filter(xt=>xt.app===z);if(1===Be.length)return Be[0]}return z.container.getProvider(k).getImmediate({optional:!0})}const ua=(k,O)=>{const z=O?[O]:(0,X.C6)(),oe=[];return z.forEach(ke=>{ke.container.getProvider(k).instances.forEach(xt=>{oe.includes(xt)||oe.push(xt)})}),oe};function ca(){}class Rs{constructor(O,z=Xc){this.zone=O,this.delegate=z}now(){return this.delegate.now()}schedule(O,z,oe){const ke=this.zone;return this.delegate.schedule(function(xt){ke.runGuarded(()=>{O.apply(this,[xt])})},z,oe)}}class Ap{constructor(O){this.zone=O,this.task=null}call(O,z){const oe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ca,{},ca,ca)),z.pipe((0,oa.b)({next:oe,complete:oe,error:oe})).subscribe(O).add(oe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let la=(()=>{class k{constructor(z){this.ngZone=z,this.outsideAngular=z.runOutsideAngular(()=>new Rs(Zone.current)),this.insideAngular=z.run(()=>new Rs(Zone.current,wo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return k.\u0275fac=function(z){return new(z||k)(_.LFG(_.R0b))},k.\u0275prov=_.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();function Zi(){const k=globalThis.\u0275AngularFireScheduler;if(!k)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return k}function $u(k){return k.pipe((0,Vu.Q)(Zi().outsideAngular))}function ju(k){return Zi(),function Eo(k){return function(z){return(z=z.lift(new Ap(k.ngZone))).pipe((0,Vd.R)(k.outsideAngular),(0,Vu.Q)(k.insideAngular))}}(Zi())(k)}},2090:(gt,Se,P)=>{P.d(Se,{$s:()=>bt,BH:()=>xe,DV:()=>Kn,Dv:()=>$n,G6:()=>Me,GJ:()=>Or,L:()=>ce,LL:()=>It,Pz:()=>Ee,Sg:()=>Ge,UG:()=>we,UI:()=>In,US:()=>ne,Wj:()=>zi,Wl:()=>Nn,Yr:()=>me,ZB:()=>Y,ZR:()=>yn,aH:()=>Re,b$:()=>ft,cI:()=>vt,dS:()=>kr,eu:()=>je,g5:()=>V,gK:()=>Jn,gQ:()=>Oi,h$:()=>ge,hl:()=>Fe,hu:()=>X,jU:()=>qe,lb:()=>cn,m9:()=>jn,ne:()=>Rt,p$:()=>W,pd:()=>ur,r3:()=>Yr,ru:()=>Qe,tV:()=>G,uI:()=>$,ug:()=>Yt,vZ:()=>Pn,w1:()=>re,w9:()=>ar,xO:()=>Xr,xb:()=>ui,z$:()=>Ae,zI:()=>et,zd:()=>mn});const _={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},X=function(H,A){if(!H)throw V(A)},V=function(H){return new Error("Firebase Database ("+_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+H)},te=function(H){const A=[];let L=0;for(let q=0;q<H.length;q++){let B=H.charCodeAt(q);B<128?A[L++]=B:B<2048?(A[L++]=B>>6|192,A[L++]=63&B|128):55296==(64512&B)&&q+1<H.length&&56320==(64512&H.charCodeAt(q+1))?(B=65536+((1023&B)<<10)+(1023&H.charCodeAt(++q)),A[L++]=B>>18|240,A[L++]=B>>12&63|128,A[L++]=B>>6&63|128,A[L++]=63&B|128):(A[L++]=B>>12|224,A[L++]=B>>6&63|128,A[L++]=63&B|128)}return A},ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,A){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const L=A?this.byteToCharMapWebSafe_:this.byteToCharMap_,q=[];for(let B=0;B<H.length;B+=3){const le=H[B],Te=B+1<H.length,ct=Te?H[B+1]:0,Pt=B+2<H.length,Ot=Pt?H[B+2]:0;let Sn=(15&ct)<<2|Ot>>6,Cr=63&Ot;Pt||(Cr=64,Te||(Sn=64)),q.push(L[le>>2],L[(3&le)<<4|ct>>4],L[Sn],L[Cr])}return q.join("")},encodeString(H,A){return this.HAS_NATIVE_SUPPORT&&!A?btoa(H):this.encodeByteArray(te(H),A)},decodeString(H,A){return this.HAS_NATIVE_SUPPORT&&!A?atob(H):function(H){const A=[];let L=0,q=0;for(;L<H.length;){const B=H[L++];if(B<128)A[q++]=String.fromCharCode(B);else if(B>191&&B<224){const le=H[L++];A[q++]=String.fromCharCode((31&B)<<6|63&le)}else if(B>239&&B<365){const Pt=((7&B)<<18|(63&H[L++])<<12|(63&H[L++])<<6|63&H[L++])-65536;A[q++]=String.fromCharCode(55296+(Pt>>10)),A[q++]=String.fromCharCode(56320+(1023&Pt))}else{const le=H[L++],Te=H[L++];A[q++]=String.fromCharCode((15&B)<<12|(63&le)<<6|63&Te)}}return A.join("")}(this.decodeStringToByteArray(H,A))},decodeStringToByteArray(H,A){this.init_();const L=A?this.charToByteMapWebSafe_:this.charToByteMap_,q=[];for(let B=0;B<H.length;){const le=L[H.charAt(B++)],ct=B<H.length?L[H.charAt(B)]:0;++B;const Ot=B<H.length?L[H.charAt(B)]:64;++B;const Ct=B<H.length?L[H.charAt(B)]:64;if(++B,null==le||null==ct||null==Ot||null==Ct)throw new de;q.push(le<<2|ct>>4),64!==Ot&&(q.push(ct<<4&240|Ot>>2),64!==Ct&&q.push(Ot<<6&192|Ct))}return q},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}};class de extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ge=function(H){const A=te(H);return ne.encodeByteArray(A,!0)},ce=function(H){return ge(H).replace(/\./g,"")},G=function(H){try{return ne.decodeString(H,!0)}catch(A){console.error("base64Decode failed: ",A)}return null};function W(H){return Y(void 0,H)}function Y(H,A){if(!(A instanceof Object))return A;switch(A.constructor){case Date:return new Date(A.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return A}for(const L in A)!A.hasOwnProperty(L)||!Oe(L)||(H[L]=Y(H[L],A[L]));return H}function Oe(H){return"__proto__"!==H}const be=()=>{try{return function ye(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const A=H&&G(H[1]);return A&&JSON.parse(A)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},Re=()=>{var H;return null===(H=be())||void 0===H?void 0:H.config},Ee=H=>{var A;return null===(A=be())||void 0===A?void 0:A[`_${H}`]};class xe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((A,L)=>{this.resolve=A,this.reject=L})}wrapCallback(A){return(L,q)=>{L?this.reject(L):this.resolve(q),"function"==typeof A&&(this.promise.catch(()=>{}),1===A.length?A(L):A(L,q))}}}function Ge(H,A){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const q=A||"demo-project",B=H.iat||0,le=H.sub||H.user_id;if(!le)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Te=Object.assign({iss:`https://securetoken.google.com/${q}`,aud:q,iat:B,exp:B+3600,auth_time:B,sub:le,user_id:le,firebase:{sign_in_provider:"custom",identities:{}}},H);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(Te)),""].join(".")}function Ae(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function $(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ae())}function we(){var H;const A=null===(H=be())||void 0===H?void 0:H.forceEnvironment;if("node"===A)return!0;if("browser"===A)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function qe(){return"object"==typeof self&&self.self===self}function Qe(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function ft(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function re(){const H=Ae();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function me(){return!0===_.NODE_CLIENT||!0===_.NODE_ADMIN}function Me(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Fe(){try{return"object"==typeof indexedDB}catch{return!1}}function je(){return new Promise((H,A)=>{try{let L=!0;const q="validate-browser-context-for-indexeddb-analytics-module",B=self.indexedDB.open(q);B.onsuccess=()=>{B.result.close(),L||self.indexedDB.deleteDatabase(q),H(!0)},B.onupgradeneeded=()=>{L=!1},B.onerror=()=>{var le;A((null===(le=B.error)||void 0===le?void 0:le.message)||"")}}catch(L){A(L)}})}function et(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class yn extends Error{constructor(A,L,q){super(L),this.code=A,this.customData=q,this.name="FirebaseError",Object.setPrototypeOf(this,yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,It.prototype.create)}}class It{constructor(A,L,q){this.service=A,this.serviceName=L,this.errors=q}create(A,...L){const q=L[0]||{},B=`${this.service}/${A}`,le=this.errors[A],Te=le?function nn(H,A){return H.replace(Xe,(L,q)=>{const B=A[q];return null!=B?String(B):`<${q}?>`})}(le,q):"Error";return new yn(B,`${this.serviceName}: ${Te} (${B}).`,q)}}const Xe=/\{\$([^}]+)}/g;function vt(H){return JSON.parse(H)}function Nn(H){return JSON.stringify(H)}const bn=function(H){let A={},L={},q={},B="";try{const le=H.split(".");A=vt(G(le[0])||""),L=vt(G(le[1])||""),B=le[2],q=L.d||{},delete L.d}catch{}return{header:A,claims:L,data:q,signature:B}},ar=function(H){const L=bn(H).claims;return!!L&&"object"==typeof L&&L.hasOwnProperty("iat")},Or=function(H){const A=bn(H).claims;return"object"==typeof A&&!0===A.admin};function Yr(H,A){return Object.prototype.hasOwnProperty.call(H,A)}function Kn(H,A){if(Object.prototype.hasOwnProperty.call(H,A))return H[A]}function ui(H){for(const A in H)if(Object.prototype.hasOwnProperty.call(H,A))return!1;return!0}function In(H,A,L){const q={};for(const B in H)Object.prototype.hasOwnProperty.call(H,B)&&(q[B]=A.call(L,H[B],B,H));return q}function Pn(H,A){if(H===A)return!0;const L=Object.keys(H),q=Object.keys(A);for(const B of L){if(!q.includes(B))return!1;const le=H[B],Te=A[B];if(mt(le)&&mt(Te)){if(!Pn(le,Te))return!1}else if(le!==Te)return!1}for(const B of q)if(!L.includes(B))return!1;return!0}function mt(H){return null!==H&&"object"==typeof H}function Xr(H){const A=[];for(const[L,q]of Object.entries(H))Array.isArray(q)?q.forEach(B=>{A.push(encodeURIComponent(L)+"="+encodeURIComponent(B))}):A.push(encodeURIComponent(L)+"="+encodeURIComponent(q));return A.length?"&"+A.join("&"):""}function mn(H){const A={};return H.replace(/^\?/,"").split("&").forEach(q=>{if(q){const[B,le]=q.split("=");A[decodeURIComponent(B)]=decodeURIComponent(le)}}),A}function ur(H){const A=H.indexOf("?");if(!A)return"";const L=H.indexOf("#",A);return H.substring(A,L>0?L:void 0)}class Oi{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let A=1;A<this.blockSize;++A)this.pad_[A]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(A,L){L||(L=0);const q=this.W_;if("string"==typeof A)for(let Ct=0;Ct<16;Ct++)q[Ct]=A.charCodeAt(L)<<24|A.charCodeAt(L+1)<<16|A.charCodeAt(L+2)<<8|A.charCodeAt(L+3),L+=4;else for(let Ct=0;Ct<16;Ct++)q[Ct]=A[L]<<24|A[L+1]<<16|A[L+2]<<8|A[L+3],L+=4;for(let Ct=16;Ct<80;Ct++){const Sn=q[Ct-3]^q[Ct-8]^q[Ct-14]^q[Ct-16];q[Ct]=4294967295&(Sn<<1|Sn>>>31)}let Ot,tn,B=this.chain_[0],le=this.chain_[1],Te=this.chain_[2],ct=this.chain_[3],Pt=this.chain_[4];for(let Ct=0;Ct<80;Ct++){Ct<40?Ct<20?(Ot=ct^le&(Te^ct),tn=1518500249):(Ot=le^Te^ct,tn=1859775393):Ct<60?(Ot=le&Te|ct&(le|Te),tn=2400959708):(Ot=le^Te^ct,tn=3395469782);const Sn=(B<<5|B>>>27)+Ot+Pt+tn+q[Ct]&4294967295;Pt=ct,ct=Te,Te=4294967295&(le<<30|le>>>2),le=B,B=Sn}this.chain_[0]=this.chain_[0]+B&4294967295,this.chain_[1]=this.chain_[1]+le&4294967295,this.chain_[2]=this.chain_[2]+Te&4294967295,this.chain_[3]=this.chain_[3]+ct&4294967295,this.chain_[4]=this.chain_[4]+Pt&4294967295}update(A,L){if(null==A)return;void 0===L&&(L=A.length);const q=L-this.blockSize;let B=0;const le=this.buf_;let Te=this.inbuf_;for(;B<L;){if(0===Te)for(;B<=q;)this.compress_(A,B),B+=this.blockSize;if("string"==typeof A){for(;B<L;)if(le[Te]=A.charCodeAt(B),++Te,++B,Te===this.blockSize){this.compress_(le),Te=0;break}}else for(;B<L;)if(le[Te]=A[B],++Te,++B,Te===this.blockSize){this.compress_(le),Te=0;break}}this.inbuf_=Te,this.total_+=L}digest(){const A=[];let L=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let B=this.blockSize-1;B>=56;B--)this.buf_[B]=255&L,L/=256;this.compress_(this.buf_);let q=0;for(let B=0;B<5;B++)for(let le=24;le>=0;le-=8)A[q]=this.chain_[B]>>le&255,++q;return A}}function Rt(H,A){const L=new _t(H,A);return L.subscribe.bind(L)}class _t{constructor(A,L){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=L,this.task.then(()=>{A(this)}).catch(q=>{this.error(q)})}next(A){this.forEachObserver(L=>{L.next(A)})}error(A){this.forEachObserver(L=>{L.error(A)}),this.close(A)}complete(){this.forEachObserver(A=>{A.complete()}),this.close()}subscribe(A,L,q){let B;if(void 0===A&&void 0===L&&void 0===q)throw new Error("Missing Observer.");B=function Un(H,A){if("object"!=typeof H||null===H)return!1;for(const L of A)if(L in H&&"function"==typeof H[L])return!0;return!1}(A,["next","error","complete"])?A:{next:A,error:L,complete:q},void 0===B.next&&(B.next=en),void 0===B.error&&(B.error=en),void 0===B.complete&&(B.complete=en);const le=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?B.error(this.finalError):B.complete()}catch{}}),this.observers.push(B),le}unsubscribeOne(A){void 0===this.observers||void 0===this.observers[A]||(delete this.observers[A],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(A){if(!this.finalized)for(let L=0;L<this.observers.length;L++)this.sendOne(L,A)}sendOne(A,L){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[A])try{L(this.observers[A])}catch(q){typeof console<"u"&&console.error&&console.error(q)}})}close(A){this.finalized||(this.finalized=!0,void 0!==A&&(this.finalError=A),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function en(){}const $n=function(H,A,L,q){let B;if(q<A?B="at least "+A:q>L&&(B=0===L?"none":"no more than "+L),B)throw new Error(H+" failed: Was called with "+q+(1===q?" argument.":" arguments.")+" Expects "+B+".")};function Jn(H,A){return`${H} failed: ${A} argument `}function zi(H,A,L,q){if((!q||L)&&"function"!=typeof L)throw new Error(Jn(H,A)+"must be a valid function.")}function cn(H,A,L,q){if((!q||L)&&("object"!=typeof L||null===L))throw new Error(Jn(H,A)+"must be a valid context object.")}const kr=function(H){const A=[];let L=0;for(let q=0;q<H.length;q++){let B=H.charCodeAt(q);if(B>=55296&&B<=56319){const le=B-55296;q++,X(q<H.length,"Surrogate pair missing trail surrogate."),B=65536+(le<<10)+(H.charCodeAt(q)-56320)}B<128?A[L++]=B:B<2048?(A[L++]=B>>6|192,A[L++]=63&B|128):B<65536?(A[L++]=B>>12|224,A[L++]=B>>6&63|128,A[L++]=63&B|128):(A[L++]=B>>18|240,A[L++]=B>>12&63|128,A[L++]=B>>6&63|128,A[L++]=63&B|128)}return A},Yt=function(H){let A=0;for(let L=0;L<H.length;L++){const q=H.charCodeAt(L);q<128?A++:q<2048?A+=2:q>=55296&&q<=56319?(A+=4,L++):A+=3}return A},ci=1e3,He=2,De=144e5,ot=.5;function bt(H,A=ci,L=He){const q=A*Math.pow(L,H),B=Math.round(ot*q*(Math.random()-.5)*2);return Math.min(De,q+B)}function jn(H){return H&&H._delegate?H._delegate:H}},9202:(gt,Se,P)=>{var _=P(4650);let X=null;function V(){return X}class ue{}const ne=new _.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return function ge(){return(0,_.LFG)(G)}()},providedIn:"platform"}),n})();const ce=new _.OlP("Location Initialized");let G=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return V().getBaseHref(this._doc)}onPopState(t){const r=V().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=V().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){W()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){W()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ne))},n.\u0275prov=_.Yz7({token:n,factory:function(){return function Y(){return new G((0,_.LFG)(ne))}()},providedIn:"platform"}),n})();function W(){return!!window.history.pushState}function Oe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ye(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ye(n){return n&&"?"!==n[0]?"?"+n:n}let nt=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return(0,_.f3M)(be)},providedIn:"root"}),n})();const pe=new _.OlP("appBaseHref");let be=(()=>{class n extends nt{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,_.f3M)(ne).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Oe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ye(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+Ye(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+Ye(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(de),_.LFG(pe,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ne=(()=>{class n extends nt{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Oe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let c=this.prepareExternalUrl(i+Ye(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){let c=this.prepareExternalUrl(i+Ye(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(de),_.LFG(pe,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),Ue=(()=>{class n{constructor(t){this._subject=new _.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Ge(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(ye(xe(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ye(r))}normalize(t){return n.stripTrailingSlash(function Ee(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,xe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ye(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ye(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ye,n.joinWithSlash=Oe,n.stripTrailingSlash=ye,n.\u0275fac=function(t){return new(t||n)(_.LFG(nt))},n.\u0275prov=_.Yz7({token:n,factory:function(){return function Re(){return new Ue((0,_.LFG)(nt))}()},providedIn:"root"}),n})();function xe(n){return n.replace(/\/index.html$/,"")}let na=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new bs,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){qt("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){qt("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(_.s_b),_.Y36(_.Rgc))},n.\u0275dir=_.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class bs{constructor(){this.$implicit=null,this.ngIf=null}}function qt(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,_.AaK)(e)}'.`)}let Bu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({}),n})();const aa="browser",Ki="server";function ua(n){return n===Ki}let la=(()=>{class n{}return n.\u0275prov=(0,_.Yz7)({token:n,providedIn:"root",factory:()=>new Zi((0,_.LFG)(ne),window)}),n})();class Zi{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Yi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const c=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=za(this.window.history)||za(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function za(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class pa extends ue{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class qa extends pa{static makeCurrent(){!function te(n){X||(X=n)}(new qa)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function L_(){return Ka=Ka||document.querySelector("base"),Ka?Ka.getAttribute("href"):null}();return null==t?null:function cl(n){Zs=Zs||document.createElement("a"),Zs.setAttribute("href",n);const e=Zs.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ka=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Lr(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Zs,Ka=null;const Gu=new _.OlP("TRANSITION_ID"),Ns=[{provide:_.ip1,useFactory:function oD(n,e,t){return()=>{t.get(_.CZH).donePromise.then(()=>{const r=V(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Gu,ne,_.zs3],multi:!0}];let F_=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const To=new _.OlP("EventManagerPlugins");let zd=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const c=i[a];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(To),_.LFG(_.R0b))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();class Dr{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=V().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ll=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let a=i.get(t)??0;return a+=r,a>0?i.set(t,a):i.delete(t),a}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),bo=(()=>{class n extends ll{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(a=>a.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const a=this.styleRef.get(r);a?a.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ne))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const dl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ys=/%COMP%/g,Wu=new _.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Zd(n,e){return e.flat(100).map(t=>t.replace(Ys,n))}function qu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let hl=(()=>{class n{constructor(t,r,i,a){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=a,this.rendererByCompId=new Map,this.defaultRenderer=new Ei(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof Yd?i.applyToHost(t):i instanceof Zu&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const c=this.eventManager,h=this.sharedStylesHost,m=this.removeStylesOnCompDestory;switch(r.encapsulation){case _.ifc.Emulated:a=new Yd(c,h,r,this.appId,m);break;case _.ifc.ShadowDom:return new Up(c,h,t,r);default:a=new Zu(c,h,r,m)}a.onDestroy=()=>i.delete(r.id),i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(zd),_.LFG(bo),_.LFG(_.AFp),_.LFG(Wu))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();class Ei{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(dl[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Ku(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ku(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=dl[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=dl[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(_.JOm.DashCase|_.JOm.Important)?e.style.setProperty(t,r,i&_.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,qu(r)):this.eventManager.addEventListener(e,t,qu(r))}}function Ku(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Up extends Ei{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Zd(i.id,i.styles);for(const c of a){const h=document.createElement("style");h.textContent=c,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Zu extends Ei{constructor(e,t,r,i,a=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=Zd(a,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Yd extends Zu{constructor(e,t,r,i,a){const c=i+"-"+r.id;super(e,t,r,a,c),this.contentAttr=function Do(n){return"_ngcontent-%COMP%".replace(Ys,n)}(c),this.hostAttr=function Kd(n){return"_nghost-%COMP%".replace(Ys,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Za=(()=>{class n extends Dr{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ne))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const Qd=["alt","control","meta","shift"],Vp={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Bp={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let fl=(()=>{class n extends Dr{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>V().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),c="code."),Qd.forEach(w=>{const C=r.indexOf(w);C>-1&&(r.splice(C,1),c+=w+".")}),c+=a,0!=r.length||0===a.length)return null;const m={};return m.domEventName=i,m.fullKey=c,m}static matchEventFullKeyCode(t,r){let i=Vp[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Qd.forEach(c=>{c!==i&&(0,Bp[c])(t)&&(a+=c+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ne))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const Qu=(0,_.eFA)(_._c5,"browser",[{provide:_.Lbi,useValue:aa},{provide:_.g9A,useValue:function Yu(){qa.makeCurrent()},multi:!0},{provide:ne,useFactory:function $_(){return(0,_.RDi)(document),document},deps:[]}]),jp=new _.OlP(""),eh=[{provide:_.rWj,useClass:class X0{addToWindow(e){_.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},_.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),_.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),_.dqk.frameworkStabilizers||(_.dqk.frameworkStabilizers=[]),_.dqk.frameworkStabilizers.push(r=>{const i=_.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const h=function(m){c=c||m,a--,0==a&&r(c)};i.forEach(function(m){m.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?V().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:_.lri,useClass:_.dDg,deps:[_.R0b,_.eoX,_.rWj]},{provide:_.dDg,useClass:_.dDg,deps:[_.R0b,_.eoX,_.rWj]}],gl=[{provide:_.zSh,useValue:"root"},{provide:_.qLn,useFactory:function Ya(){return new _.qLn},deps:[]},{provide:To,useClass:Za,multi:!0,deps:[ne,_.R0b,_.Lbi]},{provide:To,useClass:fl,multi:!0,deps:[ne]},{provide:hl,useClass:hl,deps:[zd,bo,_.AFp,Wu]},{provide:_.FYo,useExisting:hl},{provide:ll,useExisting:bo},{provide:bo,useClass:bo,deps:[ne]},{provide:zd,useClass:zd,deps:[To,_.R0b]},{provide:class il{},useClass:F_,deps:[]},[]];let Qa=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:_.AFp,useValue:t.appId},{provide:Gu,useExisting:_.AFp},Ns]}}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(jp,12))},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[...gl,...eh],imports:[Bu,_.hGG]}),n})(),So=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ne))},n.\u0275prov=_.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function th(){return new So((0,_.LFG)(ne))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Xt=P(8996),Ro=P(7669);function st(...n){const e=(0,Ro.yG)(n);return(0,Xt.D)(n,e)}var xo=P(7579);class Qi extends xo.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const eu=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Fi=P(9751);const{isArray:Y_}=Array,{getPrototypeOf:oh,prototype:zp,keys:_l}=Object;var Xi=P(4671),Tt=P(4004);const{isArray:tc}=Array;var Ln=P(5403),qp=P(9672);function vl(...n){const e=(0,Ro.yG)(n),t=(0,Ro.jO)(n),{args:r,keys:i}=function yl(n){if(1===n.length){const e=n[0];if(Y_(e))return{args:e,keys:null};if(function ah(n){return n&&"object"==typeof n&&oh(n)===zp}(e)){const t=_l(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,Xt.D)([],e);const a=new Fi.y(function wl(n,e,t=Xi.y){return r=>{Qs(e,()=>{const{length:i}=n,a=new Array(i);let c=i,h=i;for(let m=0;m<i;m++)Qs(e,()=>{const w=(0,Xt.D)(n[m],e);let C=!1;w.subscribe((0,Ln.x)(r,D=>{a[m]=D,C||(C=!0,h--),h||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>function nc(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,c):Xi.y));return t?a.pipe(function Wp(n){return(0,Tt.U)(e=>function uh(n,e){return tc(e)?n(...e):n(e)}(n,e))}(t)):a}function Qs(n,e,t){n?(0,qp.f)(t,n,e):e()}var Ps=P(8189);function Kp(...n){return function ch(){return(0,Ps.J)(1)}()((0,Xt.D)(n,(0,Ro.yG)(n)))}var wa=P(8421);function lh(n){return new Fi.y(e=>{(0,wa.Xf)(n()).subscribe(e)})}var Q_=P(9635),dh=P(576);function tu(n,e){const t=(0,dh.m)(n)?n:()=>n,r=i=>i.error(t());return new Fi.y(e?i=>e.schedule(r,0,i):r)}var ds=P(515),rc=P(727),yr=P(4482);function hh(){return(0,yr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Ln.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ic extends Fi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,yr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new rc.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Ln.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=rc.w0.EMPTY)}return e}refCount(){return hh()(this)}}function Hn(n,e){return(0,yr.e)((t,r)=>{let i=null,a=0,c=!1;const h=()=>c&&!i&&r.complete();t.subscribe((0,Ln.x)(r,m=>{i?.unsubscribe();let w=0;const C=a++;(0,wa.Xf)(n(m,C)).subscribe(i=(0,Ln.x)(r,D=>r.next(e?e(m,D,C,w++):D),()=>{i=null,h()}))},()=>{c=!0,h()}))})}function nu(n){return n<=0?()=>ds.E:(0,yr.e)((e,t)=>{let r=0;e.subscribe((0,Ln.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function sc(...n){const e=(0,Ro.yG)(n);return(0,yr.e)((t,r)=>{(e?Kp(n,t,e):Kp(n,t)).subscribe(r)})}function Ui(n,e){return(0,yr.e)((t,r)=>{let i=0;t.subscribe((0,Ln.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Sr=P(5577);function ru(n){return(0,yr.e)((e,t)=>{let r=!1;e.subscribe((0,Ln.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function X_(n=rE){return(0,yr.e)((e,t)=>{let r=!1;e.subscribe((0,Ln.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function rE(){return new eu}function hs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ui((i,a)=>n(i,a,r)):Xi.y,nu(1),t?ru(e):X_(()=>new eu))}function iu(n,e){return(0,dh.m)(e)?(0,Sr.z)(n,e,1):(0,Sr.z)(n,1)}var hi=P(8505);function Ea(n){return(0,yr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Ln.x)(t,void 0,void 0,c=>{a=(0,wa.Xf)(n(c,Ea(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function Mo(n,e){return(0,yr.e)(function iE(n,e,t,r,i){return(a,c)=>{let h=t,m=e,w=0;a.subscribe((0,Ln.x)(c,C=>{const D=w++;m=h?n(m,C,D):(h=!0,C),r&&c.next(m)},i&&(()=>{h&&c.next(m),c.complete()})))}}(n,e,arguments.length>=2,!0))}function fh(n){return n<=0?()=>ds.E:(0,yr.e)((e,t)=>{let r=[];e.subscribe((0,Ln.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ph(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ui((i,a)=>n(i,a,r)):Xi.y,fh(1),t?ru(e):X_(()=>new eu))}function El(n){return(0,yr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const zt="primary",Ii=Symbol("RouteTitle");class J_{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function su(n){return new J_(n)}function ey(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],h=n[a];if(c.startsWith(":"))i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ji(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Cl(n[i],e[i]))return!1;return!0}function Cl(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Yp(n){return Array.prototype.concat.apply([],n)}function mh(n){return n.length>0?n[n.length-1]:null}function Ar(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function No(n){return(0,_.CqO)(n)?n:(0,_.QGY)(n)?(0,Xt.D)(Promise.resolve(n)):st(n)}const Vr=!1,Tl={exact:function ou(n,e,t){if(!Ia(n.segments,e.segments)||!Sl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ou(n.children[r],e.children[r],t))return!1;return!0},subset:Dl},_h={exact:function ni(n,e){return Ji(n,e)},subset:function Qp(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Cl(n[t],e[t]))},ignored:()=>!0};function bl(n,e,t){return Tl[t.paths](n.root,e.root,t.matrixParams)&&_h[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Dl(n,e,t){return Xp(n,e,e.segments,t)}function Xp(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ia(i,t)||e.hasChildren()||!Sl(i,t,r))}if(n.segments.length===t.length){if(!Ia(n.segments,t)||!Sl(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Dl(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Ia(n.segments,i)&&Sl(n.segments,i,r)&&n.children[zt])&&Xp(n.children[zt],e,a,r)}}function Sl(n,e,t){return e.every((r,i)=>_h[t](n[i].parameters,r.parameters))}class Ci{constructor(e=new sn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=su(this.queryParams)),this._queryParamMap}toString(){return vh.serialize(this)}}class sn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ar(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Po(this)}}class oc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=su(this.parameters)),this._parameterMap}toString(){return Nl(this)}}function Ia(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Ca=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return new ac},providedIn:"root"}),n})();class ac{parse(e){const t=new Jp(e);return new Ci(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${uc(e.root,!0)}`,r=function Ih(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${au(t)}=${au(i)}`).join("&"):`${au(t)}=${au(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function wh(n){return encodeURI(n)}(e.fragment)}`:""}`}}const vh=new ac;function Po(n){return n.segments.map(e=>Nl(e)).join("/")}function uc(n,e){if(!n.hasChildren())return Po(n);if(e){const t=n.children[zt]?uc(n.children[zt],!1):"",r=[];return Ar(n.children,(i,a)=>{a!==zt&&r.push(`${a}:${uc(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function yh(n,e){let t=[];return Ar(n.children,(r,i)=>{i===zt&&(t=t.concat(e(r,i)))}),Ar(n.children,(r,i)=>{i!==zt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===zt?[uc(n.children[zt],!1)]:[`${i}:${uc(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[zt]?`${Po(n)}/${t[0]}`:`${Po(n)}/(${t.join("//")})`}}function Rl(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function au(n){return Rl(n).replace(/%3B/gi,";")}function xl(n){return Rl(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xs(n){return decodeURIComponent(n)}function Ml(n){return Xs(n.replace(/\+/g,"%20"))}function Nl(n){return`${xl(n.path)}${function Eh(n){return Object.keys(n).map(e=>`;${xl(e)}=${xl(n[e])}`).join("")}(n.parameters)}`}const ny=/^[^\/()?;=#]+/;function uu(n){const e=n.match(ny);return e?e[0]:""}const Ch=/^[^=?&#]+/,iy=/^[^&#]+/;class Jp{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new sn([],{}):new sn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[zt]=new sn(e,t)),r}parseSegment(){const e=uu(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new _.vHH(4009,Vr);return this.capture(e),new oc(Xs(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=uu(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=uu(this.remaining);i&&(r=i,this.capture(r))}e[Xs(t)]=Xs(r)}parseQueryParam(e){const t=function ry(n){const e=n.match(Ch);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Pl(n){const e=n.match(iy);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Ml(t),a=Ml(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=uu(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new _.vHH(4010,Vr);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=zt);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[zt]:new sn([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new _.vHH(4011,Vr)}}function cc(n){return n.segments.length>0?new sn([],{[zt]:n}):n}function lc(n){const e={};for(const r of Object.keys(n.children)){const a=lc(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function Ol(n){if(1===n.numberOfChildren&&n.children[zt]){const e=n.children[zt];return new sn(n.segments.concat(e.segments),e.children)}return n}(new sn(n.segments,e))}function Ta(n){return n instanceof Ci}const Th=!1;function eg(n,e,t,r,i){if(0===t.length)return hc(e.root,e.root,e.root,r,i);const a=function kl(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new tg(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return Ar(a.outlets,(m,w)=>{h[w]="string"==typeof m?m.split("/"):m}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((h,m)=>{0==m&&"."===h||(0==m&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new tg(t,e,r)}(t);return a.toRoot()?hc(e.root,e.root,new sn([],{}),r,i):function c(m){const w=function Fl(n,e,t,r){if(n.isAbsolute)return new Js(e.root,!0,0);if(-1===r)return new Js(t,t===e.root,0);return function Dh(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new _.vHH(4005,Th&&"Invalid number of '../'");i=r.segments.length}return new Js(r,!1,i-a)}(t,r+(ba(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,m),C=w.processChildren?Rr(w.segmentGroup,w.index,a.commands):lu(w.segmentGroup,w.index,a.commands);return hc(e.root,w.segmentGroup,C,r,i)}(n.snapshot?._lastPathIndex)}function ba(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function dc(n){return"object"==typeof n&&null!=n&&n.outlets}function hc(n,e,t,r,i){let c,a={};r&&Ar(r,(m,w)=>{a[w]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),c=n===e?t:fc(n,e,t);const h=cc(lc(c));return new Ci(h,a,i)}function fc(n,e,t){const r={};return Ar(n.children,(i,a)=>{r[a]=i===e?t:fc(i,e,t)}),new sn(n.segments,r)}class tg{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ba(r[0]))throw new _.vHH(4003,Th&&"Root segment cannot have matrix parameters");const i=r.find(dc);if(i&&i!==mh(r))throw new _.vHH(4004,Th&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Js{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function lu(n,e,t){if(n||(n=new sn([],{})),0===n.segments.length&&n.hasChildren())return Rr(n,e,t);const r=function Da(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],h=t[r];if(dc(h))break;const m=`${h}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&w&&"object"==typeof w&&void 0===w.outlets){if(!Ul(m,w,c))return a;r+=2}else{if(!Ul(m,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new sn(n.segments.slice(0,r.pathIndex),{});return a.children[zt]=new sn(n.segments.slice(r.pathIndex),n.children),Rr(a,0,i)}return r.match&&0===i.length?new sn(n.segments,{}):r.match&&!n.hasChildren()?du(n,e,t):r.match?Rr(n,0,i):du(n,e,t)}function Rr(n,e,t){if(0===t.length)return new sn(n.segments,{});{const r=function cu(n){return dc(n[0])?n[0].outlets:{[zt]:n}}(t),i={};return!r[zt]&&n.children[zt]&&1===n.numberOfChildren&&0===n.children[zt].segments.length?Rr(n.children[zt],e,t):(Ar(r,(a,c)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[c]=lu(n.children[c],e,a))}),Ar(n.children,(a,c)=>{void 0===r[c]&&(i[c]=a)}),new sn(n.segments,i))}}function du(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(dc(a)){const m=Sh(a.outlets);return new sn(r,m)}if(0===i&&ba(t[0])){r.push(new oc(n.segments[e].path,Oo(t[0]))),i++;continue}const c=dc(a)?a.outlets[zt]:`${a}`,h=i<t.length-1?t[i+1]:null;c&&h&&ba(h)?(r.push(new oc(c,Oo(h))),i+=2):(r.push(new oc(c,{})),i++)}return new sn(r,{})}function Sh(n){const e={};return Ar(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=du(new sn([],{}),0,t))}),e}function Oo(n){const e={};return Ar(n,(t,r)=>e[r]=`${t}`),e}function Ul(n,e,t){return n==t.path&&Ji(e,t.parameters)}const hu="imperative";class fs{constructor(e,t){this.id=e,this.url=t}}class Ah extends fs{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class fi extends fs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class fu extends fs{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class pc extends fs{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class pu extends fs{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Rh extends fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sa extends fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ti extends fs{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class xh extends fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ng extends fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oy{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ps{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class gc{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mh{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mc{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vl{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _c{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let sg=(()=>{class n{createUrlTree(t,r,i,a,c,h){return eg(t||r.root,i,a,c,h)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(e){return sg.\u0275fac(e)},providedIn:"root"}),n})();class f{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=p(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=p(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=E(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return E(e,this._root).map(t=>t.value)}}function p(n,e){if(n===e.value)return e;for(const t of e.children){const r=p(n,t);if(r)return r}return null}function E(n,e){if(n===e.value)return[e];for(const t of e.children){const r=E(n,t);if(r.length)return r.unshift(e),r}return[]}class b{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function M(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Q extends f{constructor(e,t){super(e),this.snapshot=t,gu(this,e)}toString(){return this.snapshot.toString()}}function fe(n,e){const t=function Ze(n,e){const c=new Yn([],{},{},"",{},zt,e,null,n.root,-1,{});return new ts("",new b(c,[]))}(n,e),r=new Qi([new oc("",{})]),i=new Qi({}),a=new Qi({}),c=new Qi({}),h=new Qi(""),m=new at(r,i,c,h,a,zt,e,t.root);return m.snapshot=t.root,new Q(new b(m,[]),t)}class at{constructor(e,t,r,i,a,c,h,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=h,this.title=this.data?.pipe((0,Tt.U)(w=>w[Ii]))??st(void 0),this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Tt.U)(e=>su(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Tt.U)(e=>su(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function kt(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function Nt(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Yn{get title(){return this.data?.[Ii]}constructor(e,t,r,i,a,c,h,m,w,C,D){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=h,this.routeConfig=m,this._urlSegment=w,this._lastPathIndex=C,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=su(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=su(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ts extends f{constructor(e,t){super(t),this.url=e,gu(this,t)}toString(){return Nh(this._root)}}function gu(n,e){e.value._routerState=n,e.children.forEach(t=>gu(n,t))}function Nh(n){const e=n.children.length>0?` { ${n.children.map(Nh).join(", ")} } `:"";return`${n.value}${e}`}function yc(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ji(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ji(e.params,t.params)||n.params.next(t.params),function Il(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ji(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ji(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function mu(n,e){const t=Ji(n.params,e.params)&&function Al(n,e){return Ia(n,e)&&n.every((t,r)=>Ji(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||mu(n.parent,e.parent))}function gs(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Ph(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return gs(n,r,i);return gs(n,r)})}(n,e,t);return new b(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(h=>gs(n,h)),c}}const r=function Oh(n){return new at(new Qi(n.url),new Qi(n.params),new Qi(n.queryParams),new Qi(n.fragment),new Qi(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>gs(n,a));return new b(r,i)}}const _u="ngNavigationCancelingError";function og(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ta(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=uy(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function uy(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[_u]=!0,r.cancellationCode=e,t&&(r.url=t),r}function kh(n){return Bl(n)&&Ta(n.url)}function Bl(n){return n&&n[_u]}class cy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ag,this.attachRef=null}}let ag=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new cy,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ly=!1;let ug=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=zt,this.activateEvents=new _.vpe,this.deactivateEvents=new _.vpe,this.attachEvents=new _.vpe,this.detachEvents=new _.vpe,this.parentContexts=(0,_.f3M)(ag),this.location=(0,_.f3M)(_.s_b),this.changeDetector=(0,_.f3M)(_.sBO),this.environmentInjector=(0,_.f3M)(_.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _.vHH(4012,ly);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _.vHH(4012,ly);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _.vHH(4012,ly);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new _.vHH(4013,ly);this._activatedRoute=t;const i=this.location,c=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,m=new aD(t,h,i.injector);if(r&&function uD(n){return!!n.resolveComponentFactory}(r)){const w=r.resolveComponentFactory(c);this.activated=i.createComponent(w,i.length,m)}else this.activated=i.createComponent(c,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=_.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[_.TTD]}),n})();class aD{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===at?this.route:e===ag?this.childContexts:this.parent.get(e,t)}}let cg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[_.jDz],decls:1,vars:0,template:function(t,r){1&t&&_._UZ(0,"router-outlet")},dependencies:[ug],encapsulation:2}),n})();function sE(n,e){return n.providers&&!n._injector&&(n._injector=(0,_.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function lg(n){const e=n.children&&n.children.map(lg),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==zt&&(t.component=cg),t}function ms(n){return n.outlet||zt}function aE(n,e){const t=n.filter(r=>ms(r)===e);return t.push(...n.filter(r=>ms(r)!==e)),t}function Lh(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class fD{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),yc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=M(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),Ar(i,(a,c)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=M(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=M(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=M(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Vl(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Mh(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(yc(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),yc(h.route.value),this.activateChildRoutes(e,null,c.children)}else{const h=Lh(i.snapshot),m=h?.get(_._Vd)??null;c.attachRef=null,c.route=i,c.resolver=m,c.injector=h,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class fy{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class py{constructor(e,t){this.component=e,this.route=t}}function bN(n,e,t){const r=n._root;return $l(r,e?e._root:null,t,[r.value])}function yu(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,_.Z0I)(n)?e.get(n):n:r}function $l(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=M(e);return n.children.forEach(c=>{(function uE(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const m=function cE(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ia(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ia(n.url,e.url)||!Ji(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mu(n,e)||!Ji(n.queryParams,e.queryParams);default:return!mu(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new fy(r)):(a.data=c.data,a._resolvedData=c._resolvedData),$l(n,e,a.component?h?h.children:null:t,r,i),m&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new py(h.outlet.component,c))}else c&&dg(e,h,i),i.canActivateChecks.push(new fy(r)),$l(n,null,a.component?h?h.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),Ar(a,(c,h)=>dg(c,t.getContext(h),i)),i}function dg(n,e,t){const r=M(n),i=n.value;Ar(r,(a,c)=>{dg(a,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new py(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Uh(n){return"function"==typeof n}function hg(n){return n instanceof eu||"EmptyError"===n?.name}const ko=Symbol("INITIAL_VALUE");function jl(){return Hn(n=>vl(n.map(e=>e.pipe(nu(1),sc(ko)))).pipe((0,Tt.U)(e=>{for(const t of e)if(!0!==t){if(t===ko)return ko;if(!1===t||t instanceof Ci)return t}return!0}),Ui(e=>e!==ko),nu(1)))}function gE(n){return(0,Q_.z)((0,hi.b)(e=>{if(Ta(e))throw og(0,e)}),(0,Tt.U)(e=>!0===e))}const vu={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _E(n,e,t,r,i){const a=wy(n,e,t);return a.matched?function mE(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?st(i.map(c=>{const h=yu(c,n);return No(function pD(n){return n&&Uh(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(jl(),gE()):st(!0)}(r=sE(e,r),e,t).pipe((0,Tt.U)(c=>!0===c?a:{...vu})):st(a)}function wy(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...vu}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||ey)(t,n,e);if(!i)return{...vu};const a={};Ar(i.posParams,(h,m)=>{a[m]=h.path});const c=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function gg(n,e,t,r){if(t.length>0&&function yE(n,e,t){return t.some(r=>Vh(n,e,r)&&ms(r)!==zt)}(n,t,r)){const a=new sn(e,function _D(n,e,t,r){const i={};i[zt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&ms(a)!==zt){const c=new sn([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[ms(a)]=c}return i}(n,e,r,new sn(t,n.children)));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===t.length&&function yD(n,e,t){return t.some(r=>Vh(n,e,r))}(n,t,r)){const a=new sn(n.segments,function Ey(n,e,t,r,i){const a={};for(const c of r)if(Vh(n,t,c)&&!i[ms(c)]){const h=new sn([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,a[ms(c)]=h}return{...i,...a}}(n,e,t,r,n.children));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}const i=new sn(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function Vh(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function vD(n,e,t,r){return!!(ms(n)===r||r!==zt&&Vh(e,t,n))&&("**"===n.path||wy(e,n,t).matched)}function vE(n,e,t){return 0===e.length&&!n.children[t]}const wu=!1;class mg{constructor(e){this.segmentGroup=e||null}}class wc{constructor(e){this.urlTree=e}}function Aa(n){return tu(new mg(n))}function wE(n){return tu(new wc(n))}class ID{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=gg(this.urlTree.root,[],[],this.config).segmentGroup,t=new sn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,zt).pipe((0,Tt.U)(a=>this.createUrlTree(lc(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ea(a=>{if(a instanceof wc)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof mg?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,zt).pipe((0,Tt.U)(i=>this.createUrlTree(lc(i),e.queryParams,e.fragment))).pipe(Ea(i=>{throw i instanceof mg?this.noMatchError(i):i}))}noMatchError(e){return new _.vHH(4002,wu)}createUrlTree(e,t,r){const i=cc(e);return new Ci(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Tt.U)(a=>new sn([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Xt.D)(i).pipe(iu(a=>{const c=r.children[a],h=aE(t,a);return this.expandSegmentGroup(e,h,c,a).pipe((0,Tt.U)(m=>({segment:m,outlet:a})))}),Mo((a,c)=>(a[c.outlet]=c.segment,a),{}),ph())}expandSegment(e,t,r,i,a,c){return(0,Xt.D)(r).pipe(iu(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,c).pipe(Ea(w=>{if(w instanceof mg)return st(null);throw w}))),hs(h=>!!h),Ea((h,m)=>{if(hg(h))return vE(t,i,a)?st(new sn([],{})):Aa(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,c,h){return vD(i,t,a,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,c):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c):Aa(t):Aa(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?wE(a):this.lineralizeSegments(r,a).pipe((0,Sr.z)(c=>{const h=new sn(c,{});return this.expandSegment(e,h,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:h,consumedSegments:m,remainingSegments:w,positionalParamSegments:C}=wy(t,i,a);if(!h)return Aa(t);const D=this.applyRedirectCommands(m,i.redirectTo,C);return i.redirectTo.startsWith("/")?wE(D):this.lineralizeSegments(i,D).pipe((0,Sr.z)(R=>this.expandSegment(e,t,r,R.concat(w),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=sE(r,e),r.loadChildren?(r._loadedRoutes?st({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,Tt.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new sn(i,{})))):st(new sn(i,{}))):_E(t,r,i,e).pipe(Hn(({matched:c,consumedSegments:h,remainingSegments:m})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Sr.z)(C=>{const D=C.injector??e,R=C.routes,{segmentGroup:F,slicedSegments:j}=gg(t,h,m,R),J=new sn(F.segments,F.children);if(0===j.length&&J.hasChildren())return this.expandChildren(D,R,J).pipe((0,Tt.U)(lt=>new sn(h,lt)));if(0===R.length&&0===j.length)return st(new sn(h,{}));const se=ms(r)===a;return this.expandSegment(D,J,R,j,se?zt:a,!0).pipe((0,Tt.U)(yt=>new sn(h.concat(yt.segments),yt.children)))})):Aa(t)))}getChildConfig(e,t,r){return t.children?st({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?st({routes:t._loadedRoutes,injector:t._loadedInjector}):function mD(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?st(!0):st(i.map(c=>{const h=yu(c,n);return No(function dE(n){return n&&Uh(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(jl(),gE())}(e,t,r).pipe((0,Sr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,hi.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function wD(n){return tu(uy(wu,3))}())):st({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return st(r);if(i.numberOfChildren>1||!i.children[zt])return e.redirectTo,tu(new _.vHH(4e3,wu));i=i.children[zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Ci(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ar(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return Ar(t.children,(h,m)=>{c[m]=this.createSegmentGroup(e,h,r,i)}),new sn(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new _.vHH(4001,wu);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class Cy{}class by{constructor(e,t,r,i,a,c,h){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=c,this.urlSerializer=h}recognize(){const e=gg(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,zt).pipe((0,Tt.U)(t=>{if(null===t)return null;const r=new Yn([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},zt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new b(r,t),a=new ts(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=kt(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Xt.D)(Object.keys(r.children)).pipe(iu(i=>{const a=r.children[i],c=aE(t,i);return this.processSegmentGroup(e,c,a,i)}),Mo((i,a)=>i&&a?(i.push(...a),i):null),function gh(n,e=!1){return(0,yr.e)((t,r)=>{let i=0;t.subscribe((0,Ln.x)(r,a=>{const c=n(a,i++);(c||e)&&r.next(a),!c&&r.complete()}))})}(i=>null!==i),ru(null),ph(),(0,Tt.U)(i=>{if(null===i)return null;const a=CE(i);return function Bh(n){n.sort((e,t)=>e.value.outlet===zt?-1:t.value.outlet===zt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,Xt.D)(t).pipe(iu(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,a)),hs(c=>!!c),Ea(c=>{if(hg(c))return vE(r,i,a)?st([]):st(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!vD(t,r,i,a))return st(null);let c;if("**"===t.path){const h=i.length>0?mh(i).parameters:{},m=bE(r)+i.length;c=st({snapshot:new Yn(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ec(t),ms(t),t.component??t._loadedComponent??null,t,TE(r),m,Lo(t)),consumedSegments:[],remainingSegments:[]})}else c=_E(r,t,i,e).pipe((0,Tt.U)(({matched:h,consumedSegments:m,remainingSegments:w,parameters:C})=>{if(!h)return null;const D=bE(r)+m.length;return{snapshot:new Yn(m,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ec(t),ms(t),t.component??t._loadedComponent??null,t,TE(r),D,Lo(t)),consumedSegments:m,remainingSegments:w}}));return c.pipe(Hn(h=>{if(null===h)return st(null);const{snapshot:m,consumedSegments:w,remainingSegments:C}=h;e=t._injector??e;const D=t._loadedInjector??e,R=function TD(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:F,slicedSegments:j}=gg(r,w,C,R.filter(se=>void 0===se.redirectTo));if(0===j.length&&F.hasChildren())return this.processChildren(D,R,F).pipe((0,Tt.U)(se=>null===se?null:[new b(m,se)]));if(0===R.length&&0===j.length)return st([new b(m,[])]);const J=ms(t)===a;return this.processSegment(D,R,F,j,J?zt:a).pipe((0,Tt.U)(se=>null===se?null:[new b(m,se)]))}))}}function bD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function CE(n){const e=[],t=new Set;for(const r of n){if(!bD(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=CE(r.children);e.push(new b(r.value,i))}return e.filter(r=>!t.has(r))}function TE(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function bE(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Ec(n){return n.data||{}}function Lo(n){return n.resolve||{}}function Dy(n){return"string"==typeof n.title||null===n.title}function _g(n){return Hn(e=>{const t=n(e);return t?(0,Xt.D)(t).pipe((0,Tt.U)(()=>e)):st(e)})}const Hl=new _.OlP("ROUTES");let Ay=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return st(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=No(t.loadComponent()).pipe((0,Tt.U)(SE),(0,hi.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),El(()=>{this.componentLoaders.delete(t)})),i=new ic(r,()=>new xo.x).pipe(hh());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return st({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Tt.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let m,w,C=!1;Array.isArray(h)?w=h:(m=h.create(t).injector,w=Yp(m.get(Hl,[],_.XFs.Self|_.XFs.Optional)));return{routes:w.map(lg),injector:m}}),El(()=>{this.childrenLoaders.delete(r)})),c=new ic(a,()=>new xo.x).pipe(hh());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return No(t()).pipe((0,Tt.U)(SE),(0,Sr.z)(i=>i instanceof _.YKP||Array.isArray(i)?st(i):(0,Xt.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(_.zs3),_.LFG(_.Sil))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function SE(n){return function eo(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let yg=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new xo.x,this.configLoader=(0,_.f3M)(Ay),this.environmentInjector=(0,_.f3M)(_.lqb),this.urlSerializer=(0,_.f3M)(Ca),this.rootContexts=(0,_.f3M)(ag),this.navigationId=0,this.afterPreactivation=()=>st(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new ps(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new oy(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Qi({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:hu,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ui(r=>0!==r.id),(0,Tt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Hn(r=>{let i=!1,a=!1;return st(r).pipe((0,hi.b)(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Hn(c=>{const h=t.browserUrlTree.toString(),m=!t.navigated||c.extractedUrl.toString()!==h||h!==t.currentUrlTree.toString();if(!m&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const C="";return this.events.next(new pc(c.id,t.serializeUrl(r.rawUrl),C,0)),t.rawUrlTree=c.rawUrl,c.resolve(null),ds.E}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return AE(c.source)&&(t.browserUrlTree=c.extractedUrl),st(c).pipe(Hn(C=>{const D=this.transitions?.getValue();return this.events.next(new Ah(C.id,this.urlSerializer.serialize(C.extractedUrl),C.source,C.restoredState)),D!==this.transitions?.getValue()?ds.E:Promise.resolve(C)}),function IE(n,e,t,r){return Hn(i=>function ED(n,e,t,r,i){return new ID(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Tt.U)(a=>({...i,urlAfterRedirects:a}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,hi.b)(C=>{this.currentNavigation={...this.currentNavigation,finalUrl:C.urlAfterRedirects},r.urlAfterRedirects=C.urlAfterRedirects}),function SD(n,e,t,r,i){return(0,Sr.z)(a=>function CD(n,e,t,r,i,a,c="emptyOnly"){return new by(n,e,t,r,i,c,a).recognize().pipe(Hn(h=>null===h?function Ty(n){return new Fi.y(e=>e.error(n))}(new Cy):st(h)))}(n,e,t,a.urlAfterRedirects,r.serialize(a.urlAfterRedirects),r,i).pipe((0,Tt.U)(c=>({...a,targetSnapshot:c}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,hi.b)(C=>{if(r.targetSnapshot=C.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!C.extras.skipLocationChange){const R=t.urlHandlingStrategy.merge(C.urlAfterRedirects,C.rawUrl);t.setBrowserUrl(R,C)}t.browserUrlTree=C.urlAfterRedirects}const D=new Rh(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(D)}));if(m&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:C,extractedUrl:D,source:R,restoredState:F,extras:j}=c,J=new Ah(C,this.urlSerializer.serialize(D),R,F);this.events.next(J);const se=fe(D,this.rootComponentType).snapshot;return st(r={...c,targetSnapshot:se,urlAfterRedirects:D,extras:{...j,skipLocationChange:!1,replaceUrl:!1}})}{const C="";return this.events.next(new pc(c.id,t.serializeUrl(r.extractedUrl),C,1)),t.rawUrlTree=c.rawUrl,c.resolve(null),ds.E}}),(0,hi.b)(c=>{const h=new Sa(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),(0,Tt.U)(c=>r={...c,guards:bN(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),function _y(n,e){return(0,Sr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?st({...t,guardsResult:!0}):function fg(n,e,t,r){return(0,Xt.D)(n).pipe((0,Sr.z)(i=>function vy(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?st(a.map(h=>{const m=Lh(e)??i,w=yu(h,m);return No(function my(n){return n&&Uh(n.canDeactivate)}(w)?w.canDeactivate(n,e,t,r):m.runInContext(()=>w(n,e,t,r))).pipe(hs())})).pipe(jl()):st(!0)}(i.component,i.route,t,e,r)),hs(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Sr.z)(h=>h&&function lE(n){return"boolean"==typeof n}(h)?function gD(n,e,t,r){return(0,Xt.D)(e).pipe(iu(i=>Kp(function pg(n,e){return null!==n&&e&&e(new gc(n)),st(!0)}(i.route.parent,r),function yy(n,e){return null!==n&&e&&e(new mc(n)),st(!0)}(i.route,r),function pE(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function Fh(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>lh(()=>st(c.guards.map(m=>{const w=Lh(c.node)??t,C=yu(m,w);return No(function DN(n){return n&&Uh(n.canActivateChild)}(C)?C.canActivateChild(r,n):w.runInContext(()=>C(r,n))).pipe(hs())})).pipe(jl())));return st(a).pipe(jl())}(n,i.path,t),function vc(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return st(!0);const i=r.map(a=>lh(()=>{const c=Lh(e)??t,h=yu(a,c);return No(function gy(n){return n&&Uh(n.canActivate)}(h)?h.canActivate(e,n):c.runInContext(()=>h(e,n))).pipe(hs())}));return st(i).pipe(jl())}(n,i.route,t))),hs(i=>!0!==i,!0))}(r,a,n,e):st(h)),(0,Tt.U)(h=>({...t,guardsResult:h})))})}(this.environmentInjector,c=>this.events.next(c)),(0,hi.b)(c=>{if(r.guardsResult=c.guardsResult,Ta(c.guardsResult))throw og(0,c.guardsResult);const h=new Ti(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(h)}),Ui(c=>!!c.guardsResult||(t.restoreHistory(c),this.cancelNavigationTransition(c,"",3),!1)),_g(c=>{if(c.guards.canActivateChecks.length)return st(c).pipe((0,hi.b)(h=>{const m=new xh(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}),Hn(h=>{let m=!1;return st(h).pipe(function AD(n,e){return(0,Sr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return st(t);let a=0;return(0,Xt.D)(i).pipe(iu(c=>function AN(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!Dy(i)&&(a[Ii]=i.title),function RN(n,e,t,r){const i=function DE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return st({});const a={};return(0,Xt.D)(i).pipe((0,Sr.z)(c=>function xN(n,e,t,r){const i=Lh(e)??r,a=yu(n,i);return No(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[c],e,t,r).pipe(hs(),(0,hi.b)(h=>{a[c]=h}))),fh(1),function Zp(n){return(0,Tt.U)(()=>n)}(a),Ea(c=>hg(c)?ds.E:tu(c)))}(a,n,e,r).pipe((0,Tt.U)(c=>(n._resolvedData=c,n.data=kt(n,t).resolve,i&&Dy(i)&&(n.data[Ii]=i.title),null)))}(c.route,r,n,e)),(0,hi.b)(()=>a++),fh(1),(0,Sr.z)(c=>a===i.length?st(t):ds.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,hi.b)({next:()=>m=!0,complete:()=>{m||(t.restoreHistory(h),this.cancelNavigationTransition(h,"",2))}}))}),(0,hi.b)(h=>{const m=new ng(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}))}),_g(c=>{const h=m=>{const w=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(m.routeConfig).pipe((0,hi.b)(C=>{m.component=C}),(0,Tt.U)(()=>{})));for(const C of m.children)w.push(...h(C));return w};return vl(h(c.targetSnapshot.root)).pipe(ru(),nu(1))}),_g(()=>this.afterPreactivation()),(0,Tt.U)(c=>{const h=function Os(n,e,t){const r=gs(n,e._root,t?t._root:void 0);return new Q(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return r={...c,targetRouterState:h}}),(0,hi.b)(c=>{t.currentUrlTree=c.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),t.routerState=c.targetRouterState,"deferred"===t.urlUpdateStrategy&&(c.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,c),t.browserUrlTree=c.urlAfterRedirects)}),((n,e,t)=>(0,Tt.U)(r=>(new fD(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c)),(0,hi.b)({next:c=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new fi(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{i=!0}}),El(()=>{i||a||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Ea(c=>{if(a=!0,Bl(c)){kh(c)||(t.navigated=!0,t.restoreHistory(r,!0));const h=new fu(r.id,this.urlSerializer.serialize(r.extractedUrl),c.message,c.cancellationCode);if(this.events.next(h),kh(c)){const m=t.urlHandlingStrategy.merge(c.url,t.rawUrlTree),w={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||AE(r.source)};t.scheduleNavigation(m,hu,null,w,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const h=new pu(r.id,this.urlSerializer.serialize(r.extractedUrl),c,r.targetSnapshot??void 0);this.events.next(h);try{r.resolve(t.errorHandler(c))}catch(m){r.reject(m)}}return ds.E}))}))}cancelNavigationTransition(t,r,i){const a=new fu(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function AE(n){return n!==hu}let RE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===zt);return r}getResolvedTitleForRoute(t){return t.data[Ii]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return(0,_.f3M)(xD)},providedIn:"root"}),n})(),xD=(()=>{class n extends RE{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(So))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return(0,_.f3M)(ND)},providedIn:"root"}),n})();class MD{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let ND=(()=>{class n extends MD{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=_.n5z(n)))(r||n)}}(),n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Wt=new _.OlP("",{providedIn:"root",factory:()=>({})});let ME=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return(0,_.f3M)(NE)},providedIn:"root"}),n})(),NE=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function OD(n){throw n}function kD(n,e,t){return e.parse("/")}const PE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},LD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let bi=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,_.f3M)(_.c2e),this.isNgZoneEnabled=!1,this.options=(0,_.f3M)(Wt,{optional:!0})||{},this.errorHandler=this.options.errorHandler||OD,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||kD,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,_.f3M)(ME),this.routeReuseStrategy=(0,_.f3M)(xE),this.urlCreationStrategy=(0,_.f3M)(y),this.titleStrategy=(0,_.f3M)(RE),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Yp((0,_.f3M)(Hl,{optional:!0})??[]),this.navigationTransitions=(0,_.f3M)(yg),this.urlSerializer=(0,_.f3M)(Ca),this.location=(0,_.f3M)(Ue),this.isNgZoneEnabled=(0,_.f3M)(_.R0b)instanceof _.R0b&&_.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Ci,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=fe(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),hu,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},c=i?.navigationId?i:null;if(i){const m={...i};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(a.state=m)}const h=this.parseUrl(t);this.scheduleNavigation(h,r,c,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(lg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:h,preserveFragment:m}=r,w=m?this.currentUrlTree.fragment:c;let C=null;switch(h){case"merge":C={...this.currentUrlTree.queryParams,...a};break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=a||null}return null!==C&&(C=this.removeEmptyProps(C)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,C,w??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ta(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,hu,null,r)}navigate(t,r={skipLocationChange:!1}){return function FD(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new _.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...PE}:!1===r?{...LD}:r,Ta(t))return bl(this.currentUrlTree,t,i);const a=this.parseUrl(t);return bl(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,c){if(this.disposed)return Promise.resolve(!1);let h,m,w,C;return c?(h=c.resolve,m=c.reject,w=c.promise):w=new Promise((D,R)=>{h=D,m=R}),C="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:C,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:h,reject:m,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(D=>Promise.reject(D))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wg=(()=>{class n{constructor(t,r,i,a,c,h){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=c,this.locationStrategy=h,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new xo.x;const m=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===m||"area"===m,this.isAnchorElement?this.subscription=t.events.subscribe(w=>{w instanceof fi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,_.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,_.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,_.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,c){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||c||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,_.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(bi),_.Y36(at),_.$8M("tabindex"),_.Y36(_.Qsj),_.Y36(_.SBq),_.Y36(nt))},n.\u0275dir=_.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&_.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&_.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[_.TTD]}),n})(),UD=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,a,c){this.router=t,this.element=r,this.renderer=i,this.cdr=a,this.link=c,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new _.vpe,this.routerEventsSubscription=t.events.subscribe(h=>{h instanceof fi&&this.update()})}ngAfterContentInit(){st(this.links.changes,st(null)).pipe((0,Ps.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,Xt.D)(t).pipe((0,Ps.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function OE(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(bi),_.Y36(_.SBq),_.Y36(_.Qsj),_.Y36(_.sBO),_.Y36(wg,8))},n.\u0275dir=_.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&_.Suo(i,wg,5),2&t){let a;_.iGM(a=_.CRH())&&(r.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[_.TTD]}),n})();class Ry{}let xy=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Ui(t=>t instanceof fi),iu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,_.MMx)(a.providers,t,`Route: ${a.path}`));const c=a._injector??t,h=a._loadedInjector??c;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(c,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(h,a.children??a._loadedRoutes))}return(0,Xt.D)(i).pipe((0,Ps.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):st(null);const a=i.pipe((0,Sr.z)(c=>null===c?st(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,Xt.D)([a,c]).pipe((0,Ps.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(bi),_.LFG(_.Sil),_.LFG(_.lqb),_.LFG(Ry),_.LFG(Ay))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const jh=new _.OlP("");let kE=(()=>{class n{constructor(t,r,i,a,c={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ah?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof fi&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof _c&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new _c(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){_.$Z()},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();var ks=(()=>((ks=ks||{})[ks.COMPLETE=0]="COMPLETE",ks[ks.FAILED=1]="FAILED",ks[ks.REDIRECTING=2]="REDIRECTING",ks))();const Hh=!1;function Ic(n,e){return{\u0275kind:n,\u0275providers:e}}const Ny=new _.OlP("",{providedIn:"root",factory:()=>!1});function Gh(){const n=(0,_.f3M)(_.zs3);return e=>{const t=n.get(_.z2F);if(e!==t.components[0])return;const r=n.get(bi),i=n.get(LE);1===n.get(Eg)&&r.initialNavigation(),n.get(FE,null,_.XFs.Optional)?.setUpPreloading(),n.get(jh,null,_.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const LE=new _.OlP(Hh?"bootstrap done indicator":"",{factory:()=>new xo.x}),Eg=new _.OlP(Hh?"initial navigation":"",{providedIn:"root",factory:()=>1});function jD(){let n=[];return n=Hh?[{provide:_.Xts,multi:!0,useFactory:()=>{const e=(0,_.f3M)(bi);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function rg(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Ic(1,n)}const FE=new _.OlP(Hh?"router preloader":"");function HD(n){return Ic(0,[{provide:FE,useExisting:xy},{provide:Ry,useExisting:n}])}const Wl=!1,WD=new _.OlP(Wl?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Py=[Ue,{provide:Ca,useClass:ac},bi,ag,{provide:at,useFactory:function My(n){return n.routerState.root},deps:[bi]},Ay,Wl?{provide:Ny,useValue:!0}:[]];function qD(){return new _.PXZ("Router",bi)}let VE=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Py,Wl&&r?.enableTracing?jD().\u0275providers:[],{provide:Hl,multi:!0,useValue:t},{provide:WD,useFactory:$E,deps:[[bi,new _.FiY,new _.tp0]]},{provide:Wt,useValue:r||{}},r?.useHash?{provide:nt,useClass:Ne}:{provide:nt,useClass:be},{provide:jh,useFactory:()=>{const n=(0,_.f3M)(la),e=(0,_.f3M)(_.R0b),t=(0,_.f3M)(Wt),r=(0,_.f3M)(yg),i=(0,_.f3M)(Ca);return t.scrollOffset&&n.setOffset(t.scrollOffset),new kE(i,r,n,e,t)}},r?.preloadingStrategy?HD(r.preloadingStrategy).\u0275providers:[],{provide:_.PXZ,multi:!0,useFactory:qD},r?.initialNavigation?ZD(r):[],[{provide:jE,useFactory:Gh},{provide:_.tb,multi:!0,useExisting:jE}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Hl,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(WD,8))},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({imports:[cg]}),n})();function $E(n){if(Wl&&n)throw new _.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function ZD(n){return["disabled"===n.initialNavigation?Ic(3,[{provide:_.ip1,multi:!0,useFactory:()=>{const e=(0,_.f3M)(bi);return()=>{e.setUpLocationChangeListener()}}},{provide:Eg,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ic(2,[{provide:Eg,useValue:0},{provide:_.ip1,multi:!0,deps:[_.zs3],useFactory:e=>{const t=e.get(ce,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(bi),a=e.get(LE);(function NN(n,e){n.events.pipe(Ui(t=>t instanceof fi||t instanceof fu||t instanceof pu||t instanceof pc),(0,Tt.U)(t=>t instanceof fi||t instanceof pc?ks.COMPLETE:t instanceof fu&&(0===t.code||1===t.code)?ks.REDIRECTING:ks.FAILED),Ui(t=>t!==ks.REDIRECTING),nu(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(yg).afterPreactivation=()=>(r(!0),a.closed?st(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const jE=new _.OlP(Wl?"Router Initializer":""),KE=[{path:"",pathMatch:"full",redirectTo:"/home"},{path:"home",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-home"]],decls:2,vars:0,template:function(t,r){1&t&&(_.TgZ(0,"p"),_._uU(1,"home works!"),_.qZA())}}),n})()},{path:"search",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-search"]],decls:2,vars:0,template:function(t,r){1&t&&(_.TgZ(0,"p"),_._uU(1,"search works!"),_.qZA())}}),n})()},{path:"announcements",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-announcements"]],decls:2,vars:0,template:function(t,r){1&t&&(_.TgZ(0,"p"),_._uU(1,"announcements works!"),_.qZA())}}),n})()},{path:"services",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-services"]],decls:2,vars:0,template:function(t,r){1&t&&(_.TgZ(0,"p"),_._uU(1,"services works!"),_.qZA())}}),n})()},{path:"mission-vission",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-mission-vission"]],decls:2,vars:0,template:function(t,r){1&t&&(_.TgZ(0,"p"),_._uU(1,"mission-vission works!"),_.qZA())}}),n})()},{path:"rules",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-rules"]],decls:2,vars:0,template:function(t,r){1&t&&(_.TgZ(0,"p"),_._uU(1,"rules works!"),_.qZA())}}),n})()},{path:"contact",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-contact"]],decls:2,vars:0,template:function(t,r){1&t&&(_.TgZ(0,"p"),_._uU(1,"contact works!"),_.qZA())}}),n})()},{path:"sign-in",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-sign-in"]],decls:2,vars:0,template:function(t,r){1&t&&(_.TgZ(0,"p"),_._uU(1,"sign-in works!"),_.qZA())}}),n})()}];let ky=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({imports:[VE.forRoot(KE),VE]}),n})(),QD=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-header"]],decls:22,vars:0,consts:[[1,"container-fluid","top-header"],[1,"row"],[1,"container"],[1,"col-lg-6","col-md-6","col-sm-6"],["href","#","routerLinkActive","active","routerLink","home"],[1,"nav","nav-pills"],["role","presentation"],["href","#","routerLinkActive","active","routerLink","sign-in"],["role","presentation",1,"dropdown"],["href","#","data-toggle","dropdown","role","button","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle"],[1,"caret"],[1,"dropdown-menu"],["href","#"]],template:function(t,r){1&t&&(_.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),_._uU(5,"Online Public Access Catalog"),_.qZA()(),_.TgZ(6,"div",3)(7,"ul",5)(8,"li",6)(9,"a",7),_._uU(10,"Sign In"),_.qZA()(),_.TgZ(11,"li",8)(12,"a",9),_._uU(13,"Books "),_._UZ(14,"span",10),_.qZA(),_.TgZ(15,"ul",11)(16,"li")(17,"a",12),_._uU(18,"Records"),_.qZA()(),_.TgZ(19,"li")(20,"a",12),_._uU(21,"Inventory"),_.qZA()()()()()()()()())},dependencies:[wg,UD],styles:['.top-header[_ngcontent-%COMP%]{background-color:#9e0000;color:#fff;font-weight:500}.top-header[_ngcontent-%COMP%]   .col-lg-6[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;font-weight:500}.top-header[_ngcontent-%COMP%]   .col-lg-6[_ngcontent-%COMP%]:first-child{padding:5px 0}.top-header[_ngcontent-%COMP%]   .col-lg-6[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.top-header[_ngcontent-%COMP%]   .col-lg-6[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{float:right}.top-header[_ngcontent-%COMP%]   .col-lg-6[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.top-header[_ngcontent-%COMP%]   .col-lg-6[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .top-header[_ngcontent-%COMP%]   .col-lg-6[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#9a9696;text-decoration:none}.top-header[_ngcontent-%COMP%]   .col-lg-6[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus, .nav[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{text-decoration:none;background-color:transparent}.top-header[_ngcontent-%COMP%]   .col-lg-6[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:#333!important}.top-header[_ngcontent-%COMP%]   .col-lg-6[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .open[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .nav[_ngcontent-%COMP%]   .open[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus, .nav[_ngcontent-%COMP%]   .open[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{background-color:transparent;border-color:#337ab7}.top-header[_ngcontent-%COMP%]   .col-lg-6[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{padding:5px 15px;display:inline-block}.top-header[_ngcontent-%COMP%]   .col-lg-6[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:after{content:"|";color:#f3e5ae}.top-header[_ngcontent-%COMP%]   .col-lg-6[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:first-child:after{content:none}']}),n})(),XD=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-footer"]],decls:2,vars:0,template:function(t,r){1&t&&(_.TgZ(0,"p"),_._uU(1,"footer works!"),_.qZA())}}),n})();function ZE(n,e){1&n&&_._UZ(0,"app-header")}function JD(n,e){1&n&&_._UZ(0,"app-footer")}let YE=(()=>{class n{constructor(t,r){this.router=t,this.activatedRoute=r,this.title="Online Public Access Catalog",this.showHeader=!1,this.showFooter=!1}ngOnInit(){this.router.events.subscribe(t=>{t instanceof fi&&(this.showHeader=0!=this.activatedRoute.root.firstChild?.snapshot.data.showHeader,this.showFooter=0!=this.activatedRoute.root.firstChild?.snapshot.data.showFooter)})}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(bi),_.Y36(at))},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:2,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(_.YNc(0,ZE,1,0,"app-header",0),_._UZ(1,"router-outlet"),_.YNc(2,JD,1,0,"app-footer",0)),2&t&&(_.Q6J("ngIf",r.showHeader),_.xp6(2),_.Q6J("ngIf",r.showFooter))},dependencies:[na,ug,QD,XD]}),n})();var nr=P(2011),Ly=P(6451),Wh=P(5363),_s=P(6063);class QE extends xo.x{constructor(e=1/0,t=1/0,r=_s.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let h=0;for(let m=1;m<r.length&&r[m]<=c;m+=2)h=m;h&&r.splice(0,h+1)}}}var XE=P(3099);function JE(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,XE.B)({connector:()=>new QE(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Tg(n,e){return(0,dh.m)(e)?Hn(()=>n,e):Hn(()=>n)}var bg=P(9468),an=P(462);P(259);var ve=P(5861),pi=P(9681),to=P(4859),N=P(2090),ns=P(1877);const Zh=new Map,Yh={activated:!1,tokenObservers:[]},GN={initialized:!1,enabled:!1};function Wr(n){return Zh.get(n)||Object.assign({},Yh)}function Qh(){return GN}const Dg="https://content-firebaseappcheck.googleapis.com/v1",Fy="exchangeDebugToken",Fo={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Ag{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new N.BH,yield function Xh(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new N.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Di=new N.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Vy(n,e){return oI.apply(this,arguments)}function oI(){return(oI=(0,ve.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const D=yield i.getHeartbeatsHeader();D&&(r["X-Firebase-Client"]=D)}const a={method:"POST",body:JSON.stringify(e),headers:r};let c,h;try{c=yield fetch(n,a)}catch(D){throw Di.create("fetch-network-error",{originalErrorMessage:D?.message})}if(200!==c.status)throw Di.create("fetch-status-error",{httpStatus:c.status});try{h=yield c.json()}catch(D){throw Di.create("fetch-parse-error",{originalErrorMessage:D?.message})}const m=h.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw Di.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const w=1e3*Number(m[1]),C=Date.now();return{token:h.token,expireTimeMillis:C+w,issuedAtTimeMillis:C}})).apply(this,arguments)}const uS="firebase-app-check-database",cS=1,ef="firebase-app-check-store";let tf=null;function uI(n,e){return jy.apply(this,arguments)}function jy(){return(jy=(0,ve.Z)(function*(n,e){const r=(yield function By(){return tf||(tf=new Promise((n,e)=>{try{const t=indexedDB.open(uS,cS);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Di.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(ef,{keyPath:"compositeKey"})}}catch(t){e(Di.create("storage-open",{originalErrorMessage:t?.message}))}}),tf)}()).transaction(ef,"readwrite"),a=r.objectStore(ef).put({compositeKey:n,value:e});return new Promise((c,h)=>{a.onsuccess=m=>{c()},r.onerror=m=>{var w;h(Di.create("storage-set",{originalErrorMessage:null===(w=m.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const Kl=new ns.Yd("@firebase/app-check");function hI(n,e){return(0,N.hl)()?function $y(n,e){return uI(function lI(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Kl.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function gI(){return zy.apply(this,arguments)}function zy(){return(zy=(0,ve.Z)(function*(){const n=Qh();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const fS={error:"UNKNOWN_ERROR"};function Uo(n){return N.US.encodeString(JSON.stringify(n),!1)}function Iu(n){return ri.apply(this,arguments)}function ri(){return(ri=(0,ve.Z)(function*(n,e=!1){const t=n.app;!function sI(n){if(!Wr(n).activated)throw Di.create("use-before-activation",{appName:n.name})}(t);const r=Wr(t);let a,i=r.token;if(i&&!no(i)&&(r.token=void 0,i=void 0),!i){const m=yield r.cachedTokenPromise;m&&(no(m)?i=m:yield hI(t,void 0))}if(!e&&i&&no(i))return{token:i.token};let h,c=!1;if(function nf(){return Qh().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Vy(function aS(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Dg}/projects/${t}/apps/${r}:${Fy}?key=${i}`,body:{debug_token:e}}}(t,yield gI()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const m=yield r.exchangeTokenPromise;return yield hI(t,m),r.token=m,{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield Wr(t).exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?Kl.warn(m.message):Kl.error(m),a=m}return i?a?h=no(i)?{token:i.token,internalError:a}:Tc(a):(h={token:i.token},r.token=i,yield hI(t,i)):h=Tc(a),c&&function Cc(n,e){const t=Wr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,h),h})).apply(this,arguments)}function Zl(n,e){const t=Wr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function ys(n){const{app:e}=n,t=Wr(e);let r=t.tokenRefresher;r||(r=function qy(n){const{app:e}=n;return new Ag((0,ve.Z)(function*(){let r;if(r=Wr(e).token?yield Iu(n,!0):yield Iu(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Wr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},Fo.RETRIAL_MIN_WAIT,Fo.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function no(n){return n.expireTimeMillis-Date.now()>0}function Tc(n){return{token:Uo(fS),error:n}}class Yl{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Wr(this.app);for(const t of e)Zl(this.app,t.next);return Promise.resolve()}}const Mg="app-check-internal";!function bI(){(0,pi._registerComponent)(new to.wA("app-check",n=>function Ql(n,e){return new Yl(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Mg).initialize()})),(0,pi._registerComponent)(new to.wA(Mg,n=>function Xl(n){return{getToken:e=>Iu(n,e),addTokenListener:e=>function xa(n,e,t,r){const{app:i}=n,a=Wr(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&no(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),ys(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>ys(n))}(n,"INTERNAL",e),removeTokenListener:e=>Zl(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,pi.registerVersion)("@firebase/app-check","0.6.4")}();class nd{constructor(){return(0,an.vb)("app-check")}}typeof window<"u"&&window;var Cu=P(9260);const Ng=new _.OlP("angularfire2.auth.use-emulator"),Pg=new _.OlP("angularfire2.auth.settings"),Og=new _.OlP("angularfire2.auth.tenant-id"),kg=new _.OlP("angularfire2.auth.langugage-code"),rd=new _.OlP("angularfire2.auth.use-device-language"),Vo=new _.OlP("angularfire.auth.persistence"),ev=(n,e,t,r,i,a,c,h)=>(0,nr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),c)for(const[w,C]of Object.entries(c))m.settings[w]=C;return h&&m.setPersistence(h),m},[t,r,i,a,c,h]);let cf=(()=>{class n{constructor(t,r,i,a,c,h,m,w,C,D,R,F){const j=new xo.x,J=st(void 0).pipe((0,Wh.Q)(c.outsideAngular),Hn(()=>a.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,8971)))),(0,Tt.U)(()=>(0,nr.on)(t,a,r)),(0,Tt.U)(se=>ev(se,a,h,w,C,D,m,R)),JE({bufferSize:1,refCount:!1}));if(ua(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=st(null);else{J.pipe(hs()).subscribe();const dt=J.pipe(Hn(Et=>Et.getRedirectResult().then(Vt=>Vt,()=>null)),an.iC,JE({bufferSize:1,refCount:!1})),yt=J.pipe(Hn(Et=>new Fi.y(Vt=>({unsubscribe:a.runOutsideAngular(()=>Et.onAuthStateChanged(Zt=>Vt.next(Zt),Zt=>Vt.error(Zt),()=>Vt.complete()))})))),lt=J.pipe(Hn(Et=>new Fi.y(Vt=>({unsubscribe:a.runOutsideAngular(()=>Et.onIdTokenChanged(Zt=>Vt.next(Zt),Zt=>Vt.error(Zt),()=>Vt.complete()))}))));this.authState=dt.pipe(Tg(yt),(0,bg.R)(c.outsideAngular),(0,Wh.Q)(c.insideAngular)),this.user=dt.pipe(Tg(lt),(0,bg.R)(c.outsideAngular),(0,Wh.Q)(c.insideAngular)),this.idToken=this.user.pipe(Hn(Et=>Et?(0,Xt.D)(Et.getIdToken()):st(null))),this.idTokenResult=this.user.pipe(Hn(Et=>Et?(0,Xt.D)(Et.getIdTokenResult()):st(null))),this.credential=(0,Ly.T)(dt,j,this.authState.pipe(Ui(Et=>!Et))).pipe((0,Tt.U)(Et=>Et?.user?Et:null),(0,bg.R)(c.outsideAngular),(0,Wh.Q)(c.insideAngular))}return(0,nr.pX)(this,J,a,{spy:{apply:(se,dt,yt)=>{(se.startsWith("signIn")||se.startsWith("createUser"))&&yt.then(lt=>j.next(lt))}}})}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(nr.Dh),_.LFG(nr.xv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(an.HU),_.LFG(Ng,8),_.LFG(Pg,8),_.LFG(Og,8),_.LFG(kg,8),_.LFG(rd,8),_.LFG(Vo,8),_.LFG(nd,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),tv=(()=>{class n{constructor(){Cu.Z.registerVersion("angularfire",an.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[cf]}),n})();var Ma=P(4986),rv=P(3942);const Lg="firebasestorage.googleapis.com",TS="storageBucket";class rr extends N.ZR{constructor(e,t,r=0){super(xr(e),`Firebase Storage: ${t} (${xr(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,rr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xr(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Gn=(()=>{return(n=Gn||(Gn={})).UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Gn;var n})();function xr(n){return"storage/"+n}function Fg(){return new rr(Gn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function iv(){return new rr(Gn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bc(){return new rr(Gn.CANCELED,"User canceled the upload/download.")}function OI(){return new rr(Gn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Dc(n){return new rr(Gn.INVALID_ARGUMENT,n)}function ro(){return new rr(Gn.APP_DELETED,"The Firebase app was deleted.")}function FI(n){return new rr(Gn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function lf(n,e){return new rr(Gn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function rs(n){throw new rr(Gn.INTERNAL_ERROR,"Internal error: "+n)}class zn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=zn.makeFromUrl(e,t)}catch{return new zn(e,"")}if(""===r.path)return r;throw function MS(n){return new rr(Gn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(Et){Et.path_=decodeURIComponent(Et.path)}const D=t.replace(/[.]/g,"\\."),lt=[{regex:h,indices:{bucket:1,path:3},postModify:function a(Et){"/"===Et.path.charAt(Et.path.length-1)&&(Et.path_=Et.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===Lg?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let Et=0;Et<lt.length;Et++){const Vt=lt[Et],Zt=Vt.regex.exec(e);if(Zt){let Hs=Zt[Vt.indices.path];Hs||(Hs=""),r=new zn(Zt[Vt.indices.bucket],Hs),Vt.postModify(r);break}}if(null==r)throw function xS(n){return new rr(Gn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class io{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Ug(n){return"string"==typeof n||n instanceof String}function Vg(n){return Sc()&&n instanceof Blob}function Sc(){return typeof Blob<"u"&&!(0,N.UG)()}function sv(n,e,t,r){if(r<e)throw Dc(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Dc(`Invalid value for '${n}'. Expected ${t} or less.`)}function Bo(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function BI(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Na=(()=>{return(n=Na||(Na={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Na;var n})();function ov(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class Bg{constructor(e,t,r,i,a,c,h,m,w,C,D,R=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=m,this.timeout_=w,this.progressCallback_=C,this.connectionFactory_=D,this.retry=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,j)=>{this.resolve_=F,this.reject_=j,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,c=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());!function NS(n){return void 0!==n}(m)?a():a(m)}catch(m){c(m)}else if(null!==h){const m=Fg();m.serverResponse=h.getErrorText(),c(this.errorCallback_?this.errorCallback_(h,m):m)}else c(i.canceled?this.appDelete_?ro():bc():iv())};this.canceled_?t(0,new $g(!1,null,!0)):this.backoffId_=function UI(n,e,t){let r=1,i=null,a=null,c=!1,h=0;function m(){return 2===h}let w=!1;function C(...se){w||(w=!0,e.apply(null,se))}function D(se){i=setTimeout(()=>{i=null,n(F,m())},se)}function R(){a&&clearTimeout(a)}function F(se,...dt){if(w)return void R();if(se)return R(),void C.call(null,se,...dt);if(m()||c)return R(),void C.call(null,se,...dt);let lt;r<64&&(r*=2),1===h?(h=2,lt=0):lt=1e3*(r+Math.random()),D(lt)}let j=!1;function J(se){j||(j=!0,R(),!w&&(null!==i?(se||(h=2),clearTimeout(i),D(0)):se||(h=1)))}return D(0),a=setTimeout(()=>{c=!0,J(!0)},t),J}((r,i)=>{if(i)return void r(!1,new $g(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const c=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const h=a.getErrorCode()===Na.NO_ERROR,m=a.getStatus();if(!h||ov(m,this.additionalRetryCodes_)&&this.retry){const C=a.getErrorCode()===Na.ABORT;return void r(!1,new $g(!1,null,C))}const w=-1!==this.successCodes_.indexOf(m);r(!0,new $g(w,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function VI(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class $g{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function WI(...n){const e=function zI(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Sc())return new Blob(n);throw new rr(Gn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const is={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jg{constructor(e,t){this.data=e,this.contentType=t||null}}function Hg(n,e){switch(n){case is.RAW:return new jg(ZI(e));case is.BASE64:case is.BASE64URL:return new jg(YI(n,e));case is.DATA_URL:return new jg(function LS(n){const e=new QI(n);return e.base64?YI(is.BASE64,e.rest):function kS(n){let e;try{e=decodeURIComponent(n)}catch{throw lf(is.DATA_URL,"Malformed data URL.")}return ZI(e)}(e.rest)}(e),function FS(n){return new QI(n).contentType}(e))}throw Fg()}function ZI(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function YI(n,e){switch(n){case is.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw lf(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case is.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw lf(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function KI(n){if(typeof atob>"u")throw function LI(n){return new rr(Gn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:lf(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class QI{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw lf(is.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function US(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class $o{constructor(e,t){let r=0,i="";Vg(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Vg(this.data_)){const i=function qI(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new $o(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new $o(r,!0)}}static getBlob(...e){if(Sc()){const t=e.map(r=>r instanceof $o?r.data_:r);return new $o(WI.apply(null,t))}{const t=e.map(c=>Ug(c)?Hg(is.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(c=>{for(let h=0;h<c.length;h++)i[a++]=c[h]}),new $o(i,!0)}}uploadData(){return this.data_}}function uv(n){let e;try{e=JSON.parse(n)}catch{return null}return function OS(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function XI(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function $S(n,e){return e}class Vi{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||$S}}let Gg=null;function df(){if(Gg)return Gg;const n=[];n.push(new Vi("bucket")),n.push(new Vi("generation")),n.push(new Vi("metageneration")),n.push(new Vi("name","fullPath",!0));const t=new Vi("name");t.xform=function e(a,c){return function jS(n){return!Ug(n)||n.length<2?n:XI(n)}(c)},n.push(t);const i=new Vi("size");return i.xform=function r(a,c){return void 0!==c?Number(c):c},n.push(i),n.push(new Vi("timeCreated")),n.push(new Vi("updated")),n.push(new Vi("md5Hash",null,!0)),n.push(new Vi("cacheControl",null,!0)),n.push(new Vi("contentDisposition",null,!0)),n.push(new Vi("contentEncoding",null,!0)),n.push(new Vi("contentLanguage",null,!0)),n.push(new Vi("contentType",null,!0)),n.push(new Vi("metadata","customMetadata",!0)),Gg=n,Gg}function cv(n,e,t){const r=uv(e);return null===r?null:function JI(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const c=t[a];r[c.local]=c.xform(r,e[c.server])}return function HS(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new zn(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function zg(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const lv="prefixes",dv="items";class so{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function oo(n){if(!n)throw Fg()}function hf(n,e){return function t(r,i){const a=cv(n,i,e);return oo(null!==a),a}}function id(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function RS(){return new rr(Gn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function MI(){return new rr(Gn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function AS(n){return new rr(Gn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function NI(n){return new rr(Gn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function jo(n){const e=id(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function SS(n){return new rr(Gn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function zS(n,e,t){const i=Bo(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new so(i,"GET",hf(n,t),c);return h.errorHandler=jo(e),h}function hv(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=Bo(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,C=new so(h,"GET",function Ac(n,e){return function t(r,i){const a=function nC(n,e,t){const r=uv(t);return null===r?null:function tC(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[lv])for(const i of t[lv]){const a=i.replace(/\/$/,""),c=n._makeStorageReference(new zn(e,a));r.prefixes.push(c)}if(t[dv])for(const i of t[dv]){const a=n._makeStorageReference(new zn(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return oo(null!==a),a}}(n,e.bucket),w);return C.urlParams=a,C.errorHandler=id(e),C}function sC(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Ut(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Wg{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function Tu(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{oo(!1)}return oo(!!t&&-1!==(e||["active"]).indexOf(t)),t}const JN={STATE_CHANGED:"state_changed"},Si={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Kg(n){switch(n){case"running":case"pausing":case"canceling":return Si.RUNNING;case"paused":return Si.PAUSED;case"success":return Si.SUCCESS;case"canceled":return Si.CANCELED;default:return Si.ERROR}}class KS{constructor(e,t,r){if(function PS(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Rc(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let fv=null;class aC{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Na.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Na.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Na.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw rs("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw rs("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw rs("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw rs("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw rs("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class uC extends aC{initXhr(){this.xhr_.responseType="text"}}function ao(){return fv?fv():new uC}class cC{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=df(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Gn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(ov(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=iv()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Gn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function qS(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c=sC(e,r,i),h={name:c.fullPath},m=Bo(a,n.host,n._protocol),C={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},D=zg(c,t),j=new so(m,"POST",function F(J){let se;Tu(J);try{se=J.getResponseHeader("X-Goog-Upload-URL")}catch{oo(!1)}return oo(Ug(se)),se},n.maxUploadRetryTime);return j.urlParams=h,j.headers=C,j.body=D,j.errorHandler=id(e),j}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ao,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function qg(n,e,t,r){const m=new so(t,"POST",function a(w){const C=Tu(w,["active","final"]);let D=null;try{D=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch{oo(!1)}D||oo(!1);const R=Number(D);return oo(!isNaN(R)),new Wg(R,r.size(),"final"===C)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=id(e),m}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,ao,t,r);this._request=a,a.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Wg(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let c;try{c=function vr(n,e,t,r,i,a,c,h){const m=new Wg(0,0);if(c?(m.current=c.current,m.total=c.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function kI(){return new rr(Gn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const w=m.total-m.current;let C=w;i>0&&(C=Math.min(C,i));const D=m.current;let F="";F=0===C?"finalize":w===C?"upload, finalize":"upload";const j={"X-Goog-Upload-Command":F,"X-Goog-Upload-Offset":`${m.current}`},J=r.slice(D,D+C);if(null===J)throw OI();const lt=new so(t,"POST",function se(Et,Vt){const Zt=Tu(Et,["active","final"]),Hr=m.current+C,Hs=r.size();let CN;return CN="final"===Zt?hf(e,a)(Et,Vt):null,new Wg(Hr,Hs,"final"===Zt,CN)},e.maxUploadRetryTime);return lt.headers=j,lt.body=J.uploadData(),lt.progressCallback=h||null,lt.errorHandler=id(n),lt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const h=this._ref.storage._makeRequest(c,ao,i,a,!1);this._request=h,h.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=zS(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ao,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function oC(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},m=function h(){let lt="";for(let Et=0;Et<2;Et++)lt+=Math.random().toString().slice(2);return lt}();c["Content-Type"]="multipart/related; boundary="+m;const w=sC(e,r,i),C=zg(w,t),F=$o.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+C+"\r\n--"+m+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===F)throw OI();const j={name:w.fullPath},J=Bo(a,n.host,n._protocol),dt=n.maxUploadRetryTime,yt=new so(J,"POST",hf(n,t),dt);return yt.urlParams=j,yt.headers=c,yt.body=F.uploadData(),yt.errorHandler=id(e),yt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ao,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=bc(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Kg(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new KS(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Kg(this._state)){case Si.SUCCESS:Rc(this._resolve.bind(null,this.snapshot))();break;case Si.CANCELED:case Si.ERROR:Rc(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Kg(this._state)){case Si.RUNNING:case Si.PAUSED:e.next&&Rc(e.next.bind(e,this.snapshot))();break;case Si.SUCCESS:e.complete&&Rc(e.complete.bind(e))();break;default:e.error&&Rc(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class xc{constructor(e,t){this._service=e,this._location=t instanceof zn?t:zn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new xc(e,t)}get root(){const e=new zn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return XI(this._location.path)}get storage(){return this._service}get parent(){const e=function VS(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new zn(this._location.bucket,e);return new xc(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw FI(e)}}function sd(n,e,t){return gv.apply(this,arguments)}function gv(){return(gv=(0,ve.Z)(function*(n,e,t){const i=yield hC(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield sd(n,e,i.nextPageToken))})).apply(this,arguments)}function hC(n,e){null!=e&&"number"==typeof e.maxResults&&sv("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=hv(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,ao)}function pC(n){n._throwIfRoot("getDownloadURL");const e=function rC(n,e,t){const i=Bo(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new so(i,"GET",function GS(n,e){return function t(r,i){const a=cv(n,i,e);return oo(null!==a),function eC(n,e,t,r){const i=uv(e);if(null===i||!Ug(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const c=encodeURIComponent;return a.split(",").map(w=>{const D=n.fullPath;return Bo("/b/"+c(n.bucket)+"/o/"+c(D),t,r)+BI({alt:"media",token:w})})[0]}(a,i,n.host,n._protocol)}}(n,t),c);return h.errorHandler=jo(e),h}(n.storage,n._location,df());return n.storage.makeRequestWithTokens(e,ao).then(t=>{if(null===t)throw function QN(){return new rr(Gn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function mC(n,e){const t=function BS(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new zn(n._location.bucket,t);return new xc(n.storage,r)}function yC(n,e){if(n instanceof vC){const t=n;if(null==t._bucket)throw function PI(){return new rr(Gn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+TS+"' property when initializing the app?")}();const r=new xc(t,t._bucket);return null!=e?yC(r,e):r}return void 0!==e?mC(n,e):n}function eP(n,e){if(e&&function _C(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof vC)return function eA(n,e){return new xc(n,e)}(n,e);throw Dc("To use ref(service, url), the first argument must be a Storage instance.")}return yC(n,e)}function tA(n,e){const t=e?.[TS];return null==t?null:zn.makeFromBucketSpec(t,n)}class vC{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Lg,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?zn.makeFromBucketSpec(i,this._host):tA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?zn.makeFromBucketSpec(this._url,e):tA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){sv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){sv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ve.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ve.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xc(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new io(ro());{const c=function GI(n,e,t,r,i,a,c=!0){const h=BI(n.urlParams),m=n.url+h,w=Object.assign({},n.headers);return function HI(n,e){e&&(n["X-Firebase-GMPID"]=e)}(w,e),function $I(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(w,t),function jI(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(w,a),function av(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(w,r),new Bg(m,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,ve.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const mv="@firebase/storage";function IC(n,e){return eP(n=(0,N.m9)(n),e)}function TC(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new vC(t,r,i,e,pi.SDK_VERSION)}!function lA(){(0,pi._registerComponent)(new to.wA("storage",TC,"PUBLIC").setMultipleInstances(!0)),(0,pi.registerVersion)(mv,"0.11.2",""),(0,pi.registerVersion)(mv,"0.11.2","esm2017")}();class _f{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class bC{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new _f(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new _f(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?c=>t(new _f(c,this,this._ref)):{next:t.next?c=>t.next(new _f(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class Xg{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Pa(e,this._service))}get items(){return this._delegate.items.map(e=>new Pa(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Pa{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function uA(n,e){return mC(n,e)}(this._delegate,e);return new Pa(t,this.storage)}get root(){return new Pa(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Pa(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new bC(function rA(n,e,t){return function dC(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new cC(n,new $o(e),t)}(n=(0,N.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=is.RAW,r){this._throwIfRoot("putString");const i=Hg(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new bC(new cC(this._delegate,new $o(i.data,!0),a),this)}listAll(){return function rP(n){return function gf(n){const e={prefixes:[],items:[]};return sd(n,e).then(()=>e)}(n=(0,N.m9)(n))}(this._delegate).then(e=>new Xg(e,this.storage))}list(e){return function oA(n,e){return hC(n=(0,N.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Xg(t,this.storage))}getMetadata(){return function iA(n){return function JS(n){n._throwIfRoot("getMetadata");const e=zS(n.storage,n._location,df());return n.storage.makeRequestWithTokens(e,ao)}(n=(0,N.m9)(n))}(this._delegate)}updateMetadata(e){return function sA(n,e){return function fC(n,e){n._throwIfRoot("updateMetadata");const t=function iC(n,e,t,r){const a=Bo(e.fullServerUrl(),n.host,n._protocol),h=zg(t,r),w=n.maxOperationRetryTime,C=new so(a,"PATCH",hf(n,r),w);return C.headers={"Content-Type":"application/json; charset=utf-8"},C.body=h,C.errorHandler=jo(e),C}(n.storage,n._location,e,df());return n.storage.makeRequestWithTokens(t,ao)}(n=(0,N.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function aA(n){return pC(n=(0,N.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function EC(n){return function gC(n){n._throwIfRoot("deleteObject");const e=function XN(n,e){const r=Bo(e.fullServerUrl(),n.host,n._protocol),h=new so(r,"DELETE",function c(m,w){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=jo(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ao)}(n=(0,N.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw FI(e)}}class _v{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(yv(e))throw Dc("ref() expected a child path but got a URL, use refFromURL instead.");return new Pa(IC(this._delegate,e),this)}refFromURL(e){if(!yv(e))throw Dc("refFromURL() expected a full URL but got a child path, use ref() instead.");try{zn.makeFromUrl(e,this._delegate.host)}catch{throw Dc("refFromUrl() expected a valid full URL but got an invalid one.")}return new Pa(IC(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function CC(n,e,t,r={}){!function tP(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,N.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function yv(n){return/^[A-Za-z]+:\/\//.test(n)}function vv(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new _v(t,r)}function SC(n){const e=function DC(n){return new Fi.y(e=>{const t=c=>e.next(c);t(n.snapshot);const a=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){a()}}).pipe(function nv(n,e=Ma.z){return(0,yr.e)((t,r)=>{let i=null,a=null,c=null;const h=()=>{if(i){i.unsubscribe(),i=null;const w=a;a=null,r.next(w)}};function m(){const w=c+n,C=e.now();if(C<w)return i=this.schedule(void 0,w-C),void r.add(i);h()}t.subscribe((0,Ln.x)(r,w=>{a=w,c=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Tt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Jg(n){return{getDownloadURL:()=>st(void 0).pipe(an.fc,Hn(()=>n.getDownloadURL()),an.iC),getMetadata:()=>st(void 0).pipe(an.fc,Hn(()=>n.getMetadata()),an.iC),delete:()=>(0,Xt.D)(n.delete()),child:e=>Jg(n.child(e)),updateMetadata:e=>(0,Xt.D)(n.updateMetadata(e)),put:(e,t)=>SC(n.put(e,t)),putString:(e,t,r)=>SC(n.putString(e,t,r)),list:e=>(0,Xt.D)(n.list(e)),listAll:()=>(0,Xt.D)(n.listAll())}}!function pA(n){const e={TaskState:Si,TaskEvent:JN,StringFormat:is,Storage:_v,Reference:Pa};n.INTERNAL.registerComponent(new to.wA("storage-compat",vv,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(rv.Z);const gA=new _.OlP("angularfire2.storageBucket"),mA=new _.OlP("angularfire2.storage.maxUploadRetryTime"),_A=new _.OlP("angularfire2.storage.maxOperationRetryTime"),yA=new _.OlP("angularfire2.storage.use-emulator");let vA=(()=>{class n{constructor(t,r,i,a,c,h,m,w,C,D){const R=(0,nr.on)(t,c,r);this.storage=(0,nr.cc)(`${R.name}.storage.${i}`,"AngularFireStorage",R.name,()=>{const F=c.runOutsideAngular(()=>R.storage(i||void 0)),j=C;return j&&F.useEmulator(...j),m&&F.setMaxUploadRetryTime(m),w&&F.setMaxOperationRetryTime(w),F},[m,w])}ref(t){return Jg(this.storage.ref(t))}refFromURL(t){return Jg(this.storage.refFromURL(t))}upload(t,r,i){return Jg(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(nr.Dh),_.LFG(nr.xv,8),_.LFG(gA,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(an.HU),_.LFG(mA,8),_.LFG(_A,8),_.LFG(yA,8),_.LFG(nd,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),AC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({}),n})(),RC=(()=>{class n{constructor(){Cu.Z.registerVersion("angularfire",an.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[vA],imports:[AC]}),n})();function em(){return(0,yr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Ln.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function wv(n,e=Xi.y){return n=n??xC,(0,yr.e)((t,r)=>{let i,a=!0;t.subscribe((0,Ln.x)(r,c=>{const h=e(c);(a||!n(i,h))&&(a=!1,i=h,r.next(c))}))})}function xC(n,e){return n===e}P(8971);var wt,wA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Oa={},yf=yf||{},Kt=wA||self;function od(){}function tm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function vf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Iv="closure_uid_"+(1e9*Math.random()>>>0),EA=0;function ad(n,e,t){return n.call.apply(n.bind,arguments)}function MC(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Ai(n,e,t){return(Ai=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ad:MC).apply(null,arguments)}function Cv(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ii(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[i].apply(r,c)}}function Ho(){this.s=this.s,this.o=this.o}Ho.prototype.s=!1,Ho.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Ev(n){Object.prototype.hasOwnProperty.call(n,Iv)&&n[Iv]||(n[Iv]=++EA)}(this)},Ho.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const nm=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Tv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function bv(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(tm(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let c=0;c<a;c++)n[i+c]=r[c]}else n.push(r)}}function si(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}si.prototype.h=function(){this.defaultPrevented=!0};var NC=function(){if(!Kt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Kt.addEventListener("test",od,e),Kt.removeEventListener("test",od,e)}catch{}return n}();function wf(n){return/^[\s\xa0]*$/.test(n)}var Dv=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function rm(n,e){return n<e?-1:n>e?1:0}function im(){var n=Kt.navigator;return n&&(n=n.userAgent)?n:""}function Go(n){return-1!=im().indexOf(n)}function Sv(n){return Sv[" "](n),n}Sv[" "]=od;var sm,n,PC=Go("Opera"),Ef=Go("Trident")||Go("MSIE"),Av=Go("Edge"),Rv=Av||Ef,OC=Go("Gecko")&&!(-1!=im().toLowerCase().indexOf("webkit")&&!Go("Edge"))&&!(Go("Trident")||Go("MSIE"))&&!Go("Edge"),aP=-1!=im().toLowerCase().indexOf("webkit")&&!Go("Edge");function kC(){var n=Kt.document;return n?n.documentMode:void 0}e:{var xv="",Mv=(n=im(),OC?/rv:([^\);]+)(\)|;)/.exec(n):Av?/Edge\/([\d\.]+)/.exec(n):Ef?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):aP?/WebKit\/(\S+)/.exec(n):PC?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Mv&&(xv=Mv?Mv[1]:""),Ef){var Nv=kC();if(null!=Nv&&Nv>parseFloat(xv)){sm=String(Nv);break e}}sm=xv}var TA={};var DA=Kt.document&&Ef&&(kC()||parseInt(sm,10))||void 0;function If(n,e){if(si.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(OC){e:{try{Sv(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:SA[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&If.X.h.call(this)}}ii(If,si);var SA={2:"touch",3:"pen",4:"mouse"};If.prototype.h=function(){If.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ka="closure_listenable_"+(1e6*Math.random()|0),FC=0;function UC(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++FC,this.ba=this.ea=!1}function Cf(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function om(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Ov(n){const e={};for(const t in n)e[t]=n[t];return e}const VC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function BC(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<VC.length;a++)t=VC[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function kv(n){this.src=n,this.g={},this.h=0}function Lv(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=nm(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Cf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Fv(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}kv.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=Fv(n,e,r,i);return-1<c?(e=n[c],t||(e.ea=!1)):((e=new UC(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var Uv="closure_lm_"+(1e6*Math.random()|0),Vv={};function $C(n,e,t,r,i){if(r&&r.once)return am(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)$C(n,e[a],t,r,i);return null}return t=Hv(t),n&&n[ka]?n.N(e,t,vf(r)?!!r.capture:!!r,i):ud(n,e,t,!1,r,i)}function ud(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=vf(i)?!!i.capture:!!i,h=$v(n);if(h||(n[Uv]=h=new kv(n)),(t=h.add(e,t,r,c,a)).proxy)return t;if(r=function AA(){const e=Tf;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)NC||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(um(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function am(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)am(n,e[a],t,r,i);return null}return t=Hv(t),n&&n[ka]?n.O(e,t,vf(r)?!!r.capture:!!r,i):ud(n,e,t,!0,r,i)}function uo(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)uo(n,e[a],t,r,i);else r=vf(r)?!!r.capture:!!r,t=Hv(t),n&&n[ka]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Fv(a=n.g[e],t,r,i))&&(Cf(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=$v(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Fv(e,t,r,i)),(t=-1<n?e[n]:null)&&Bv(t))}function Bv(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[ka])Lv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(um(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=$v(e))?(Lv(t,n),0==t.h&&(t.src=null,e[Uv]=null)):Cf(n)}}}function um(n){return n in Vv?Vv[n]:Vv[n]="on"+n}function Tf(n,e){if(n.ba)n=!0;else{e=new If(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Bv(n),n=t.call(r,e)}return n}function $v(n){return(n=n[Uv])instanceof kv?n:null}var jv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hv(n){return"function"==typeof n?n:(n[jv]||(n[jv]=function(e){return n.handleEvent(e)}),n[jv])}function Mr(){Ho.call(this),this.i=new kv(this),this.P=this,this.I=null}function $r(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new si(e,n);else if(e instanceof si)e.target=e.target||n;else{var i=e;BC(e=new si(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=cm(c,r,!0,e)&&i}if(i=cm(c=e.g=n,r,!0,e)&&i,i=cm(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=cm(c=e.g=t[a],r,!1,e)&&i}function cm(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.ba&&c.capture==t){var h=c.listener,m=c.ha||c.src;c.ea&&Lv(n.i,c),i=!1!==h.call(m,r)&&i}}return i&&!r.defaultPrevented}ii(Mr,Ho),Mr.prototype[ka]=!0,Mr.prototype.removeEventListener=function(n,e,t,r){uo(this,n,e,t,r)},Mr.prototype.M=function(){if(Mr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Cf(t[r]);delete n.g[e],n.h--}}this.I=null},Mr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Mr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Gv=Kt.JSON.stringify;function jC(){var n=zC;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var hm,lm=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new GC,n=>n.reset());class GC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function zv(n){Kt.setTimeout(()=>{throw n},0)}function dm(n,e){hm||function Wv(){var n=Kt.Promise.resolve(void 0);hm=function(){n.then(RA)}}(),bf||(hm(),bf=!0),zC.add(n,e)}var bf=!1,zC=new class HC{constructor(){this.h=this.g=null}add(e,t){const r=lm.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function RA(){for(var n;n=jC();){try{n.h.call(n.g)}catch(t){zv(t)}var e=lm;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}bf=!1}function fm(n,e){Mr.call(this),this.h=n||1,this.g=e||Kt,this.j=Ai(this.lb,this),this.l=Date.now()}function qv(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function pm(n,e,t){if("function"==typeof n)t&&(n=Ai(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ai(n.handleEvent,n)}return 2147483647<Number(e)?-1:Kt.setTimeout(n,e||0)}function gm(n){n.g=pm(()=>{n.g=null,n.i&&(n.i=!1,gm(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ii(fm,Mr),(wt=fm.prototype).ca=!1,wt.R=null,wt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),$r(this,"tick"),this.ca&&(qv(this),this.start()))}},wt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},wt.M=function(){fm.X.M.call(this),qv(this),delete this.g};class WC extends Ho{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:gm(this)}M(){super.M(),this.g&&(Kt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Df(n){Ho.call(this),this.h=n,this.g={}}ii(Df,Ho);var Kv=[];function Zv(n,e,t,r){Array.isArray(t)||(t&&(Kv[0]=t.toString()),t=Kv);for(var i=0;i<t.length;i++){var a=$C(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function qC(n){om(n.g,function(e,t){this.g.hasOwnProperty(t)&&Bv(e)},n),n.g={}}function Sf(){this.g=!0}function Mc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Bi(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return Gv(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Df.prototype.M=function(){Df.X.M.call(this),qC(this)},Df.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Sf.prototype.Aa=function(){this.g=!1},Sf.prototype.info=function(){};var Ls={},ZC=null;function mm(){return ZC=ZC||new Mr}function NA(n){si.call(this,Ls.Pa,n)}function _m(n){const e=mm();$r(e,new NA(e))}function Yv(n,e){si.call(this,Ls.STAT_EVENT,n),this.stat=e}function gi(n){const e=mm();$r(e,new Yv(e,n))}function cd(n,e){si.call(this,Ls.Qa,n),this.size=e}function Af(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Kt.setTimeout(function(){n()},e)}Ls.Pa="serverreachability",ii(NA,si),Ls.STAT_EVENT="statevent",ii(Yv,si),Ls.Qa="timingevent",ii(cd,si);var ld={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},YC={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function ym(){}function XC(){}ym.prototype.h=null;var wm,Rf={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function xf(){si.call(this,"d")}function vm(){si.call(this,"c")}function Nc(){}function Pc(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Df(this),this.O=JC,this.T=new fm(n=Rv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new PA}function PA(){this.i=null,this.g="",this.h=!1}ii(xf,si),ii(vm,si),ii(Nc,ym),Nc.prototype.g=function(){return new XMLHttpRequest},Nc.prototype.i=function(){return{}},wm=new Nc;var JC=45e3,Qv={},Mf={};function bu(n,e,t){n.K=1,n.v=kf(zo(e)),n.s=t,n.P=!0,eT(n,null)}function eT(n,e){n.F=Date.now(),Nf(n),n.A=zo(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),Uf(t.i,"t",r),n.C=0,t=n.l.H,n.h=new PA,n.g=pw(n.l,t?e:null,!n.s),0<n.N&&(n.L=new WC(Ai(n.La,n,n.g),n.N)),Zv(n.S,n.g,"readystatechange",n.ib),e=n.H?Ov(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),_m(),function KC(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",h=a.split("&"),m=0;m<h.length;m++){var w=h[m].split("=");if(1<w.length){var C=w[0];w=w[1];var D=C.split("_");c=2<=D.length&&"type"==D[1]?c+(C+"=")+w+"&":c+(C+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Xv(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Em(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=uP(n,t),i==Mf){4==e&&(n.o=4,gi(14),r=!1),Mc(n.j,n.m,null,"[Incomplete Response]");break}if(i==Qv){n.o=4,gi(15),Mc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Mc(n.j,n.m,i,null),Cm(n,i)}Xv(n)&&i!=Mf&&i!=Qv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,gi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Hf(e),e.K=!0,gi(11))):(Mc(n.j,n.m,t,"[Invalid Chunked Response]"),Oc(n),Pf(n))}function uP(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Mf:(t=Number(e.substring(t,r)),isNaN(t)?Qv:(r+=1)+t>e.length?Mf:(e=e.substr(r,t),n.C=r+t,e))}function Nf(n){n.V=Date.now()+n.O,OA(n,n.O)}function OA(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Af(Ai(n.gb,n),e)}function Im(n){n.B&&(Kt.clearTimeout(n.B),n.B=null)}function Pf(n){0==n.l.G||n.I||qA(n.l,n)}function Oc(n){Im(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,qv(n.T),qC(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Cm(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Am(t.h,n)))if(!n.J&&Am(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;km(t),jf(t)}Om(t),gi(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Af(Ai(t.cb,t),6e3));if(1>=Sm(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Uc(t,11)}else if((n.J||t.g==n)&&km(t),!wf(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.T=w[0],w=w[1],2==t.G)if("c"==w[0]){t.I=w[1],t.ka=w[2];const C=w[3];null!=C&&(t.ma=C,t.j.info("VER="+t.ma));const D=w[4];null!=D&&(t.Ca=D,t.j.info("SVER="+t.Ca));const R=w[5];null!=R&&"number"==typeof R&&0<R&&(t.J=r=1.5*R,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const F=n.g;if(F){const j=F.g?F.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(j){var a=r.h;a.g||-1==j.indexOf("spdy")&&-1==j.indexOf("quic")&&-1==j.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(iw(a,a.h),a.h=null))}if(r.D){const J=F.g?F.g.getResponseHeader("X-HTTP-Session-Id"):null;J&&(r.za=J,Qn(r.F,r.D,J))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var c=n;if((r=t).sa=fT(r,r.H?r.ka:null,r.V),c.J){BA(r.h,c);var h=c,m=r.J;m&&h.setTimeout(m),h.B&&(Im(h),Nf(h)),r.g=c}else La(r);0<t.i.length&&Pm(t)}else"stop"!=w[0]&&"close"!=w[0]||Uc(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Uc(t,7):dw(t):"noop"!=w[0]&&t.l&&t.l.wa(w),t.A=0)}_m()}catch{}}function Jv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(tm(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function kA(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(tm(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function tT(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(tm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(wt=Pc.prototype).setTimeout=function(n){this.O=n},wt.ib=function(n){n=n.target;const e=this.L;e&&3==lo(n)?e.l():this.La(n)},wt.La=function(n){try{if(n==this.g)e:{const C=lo(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>C)&&(3!=C||Rv||this.g&&(this.h.h||this.g.fa()||aT(this.g)))){this.I||4!=C||7==e||_m(),Im(this);var t=this.g.aa();this.Y=t;t:if(Xv(this)){var r=aT(this.g);n="";var i=r.length,a=4==lo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Oc(this),Pf(this);var c="";break t}this.h.i=new Kt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==t,function xA(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.U,C,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!wf(h)){var w=h;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,gi(12),Oc(this),Pf(this);break e}Mc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Cm(this,t)}this.P?(Em(this,C,c),Rv&&this.i&&3==C&&(Zv(this.S,this.T,"tick",this.hb),this.T.start())):(Mc(this.j,this.m,c,null),Cm(this,c)),4==C&&Oc(this),this.i&&!this.I&&(4==C?qA(this.l,this):(this.i=!1,Nf(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,gi(12)):(this.o=0,gi(13)),Oc(this),Pf(this)}}}catch{}},wt.hb=function(){if(this.g){var n=lo(this.g),e=this.g.fa();this.C<e.length&&(Im(this),Em(this,n,e),this.i&&4!=n&&Nf(this))}},wt.cancel=function(){this.I=!0,Oc(this)},wt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function MA(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(_m(),gi(17)),Oc(this),this.o=2,Pf(this)):OA(this,this.V-n)};var ew=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kc(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof kc){this.h=void 0!==e?e:n.h,Tm(this,n.j),this.s=n.s,this.g=n.g,Of(this,n.m),this.l=n.l,e=n.i;var t=new bm;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),tw(this,t),this.o=n.o}else n&&(t=String(n).match(ew))?(this.h=!!e,Tm(this,t[1]||"",!0),this.s=Lf(t[2]||""),this.g=Lf(t[3]||"",!0),Of(this,t[4]),this.l=Lf(t[5]||"",!0),tw(this,t[6]||"",!0),this.o=Lf(t[7]||"")):(this.h=!!e,this.i=new bm(null,this.h))}function zo(n){return new kc(n)}function Tm(n,e,t){n.j=t?Lf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Of(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function tw(n,e,t){e instanceof bm?(n.i=e,function nT(n,e){e&&!n.j&&(Lc(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(FA(this,r),Uf(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Ff(e,hP)),n.i=new bm(e,n.h))}function Qn(n,e,t){n.i.set(e,t)}function kf(n){return Qn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Lf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ff(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,cP),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function cP(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}kc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ff(e,nw,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ff(e,nw,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ff(t,"/"==t.charAt(0)?dP:lP,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ff(t,fP)),n.join("")};var nw=/[#\/\?@]/g,lP=/[#\?:]/g,dP=/[#\?]/g,hP=/[#\?@]/g,fP=/#/g;function bm(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Lc(n){n.g||(n.g=new Map,n.h=0,n.i&&function LA(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function FA(n,e){Lc(n),e=Vf(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function UA(n,e){return Lc(n),e=Vf(n,e),n.g.has(e)}function Uf(n,e,t){FA(n,e),0<t.length&&(n.i=null,n.g.set(Vf(n,e),Tv(t)),n.h+=t.length)}function Vf(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function rw(n){this.l=n||rT,n=Kt.PerformanceNavigationTiming?0<(n=Kt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Kt.g&&Kt.g.Ga&&Kt.g.Ga()&&Kt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(wt=bm.prototype).add=function(n,e){Lc(this),this.i=null,n=Vf(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},wt.forEach=function(n,e){Lc(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},wt.oa=function(){Lc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},wt.W=function(n){Lc(this);let e=[];if("string"==typeof n)UA(this,n)&&(e=e.concat(this.g.get(Vf(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},wt.set=function(n,e){return Lc(this),this.i=null,UA(this,n=Vf(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},wt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},wt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),c=this.W(r);for(r=0;r<c.length;r++){var i=a;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var rT=10;function VA(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Sm(n){return n.h?1:n.g?n.g.size:0}function Am(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function iw(n,e){n.g?n.g.add(e):n.h=e}function BA(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function $A(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Tv(n.i)}function sw(){}function jA(){this.g=new sw}function Rm(n,e,t){const r=t||"";try{Jv(n,function(i,a){let c=i;vf(i)&&(c=Gv(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ow(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function xm(n){this.l=n.ac||null,this.j=n.jb||!1}function aw(n,e){Mr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=uw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}rw.prototype.cancel=function(){if(this.i=$A(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},sw.prototype.stringify=function(n){return Kt.JSON.stringify(n,void 0)},sw.prototype.parse=function(n){return Kt.JSON.parse(n,void 0)},ii(xm,ym),xm.prototype.g=function(){return new aw(this.l,this.j)},xm.prototype.i=function(n){return function(){return n}}({}),ii(aw,Mr);var uw=0;function iT(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Bf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Mm(n)}function Mm(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(wt=aw.prototype).open=function(n,e){if(this.readyState!=uw)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Mm(this)},wt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Kt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},wt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bf(this)),this.readyState=uw},wt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Mm(this)),this.g&&(this.readyState=3,Mm(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Kt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;iT(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},wt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Bf(this):Mm(this),3==this.readyState&&iT(this)}},wt.Va=function(n){this.g&&(this.response=this.responseText=n,Bf(this))},wt.Ua=function(n){this.g&&(this.response=n,Bf(this))},wt.ga=function(){this.g&&Bf(this)},wt.setRequestHeader=function(n,e){this.v.append(n,e)},wt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},wt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(aw.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var GA=Kt.JSON.parse;function dr(n){Mr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=cw,this.K=this.L=!1}ii(dr,Mr);var cw="",pP=/^https?$/i,co=["POST","PUT"];function Nm(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,sT(n),$i(n)}function sT(n){n.D||(n.D=!0,$r(n,"complete"),$r(n,"error"))}function WA(n){if(n.h&&typeof yf<"u"&&(!n.C[1]||4!=lo(n)||2!=n.aa()))if(n.v&&4==lo(n))pm(n.Ha,0,n);else if($r(n,"readystatechange"),4==lo(n)){n.h=!1;try{const h=n.aa();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(ew)[1]||null;if(!i&&Kt.self&&Kt.self.location){var a=Kt.self.location.protocol;i=a.substr(0,a.length-1)}r=!pP.test(i?i.toLowerCase():"")}t=r}if(t)$r(n,"complete"),$r(n,"success");else{n.m=6;try{var c=2<lo(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.aa()+"]",sT(n)}}finally{$i(n)}}}function $i(n,e){if(n.g){oT(n);const t=n.g,r=n.C[0]?od:null;n.g=null,n.C=null,e||$r(n,"ready");try{t.onreadystatechange=r}catch{}}}function oT(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Kt.clearTimeout(n.A),n.A=null)}function lo(n){return n.g?n.g.readyState:0}function aT(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case cw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function uT(n){let e="";return om(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function $f(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=uT(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Qn(n,e,t))}function dd(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function lw(n){this.Ca=0,this.i=[],this.j=new Sf,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=dd("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=dd("baseRetryDelayMs",5e3,n),this.bb=dd("retryDelaySeedMs",1e4,n),this.$a=dd("forwardChannelMaxRetries",2,n),this.ta=dd("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new rw(n&&n.concurrentRequestLimit),this.Fa=new jA,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function dw(n){if(hw(n),3==n.G){var e=n.U++,t=zo(n.F);Qn(t,"SID",n.I),Qn(t,"RID",e),Qn(t,"TYPE","terminate"),Fc(n,t),(e=new Pc(n,n.j,e,void 0)).K=2,e.v=kf(zo(t)),t=!1,Kt.navigator&&Kt.navigator.sendBeacon&&(t=Kt.navigator.sendBeacon(e.v.toString(),"")),!t&&Kt.Image&&((new Image).src=e.v,t=!0),t||(e.g=pw(e.l,null),e.g.da(e.v)),e.F=Date.now(),Nf(e)}hT(n)}function jf(n){n.g&&(Hf(n),n.g.cancel(),n.g=null)}function hw(n){jf(n),n.u&&(Kt.clearTimeout(n.u),n.u=null),km(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Kt.clearTimeout(n.m),n.m=null)}function Pm(n){VA(n.h)||n.m||(n.m=!0,dm(n.Ja,n),n.C=0)}function lT(n,e){var t;t=e?e.m:n.U++;const r=zo(n.F);Qn(r,"SID",n.I),Qn(r,"RID",t),Qn(r,"AID",n.T),Fc(n,r),n.o&&n.s&&$f(r,n.o,n.s),t=new Pc(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Wo(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),iw(n.h,t),bu(t,r,e)}function Fc(n,e){n.ia&&om(n.ia,function(t,r){Qn(e,r,t)}),n.l&&Jv({},function(t,r){Qn(e,r,t)})}function Wo(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Ai(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].h,c.push("ofs="+a)):a=0:c.push("ofs="+a);let h=!0;for(let m=0;m<t;m++){let w=i[m].h;const C=i[m].g;if(w-=a,0>w)a=Math.max(0,i[m].h-100),h=!1;else try{Rm(C,c,"req"+w+"_")}catch{r&&r(C)}}if(h){r=c.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function La(n){n.g||n.u||(n.Z=1,dm(n.Ia,n),n.A=0)}function Om(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Af(Ai(n.Ia,n),dT(n,n.A)),n.A++,0))}function Hf(n){null!=n.B&&(Kt.clearTimeout(n.B),n.B=null)}function fw(n){n.g=new Pc(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=zo(n.sa);Qn(e,"RID","rpc"),Qn(e,"SID",n.I),Qn(e,"CI",n.L?"0":"1"),Qn(e,"AID",n.T),Qn(e,"TYPE","xmlhttp"),Fc(n,e),n.o&&n.s&&$f(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=kf(zo(e)),t.s=null,t.P=!0,eT(t,n)}function km(n){null!=n.v&&(Kt.clearTimeout(n.v),n.v=null)}function qA(n,e){var t=null;if(n.g==e){km(n),Hf(n),n.g=null;var r=2}else{if(!Am(n.h,e))return;t=e.D,BA(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;$r(r=mm(),new cd(r,t)),Pm(n)}else La(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function cT(n,e){return!(Sm(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Af(Ai(n.Ja,n,e),dT(n,n.C)),n.C++,0)))}(n,e)||2==r&&Om(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Uc(n,5);break;case 4:Uc(n,10);break;case 3:Uc(n,6);break;default:Uc(n,2)}}function dT(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Uc(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Ai(n.kb,n);t||(t=new kc("//www.google.com/images/cleardot.gif"),Kt.location&&"http"==Kt.location.protocol||Tm(t,"https"),kf(t)),function HA(n,e){const t=new Sf;if(Kt.Image){const r=new Image;r.onload=Cv(ow,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Cv(ow,t,r,"TestLoadImage: error",!1,e),r.onabort=Cv(ow,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Cv(ow,t,r,"TestLoadImage: timeout",!1,e),Kt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else gi(2);n.G=0,n.l&&n.l.va(e),hT(n),hw(n)}function hT(n){if(n.G=0,n.la=[],n.l){const e=$A(n.h);(0!=e.length||0!=n.i.length)&&(bv(n.la,e),bv(n.la,n.i),n.h.i.length=0,Tv(n.i),n.i.length=0),n.l.ua()}}function fT(n,e,t){var r=t instanceof kc?zo(t):new kc(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Of(r,r.m);else{var i=Kt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new kc(null,void 0);r&&Tm(a,r),e&&(a.g=e),i&&Of(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&Qn(r,t,e),Qn(r,"VER",n.ma),Fc(n,r),r}function pw(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new dr(t&&n.Da&&!n.ra?new xm({jb:!0}):n.ra)).Ka(n.H),e}function KA(){}function Gf(){if(Ef&&!(10<=Number(DA)))throw Error("Environmental error: no available transport.")}function vs(n,e){Mr.call(this),this.g=new lw(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!wf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!wf(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Du(this)}function gw(n){xf.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function ZA(){vm.call(this),this.status=1}function Du(n){this.g=n}(wt=dr.prototype).Ka=function(n){this.L=n},wt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():wm.g(),this.C=function QC(n){return n.h||(n.h=n.i())}(this.u?this.u:wm),this.g.onreadystatechange=Ai(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void Nm(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Kt.FormData&&n instanceof Kt.FormData,!(0<=nm(co,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,c]of t)this.g.setRequestHeader(a,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{oT(this),0<this.B&&((this.K=function zA(n){return Ef&&function bA(){return function CA(n){var e=TA;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Dv(String(sm)).split("."),t=Dv("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",a=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=rm(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||rm(0==i[2].length,0==a[2].length)||rm(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ai(this.qa,this)):this.A=pm(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){Nm(this,a)}},wt.qa=function(){typeof yf<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$r(this,"timeout"),this.abort(8))},wt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,$r(this,"complete"),$r(this,"abort"),$i(this))},wt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),$i(this,!0)),dr.X.M.call(this)},wt.Ha=function(){this.s||(this.F||this.v||this.l?WA(this):this.fb())},wt.fb=function(){WA(this)},wt.aa=function(){try{return 2<lo(this)?this.g.status:-1}catch{return-1}},wt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},wt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),GA(e)}},wt.Ea=function(){return this.m},wt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(wt=lw.prototype).ma=8,wt.G=1,wt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Pc(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=Ov(a),BC(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Wo(this,i,e),Qn(t=zo(this.F),"RID",n),Qn(t,"CVER",22),this.D&&Qn(t,"X-HTTP-Session-Id",this.D),Fc(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(uT(a)))+"&"+e:this.o&&$f(t,this.o,a)),iw(this.h,i),this.Ya&&Qn(t,"TYPE","init"),this.O?(Qn(t,"$req",e),Qn(t,"SID","null"),i.Z=!0,bu(i,t,null)):bu(i,t,e),this.G=2}}else 3==this.G&&(n?lT(this,n):0==this.i.length||VA(this.h)||lT(this))},wt.Ia=function(){if(this.u=null,fw(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Af(Ai(this.eb,this),n)}},wt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,gi(10),jf(this),fw(this))},wt.cb=function(){null!=this.v&&(this.v=null,jf(this),Om(this),gi(19))},wt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),gi(2)):(this.j.info("Failed to ping google.com"),gi(1))},(wt=KA.prototype).xa=function(){},wt.wa=function(){},wt.va=function(){},wt.ua=function(){},wt.Ra=function(){},Gf.prototype.g=function(n,e){return new vs(n,e)},ii(vs,Mr),vs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;gi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=fT(n,null,n.V),Pm(n)},vs.prototype.close=function(){dw(this.g)},vs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Gv(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Pm(e)},vs.prototype.M=function(){this.g.l=null,delete this.j,dw(this.g),delete this.g,vs.X.M.call(this)},ii(gw,xf),ii(ZA,vm),ii(Du,KA),Du.prototype.xa=function(){$r(this.g,"a")},Du.prototype.wa=function(n){$r(this.g,new gw(n))},Du.prototype.va=function(n){$r(this.g,new ZA)},Du.prototype.ua=function(){$r(this.g,"b")},Gf.prototype.createWebChannel=Gf.prototype.g,vs.prototype.send=vs.prototype.u,vs.prototype.open=vs.prototype.m,vs.prototype.close=vs.prototype.close,ld.NO_ERROR=0,ld.TIMEOUT=8,ld.HTTP_ERROR=6,YC.COMPLETE="complete",XC.EventType=Rf,Rf.OPEN="a",Rf.CLOSE="b",Rf.ERROR="c",Rf.MESSAGE="d",Mr.prototype.listen=Mr.prototype.N,dr.prototype.listenOnce=dr.prototype.O,dr.prototype.getLastError=dr.prototype.Oa,dr.prototype.getLastErrorCode=dr.prototype.Ea,dr.prototype.getStatus=dr.prototype.aa,dr.prototype.getResponseJson=dr.prototype.Sa,dr.prototype.getResponseText=dr.prototype.fa,dr.prototype.send=dr.prototype.da,dr.prototype.setWithCredentials=dr.prototype.Ka;var pT=Oa.createWebChannelTransport=function(){return new Gf},gT=Oa.getStatEventTarget=function(){return mm()},Lm=Oa.ErrorCode=ld,mT=Oa.EventType=YC,_T=Oa.Event=Ls,zf=Oa.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Fm=Oa.FetchXmlHttpFactory=xm,Wf=Oa.WebChannel=XC,YA=Oa.XhrIo=dr;const yT="@firebase/firestore";class oi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}oi.UNAUTHENTICATED=new oi(null),oi.GOOGLE_CREDENTIALS=new oi("google-credentials-uid"),oi.FIRST_PARTY=new oi("first-party-uid"),oi.MOCK_USER=new oi("mock-user");let qf="9.18.0";const Vc=new ns.Yd("@firebase/firestore");function Um(){return Vc.logLevel}function $e(n,...e){if(Vc.logLevel<=ns.in.DEBUG){const t=e.map(vT);Vc.debug(`Firestore (${qf}): ${n}`,...t)}}function Nr(n,...e){if(Vc.logLevel<=ns.in.ERROR){const t=e.map(vT);Vc.error(`Firestore (${qf}): ${n}`,...t)}}function hd(n,...e){if(Vc.logLevel<=ns.in.WARN){const t=e.map(vT);Vc.warn(`Firestore (${qf}): ${n}`,...t)}}function vT(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ht(n="Unexpected state"){const e=`FIRESTORE (${qf}) INTERNAL ASSERTION FAILED: `+n;throw Nr(e),new Error(e)}function Dt(n,e){n||ht()}function rt(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends N.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class qr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class mw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Bc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(oi.UNAUTHENTICATED))}shutdown(){}}class wT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _w{constructor(e){this.t=e,this.currentUser=oi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let c=new qr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new qr,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const w=c;e.enqueueRetryable((0,ve.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},m=w=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>m(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?m(w):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new qr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Dt("string"==typeof r.accessToken),new mw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dt(null===e||"string"==typeof e),new oi(e)}}class yw{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=oi.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Dt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class XA{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new yw(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(oi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Vm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vw{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.A;return this.A=a.token,$e("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Dt("string"==typeof t.token),this.A=t.token,new Vm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function mP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class JA{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=mP(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Jt(n,e){return n<e?-1:n>e?1:0}function Kf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Ew(n){return n+"\0"}class ir{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Le(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Le(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Le(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Le(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ir.fromMillis(Date.now())}static fromDate(e){return ir.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ir(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Jt(this.nanoseconds,e.nanoseconds):Jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Mt(e)}static min(){return new Mt(new ir(0,0))}static max(){return new Mt(new ir(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Zf{constructor(e,t,r){void 0===t?t=0:t>e.length&&ht(),void 0===r?r=e.length-t:r>e.length-t&&ht(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Zf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class vn extends Zf{construct(e,t,r){return new vn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Le(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new vn(t)}static emptyPath(){return new vn([])}}const ET=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hr extends Zf{construct(e,t,r){return new hr(e,t,r)}static isValidIdentifier(e){return ET.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new hr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Le(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Le(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Le(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===h?(c=!c,i++):"."!==h||c?(r+=h,i++):(a(),i++)}if(a(),c)throw new Le(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hr(t)}static emptyPath(){return new hr([])}}class tt{constructor(e){this.path=e}static fromPath(e){return new tt(vn.fromString(e))}static fromName(e){return new tt(vn.fromString(e).popFirst(5))}static empty(){return new tt(vn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===vn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return vn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new vn(e.slice()))}}class Bm{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Iw(n){return n.fields.find(e=>2===e.kind)}function Su(n){return n.fields.filter(e=>2!==e.kind)}Bm.UNKNOWN_ID=-1;class Tw{constructor(e,t){this.fieldPath=e,this.kind=t}}class $c{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new $c(0,Fs.min())}}function CT(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Mt.fromTimestamp(1e9===r?new ir(t+1,0):new ir(t,r));return new Fs(i,tt.empty(),e)}function TT(n){return new Fs(n.readTime,n.key,-1)}class Fs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Fs(Mt.min(),tt.empty(),-1)}static max(){return new Fs(Mt.max(),tt.empty(),-1)}}function bT(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=tt.comparator(n.documentKey,e.documentKey),0!==t?t:Jt(n.largestBatchId,e.largestBatchId))}const DT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ST{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Au(n){return AT.apply(this,arguments)}function AT(){return AT=(0,ve.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==DT)throw n;$e("LocalStore","Unexpectedly lost primary lease")}),AT.apply(this,arguments)}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,r)=>{t(e)})}static reject(e){return new ie((t,r)=>{r(e)})}static waitFor(e){return new ie((t,r)=>{let i=0,a=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++a,c&&a===i&&t()},m=>r(m))}),c=!0,a===i&&t()})}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next(i=>i?ie.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ie((r,i)=>{const a=e.length,c=new Array(a);let h=0;for(let m=0;m<a;m++){const w=m;t(e[w]).next(C=>{c[w]=C,++h,h===a&&r(c)},C=>i(C))}})}static doWhile(e,t){return new ie((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class bw{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new qr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new $m(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=RT(r.target.error);this.P.reject(new $m(e,i))}}static open(e,t,r,i){try{return new bw(t,e.transaction(i,r))}catch(a){throw new $m(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||($e("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new _P(t)}}class qo{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===qo.D((0,N.z$)())&&Nr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $e("SimpleDb","Removing database:",e),fd(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,N.hl)())return!1;if(qo.N())return!0;const e=(0,N.z$)(),t=qo.D(e),r=0<t&&t<10,i=qo.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.$)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return(0,ve.Z)(function*(){return t.db||($e("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new $m(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const h=c.target.error;i("VersionError"===h.name?new Le(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Le(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new $m(e,h))},a.onupgradeneeded=c=>{$e("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.S.F(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{$e("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ve.Z)(function*(){const c="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.O(e);const m=bw.open(a.db,e,c?"readonly":"readwrite",r),w=i(m).next(C=>(m.V(),C)).catch(C=>(m.abort(C),ie.reject(C))).toPromise();return w.catch(()=>{}),yield m.v,w}catch(m){const w=m,C="FirebaseError"!==w.name&&h<3;if($e("SimpleDb","Transaction failed with error:",w.message,"Retrying:",C),a.close(),!C)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class eR{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return fd(this.q.delete())}}class $m extends Le{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function jc(n){return"IndexedDbTransactionError"===n.name}class _P{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?($e("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):($e("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),fd(r)}add(e){return $e("SimpleDb","ADD",this.store.name,e,e),fd(this.store.add(e))}get(e){return fd(this.store.get(e)).next(t=>(void 0===t&&(t=null),$e("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return $e("SimpleDb","DELETE",this.store.name,e),fd(this.store.delete(e))}count(){return $e("SimpleDb","COUNT",this.store.name),fd(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(c,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ie((a,c)=>{i.onerror=h=>{c(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ie((i,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Y(e,t){$e("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Z=!1;const i=this.cursor(r);return this.H(i,(a,c,h)=>h.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new ie((r,i)=>{t.onerror=a=>{const c=RT(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}H(e,t){const r=[];return new ie((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const m=new eR(h),w=t(h.primaryKey,h.value,m);if(w instanceof ie){const C=w.catch(D=>(m.done(),ie.reject(D)));r.push(C)}m.isDone?i():null===m.G?h.continue():h.continue(m.G)}}).next(()=>ie.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function fd(n){return new ie((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=RT(r.target.error);t(i)}})}let tR=!1;function RT(n){const e=qo.D((0,N.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return tR||(tR=!0,setTimeout(()=>{throw r},0)),r}}return n}class s{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;$e("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ve.Z)(function*(){t.task=null;try{$e("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){jc(r)?$e("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Au(r)}yield t.nt(6e4)}))}}class o{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ve.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return ie.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return $e("IndexBackiller",`Processing collection: ${c}`),this.rt(e,c,i).next(h=>{i-=h,r.add(c)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const c=a.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ot(i,a)).next(h=>($e("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>c.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const c=TT(a);bT(c,r)>0&&(r=c)}),new Fs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let u=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>r.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class v{constructor(e,t,r,i,a,c,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.useFetchStreams=m}}class I{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new I("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof I&&e.projectId===this.projectId&&e.database===this.database}}function T(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function S(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function x(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function U(n){return null==n}function K(n){return 0===n&&1/n==-1/0}function ee(n){return"number"==typeof n&&Number.isInteger(n)&&!K(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ie extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ze{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw i instanceof DOMException?new Ie("Invalid base64 string: "+i):i}}(e);return new ze(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new ze(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ze.EMPTY_BYTE_STRING=new ze("");const pt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function At(n){if(Dt(!!n),"string"==typeof n){let e=0;const t=pt.exec(n);if(Dt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ce(n.seconds),nanos:Ce(n.nanos)}}function Ce(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function $t(n){return"string"==typeof n?ze.fromBase64String(n):ze.fromUint8Array(n)}function Wn(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function wr(n){const e=n.mapValue.fields.__previous_value__;return Wn(e)?wr(e):e}function jm(n){const e=At(n.mapValue.fields.__local_write_time__.timestampValue);return new ir(e.seconds,e.nanos)}const pd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},xT={nullValue:"NULL_VALUE"};function Yf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Wn(n)?4:EP(n)?9007199254740991:10:ht()}function Ru(n,e){if(n===e)return!0;const t=Yf(n);if(t!==Yf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return jm(n).isEqual(jm(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=At(r.timestampValue),c=At(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,$t(n.bytesValue).isEqual($t(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Ce(r.geoPointValue.latitude)===Ce(i.geoPointValue.latitude)&&Ce(r.geoPointValue.longitude)===Ce(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ce(r.integerValue)===Ce(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Ce(r.doubleValue),c=Ce(i.doubleValue);return a===c?K(a)===K(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return Kf(n.arrayValue.values||[],e.arrayValue.values||[],Ru);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(T(a)!==T(c))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===c[h]||!Ru(a[h],c[h])))return!1;return!0}(n,e);default:return ht()}var i}function Dw(n,e){return void 0!==(n.values||[]).find(t=>Ru(t,e))}function gd(n,e){if(n===e)return 0;const t=Yf(n),r=Yf(e);if(t!==r)return Jt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Jt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=Ce(i.integerValue||i.doubleValue),h=Ce(a.integerValue||a.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return yP(n.timestampValue,e.timestampValue);case 4:return yP(jm(n),jm(e));case 5:return Jt(n.stringValue,e.stringValue);case 6:return function(i,a){const c=$t(i),h=$t(a);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),h=a.split("/");for(let m=0;m<c.length&&m<h.length;m++){const w=Jt(c[m],h[m]);if(0!==w)return w}return Jt(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=Jt(Ce(i.latitude),Ce(a.latitude));return 0!==c?c:Jt(Ce(i.longitude),Ce(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],h=a.values||[];for(let m=0;m<c.length&&m<h.length;++m){const w=gd(c[m],h[m]);if(w)return w}return Jt(c.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===pd.mapValue&&a===pd.mapValue)return 0;if(i===pd.mapValue)return 1;if(a===pd.mapValue)return-1;const c=i.fields||{},h=Object.keys(c),m=a.fields||{},w=Object.keys(m);h.sort(),w.sort();for(let C=0;C<h.length&&C<w.length;++C){const D=Jt(h[C],w[C]);if(0!==D)return D;const R=gd(c[h[C]],m[w[C]]);if(0!==R)return R}return Jt(h.length,w.length)}(n.mapValue,e.mapValue);default:throw ht()}}function yP(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Jt(n,e);const t=At(n),r=At(e),i=Jt(t.seconds,r.seconds);return 0!==i?i:Jt(t.nanos,r.nanos)}function Hm(n){return nR(n)}function nR(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=At(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?$t(n.bytesValue).toBase64():"referenceValue"in n?tt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=nR(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const h of i)c?c=!1:a+=",",a+=`${h}:${nR(r.fields[h])}`;return a+"}"}(n.mapValue):ht();var e}function Qf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function rR(n){return!!n&&"integerValue"in n}function Sw(n){return!!n&&"arrayValue"in n}function vP(n){return!!n&&"nullValue"in n}function wP(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function MT(n){return!!n&&"mapValue"in n}function Aw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return S(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Aw(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Aw(n.arrayValue.values[t]);return e}return Object.assign({},n)}function EP(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function aU(n){return"nullValue"in n?xT:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Qf(I.empty(),tt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ht()}function uU(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Qf(I.empty(),tt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?pd:ht()}function IP(n,e){const t=gd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function CP(n,e){const t=gd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class md{constructor(e,t){this.position=e,this.inclusive=t}}function TP(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?tt.comparator(tt.fromName(c.referenceValue),t.key):gd(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function bP(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ru(n.position[t],e.position[t]))return!1;return!0}class DP{}class wn extends DP{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new cU(e,t,r):"array-contains"===t?new hU(e,r):"in"===t?new NP(e,r):"not-in"===t?new fU(e,r):"array-contains-any"===t?new pU(e,r):new wn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new lU(e,r):new dU(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(gd(t,this.value)):null!==t&&Yf(this.value)===Yf(t)&&this.matchesComparison(gd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ht()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Bn extends DP{constructor(e,t){super(),this.filters=e,this.op=t,this.ft=null}static create(e,t){return new Bn(e,t)}matches(e){return Gm(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(t=>t.isInequality());return null!==e?e.field:null}dt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Gm(n){return"and"===n.op}function iR(n){return"or"===n.op}function sR(n){return SP(n)&&Gm(n)}function SP(n){for(const e of n.filters)if(e instanceof Bn)return!1;return!0}function oR(n){if(n instanceof wn)return n.field.canonicalString()+n.op.toString()+Hm(n.value);if(sR(n))return n.filters.map(e=>oR(e)).join(",");{const e=n.filters.map(t=>oR(t)).join(",");return`${n.op}(${e})`}}function AP(n,e){return n instanceof wn?(t=n,(r=e)instanceof wn&&t.op===r.op&&t.field.isEqual(r.field)&&Ru(t.value,r.value)):n instanceof Bn?function(t,r){return r instanceof Bn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,c)=>i&&AP(a,r.filters[c]),!0)}(n,e):void ht();var t,r}function RP(n,e){const t=n.filters.concat(e);return Bn.create(t,n.op)}function xP(n){return n instanceof wn?`${(e=n).field.canonicalString()} ${e.op} ${Hm(e.value)}`:n instanceof Bn?function(e){return e.op.toString()+" {"+e.getFilters().map(xP).join(" ,")+"}"}(n):"Filter";var e}class cU extends wn{constructor(e,t,r){super(e,t,r),this.key=tt.fromName(r.referenceValue)}matches(e){const t=tt.comparator(e.key,this.key);return this.matchesComparison(t)}}class lU extends wn{constructor(e,t){super(e,"in",t),this.keys=MP(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class dU extends wn{constructor(e,t){super(e,"not-in",t),this.keys=MP(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function MP(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>tt.fromName(r.referenceValue))}class hU extends wn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Sw(t)&&Dw(t.arrayValue,this.value)}}class NP extends wn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Dw(this.value.arrayValue,t)}}class fU extends wn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Dw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Dw(this.value.arrayValue,t)}}class pU extends wn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Sw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Dw(this.value.arrayValue,r))}}class zm{constructor(e,t="asc"){this.field=e,this.dir=t}}function gU(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class jr{constructor(e,t){this.comparator=e,this.root=t||ji.EMPTY}insert(e,t){return new jr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ji.BLACK,null,null))}remove(e){return new jr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ji.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new NT(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new NT(this.root,e,this.comparator,!1)}getReverseIterator(){return new NT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new NT(this.root,e,this.comparator,!0)}}class NT{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ji{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??ji.RED,this.left=i??ji.EMPTY,this.right=a??ji.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ji(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ji.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ji.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ji.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ji.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ht();const e=this.left.check();if(e!==this.right.check())throw ht();return e+(this.isRed()?0:1)}}ji.EMPTY=null,ji.RED=!0,ji.BLACK=!1,ji.EMPTY=new class{constructor(){this.size=0}get key(){throw ht()}get value(){throw ht()}get color(){throw ht()}get left(){throw ht()}get right(){throw ht()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ji(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qn{constructor(e){this.comparator=e,this.data=new jr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new PP(this.data.getIterator())}getIteratorFrom(e){return new PP(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof qn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new qn(this.comparator);return t.data=e,t}}class PP{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Wm(n){return n.hasNext()?n.getNext():void 0}class Us{constructor(e){this.fields=e,e.sort(hr.comparator)}static empty(){return new Us([])}unionWith(e){let t=new qn(hr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Us(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Kf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ri{constructor(e){this.value=e}static empty(){return new Ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!MT(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Aw(t)}setAll(e){let t=hr.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=Aw(c):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());MT(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ru(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];MT(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){S(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Ri(Aw(this.value))}}function OP(n){const e=[];return S(n.fields,(t,r)=>{const i=new hr([t]);if(MT(r)){const a=OP(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new Us(e)}class fr{constructor(e,t,r,i,a,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=h}static newInvalidDocument(e){return new fr(e,0,Mt.min(),Mt.min(),Mt.min(),Ri.empty(),0)}static newFoundDocument(e,t,r,i){return new fr(e,1,t,Mt.min(),r,i,0)}static newNoDocument(e,t){return new fr(e,2,t,Mt.min(),Mt.min(),Ri.empty(),0)}static newUnknownDocument(e,t){return new fr(e,3,t,Mt.min(),Mt.min(),Ri.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Mt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof fr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class mU{constructor(e,t=null,r=[],i=[],a=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=h,this._t=null}}function aR(n,e=null,t=[],r=[],i=null,a=null,c=null){return new mU(n,e,t,r,i,a,c)}function Xf(n){const e=rt(n);if(null===e._t){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>oR(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),U(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Hm(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Hm(r)).join(",")),e._t=t}return e._t}function Rw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!gU(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!AP(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!bP(n.startAt,e.startAt)&&bP(n.endAt,e.endAt)}function PT(n){return tt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function OT(n,e){return n.filters.filter(t=>t instanceof wn&&t.field.isEqual(e))}function kP(n,e,t){let r=xT,i=!0;for(const a of OT(n,e)){let c=xT,h=!0;switch(a.op){case"<":case"<=":c=aU(a.value);break;case"==":case"in":case">=":c=a.value;break;case">":c=a.value,h=!1;break;case"!=":case"not-in":c=xT}IP({value:r,inclusive:i},{value:c,inclusive:h})<0&&(r=c,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];IP({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function LP(n,e,t){let r=pd,i=!0;for(const a of OT(n,e)){let c=pd,h=!0;switch(a.op){case">=":case">":c=uU(a.value),h=!1;break;case"==":case"in":case"<=":c=a.value;break;case"<":c=a.value,h=!1;break;case"!=":case"not-in":c=pd}CP({value:r,inclusive:i},{value:c,inclusive:h})>0&&(r=c,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];CP({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Hc{constructor(e,t=null,r=[],i=[],a=null,c="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=m,this.wt=null,this.gt=null}}function FP(n,e,t,r,i,a,c,h){return new Hc(n,e,t,r,i,a,c,h)}function qm(n){return new Hc(n)}function UP(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function uR(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function kT(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function cR(n){return null!==n.collectionGroup}function Jf(n){const e=rt(n);if(null===e.wt){e.wt=[];const t=kT(e),r=uR(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new zm(t)),e.wt.push(new zm(hr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new zm(hr.keyField(),a))}}}return e.wt}function ws(n){const e=rt(n);if(!e.gt)if("F"===e.limitType)e.gt=aR(e.path,e.collectionGroup,Jf(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Jf(e))t.push(new zm(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new md(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new md(e.startAt.position,e.startAt.inclusive):null;e.gt=aR(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.gt}function lR(n,e){e.getFirstInequalityField(),kT(n);const t=n.filters.concat([e]);return new Hc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function LT(n,e,t){return new Hc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function xw(n,e){return Rw(ws(n),ws(e))&&n.limitType===e.limitType}function VP(n){return`${Xf(ws(n))}|lt:${n.limitType}`}function dR(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>xP(r)).join(", ")}]`),U(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Hm(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Hm(r)).join(",")),`Target(${t})`}(ws(n))}; limitType=${n.limitType})`}function Mw(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):tt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Jf(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,c){const h=TP(i,a,c);return i.inclusive?h<=0:h<0}(t.startAt,Jf(t),r)||t.endAt&&!function(i,a,c){const h=TP(i,a,c);return i.inclusive?h>=0:h>0}(t.endAt,Jf(t),r)));var t,r}function BP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function $P(n){return(e,t)=>{let r=!1;for(const i of Jf(n)){const a=_U(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function _U(n,e,t){const r=n.field.isKeyField()?tt.comparator(e.key,t.key):function(i,a,c){const h=a.data.field(i),m=c.data.field(i);return null!==h&&null!==m?gd(h,m):ht()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ht()}}function jP(n,e){if(n.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:K(e)?"-0":e}}function HP(n){return{integerValue:""+n}}function GP(n,e){return ee(e)?HP(e):jP(n,e)}class FT{constructor(){this._=void 0}}function yU(n,e,t){return n instanceof Km?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof ep?WP(n,e):n instanceof tp?qP(n,e):function(r,i){const a=zP(r,i),c=KP(a)+KP(r.It);return rR(a)&&rR(r.It)?HP(c):jP(r.Tt,c)}(n,e)}function vU(n,e,t){return n instanceof ep?WP(n,e):n instanceof tp?qP(n,e):t}function zP(n,e){return n instanceof Zm?rR(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Km extends FT{}class ep extends FT{constructor(e){super(),this.elements=e}}function WP(n,e){const t=ZP(e);for(const r of n.elements)t.some(i=>Ru(i,r))||t.push(r);return{arrayValue:{values:t}}}class tp extends FT{constructor(e){super(),this.elements=e}}function qP(n,e){let t=ZP(e);for(const r of n.elements)t=t.filter(i=>!Ru(i,r));return{arrayValue:{values:t}}}class Zm extends FT{constructor(e,t){super(),this.Tt=e,this.It=t}}function KP(n){return Ce(n.integerValue||n.doubleValue)}function ZP(n){return Sw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Nw{constructor(e,t){this.field=e,this.transform=t}}class EU{constructor(e,t){this.version=e,this.transformResults=t}}class Er{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Er}static exists(e){return new Er(void 0,e)}static updateTime(e){return new Er(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function UT(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class VT{}function YP(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Qm(n.key,Er.none()):new Ym(n.key,n.data,Er.none());{const t=n.data,r=Ri.empty();let i=new qn(hr.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);null===c&&a.length>1&&(a=a.popLast(),c=t.field(a)),null===c?r.delete(a):r.set(a,c),i=i.add(a)}return new Gc(n.key,r,new Us(i.toArray()),Er.none())}}function IU(n,e,t){n instanceof Ym?function(r,i,a){const c=r.value.clone(),h=JP(r.fieldTransforms,i,a.transformResults);c.setAll(h),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Gc?function(r,i,a){if(!UT(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=JP(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(XP(r)),h.setAll(c),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Pw(n,e,t,r){return n instanceof Ym?function(i,a,c,h){if(!UT(i.precondition,a))return c;const m=i.value.clone(),w=eO(i.fieldTransforms,h,a);return m.setAll(w),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof Gc?function(i,a,c,h){if(!UT(i.precondition,a))return c;const m=eO(i.fieldTransforms,h,a),w=a.data;return w.setAll(XP(i)),w.setAll(m),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(C=>C.field))}(n,e,t,r):(c=t,UT(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c);var a,c}function CU(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=zP(r.transform,i||null);null!=a&&(null===t&&(t=Ri.empty()),t.set(r.field,a))}return t||null}function QP(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Kf(t,r,(i,a)=>function wU(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ep&&r instanceof ep||t instanceof tp&&r instanceof tp?Kf(t.elements,r.elements,Ru):t instanceof Zm&&r instanceof Zm?Ru(t.It,r.It):t instanceof Km&&r instanceof Km);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ym extends VT{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Gc extends VT{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function XP(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function JP(n,e,t){const r=new Map;Dt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,h=e.data.field(a.field);r.set(a.field,vU(c,h,t[i]))}return r}function eO(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,yU(a,c,e))}return r}class Qm extends VT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hR extends VT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class TU{constructor(e){this.count=e}}var ai,Cn;function tO(n){switch(n){default:return ht();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function nO(n){if(void 0===n)return Nr("GRPC error has no .code"),ae.UNKNOWN;switch(n){case ai.OK:return ae.OK;case ai.CANCELLED:return ae.CANCELLED;case ai.UNKNOWN:return ae.UNKNOWN;case ai.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case ai.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case ai.INTERNAL:return ae.INTERNAL;case ai.UNAVAILABLE:return ae.UNAVAILABLE;case ai.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case ai.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case ai.NOT_FOUND:return ae.NOT_FOUND;case ai.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case ai.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case ai.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case ai.ABORTED:return ae.ABORTED;case ai.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case ai.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case ai.DATA_LOSS:return ae.DATA_LOSS;default:return ht()}}(Cn=ai||(ai={}))[Cn.OK=0]="OK",Cn[Cn.CANCELLED=1]="CANCELLED",Cn[Cn.UNKNOWN=2]="UNKNOWN",Cn[Cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Cn[Cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Cn[Cn.NOT_FOUND=5]="NOT_FOUND",Cn[Cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Cn[Cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Cn[Cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Cn[Cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Cn[Cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Cn[Cn.ABORTED=10]="ABORTED",Cn[Cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Cn[Cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Cn[Cn.INTERNAL=13]="INTERNAL",Cn[Cn.UNAVAILABLE=14]="UNAVAILABLE",Cn[Cn.DATA_LOSS=15]="DATA_LOSS";class _d{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){S(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return x(this.inner)}size(){return this.innerSize}}const bU=new jr(tt.comparator);function Vs(){return bU}const rO=new jr(tt.comparator);function Ow(...n){let e=rO;for(const t of n)e=e.insert(t.key,t);return e}function iO(n){let e=rO;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function xu(){return kw()}function sO(){return kw()}function kw(){return new _d(n=>n.toString(),(n,e)=>n.isEqual(e))}const DU=new jr(tt.comparator),SU=new qn(tt.comparator);function un(...n){let e=SU;for(const t of n)e=e.add(t);return e}const AU=new qn(Jt);function BT(){return AU}class Lw{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Fw.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Lw(Mt.min(),i,BT(),Vs(),un())}}class Fw{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Fw(r,t,un(),un(),un())}}class $T{constructor(e,t,r,i){this.Et=e,this.removedTargetIds=t,this.key=r,this.At=i}}class oO{constructor(e,t){this.targetId=e,this.Rt=t}}class aO{constructor(e,t,r=ze.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class uO{constructor(){this.Pt=0,this.vt=lO(),this.bt=ze.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.bt}get Dt(){return 0!==this.Pt}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}Nt(){let e=un(),t=un(),r=un();return this.vt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ht()}}),new Fw(this.bt,this.Vt,e,t,r)}kt(){this.St=!1,this.vt=lO()}$t(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ot(){this.Pt+=1}Ft(){this.Pt-=1}Bt(){this.St=!0,this.Vt=!0}}class RU{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=Vs(),this.Kt=cO(),this.Gt=new qn(Jt)}Qt(e){for(const t of e.Et)e.At&&e.At.isFoundDocument()?this.jt(t,e.At):this.zt(t,e.key,e.At);for(const t of e.removedTargetIds)this.zt(t,e.key,e.At)}Wt(e){this.forEachTarget(e,t=>{const r=this.Ht(t);switch(e.state){case 0:this.Jt(t)&&r.xt(e.resumeToken);break;case 1:r.Ft(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.Ft(),r.Dt||this.removeTarget(t);break;case 3:this.Jt(t)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:this.Jt(t)&&(this.Yt(t),r.xt(e.resumeToken));break;default:ht()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((r,i)=>{this.Jt(i)&&t(i)})}Zt(e){const t=e.targetId,r=e.Rt.count,i=this.Xt(t);if(i){const a=i.target;if(PT(a))if(0===r){const c=new tt(a.path);this.zt(t,c,fr.newNoDocument(c,Mt.min()))}else Dt(1===r);else this.te(t)!==r&&(this.Yt(t),this.Gt=this.Gt.add(t))}}ee(e){const t=new Map;this.qt.forEach((a,c)=>{const h=this.Xt(c);if(h){if(a.current&&PT(h.target)){const m=new tt(h.target.path);null!==this.Ut.get(m)||this.ne(c,m)||this.zt(c,m,fr.newNoDocument(m,e))}a.Ct&&(t.set(c,a.Nt()),a.kt())}});let r=un();this.Kt.forEach((a,c)=>{let h=!0;c.forEachWhile(m=>{const w=this.Xt(m);return!w||2===w.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.Ut.forEach((a,c)=>c.setReadTime(e));const i=new Lw(e,t,this.Gt,this.Ut,r);return this.Ut=Vs(),this.Kt=cO(),this.Gt=new qn(Jt),i}jt(e,t){if(!this.Jt(e))return;const r=this.ne(e,t.key)?2:0;this.Ht(e).$t(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}zt(e,t,r){if(!this.Jt(e))return;const i=this.Ht(e);this.ne(e,t)?i.$t(t,1):i.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.qt.delete(e)}te(e){const t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Ht(e).Ot()}Ht(e){let t=this.qt.get(e);return t||(t=new uO,this.qt.set(e,t)),t}se(e){let t=this.Kt.get(e);return t||(t=new qn(Jt),this.Kt=this.Kt.insert(e,t)),t}Jt(e){const t=null!==this.Xt(e);return t||$e("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new uO),this.Lt.getRemoteKeysForTarget(e).forEach(t=>{this.zt(e,t,null)})}ne(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}function cO(){return new jr(tt.comparator)}function lO(){return new jr(tt.comparator)}const xU={asc:"ASCENDING",desc:"DESCENDING"},MU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NU={and:"AND",or:"OR"};class PU{constructor(e,t){this.databaseId=e,this.yt=t}}function Xm(n,e){return n.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dO(n,e){return n.yt?e.toBase64():e.toUint8Array()}function OU(n,e){return Xm(n,e.toTimestamp())}function Kr(n){return Dt(!!n),Mt.fromTimestamp(function(e){const t=At(e);return new ir(t.seconds,t.nanos)}(n))}function fR(n,e){return(t=n,new vn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function hO(n){const e=vn.fromString(n);return Dt(EO(e)),e}function Uw(n,e){return fR(n.databaseId,e.path)}function Mu(n,e){const t=hO(e);if(t.get(1)!==n.databaseId.projectId)throw new Le(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Le(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new tt(pO(t))}function pR(n,e){return fR(n.databaseId,e)}function fO(n){const e=hO(n);return 4===e.length?vn.emptyPath():pO(e)}function Vw(n){return new vn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function pO(n){return Dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function gO(n,e,t){return{name:Uw(n,e),fields:t.value.mapValue.fields}}function mO(n,e,t){const r=Mu(n,e.name),i=Kr(e.updateTime),a=e.createTime?Kr(e.createTime):Mt.min(),c=new Ri({mapValue:{fields:e.fields}}),h=fr.newFoundDocument(r,i,a,c);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function Bw(n,e){let t;if(e instanceof Ym)t={update:gO(n,e.key,e.value)};else if(e instanceof Qm)t={delete:Uw(n,e.key)};else if(e instanceof Gc)t={update:gO(n,e.key,e.data),updateMask:jU(e.fieldMask)};else{if(!(e instanceof hR))return ht();t={verify:Uw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof Km)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ep)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof tp)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Zm)return{fieldPath:a.field.canonicalString(),increment:c.It};throw ht()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:OU(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ht()),t;var i}function gR(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Er.updateTime(Kr(i.updateTime)):void 0!==i.exists?Er.exists(i.exists):Er.none():Er.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let h=null;"setToServerValue"in c?(Dt("REQUEST_TIME"===c.setToServerValue),h=new Km):"appendMissingElements"in c?h=new ep(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new tp(c.removeAllFromArray.values||[]):"increment"in c?h=new Zm(a,c.increment):ht();const m=hr.fromServerFormat(c.fieldPath);return new Nw(m,h)}(n,i)):[];var i;if(e.update){const i=Mu(n,e.update.name),a=new Ri({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Us((e.updateMask.fieldPaths||[]).map(w=>hr.fromServerFormat(w)));return new Gc(i,a,c,t,r)}return new Ym(i,a,t,r)}if(e.delete){const i=Mu(n,e.delete);return new Qm(i,t)}if(e.verify){const i=Mu(n,e.verify);return new hR(i,t)}return ht()}function _O(n,e){return{documents:[pR(n,e.path)]}}function mR(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=pR(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=pR(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0!==m.length)return wO(Bn.create(m,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(w=>{return{field:yd((C=w).field),direction:VU(C.dir)};var C})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=(w=e.limit,n.yt||U(w)?w:{value:w});var w,h,m;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function yO(n){let e=fO(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Dt(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let a=[];t.where&&(a=function(C){const D=vO(C);return D instanceof Bn&&sR(D)?D.getFilters():[D]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(C=>{return new zm(Jm((D=C).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let h=null;t.limit&&(h=function(C){let D;return D="object"==typeof C?C.value:C,U(D)?null:D}(t.limit));let m=null;var C;t.startAt&&(m=new md((C=t.startAt).values||[],!!C.before));let w=null;return t.endAt&&(w=function(C){return new md(C.values||[],!C.before)}(t.endAt)),FP(e,i,c,a,h,"F",m,w)}function vO(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Jm(e.unaryFilter.field);return wn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Jm(e.unaryFilter.field);return wn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Jm(e.unaryFilter.field);return wn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Jm(e.unaryFilter.field);return wn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ht()}}(n):void 0!==n.fieldFilter?wn.create(Jm((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ht()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Bn.create(e.compositeFilter.filters.map(t=>vO(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ht()}}(e.compositeFilter.op))}(n):ht();var e}function VU(n){return xU[n]}function BU(n){return MU[n]}function $U(n){return NU[n]}function yd(n){return{fieldPath:n.canonicalString()}}function Jm(n){return hr.fromServerFormat(n.fieldPath)}function wO(n){return n instanceof wn?function(e){if("=="===e.op){if(wP(e.value))return{unaryFilter:{field:yd(e.field),op:"IS_NAN"}};if(vP(e.value))return{unaryFilter:{field:yd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(wP(e.value))return{unaryFilter:{field:yd(e.field),op:"IS_NOT_NAN"}};if(vP(e.value))return{unaryFilter:{field:yd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yd(e.field),op:BU(e.op),value:e.value}}}(n):n instanceof Bn?function(e){const t=e.getFilters().map(r=>wO(r));return 1===t.length?t[0]:{compositeFilter:{op:$U(e.op),filters:t}}}(n):ht()}function jU(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function EO(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Es(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=IO(e)),e=HU(n.get(t),e);return IO(e)}function HU(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function IO(n){return n+"\x01\x01"}function Nu(n){const e=n.length;if(Dt(e>=2),2===e)return Dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),vn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&ht(),n.charAt(c+1)){case"\x01":const h=n.substring(a,c);let m;0===i.length?m=h:(i+=h,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:ht()}a=c+2}return new vn(r)}const CO=["userId","batchId"];function jT(n,e){return[n,Es(e)]}function TO(n,e,t){return[n,Es(e),t]}const GU={},zU=["prefixPath","collectionGroup","readTime","documentId"],WU=["prefixPath","collectionGroup","documentId"],qU=["collectionGroup","readTime","prefixPath","documentId"],KU=["canonicalId","targetId"],ZU=["targetId","path"],YU=["path","targetId"],QU=["collectionId","parent"],XU=["indexId","uid"],JU=["uid","sequenceNumber"],eV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],tV=["indexId","uid","orderedDocumentKey"],nV=["userId","collectionPath","documentId"],rV=["userId","collectionPath","largestBatchId"],iV=["userId","collectionGroup","largestBatchId"],bO=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],sV=[...bO,"documentOverlays"],DO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],SO=DO,oV=[...SO,"indexConfiguration","indexState","indexEntries"];class _R extends ST{constructor(e,t){super(),this.re=e,this.currentSequenceNumber=t}}function xi(n,e){const t=rt(n);return qo.M(t.re,e)}class yR{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&IU(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Pw(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Pw(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=sO();return this.mutations.forEach(i=>{const a=e.get(i.key),c=a.overlayedDocument;let h=this.applyToLocalView(c,a.mutatedFields);h=t.has(i.key)?null:h;const m=YP(c,h);null!==m&&r.set(i.key,m),c.isValidDocument()||c.convertToNoDocument(Mt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),un())}isEqual(e){return this.batchId===e.batchId&&Kf(this.mutations,e.mutations,(t,r)=>QP(t,r))&&Kf(this.baseMutations,e.baseMutations,(t,r)=>QP(t,r))}}class vR{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Dt(e.mutations.length===r.length);let i=DU;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new vR(e,t,r,i)}}class wR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class vd{constructor(e,t,r,i,a=Mt.min(),c=Mt.min(),h=ze.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h}withSequenceNumber(e){return new vd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new vd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new vd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class AO{constructor(e){this.oe=e}}function RO(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:HT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Uw(i=n.oe,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Xm(i,a.version.toTimestamp()),createTime:Xm(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:np(e.version)};else{if(!e.isUnknownDocument())return ht();r.unknownDocument={path:t.path.toArray(),version:np(e.version)}}var i,a;return r}function HT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function np(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function rp(n){const e=new ir(n.seconds,n.nanoseconds);return Mt.fromTimestamp(e)}function ip(n,e){const t=(e.baseMutations||[]).map(a=>gR(n.oe,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>gR(n.oe,a)),i=ir.fromMillis(e.localWriteTimeMs);return new yR(e.batchId,i,t,r)}function $w(n){const e=rp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?rp(n.lastLimboFreeSnapshotVersion):Mt.min();let r;var i;return void 0!==n.query.documents?(Dt(1===(i=n.query).documents.length),r=ws(qm(fO(i.documents[0])))):r=ws(yO(n.query)),new vd(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ze.fromBase64String(n.resumeToken))}function xO(n,e){const t=np(e.snapshotVersion),r=np(e.lastLimboFreeSnapshotVersion);let i;i=PT(e.target)?_O(n.oe,e.target):mR(n.oe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Xf(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ER(n){const e=yO({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?LT(e,e.limit,"L"):e}function IR(n,e){return new wR(e.largestBatchId,gR(n.oe,e.overlayMutation))}function MO(n,e){const t=e.path.lastSegment();return[n,Es(e.path.popLast()),t]}function NO(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:np(r.readTime),documentKey:Es(r.documentKey.path),largestBatchId:r.largestBatchId}}class uV{getBundleMetadata(e,t){return PO(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:rp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return PO(e).put({bundleId:(r=t).id,createTime:np(Kr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return OO(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:ER(i.bundledQuery),readTime:rp(i.readTime)};var i})}saveNamedQuery(e,t){return OO(e).put({name:(r=t).name,readTime:np(Kr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function PO(n){return xi(n,"bundles")}function OO(n){return xi(n,"namedQueries")}class GT{constructor(e,t){this.Tt=e,this.userId=t}static ue(e,t){return new GT(e,t.uid||"")}getOverlay(e,t){return jw(e).get(MO(this.userId,t)).next(r=>r?IR(this.Tt,r):null)}getOverlays(e,t){const r=xu();return ie.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,c)=>{const h=new wR(t,c);i.push(this.ce(e,h))}),ie.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Es(c.getCollectionPath())));const a=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(jw(e).Y("collectionPathOverlayIndex",h))}),ie.waitFor(a)}getOverlaysForCollection(e,t,r){const i=xu(),a=Es(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return jw(e).W("collectionPathOverlayIndex",c).next(h=>{for(const m of h){const w=IR(this.Tt,m);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=xu();let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return jw(e).X({index:"collectionGroupOverlayIndex",range:h},(m,w,C)=>{const D=IR(this.Tt,w);a.size()<i||D.largestBatchId===c?(a.set(D.getKey(),D),c=D.largestBatchId):C.done()}).next(()=>a)}ce(e,t){return jw(e).put(function(r,i,a){const[c,h,m]=MO(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Bw(r.oe,a.mutation)}}(this.Tt,this.userId,t))}}function jw(n){return xi(n,"documentOverlays")}class sp{constructor(){}ae(e,t){this.he(e,t),t.le()}he(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(Ce(e.integerValue));else if("doubleValue"in e){const r=Ce(e.doubleValue);isNaN(r)?this.fe(t,13):(this.fe(t,15),K(r)?t.de(0):t.de(r))}else if("timestampValue"in e){const r=e.timestampValue;this.fe(t,20),"string"==typeof r?t._e(r):(t._e(`${r.seconds||""}`),t.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge($t(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.fe(t,45),t.de(r.latitude||0),t.de(r.longitude||0)}else"mapValue"in e?EP(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):ht()}we(e,t){this.fe(t,25),this.Te(e,t)}Te(e,t){t._e(e)}pe(e,t){const r=e.fields||{};this.fe(t,55);for(const i of Object.keys(r))this.we(i,t),this.he(r[i],t)}Ie(e,t){const r=e.values||[];this.fe(t,50);for(const i of r)this.he(i,t)}ye(e,t){this.fe(t,37),tt.fromName(e).path.forEach(r=>{this.fe(t,60),this.Te(r,t)})}fe(e,t){e.de(t)}me(e){e.de(2)}}function cV(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function kO(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=cV(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}sp.Ee=new sp;class lV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Re(r.value),r=t.next();this.Pe()}ve(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Ve()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const i=t.codePointAt(0);this.Re(240|i>>>18),this.Re(128|63&i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i)}}this.Pe()}De(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=t.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Ve()}Ce(e){const t=this.xe(e),r=kO(t);this.Ne(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}ke(e){const t=this.xe(e),r=kO(t);this.Ne(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$e(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Re(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}be(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Pe(){this.Me(0),this.Me(1)}Ve(){this.Fe(0),this.Fe(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}Fe(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class dV{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.$e()}}class hV{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Oe()}}class Hw{constructor(){this.Le=new lV,this.qe=new dV(this.Le),this.Ue=new hV(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return 0===e?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}class op{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ge(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new op(this.indexId,this.documentKey,this.arrayValue,r)}}function wd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=LO(n.arrayValue,e.arrayValue),0!==t?t:(t=LO(n.directionalValue,e.directionalValue),0!==t?t:tt.comparator(n.documentKey,e.documentKey)))}function LO(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class fV{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const t of e.filters){const r=t;r.isInequality()?this.ze=r:this.je.push(r)}}We(e){Dt(e.collectionGroup===this.collectionId);const t=Iw(e);if(void 0!==t&&!this.He(t))return!1;const r=Su(e);let i=0,a=0;for(;i<r.length&&this.He(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.ze){const c=r[i];if(!this.Je(this.ze,c)||!this.Ye(this.Qe[a++],c))return!1;++i}for(;i<r.length;++i)if(a>=this.Qe.length||!this.Ye(this.Qe[a++],r[i]))return!1;return!0}He(e){for(const t of this.je)if(this.Je(t,e))return!0;return!1}Je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ye(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function FO(n){var e,t;if(Dt(n instanceof wn||n instanceof Bn),n instanceof wn){if(n instanceof NP){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>wn.create(n.field,"==",a)))||[];return Bn.create(i,"or")}return n}const r=n.filters.map(i=>FO(i));return Bn.create(r,n.op)}function pV(n){if(0===n.getFilters().length)return[];const e=bR(FO(n));return Dt(UO(e)),CR(e)||TR(e)?[e]:e.getFilters()}function CR(n){return n instanceof wn}function TR(n){return n instanceof Bn&&sR(n)}function UO(n){return CR(n)||TR(n)||function(e){if(e instanceof Bn&&iR(e)){for(const t of e.getFilters())if(!CR(t)&&!TR(t))return!1;return!0}return!1}(n)}function bR(n){if(Dt(n instanceof wn||n instanceof Bn),n instanceof wn)return n;if(1===n.filters.length)return bR(n.filters[0]);const e=n.filters.map(r=>bR(r));let t=Bn.create(e,n.op);return t=zT(t),UO(t)?t:(Dt(t instanceof Bn),Dt(Gm(t)),Dt(t.filters.length>1),t.filters.reduce((r,i)=>DR(r,i)))}function DR(n,e){let t;return Dt(n instanceof wn||n instanceof Bn),Dt(e instanceof wn||e instanceof Bn),t=n instanceof wn?e instanceof wn?Bn.create([n,e],"and"):VO(n,e):e instanceof wn?VO(e,n):function(r,i){if(Dt(r.filters.length>0&&i.filters.length>0),Gm(r)&&Gm(i))return RP(r,i.getFilters());const a=iR(r)?r:i,c=iR(r)?i:r,h=a.filters.map(m=>DR(m,c));return Bn.create(h,"or")}(n,e),zT(t)}function VO(n,e){if(Gm(e))return RP(e,n.getFilters());{const t=e.filters.map(r=>DR(n,r));return Bn.create(t,"or")}}function zT(n){if(Dt(n instanceof wn||n instanceof Bn),n instanceof wn)return n;const e=n.getFilters();if(1===e.length)return zT(e[0]);if(SP(n))return n;const t=e.map(i=>zT(i)),r=[];return t.forEach(i=>{i instanceof wn?r.push(i):i instanceof Bn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Bn.create(r,n.op)}class gV{constructor(){this.Ze=new SR}addToCollectionParentIndex(e,t){return this.Ze.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Ze.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Fs.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Fs.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class SR{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new qn(vn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qn(vn.comparator)).toArray()}}const WT=new Uint8Array(0);class mV{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new SR,this.tn=new _d(r=>Xf(r),(r,i)=>Rw(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const a={collectionId:r,parent:Es(i)};return BO(e).put(a)}return ie.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Ew(t),""],!1,!0);return BO(e).W(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(Nu(c.parent))}return r})}addFieldIndex(e,t){const r=qT(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var c;delete i.indexId;const a=r.add(i);if(t.indexState){const c=zw(e);return a.next(h=>{c.put(NO(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=qT(e),i=zw(e),a=Gw(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Gw(e);let i=!0;const a=new Map;return ie.forEach(this.en(t),c=>this.nn(e,c).next(h=>{i&&(i=!!h),a.set(c,h)})).next(()=>{if(i){let c=un();const h=[];return ie.forEach(a,(m,w)=>{var C;$e("IndexedDbIndexManager",`Using index ${C=m,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(lt=>`${lt.fieldPath}:${lt.kind}`).join(",")}`} to execute ${Xf(t)}`);const D=function(lt,Et){const Vt=Iw(Et);if(void 0===Vt)return null;for(const Zt of OT(lt,Vt.fieldPath))switch(Zt.op){case"array-contains-any":return Zt.value.arrayValue.values||[];case"array-contains":return[Zt.value]}return null}(w,m),R=function(lt,Et){const Vt=new Map;for(const Zt of Su(Et))for(const Hr of OT(lt,Zt.fieldPath))switch(Hr.op){case"==":case"in":Vt.set(Zt.fieldPath.canonicalString(),Hr.value);break;case"not-in":case"!=":return Vt.set(Zt.fieldPath.canonicalString(),Hr.value),Array.from(Vt.values())}return null}(w,m),F=function(lt,Et){const Vt=[];let Zt=!0;for(const Hr of Su(Et)){const Hs=0===Hr.kind?kP(lt,Hr.fieldPath,lt.startAt):LP(lt,Hr.fieldPath,lt.startAt);Vt.push(Hs.value),Zt&&(Zt=Hs.inclusive)}return new md(Vt,Zt)}(w,m),j=function(lt,Et){const Vt=[];let Zt=!0;for(const Hr of Su(Et)){const Hs=0===Hr.kind?LP(lt,Hr.fieldPath,lt.endAt):kP(lt,Hr.fieldPath,lt.endAt);Vt.push(Hs.value),Zt&&(Zt=Hs.inclusive)}return new md(Vt,Zt)}(w,m),J=this.sn(m,w,F),se=this.sn(m,w,j),dt=this.rn(m,w,R),yt=this.on(m.indexId,D,J,F.inclusive,se,j.inclusive,dt);return ie.forEach(yt,lt=>r.J(lt,t.limit).next(Et=>{Et.forEach(Vt=>{const Zt=tt.fromSegments(Vt.documentKey);c.has(Zt)||(c=c.add(Zt),h.push(Zt))})}))}).next(()=>h)}return ie.resolve(null)})}en(e){let t=this.tn.get(e);return t||(t=0===e.filters.length?[e]:pV(Bn.create(e.filters,"and")).map(r=>aR(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,t),t)}on(e,t,r,i,a,c,h){const m=(null!=t?t.length:1)*Math.max(r.length,a.length),w=m/(null!=t?t.length:1),C=[];for(let D=0;D<m;++D){const R=t?this.un(t[D/w]):WT,F=this.cn(e,R,r[D%w],i),j=this.an(e,R,a[D%w],c),J=h.map(se=>this.cn(e,R,se,!0));C.push(...this.createRange(F,j,J))}return C}cn(e,t,r,i){const a=new op(e,tt.empty(),t,r);return i?a:a.Ge()}an(e,t,r,i){const a=new op(e,tt.empty(),t,r);return i?a.Ge():a}nn(e,t){const r=new fV(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let c=null;for(const h of a)r.We(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(e,t){let r=2;const i=this.en(t);return ie.forEach(i,a=>this.nn(e,a).next(c=>{c?0!==r&&c.fields.length<function(h){let m=new qn(hr.comparator),w=!1;for(const C of h.filters)for(const D of C.getFlattenedFilters())D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?w=!0:m=m.add(D.field));for(const C of h.orderBy)C.field.isKeyField()||(m=m.add(C.field));return m.size+(w?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}hn(e,t){const r=new Hw;for(const i of Su(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const c=r.Ke(i.kind);sp.Ee.ae(a,c)}return r.Be()}un(e){const t=new Hw;return sp.Ee.ae(e,t.Ke(0)),t.Be()}ln(e,t){const r=new Hw;return sp.Ee.ae(Qf(this.databaseId,t),r.Ke(function(i){const a=Su(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Be()}rn(e,t,r){if(null===r)return[];let i=[];i.push(new Hw);let a=0;for(const c of Su(e)){const h=r[a++];for(const m of i)if(this.fn(t,c.fieldPath)&&Sw(h))i=this.dn(i,c,h);else{const w=m.Ke(c.kind);sp.Ee.ae(h,w)}}return this._n(i)}sn(e,t,r){return this.rn(e,t,r.position)}_n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Be();return t}dn(e,t,r){const i=[...e],a=[];for(const c of r.arrayValue.values||[])for(const h of i){const m=new Hw;m.seed(h.Be()),sp.Ee.ae(c,m.Ke(t.kind)),a.push(m)}return a}fn(e,t){return!!e.filters.find(r=>r instanceof wn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=qT(e),i=zw(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const c=[];return ie.forEach(a,h=>i.get([h.indexId,this.uid]).next(m=>{c.push(function(w,C){const D=C?new $c(C.sequenceNumber,new Fs(rp(C.readTime),new tt(Nu(C.documentKey)),C.largestBatchId)):$c.empty(),R=w.fields.map(([F,j])=>new Tw(hr.fromServerFormat(F),j));return new Bm(w.indexId,w.collectionGroup,R,D)}(h,m))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Jt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=qT(e),a=zw(e);return this.wn(e).next(c=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>ie.forEach(h,m=>a.put(NO(m.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ie.forEach(t,(i,a)=>{const c=r.get(i.collectionGroup);return(c?ie.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ie.forEach(h,m=>this.mn(e,i,m).next(w=>{const C=this.gn(a,m);return w.isEqual(C)?ie.resolve():this.yn(e,a,m,w,C)}))))})}pn(e,t,r,i){return Gw(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.ln(r,t.key),documentKey:t.key.path.toArray()})}In(e,t,r,i){return Gw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.ln(r,t.key),t.key.path.toArray()])}mn(e,t,r){const i=Gw(e);let a=new qn(wd);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.ln(r,t)])},(c,h)=>{a=a.add(new op(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}gn(e,t){let r=new qn(wd);const i=this.hn(t,e);if(null==i)return r;const a=Iw(t);if(null!=a){const c=e.data.field(a.fieldPath);if(Sw(c))for(const h of c.arrayValue.values||[])r=r.add(new op(t.indexId,e.key,this.un(h),i))}else r=r.add(new op(t.indexId,e.key,WT,i));return r}yn(e,t,r,i,a){$e("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(h,m,w,C,D){const R=h.getIterator(),F=m.getIterator();let j=Wm(R),J=Wm(F);for(;j||J;){let se=!1,dt=!1;if(j&&J){const yt=w(j,J);yt<0?dt=!0:yt>0&&(se=!0)}else null!=j?dt=!0:se=!0;se?(C(J),J=Wm(F)):dt?(D(j),j=Wm(R)):(j=Wm(R),J=Wm(F))}}(i,a,wd,h=>{c.push(this.pn(e,t,r,h))},h=>{c.push(this.In(e,t,r,h))}),ie.waitFor(c)}wn(e){let t=1;return zw(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,h)=>wd(c,h)).filter((c,h,m)=>!h||0!==wd(c,m[h-1]));const i=[];i.push(e);for(const c of r){const h=wd(c,e),m=wd(c,t);if(0===h)i[0]=e.Ge();else if(h>0&&m<0)i.push(c),i.push(c.Ge());else if(m>0)break}i.push(t);const a=[];for(let c=0;c<i.length;c+=2){if(this.Tn(i[c],i[c+1]))return[];a.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,WT,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,WT,[]]))}return a}Tn(e,t){return wd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next($O)}getMinOffset(e,t){return ie.mapArray(this.en(t),r=>this.nn(e,r).next(i=>i||ht())).next($O)}}function BO(n){return xi(n,"collectionParents")}function Gw(n){return xi(n,"indexEntries")}function qT(n){return xi(n,"indexConfiguration")}function zw(n){return xi(n,"indexState")}function $O(n){Dt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;bT(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Fs(e.readTime,e.documentKey,t)}const jO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Bs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Bs(e,Bs.DEFAULT_COLLECTION_PERCENTILE,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function HO(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],c=IDBKeyRange.only(t.batchId);let h=0;const m=r.X({range:c},(C,D,R)=>(h++,R.delete()));a.push(m.next(()=>{Dt(1===h)}));const w=[];for(const C of t.mutations){const D=TO(e,C.key.path,t.batchId);a.push(i.delete(D)),w.push(C.key)}return ie.waitFor(a).next(()=>w)}function KT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ht();e=n.noDocument}return JSON.stringify(e).length}Bs.DEFAULT_COLLECTION_PERCENTILE=10,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bs.DEFAULT=new Bs(41943040,Bs.DEFAULT_COLLECTION_PERCENTILE,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bs.DISABLED=new Bs(-1,0,0);class ZT{constructor(e,t,r,i){this.userId=e,this.Tt=t,this.indexManager=r,this.referenceDelegate=i,this.En={}}static ue(e,t,r,i){Dt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new ZT(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ed(e).X({index:"userMutationsIndex",range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=e_(e),c=Ed(e);return c.add({}).next(h=>{Dt("number"==typeof h);const m=new yR(h,t,r,i),w=function(R,F,j){const J=j.baseMutations.map(dt=>Bw(R.oe,dt)),se=j.mutations.map(dt=>Bw(R.oe,dt));return{userId:F,batchId:j.batchId,localWriteTimeMs:j.localWriteTime.toMillis(),baseMutations:J,mutations:se}}(this.Tt,this.userId,m),C=[];let D=new qn((R,F)=>Jt(R.canonicalString(),F.canonicalString()));for(const R of i){const F=TO(this.userId,R.key.path,h);D=D.add(R.key.path.popLast()),C.push(c.put(w)),C.push(a.put(F,GU))}return D.forEach(R=>{C.push(this.indexManager.addToCollectionParentIndex(e,R))}),e.addOnCommittedListener(()=>{this.En[h]=m.keys()}),ie.waitFor(C).next(()=>m)})}lookupMutationBatch(e,t){return Ed(e).get(t).next(r=>r?(Dt(r.userId===this.userId),ip(this.Tt,r)):null)}An(e,t){return this.En[t]?ie.resolve(this.En[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.En[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Ed(e).X({index:"userMutationsIndex",range:i},(c,h,m)=>{h.userId===this.userId&&(Dt(h.batchId>=r),a=ip(this.Tt,h)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ed(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ed(e).W("userMutationsIndex",t).next(r=>r.map(i=>ip(this.Tt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=jT(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return e_(e).X({range:i},(c,h,m)=>{const[w,C,D]=c,R=Nu(C);if(w===this.userId&&t.path.isEqual(R))return Ed(e).get(D).next(F=>{if(!F)throw ht();Dt(F.userId===this.userId),a.push(ip(this.Tt,F))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new qn(Jt);const i=[];return t.forEach(a=>{const c=jT(this.userId,a.path),h=IDBKeyRange.lowerBound(c),m=e_(e).X({range:h},(w,C,D)=>{const[R,F,j]=w,J=Nu(F);R===this.userId&&a.path.isEqual(J)?r=r.add(j):D.done()});i.push(m)}),ie.waitFor(i).next(()=>this.Rn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=jT(this.userId,r),c=IDBKeyRange.lowerBound(a);let h=new qn(Jt);return e_(e).X({range:c},(m,w,C)=>{const[D,R,F]=m,j=Nu(R);D===this.userId&&r.isPrefixOf(j)?j.length===i&&(h=h.add(F)):C.done()}).next(()=>this.Rn(e,h))}Rn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Ed(e).get(a).next(c=>{if(null===c)throw ht();Dt(c.userId===this.userId),r.push(ip(this.Tt,c))}))}),ie.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return HO(e.re,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Pn(t.batchId)}),ie.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Pn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ie.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return e_(e).X({range:r},(a,c,h)=>{if(a[0]===this.userId){const m=Nu(a[1]);i.push(m)}else h.done()}).next(()=>{Dt(0===i.length)})})}containsKey(e,t){return GO(e,this.userId,t)}vn(e){return zO(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function GO(n,e,t){const r=jT(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return e_(n).X({range:a,Z:!0},(h,m,w)=>{const[C,D,R]=h;C===e&&D===i&&(c=!0),w.done()}).next(()=>c)}function Ed(n){return xi(n,"mutations")}function e_(n){return xi(n,"documentMutations")}function zO(n){return xi(n,"mutationQueues")}class ap{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Vn(){return new ap(0)}static Sn(){return new ap(-1)}}class _V{constructor(e,t){this.referenceDelegate=e,this.Tt=t}allocateTargetId(e){return this.Dn(e).next(t=>{const r=new ap(t.highestTargetId);return t.highestTargetId=r.next(),this.Cn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(t=>Mt.fromTimestamp(new ir(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Dn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Cn(e,i)))}addTargetData(e,t){return this.xn(e,t).next(()=>this.Dn(e).next(r=>(r.targetCount+=1,this.Nn(t,r),this.Cn(e,r))))}updateTargetData(e,t){return this.xn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>t_(e).delete(t.targetId)).next(()=>this.Dn(e)).next(r=>(Dt(r.targetCount>0),r.targetCount-=1,this.Cn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return t_(e).X((c,h)=>{const m=$w(h);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>ie.waitFor(a)).next(()=>i)}forEachTarget(e,t){return t_(e).X((r,i)=>{const a=$w(i);t(a)})}Dn(e){return WO(e).get("targetGlobalKey").next(t=>(Dt(null!==t),t))}Cn(e,t){return WO(e).put("targetGlobalKey",t)}xn(e,t){return t_(e).put(xO(this.Tt,t))}Nn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Dn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Xf(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return t_(e).X({range:i,index:"queryTargetsIndex"},(c,h,m)=>{const w=$w(h);Rw(t,w.target)&&(a=w,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Id(e);return t.forEach(c=>{const h=Es(c.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,c))}),ie.waitFor(i)}removeMatchingKeys(e,t,r){const i=Id(e);return ie.forEach(t,a=>{const c=Es(a.path);return ie.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Id(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Id(e);let a=un();return i.X({range:r,Z:!0},(c,h,m)=>{const w=Nu(c[1]),C=new tt(w);a=a.add(C)}).next(()=>a)}containsKey(e,t){const r=Es(t.path),i=IDBKeyRange.bound([r],[Ew(r)],!1,!0);let a=0;return Id(e).X({index:"documentTargetsIndex",Z:!0,range:i},([c,h],m,w)=>{0!==c&&(a++,w.done())}).next(()=>a>0)}ie(e,t){return t_(e).get(t).next(r=>r?$w(r):null)}}function t_(n){return xi(n,"targets")}function WO(n){return xi(n,"targetGlobal")}function Id(n){return xi(n,"targetDocuments")}function qO([n,e],[t,r]){const i=Jt(n,t);return 0===i?Jt(e,r):i}class yV{constructor(e){this.kn=e,this.buffer=new qn(qO),this.$n=0}Mn(){return++this.$n}On(e){const t=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();qO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class vV{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Fn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}stop(){this.Fn&&(this.Fn.cancel(),this.Fn=null)}get started(){return null!==this.Fn}Bn(e){var t=this;$e("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Fn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ve.Z)(function*(){t.Fn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){jc(r)?$e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Au(r)}yield t.Bn(3e5)}))}}class wV{constructor(e,t){this.Ln=e,this.params=t}calculateTargetCount(e,t){return this.Ln.qn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ie.resolve(u.at);const r=new yV(t);return this.Ln.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.Ln.Un(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Ln.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Ln.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(jO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jO):this.Kn(e,t))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,t){let r,i,a,c,h,m,w;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,c=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,h=Date.now(),this.removeTargets(e,r,t))).next(D=>(a=D,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(w=Date.now(),Um()<=ns.in.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-C}ms\n\tDetermined least recently used ${i} in `+(h-c)+`ms\n\tRemoved ${a} targets in `+(m-h)+`ms\n\tRemoved ${D} documents in `+(w-m)+`ms\nTotal Duration: ${w-C}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:D})))}}class EV{constructor(e,t){this.db=e,this.garbageCollector=new wV(this,t)}qn(e){const t=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Gn(e){let t=0;return this.Un(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Un(e,t){return this.Qn(e,(r,i)=>t(i))}addReference(e,t,r){return YT(e,r)}removeReference(e,t,r){return YT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return YT(e,t)}jn(e,t){return function(r,i){let a=!1;return zO(r).tt(c=>GO(r,c,i).next(h=>(h&&(a=!0),ie.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Qn(e,(c,h)=>{if(h<=t){const m=this.jn(e,c).next(w=>{if(!w)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Mt.min()),Id(e).delete([0,Es(c.path)])))});i.push(m)}}).next(()=>ie.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return YT(e,t)}Qn(e,t){const r=Id(e);let i,a=u.at;return r.X({index:"documentTargetsIndex"},([c,h],{path:m,sequenceNumber:w})=>{0===c?(a!==u.at&&t(new tt(Nu(i)),a),a=w,i=m):a=u.at}).next(()=>{a!==u.at&&t(new tt(Nu(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function YT(n,e){return Id(n).put((r=n.currentSequenceNumber,{targetId:0,path:Es(e.path),sequenceNumber:r}));var r}class KO{constructor(){this.changes=new _d(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class IV{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return up(e).put(r)}removeEntry(e,t,r){return up(e).delete(function(i,a){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],HT(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.zn(e,r)))}getEntry(e,t){let r=fr.newInvalidDocument(t);return up(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ww(t))},(i,a)=>{r=this.Wn(t,a)}).next(()=>r)}Hn(e,t){let r={size:0,document:fr.newInvalidDocument(t)};return up(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ww(t))},(i,a)=>{r={document:this.Wn(t,a),size:KT(a)}}).next(()=>r)}getEntries(e,t){let r=Vs();return this.Jn(e,t,(i,a)=>{const c=this.Wn(i,a);r=r.insert(i,c)}).next(()=>r)}Yn(e,t){let r=Vs(),i=new jr(tt.comparator);return this.Jn(e,t,(a,c)=>{const h=this.Wn(a,c);r=r.insert(a,h),i=i.insert(a,KT(c))}).next(()=>({documents:r,Zn:i}))}Jn(e,t,r){if(t.isEmpty())return ie.resolve();let i=new qn(XO);t.forEach(m=>i=i.add(m));const a=IDBKeyRange.bound(Ww(i.first()),Ww(i.last())),c=i.getIterator();let h=c.getNext();return up(e).X({index:"documentKeyIndex",range:a},(m,w,C)=>{const D=tt.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;h&&XO(h,D)<0;)r(h,null),h=c.getNext();h&&h.isEqual(D)&&(r(h,w),h=c.hasNext()?c.getNext():null),h?C.j(Ww(h)):C.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,c=[a.popLast().toArray(),a.lastSegment(),HT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return up(e).W(IDBKeyRange.bound(c,h,!0)).next(m=>{let w=Vs();for(const C of m){const D=this.Wn(tt.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);D.isFoundDocument()&&(Mw(t,D)||i.has(D.key))&&(w=w.insert(D.key,D))}return w})}getAllFromCollectionGroup(e,t,r,i){let a=Vs();const c=QO(t,r),h=QO(t,Fs.max());return up(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(m,w,C)=>{const D=this.Wn(tt.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(D.key,D),a.size===i&&C.done()}).next(()=>a)}newChangeBuffer(e){return new CV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return YO(e).get("remoteDocumentGlobalKey").next(t=>(Dt(!!t),t))}zn(e,t){return YO(e).put("remoteDocumentGlobalKey",t)}Wn(e,t){if(t){const r=function aV(n,e){let t;if(e.document)t=mO(n.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=tt.fromSegments(e.noDocument.path),i=rp(e.noDocument.readTime);t=fr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ht();{const r=tt.fromSegments(e.unknownDocument.path),i=rp(e.unknownDocument.version);t=fr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new ir(r[0],r[1]);return Mt.fromTimestamp(i)}(e.readTime)),t}(this.Tt,t);if(!r.isNoDocument()||!r.version.isEqual(Mt.min()))return r}return fr.newInvalidDocument(e)}}function ZO(n){return new IV(n)}class CV extends KO{constructor(e,t){super(),this.Xn=e,this.trackRemovals=t,this.ts=new _d(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new qn((a,c)=>Jt(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const h=this.ts.get(a);if(t.push(this.Xn.removeEntry(e,a,h.readTime)),c.isValidDocument()){const m=RO(this.Xn.Tt,c);i=i.add(a.path.popLast());const w=KT(m);r+=w-h.size,t.push(this.Xn.addEntry(e,a,m))}else if(r-=h.size,this.trackRemovals){const m=RO(this.Xn.Tt,c.convertToNoDocument(Mt.min()));t.push(this.Xn.addEntry(e,a,m))}}),i.forEach(a=>{t.push(this.Xn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Xn.updateMetadata(e,r)),ie.waitFor(t)}getFromCache(e,t){return this.Xn.Hn(e,t).next(r=>(this.ts.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Xn.Yn(e,t).next(({documents:r,Zn:i})=>(i.forEach((a,c)=>{this.ts.set(a,{size:c,readTime:r.get(a).readTime})}),r))}}function YO(n){return xi(n,"remoteDocumentGlobal")}function up(n){return xi(n,"remoteDocumentsV14")}function Ww(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function QO(n,e){const t=e.documentKey.path.toArray();return[n,HT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function XO(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Jt(t[a],r[a]),i)return i;return i=Jt(t.length,r.length),i||(i=Jt(t[t.length-2],r[r.length-2]),i||Jt(t[t.length-1],r[r.length-1]))}class TV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class JO{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Pw(r.mutation,i,Us.empty(),ir.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,un()).next(()=>r))}getLocalViewOfDocuments(e,t,r=un()){const i=xu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let c=Ow();return a.forEach((h,m)=>{c=c.insert(h,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=xu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,un()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,i){let a=Vs();const c=kw(),h=kw();return t.forEach((m,w)=>{const C=r.get(w.key);i.has(w.key)&&(void 0===C||C.mutation instanceof Gc)?a=a.insert(w.key,w):void 0!==C?(c.set(w.key,C.mutation.getFieldMask()),Pw(C.mutation,w,C.mutation.getFieldMask(),ir.now())):c.set(w.key,Us.empty())}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((w,C)=>c.set(w,C)),t.forEach((w,C)=>{var D;return h.set(w,new TV(C,null!==(D=c.get(w))&&void 0!==D?D:null))}),h))}recalculateAndSaveOverlays(e,t){const r=kw();let i=new jr((c,h)=>c-h),a=un();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(m=>{const w=t.get(m);if(null===w)return;let C=r.get(m)||Us.empty();C=h.applyToLocalView(w,C),r.set(m,C);const D=(i.get(h.batchId)||un()).add(m);i=i.insert(h.batchId,D)})}).next(()=>{const c=[],h=i.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),w=m.key,C=m.value,D=sO();C.forEach(R=>{if(!a.has(R)){const F=YP(t.get(R),r.get(R));null!==F&&D.set(R,F),a=a.add(R)}}),c.push(this.documentOverlayCache.saveOverlays(e,w,D))}return ie.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return tt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):cR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ie.resolve(xu());let h=-1,m=a;return c.next(w=>ie.forEach(w,(C,D)=>(h<D.largestBatchId&&(h=D.largestBatchId),a.get(C)?ie.resolve():this.remoteDocumentCache.getEntry(e,C).next(R=>{m=m.insert(C,R)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,m,w,un())).next(C=>({batchId:h,changes:iO(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new tt(t)).next(r=>{let i=Ow();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Ow();return this.indexManager.getCollectionParents(e,i).next(c=>ie.forEach(c,h=>{const m=(w=t,C=h.child(i),new Hc(C,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,C;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(w=>{w.forEach((C,D)=>{a=a.insert(C,D)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((h,m)=>{const w=m.getKey();null===a.get(w)&&(a=a.insert(w,fr.newInvalidDocument(w)))});let c=Ow();return a.forEach((h,m)=>{const w=i.get(h);void 0!==w&&Pw(w.mutation,m,Us.empty(),ir.now()),Mw(t,m)&&(c=c.insert(h,m))}),c})}}class bV{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,t){return ie.resolve(this.es.get(t))}saveBundleMetadata(e,t){var r;return this.es.set(t.id,{id:(r=t).id,version:r.version,createTime:Kr(r.createTime)}),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.ns.get(t))}saveNamedQuery(e,t){return this.ns.set(t.name,{name:(r=t).name,query:ER(r.bundledQuery),readTime:Kr(r.readTime)}),ie.resolve();var r}}class DV{constructor(){this.overlays=new jr(tt.comparator),this.ss=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=xu();return ie.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ce(e,t,a)}),ie.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ss.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ss.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const i=xu(),a=t.length+1,c=new tt(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const m=h.getNext().value,w=m.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return ie.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new jr((w,C)=>w-C);const c=this.overlays.getIterator();for(;c.hasNext();){const w=c.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let C=a.get(w.largestBatchId);null===C&&(C=xu(),a=a.insert(w.largestBatchId,C)),C.set(w.getKey(),w)}}const h=xu(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((w,C)=>h.set(w,C)),!(h.size()>=i)););return ie.resolve(h)}ce(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.ss.get(i.largestBatchId).delete(r.key);this.ss.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new wR(t,r));let a=this.ss.get(t);void 0===a&&(a=un(),this.ss.set(t,a)),this.ss.set(t,a.add(r.key))}}class AR{constructor(){this.rs=new qn(Mi.os),this.us=new qn(Mi.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,t){const r=new Mi(e,t);this.rs=this.rs.add(r),this.us=this.us.add(r)}hs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ls(new Mi(e,t))}fs(e,t){e.forEach(r=>this.removeReference(r,t))}ds(e){const t=new tt(new vn([])),r=new Mi(t,e),i=new Mi(t,e+1),a=[];return this.us.forEachInRange([r,i],c=>{this.ls(c),a.push(c.key)}),a}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const t=new tt(new vn([])),r=new Mi(t,e),i=new Mi(t,e+1);let a=un();return this.us.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Mi(e,0),r=this.rs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Mi{constructor(e,t){this.key=e,this.gs=t}static os(e,t){return tt.comparator(e.key,t.key)||Jt(e.gs,t.gs)}static cs(e,t){return Jt(e.gs,t.gs)||tt.comparator(e.key,t.key)}}class SV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ys=1,this.ps=new qn(Mi.os)}checkEmpty(e){return ie.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ys;this.ys++;const c=new yR(a,t,r,i);this.mutationQueue.push(c);for(const h of i)this.ps=this.ps.add(new Mi(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ie.resolve(c)}lookupMutationBatch(e,t){return ie.resolve(this.Is(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ts(t+1),a=i<0?0:i;return ie.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Mi(t,0),i=new Mi(t,Number.POSITIVE_INFINITY),a=[];return this.ps.forEachInRange([r,i],c=>{const h=this.Is(c.gs);a.push(h)}),ie.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new qn(Jt);return t.forEach(i=>{const a=new Mi(i,0),c=new Mi(i,Number.POSITIVE_INFINITY);this.ps.forEachInRange([a,c],h=>{r=r.add(h.gs)})}),ie.resolve(this.Es(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;tt.isDocumentKey(a)||(a=a.child(""));const c=new Mi(new tt(a),0);let h=new qn(Jt);return this.ps.forEachWhile(m=>{const w=m.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(h=h.add(m.gs)),!0)},c),ie.resolve(this.Es(h))}Es(e){const t=[];return e.forEach(r=>{const i=this.Is(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Dt(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ps;return ie.forEach(t.mutations,i=>{const a=new Mi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ps=r})}Pn(e){}containsKey(e,t){const r=new Mi(t,0),i=this.ps.firstAfterOrEqual(r);return ie.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ie.resolve()}As(e,t){return this.Ts(e)}Ts(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Is(e){const t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class AV{constructor(e){this.Rs=e,this.docs=new jr(tt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.Rs(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():fr.newInvalidDocument(t))}getEntries(e,t){let r=Vs();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():fr.newInvalidDocument(i))}),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Vs();const c=t.path,h=new tt(c.child("")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:w,value:{document:C}}=m.getNext();if(!c.isPrefixOf(w.path))break;w.path.length>c.length+1||bT(TT(C),r)<=0||(i.has(C.key)||Mw(t,C))&&(a=a.insert(C.key,C.mutableCopy()))}return ie.resolve(a)}getAllFromCollectionGroup(e,t,r,i){ht()}Ps(e,t){return ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new RV(this)}getSize(e){return ie.resolve(this.size)}}class RV extends KO{constructor(e){super(),this.Xn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Xn.addEntry(e,i)):this.Xn.removeEntry(r)}),ie.waitFor(t)}getFromCache(e,t){return this.Xn.getEntry(e,t)}getAllFromCache(e,t){return this.Xn.getEntries(e,t)}}class xV{constructor(e){this.persistence=e,this.vs=new _d(t=>Xf(t),Rw),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this.bs=0,this.Vs=new AR,this.targetCount=0,this.Ss=ap.Vn()}forEachTarget(e,t){return this.vs.forEach((r,i)=>t(i)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ie.resolve()}xn(e){this.vs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ss=new ap(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.xn(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.xn(t),ie.resolve()}removeTargetData(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.vs.forEach((c,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.vs.delete(c),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ie.waitFor(a).next(()=>i)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.vs.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this.Vs.hs(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this.Vs.fs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),ie.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Vs.ds(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Vs.ws(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this.Vs.containsKey(t))}}class ek{constructor(e,t){this.Ds={},this.overlays={},this.Cs=new u(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new xV(this),this.indexManager=new gV,this.remoteDocumentCache=new AV(r=>this.referenceDelegate.ks(r)),this.Tt=new AO(t),this.$s=new bV(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new DV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ds[e.toKey()];return r||(r=new SV(t,this.referenceDelegate),this.Ds[e.toKey()]=r),r}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$s}runTransaction(e,t,r){$e("MemoryPersistence","Starting transaction:",e);const i=new MV(this.Cs.next());return this.referenceDelegate.Ms(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Fs(e,t){return ie.or(Object.values(this.Ds).map(r=>()=>r.containsKey(e,t)))}}class MV extends ST{constructor(e){super(),this.currentSequenceNumber=e}}class QT{constructor(e){this.persistence=e,this.Bs=new AR,this.Ls=null}static qs(e){return new QT(e)}get Us(){if(this.Ls)return this.Ls;throw ht()}addReference(e,t,r){return this.Bs.addReference(r,t),this.Us.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Bs.removeReference(r,t),this.Us.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.Us.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Bs.ds(t.targetId).forEach(i=>this.Us.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Us.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ms(){this.Ls=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.Us,r=>{const i=tt.fromPath(r);return this.Ks(e,i).next(a=>{a||t.removeEntry(i,Mt.min())})}).next(()=>(this.Ls=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ks(e,t).next(r=>{r?this.Us.delete(t.toString()):this.Us.add(t.toString())})}ks(e){return 0}Ks(e,t){return ie.or([()=>ie.resolve(this.Bs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Fs(e,t)])}}class NV{constructor(e){this.Tt=e}F(e,t,r,i){const a=new bw("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",CO,{unique:!0}),h.createObjectStore("documentMutations"),tk(e),function(h){h.createObjectStore("remoteDocuments")}(e));let c=ie.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),tk(e)),c=c.next(()=>function(h){const m=h.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Mt.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(h,m){return m.store("mutations").W().next(w=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",CO,{unique:!0});const C=m.store("mutations"),D=w.map(R=>C.put(R));return ie.waitFor(D)})}(e,a))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Gs(a))),r<6&&i>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(a)))),r<7&&i>=7&&(c=c.next(()=>this.js(a))),r<8&&i>=8&&(c=c.next(()=>this.zs(e,a))),r<9&&i>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Ws(a))),r<11&&i>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(h){const m=h.createObjectStore("documentOverlays",{keyPath:nV});m.createIndex("collectionPathOverlayIndex",rV,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",iV,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(h){const m=h.createObjectStore("remoteDocumentsV14",{keyPath:zU});m.createIndex("documentKeyIndex",WU),m.createIndex("collectionGroupIndex",qU)}(e)).next(()=>this.Hs(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.Js(e,a))),r<15&&i>=15&&(c=c.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:XU}).createIndex("sequenceNumberIndex",JU,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:eV}).createIndex("documentKeyIndex",tV,{unique:!1})}(e))),c}Qs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=KT(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Gs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>ie.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(h=>ie.forEach(h,m=>{Dt(m.userId===a.userId);const w=ip(this.Tt,m);return HO(e,a.userId,w).next(()=>{})}))}))}js(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((c,h)=>{const m=new vn(c),w=[0,Es(m)];a.push(t.get(w).next(C=>C?ie.resolve():t.put({targetId:0,path:Es(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ie.waitFor(a))})}zs(e,t){e.createObjectStore("collectionParents",{keyPath:QU});const r=t.store("collectionParents"),i=new SR,a=c=>{if(i.add(c)){const h=c.lastSegment(),m=c.popLast();return r.put({collectionId:h,parent:Es(m)})}};return t.store("remoteDocuments").X({Z:!0},(c,h)=>{const m=new vn(c);return a(m.popLast())}).next(()=>t.store("documentMutations").X({Z:!0},([c,h,m],w)=>{const C=Nu(h);return a(C.popLast())}))}Ws(e){const t=e.store("targets");return t.X((r,i)=>{const a=$w(i),c=xO(this.Tt,a);return t.put(c)})}Hs(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((a,c)=>{const h=t.store("remoteDocumentsV14"),m=(w=c,w.document?new tt(vn.fromString(w.document.name).popFirst(5)):w.noDocument?tt.fromSegments(w.noDocument.path):w.unknownDocument?tt.fromSegments(w.unknownDocument.path):ht()).path.toArray();var w;const C={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(h.put(C))}).next(()=>ie.waitFor(i))}Js(e,t){const r=t.store("mutations"),i=ZO(this.Tt),a=new ek(QT.qs,this.Tt.oe);return r.W().next(c=>{const h=new Map;return c.forEach(m=>{var w;let C=null!==(w=h.get(m.userId))&&void 0!==w?w:un();ip(this.Tt,m).keys().forEach(D=>C=C.add(D)),h.set(m.userId,C)}),ie.forEach(h,(m,w)=>{const C=new oi(w),D=GT.ue(this.Tt,C),R=a.getIndexManager(C),F=ZT.ue(C,this.Tt,R,a.referenceDelegate);return new JO(i,F,D,R).recalculateAndSaveOverlaysForDocumentKeys(new _R(t,u.at),m).next()})})}}function tk(n){n.createObjectStore("targetDocuments",{keyPath:ZU}).createIndex("documentTargetsIndex",YU,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",KU,{unique:!0}),n.createObjectStore("targetGlobal")}const RR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class xR{constructor(e,t,r,i,a,c,h,m,w,C,D=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ys=a,this.window=c,this.document=h,this.Zs=w,this.Xs=C,this.ti=D,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=R=>Promise.resolve(),!xR.C())throw new Le(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new EV(this,i),this.oi=t+"main",this.Tt=new AO(m),this.ui=new qo(this.oi,this.ti,new NV(this.Tt)),this.Ns=new _V(this.referenceDelegate,this.Tt),this.remoteDocumentCache=ZO(this.Tt),this.$s=new uV,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===C&&Nr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Le(ae.FAILED_PRECONDITION,RR);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new u(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){var t=this;return this.ri=function(){var r=(0,ve.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.ai())})))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>XT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(t=>{t||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(t=>this.isPrimary&&!t?this.mi(e).next(()=>!1):!!t&&this.gi(e).next(()=>!0))).catch(e=>{if(jc(e))return $e("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return qw(e).get("owner").next(t=>ie.resolve(this.yi(t)))}pi(e){return XT(e).delete(this.clientId)}Ii(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.Ti(e.ii,18e5)){e.ii=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=xi(r,"clientMetadata");return i.W().next(a=>{const c=e.Ei(a,18e5),h=a.filter(m=>-1===c.indexOf(m));return ie.forEach(h,m=>i.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(e.ci)for(const r of t)e.ci.removeItem(e.Ai(r.clientId))}})()}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?ie.resolve(!0):qw(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)){if(this.yi(t)&&this.networkEnabled)return!0;if(!this.yi(t)){if(!t.allowTabSynchronization)throw new Le(ae.FAILED_PRECONDITION,RR);return!1}}return!(!this.networkEnabled||!this.inForeground)||XT(e).W().next(r=>void 0===this.Ei(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&$e("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.xs=!1,e.Pi(),e.si&&(e.si.cancel(),e.si=null),e.vi(),e.bi(),yield e.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new _R(t,u.at);return e.mi(r).next(()=>e.pi(r))}),e.ui.close(),e.Vi()})()}Ei(e,t){return e.filter(r=>this.Ti(r.updateTimeMs,t)&&!this.Ri(r.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>XT(e).W().next(t=>this.Ei(t,18e5).map(r=>r.clientId)))}get started(){return this.xs}getMutationQueue(e,t){return ZT.ue(e,this.Tt,t,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new mV(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return GT.ue(this.Tt,e)}getBundleCache(){return this.$s}runTransaction(e,t,r){$e("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(c=this.ti)?oV:14===c?SO:13===c?DO:12===c?sV:11===c?bO:void ht();var c;let h;return this.ui.runTransaction(e,i,a,m=>(h=new _R(m,this.Cs?this.Cs.next():u.at),"readwrite-primary"===t?this._i(h).next(w=>!!w||this.wi(h)).next(w=>{if(!w)throw Nr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new Le(ae.FAILED_PRECONDITION,DT);return r(h)}).next(w=>this.gi(h).next(()=>w)):this.Di(h).next(()=>r(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}Di(e){return qw(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)&&!this.yi(t)&&!(this.Xs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Le(ae.FAILED_PRECONDITION,RR)})}gi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return qw(e).put("owner",t)}static C(){return qo.C()}mi(e){const t=qw(e);return t.get("owner").next(r=>this.yi(r)?($e("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ie.resolve())}Ti(e,t){const r=Date.now();return!(e<r-t||e>r&&(Nr(`Detected an update time that is in the future: ${e} > ${r}`),1))}hi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=()=>{this.Pi();const t=/(?:Version|Mobile)\/1[456]/;(0,N.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}bi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var t;try{const r=null!==(null===(t=this.ci)||void 0===t?void 0:t.getItem(this.Ai(e)));return $e("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Nr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Pi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){Nr("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch{}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function qw(n){return xi(n,"owner")}function XT(n){return xi(n,"clientMetadata")}function MR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class NR{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ci=r,this.xi=i}static Ni(e,t){let r=un(),i=un();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new NR(e,t.fromCache,r,i)}}class nk{constructor(){this.ki=!1}initialize(e,t){this.$i=e,this.indexManager=t,this.ki=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Mi(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Fi(e,t))}Mi(e,t){if(UP(t))return ie.resolve(null);let r=ws(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=LT(t,null,"F"),r=ws(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=un(...a);return this.$i.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,r).next(m=>{const w=this.Bi(t,h);return this.Li(t,w,c,m.readTime)?this.Mi(e,LT(t,null,"F")):this.qi(e,w,t,m)}))})))}Oi(e,t,r,i){return UP(t)||i.isEqual(Mt.min())?this.Fi(e,t):this.$i.getDocuments(e,r).next(a=>{const c=this.Bi(t,a);return this.Li(t,c,r,i)?this.Fi(e,t):(Um()<=ns.in.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),dR(t)),this.qi(e,c,t,CT(i,-1)))})}Bi(e,t){let r=new qn($P(e));return t.forEach((i,a)=>{Mw(e,a)&&(r=r.add(a))}),r}Li(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Fi(e,t){return Um()<=ns.in.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",dR(t)),this.$i.getDocumentsMatchingQuery(e,t,Fs.min())}qi(e,t,r,i){return this.$i.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}class PV{constructor(e,t,r,i){this.persistence=e,this.Ui=t,this.Tt=i,this.Ki=new jr(Jt),this.Gi=new _d(a=>Xf(a),Rw),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.$s=e.getBundleCache(),this.zi(r)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JO(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ki))}}function rk(n,e,t,r){return new PV(n,e,t,r)}function ik(n,e){return PR.apply(this,arguments)}function PR(){return PR=(0,ve.Z)(function*(n,e){const t=rt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.zi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],h=[];let m=un();for(const w of i){c.push(w.batchId);for(const C of w.mutations)m=m.add(C.key)}for(const w of a){h.push(w.batchId);for(const C of w.mutations)m=m.add(C.key)}return t.localDocuments.getDocuments(r,m).next(w=>({Wi:w,removedBatchIds:c,addedBatchIds:h}))})})}),PR.apply(this,arguments)}function sk(n){const e=rt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ns.getLastRemoteSnapshotVersion(t))}function ok(n,e,t){let r=un(),i=un();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=Vs();return t.forEach((h,m)=>{const w=a.get(h);m.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(h)),m.isNoDocument()&&m.version.isEqual(Mt.min())?(e.removeEntry(h,m.readTime),c=c.insert(h,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),c=c.insert(h,m)):$e("LocalStore","Ignoring outdated watch update for ",h,". Current version:",w.version," Watch version:",m.version)}),{Hi:c,Ji:i}})}function LV(n,e){const t=rt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function n_(n,e){const t=rt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ns.getTargetData(r,e).next(a=>a?(i=a,ie.resolve(i)):t.Ns.allocateTargetId(r).next(c=>(i=new vd(e,c,0,r.currentSequenceNumber),t.Ns.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ki.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ki=t.Ki.insert(r.targetId,r),t.Gi.set(e,r.targetId)),r})}function r_(n,e,t){return OR.apply(this,arguments)}function OR(){return OR=(0,ve.Z)(function*(n,e,t){const r=rt(n),i=r.Ki.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!jc(c))throw c;$e("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ki=r.Ki.remove(e),r.Gi.delete(i.target)}),OR.apply(this,arguments)}function JT(n,e,t){const r=rt(n);let i=Mt.min(),a=un();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,m,w){const C=rt(h),D=C.Gi.get(w);return void 0!==D?ie.resolve(C.Ki.get(D)):C.Ns.getTargetData(m,w)}(r,c,ws(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(c,h.targetId).next(m=>{a=m})}).next(()=>r.Ui.getDocumentsMatchingQuery(c,e,t?i:Mt.min(),t?a:un())).next(h=>(ck(r,BP(e),h),{documents:h,Yi:a})))}function ak(n,e){const t=rt(n),r=rt(t.Ns),i=t.Ki.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.ie(a,e).next(c=>c?c.target:null))}function uk(n,e){const t=rt(n),r=t.Qi.get(e)||Mt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.ji.getAllFromCollectionGroup(i,e,CT(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(ck(t,e,i),i))}function ck(n,e,t){let r=n.Qi.get(e)||Mt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Qi.set(e,r)}function kR(){return kR=(0,ve.Z)(function*(n,e,t,r){const i=rt(n);let a=un(),c=Vs();for(const w of t){const C=e.Zi(w.metadata.name);w.document&&(a=a.add(C));const D=e.Xi(w);D.setReadTime(e.tr(w.metadata.readTime)),c=c.insert(C,D)}const h=i.ji.newChangeBuffer({trackRemovals:!0}),m=yield n_(i,(w=r,ws(qm(vn.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>ok(w,h,c).next(C=>(h.apply(w),C)).next(C=>i.Ns.removeMatchingKeysForTargetId(w,m.targetId).next(()=>i.Ns.addMatchingKeys(w,a,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,C.Hi,C.Ji)).next(()=>C.Hi)))}),kR.apply(this,arguments)}function UV(n,e){return LR.apply(this,arguments)}function LR(){return LR=(0,ve.Z)(function*(n,e,t=un()){const r=yield n_(n,ws(ER(e.bundledQuery))),i=rt(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=Kr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.$s.saveNamedQuery(a,e);const h=r.withResumeToken(ze.EMPTY_BYTE_STRING,c);return i.Ki=i.Ki.insert(h.targetId,h),i.Ns.updateTargetData(a,h).next(()=>i.Ns.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Ns.addMatchingKeys(a,t,r.targetId)).next(()=>i.$s.saveNamedQuery(a,e))})}),LR.apply(this,arguments)}function lk(n,e){return`firestore_clients_${n}_${e}`}function dk(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function FR(n,e){return`firestore_targets_${n}_${e}`}class eb{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static er(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new Le(i.error.code,i.error.message))),c?new eb(e,t,i.state,a):(Nr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static er(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Le(r.error.code,r.error.message))),a?new Kw(e,r.state,i):(Nr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class tb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static er(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=BT();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=ee(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new tb(e,a):(Nr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class UR{constructor(e,t){this.clientId=e,this.onlineState=t}static er(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new UR(t.clientId,t.onlineState):(Nr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class VR{constructor(){this.activeTargetIds=BT()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class BR{constructor(e,t,r,i,a){this.window=e,this.Ys=t,this.persistenceKey=r,this.rr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new jr(Jt),this.started=!1,this.hr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.lr=lk(this.persistenceKey,this.rr),this.dr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.rr,new VR),this._r=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.gr=`firestore_online_state_${this.persistenceKey}`,this.yr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.Si();for(const i of t){if(i===e.rr)continue;const a=e.getItem(lk(e.persistenceKey,i));if(a){const c=tb.er(i,a);c&&(e.ar=e.ar.insert(c.clientId,c))}}e.pr();const r=e.storage.getItem(e.gr);if(r){const i=e.Ir(r);i&&e.Tr(i)}for(const i of e.hr)e.cr(i);e.hr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,t,r){this.Ar(e,t,r),this.Rr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(FR(this.persistenceKey,e));if(r){const i=Kw.er(e,r);i&&(t=i.state)}}return this.Pr.sr(e),this.pr(),t}removeLocalQueryTarget(e){this.Pr.ir(e),this.pr()}isLocalQueryTarget(e){return this.Pr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(FR(this.persistenceKey,e))}updateQueryState(e,t,r){this.vr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Rr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return $e("SharedClientState","READ",e,t),t}setItem(e,t){$e("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){$e("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){var t=this;const r=e;if(r.storageArea===this.storage){if($e("SharedClientState","EVENT",r.key,r.newValue),r.key===this.lr)return void Nr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t._r.test(r.key)){if(null==r.newValue){const i=t.Sr(r.key);return t.Dr(i,null)}{const i=t.Cr(r.key,r.newValue);if(i)return t.Dr(i.clientId,i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(t.mr.test(r.key)){if(null!==r.newValue){const i=t.$r(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.gr){if(null!==r.newValue){const i=t.Ir(r.newValue);if(i)return t.Tr(i)}}else if(r.key===t.dr){const i=function(a){let c=u.at;if(null!=a)try{const h=JSON.parse(a);Dt("number"==typeof h),c=h}catch(h){Nr("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(r.newValue);i!==u.at&&t.sequenceNumberHandler(i)}else if(r.key===t.yr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Fr(a)))}}else t.hr.push(r)}))}}get Pr(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.Pr.nr())}Ar(e,t,r){const i=new eb(this.currentUser,e,t,r),a=dk(this.persistenceKey,this.currentUser,e);this.setItem(a,i.nr())}Rr(e){const t=dk(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.gr,JSON.stringify({clientId:this.rr,onlineState:e}))}vr(e,t,r){const i=FR(this.persistenceKey,e),a=new Kw(e,t,r);this.setItem(i,a.nr())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.yr,t)}Sr(e){const t=this._r.exec(e);return t?t[1]:null}Cr(e,t){const r=this.Sr(e);return tb.er(r,t)}Nr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return eb.er(new oi(void 0!==r[2]?r[2]:null),i,t)}$r(e,t){const r=this.mr.exec(e),i=Number(r[1]);return Kw.er(i,t)}Ir(e){return UR.er(e)}Or(e){return JSON.parse(e)}kr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Br(e.batchId,e.state,e.error);$e("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Er(this.ar),a=this.Er(r),c=[],h=[];return a.forEach(m=>{i.has(m)||c.push(m)}),i.forEach(m=>{a.has(m)||h.push(m)}),this.syncEngine.qr(c,h).then(()=>{this.ar=r})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let t=BT();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class hk{constructor(){this.Ur=new VR,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,t,r){this.Kr[e]=t}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new VR,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class VV{Gr(e){}shutdown(){}}class fk{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let nb=null;function $R(){return null===nb?nb=268435456+Math.round(2147483648*Math.random()):nb++,"0x"+nb.toString(16)}const BV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $V{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}const ss="WebChannelConnection";class jV extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.co=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,t,r,i,a){const c=$R(),h=this.fo(e,t);$e("RestConnection",`Sending RPC '${e}' ${c}:`,h,r);const m={};return this._o(m,i,a),this.wo(e,h,m,r).then(w=>($e("RestConnection",`Received RPC '${e}' ${c}: `,w),w),w=>{throw hd("RestConnection",`RPC '${e}' ${c} failed with error: `,w,"url: ",h,"request:",r),w})}mo(e,t,r,i,a,c){return this.lo(e,t,r,i,a)}_o(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+qf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}fo(e,t){return`${this.co}/v1/${t}:${BV[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,t,r,i){const a=$R();return new Promise((c,h)=>{const m=new YA;m.setWithCredentials(!0),m.listenOnce(mT.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Lm.NO_ERROR:const C=m.getResponseJson();$e(ss,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(C)),c(C);break;case Lm.TIMEOUT:$e(ss,`RPC '${e}' ${a} timed out`),h(new Le(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Lm.HTTP_ERROR:const D=m.getStatus();if($e(ss,`RPC '${e}' ${a} failed with status:`,D,"response text:",m.getResponseText()),D>0){let R=m.getResponseJson();Array.isArray(R)&&(R=R[0]);const F=R?.error;if(F&&F.status&&F.message){const j=function(J){const se=J.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(se)>=0?se:ae.UNKNOWN}(F.status);h(new Le(j,F.message))}else h(new Le(ae.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new Le(ae.UNAVAILABLE,"Connection failed."));break;default:ht()}}finally{$e(ss,`RPC '${e}' ${a} completed.`)}});const w=JSON.stringify(i);$e(ss,`RPC '${e}' ${a} sending request:`,i),m.send(t,"POST",w,r,15)})}yo(e,t,r){const i=$R(),a=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=pT(),h=gT(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new Fm({})),this._o(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const w=a.join("");$e(ss,`Creating RPC '${e}' stream ${i}: ${w}`,m);const C=c.createWebChannel(w,m);let D=!1,R=!1;const F=new $V({Yr:J=>{R?$e(ss,`Not sending because RPC '${e}' stream ${i} is closed:`,J):(D||($e(ss,`Opening RPC '${e}' stream ${i} transport.`),C.open(),D=!0),$e(ss,`RPC '${e}' stream ${i} sending:`,J),C.send(J))},Zr:()=>C.close()}),j=(J,se,dt)=>{J.listen(se,yt=>{try{dt(yt)}catch(lt){setTimeout(()=>{throw lt},0)}})};return j(C,Wf.EventType.OPEN,()=>{R||$e(ss,`RPC '${e}' stream ${i} transport opened.`)}),j(C,Wf.EventType.CLOSE,()=>{R||(R=!0,$e(ss,`RPC '${e}' stream ${i} transport closed`),F.oo())}),j(C,Wf.EventType.ERROR,J=>{R||(R=!0,hd(ss,`RPC '${e}' stream ${i} transport errored:`,J),F.oo(new Le(ae.UNAVAILABLE,"The operation could not be completed")))}),j(C,Wf.EventType.MESSAGE,J=>{var se;if(!R){const dt=J.data[0];Dt(!!dt);const lt=dt.error||(null===(se=dt[0])||void 0===se?void 0:se.error);if(lt){$e(ss,`RPC '${e}' stream ${i} received error:`,lt);const Et=lt.status;let Vt=function(Hr){const Hs=ai[Hr];if(void 0!==Hs)return nO(Hs)}(Et),Zt=lt.message;void 0===Vt&&(Vt=ae.INTERNAL,Zt="Unknown error status: "+Et+" with message "+lt.message),R=!0,F.oo(new Le(Vt,Zt)),C.close()}else $e(ss,`RPC '${e}' stream ${i} received:`,dt),F.uo(dt)}}),j(h,_T.STAT_EVENT,J=>{J.stat===zf.PROXY?$e(ss,`RPC '${e}' stream ${i} detected buffering proxy`):J.stat===zf.NOPROXY&&$e(ss,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{F.ro()},0),F}}function pk(){return typeof window<"u"?window:null}function rb(){return typeof document<"u"?document:null}function Zw(n){return new PU(n,!0)}class jR{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Ys=e,this.timerId=t,this.po=r,this.Io=i,this.To=a,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}Po(){this.Eo=this.To}vo(e){this.cancel();const t=Math.floor(this.Eo+this.bo()),r=Math.max(0,Date.now()-this.Ro),i=Math.max(0,t-r);i>0&&$e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Eo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,i,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}bo(){return(Math.random()-.5)*this.Eo}}class gk{constructor(e,t,r,i,a,c,h,m){this.Ys=e,this.So=r,this.Do=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new jR(e,t)}$o(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ve.Z)(function*(){e.$o()&&(yield e.close(0))})()}Fo(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}Lo(){var e=this;return(0,ve.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r.Uo(),r.Ko(),r.ko.cancel(),r.Co++,4!==e?r.ko.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Nr(t.toString()),Nr("Using maximum backoff delay to prevent overloading the backend."),r.ko.Po()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Go(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.no(t)})()}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),t=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Co===t&&this.jo(r,i)},r=>{e(()=>{const i=new Le(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.zo(i)})})}jo(e,t){const r=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(i=>{r(()=>this.zo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.ko.vo((0,ve.Z)(function*(){e.state=0,e.start()}))}zo(e){return $e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return t=>{this.Ys.enqueueAndForget(()=>this.Co===e?t():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class HV extends gk{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.Tt=a}Wo(e,t){return this.connection.yo("Listen",e,t)}onMessage(e){this.ko.reset();const t=function LU(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:ht(),i=e.targetChange.targetIds||[],a=function(m,w){return m.yt?(Dt(void 0===w||"string"==typeof w),ze.fromBase64String(w||"")):(Dt(void 0===w||w instanceof Uint8Array),ze.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(m){const w=void 0===m.code?ae.UNKNOWN:nO(m.code);return new Le(w,m.message||"")}(c);t=new aO(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Mu(n,r.document.name),a=Kr(r.document.updateTime),c=r.document.createTime?Kr(r.document.createTime):Mt.min(),h=new Ri({mapValue:{fields:r.document.fields}}),m=fr.newFoundDocument(i,a,c,h);t=new $T(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,i=Mu(n,r.document),a=r.readTime?Kr(r.readTime):Mt.min(),c=fr.newNoDocument(i,a);t=new $T([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Mu(n,r.document);t=new $T([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ht();{const r=e.filter,a=new TU(r.count||0);t=new oO(r.targetId,a)}}var m;return t}(this.Tt,e),r=function(i){if(!("targetChange"in i))return Mt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Mt.min():a.readTime?Kr(a.readTime):Mt.min()}(e);return this.listener.Ho(t,r)}Jo(e){const t={};t.database=Vw(this.Tt),t.addTarget=function(i,a){let c;const h=a.target;return c=PT(h)?{documents:_O(i,h)}:{query:mR(i,h)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?c.resumeToken=dO(i,a.resumeToken):a.snapshotVersion.compareTo(Mt.min())>0&&(c.readTime=Xm(i,a.snapshotVersion.toTimestamp())),c}(this.Tt,e);const r=function UU(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ht()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.qo(t)}Yo(e){const t={};t.database=Vw(this.Tt),t.removeTarget=e,this.qo(t)}}class GV extends gk{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.Tt=a,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,t){return this.connection.yo("Write",e,t)}onMessage(e){if(Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const t=function FU(n,e){return n&&n.length>0?(Dt(void 0!==e),n.map(t=>function(r,i){let a=Kr(r.updateTime?r.updateTime:i);return a.isEqual(Mt.min())&&(a=Kr(i)),new EU(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Kr(e.commitTime);return this.listener.eu(r,t)}return Dt(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=Vw(this.Tt),this.qo(e)}tu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Bw(this.Tt,r))};this.qo(t)}}class zV extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.Tt=i,this.iu=!1}ru(){if(this.iu)throw new Le(ae.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,t,r){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.lo(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Le(ae.UNKNOWN,i.toString())})}mo(e,t,r,i){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.mo(e,t,r,a,c,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Le(ae.UNKNOWN,a.toString())})}terminate(){this.iu=!0}}class qV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(Nr(t),this.cu=!1):$e("OnlineStateTracker",t)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}class KV{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=a,this.yu.Gr(h=>{r.enqueueAndForget((0,ve.Z)(function*(){var m;zc(c)&&($e("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,ve.Z)(function*(w){const C=rt(w);C.mu.add(4),yield i_(C),C.pu.set("Unknown"),C.mu.delete(4),yield Yw(C)}),function(w){return m.apply(this,arguments)})(c))}))}),this.pu=new qV(r,i)}}function Yw(n){return GR.apply(this,arguments)}function GR(){return GR=(0,ve.Z)(function*(n){if(zc(n))for(const e of n.gu)yield e(!0)}),GR.apply(this,arguments)}function i_(n){return zR.apply(this,arguments)}function zR(){return zR=(0,ve.Z)(function*(n){for(const e of n.gu)yield e(!1)}),zR.apply(this,arguments)}function ib(n,e){const t=rt(n);t.wu.has(e.targetId)||(t.wu.set(e.targetId,e),KR(t)?qR(t):o_(t).Mo()&&WR(t,e))}function Qw(n,e){const t=rt(n),r=o_(t);t.wu.delete(e),r.Mo()&&mk(t,e),0===t.wu.size&&(r.Mo()?r.Bo():zc(t)&&t.pu.set("Unknown"))}function WR(n,e){n.Iu.Ot(e.targetId),o_(n).Jo(e)}function mk(n,e){n.Iu.Ot(e),o_(n).Yo(e)}function qR(n){n.Iu=new RU({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>n.wu.get(e)||null}),o_(n).start(),n.pu.au()}function KR(n){return zc(n)&&!o_(n).$o()&&n.wu.size>0}function zc(n){return 0===rt(n).mu.size}function _k(n){n.Iu=void 0}function ZV(n){return ZR.apply(this,arguments)}function ZR(){return ZR=(0,ve.Z)(function*(n){n.wu.forEach((e,t)=>{WR(n,e)})}),ZR.apply(this,arguments)}function YV(n,e){return YR.apply(this,arguments)}function YR(){return YR=(0,ve.Z)(function*(n,e){_k(n),KR(n)?(n.pu.fu(e),qR(n)):n.pu.set("Unknown")}),YR.apply(this,arguments)}function QV(n,e,t){return QR.apply(this,arguments)}function QR(){return QR=(0,ve.Z)(function*(n,e,t){if(n.pu.set("Online"),e instanceof aO&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(i,a){const c=a.cause;for(const h of a.targetIds)i.wu.has(h)&&(yield i.remoteSyncer.rejectListen(h,c),i.wu.delete(h),i.Iu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){$e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield sb(n,r)}else if(e instanceof $T?n.Iu.Qt(e):e instanceof oO?n.Iu.Zt(e):n.Iu.Wt(e),!t.isEqual(Mt.min()))try{const r=yield sk(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.Iu.ee(a);return c.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const w=i.wu.get(m);w&&i.wu.set(m,w.withResumeToken(h.resumeToken,a))}}),c.targetMismatches.forEach(h=>{const m=i.wu.get(h);if(!m)return;i.wu.set(h,m.withResumeToken(ze.EMPTY_BYTE_STRING,m.snapshotVersion)),mk(i,h);const w=new vd(m.target,h,1,m.sequenceNumber);WR(i,w)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){$e("RemoteStore","Failed to raise snapshot:",r),yield sb(n,r)}var r}),QR.apply(this,arguments)}function sb(n,e,t){return XR.apply(this,arguments)}function XR(){return XR=(0,ve.Z)(function*(n,e,t){if(!jc(e))throw e;n.mu.add(1),yield i_(n),n.pu.set("Offline"),t||(t=()=>sk(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){$e("RemoteStore","Retrying IndexedDB access"),yield t(),n.mu.delete(1),yield Yw(n)}))}),XR.apply(this,arguments)}function yk(n,e){return e().catch(t=>sb(n,t,e))}function s_(n){return JR.apply(this,arguments)}function JR(){return JR=(0,ve.Z)(function*(n){const e=rt(n),t=Cd(e);let r=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;XV(e);)try{const i=yield LV(e.localStore,r);if(null===i){0===e._u.length&&t.Bo();break}r=i.batchId,JV(e,i)}catch(i){yield sb(e,i)}vk(e)&&wk(e)}),JR.apply(this,arguments)}function XV(n){return zc(n)&&n._u.length<10}function JV(n,e){n._u.push(e);const t=Cd(n);t.Mo()&&t.Xo&&t.tu(e.mutations)}function vk(n){return zc(n)&&!Cd(n).$o()&&n._u.length>0}function wk(n){Cd(n).start()}function eB(n){return ex.apply(this,arguments)}function ex(){return ex=(0,ve.Z)(function*(n){Cd(n).su()}),ex.apply(this,arguments)}function tB(n){return tx.apply(this,arguments)}function tx(){return tx=(0,ve.Z)(function*(n){const e=Cd(n);for(const t of n._u)e.tu(t.mutations)}),tx.apply(this,arguments)}function nB(n,e,t){return nx.apply(this,arguments)}function nx(){return nx=(0,ve.Z)(function*(n,e,t){const r=n._u.shift(),i=vR.from(r,e,t);yield yk(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield s_(n)}),nx.apply(this,arguments)}function rB(n,e){return rx.apply(this,arguments)}function rx(){return rx=(0,ve.Z)(function*(n,e){var t;e&&Cd(n).Xo&&(yield(t=(0,ve.Z)(function*(r,i){if(tO(a=i.code)&&a!==ae.ABORTED){const c=r._u.shift();Cd(r).Fo(),yield yk(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield s_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),vk(n)&&wk(n)}),rx.apply(this,arguments)}function Ek(n,e){return ix.apply(this,arguments)}function ix(){return ix=(0,ve.Z)(function*(n,e){const t=rt(n);t.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const r=zc(t);t.mu.add(3),yield i_(t),r&&t.pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.mu.delete(3),yield Yw(t)}),ix.apply(this,arguments)}function sx(n,e){return ox.apply(this,arguments)}function ox(){return ox=(0,ve.Z)(function*(n,e){const t=rt(n);e?(t.mu.delete(2),yield Yw(t)):e||(t.mu.add(2),yield i_(t),t.pu.set("Unknown"))}),ox.apply(this,arguments)}function o_(n){return n.Tu||(n.Tu=function(e,t,r){const i=rt(e);return i.ru(),new HV(t,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(n.datastore,n.asyncQueue,{Xr:ZV.bind(null,n),no:YV.bind(null,n),Ho:QV.bind(null,n)}),n.gu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Tu.Fo(),KR(n)?qR(n):n.pu.set("Unknown")):(yield n.Tu.stop(),_k(n))});return function(t){return e.apply(this,arguments)}}())),n.Tu}function Cd(n){return n.Eu||(n.Eu=function(e,t,r){const i=rt(e);return i.ru(),new GV(t,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(n.datastore,n.asyncQueue,{Xr:eB.bind(null,n),no:rB.bind(null,n),nu:tB.bind(null,n),eu:nB.bind(null,n)}),n.gu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Eu.Fo(),yield s_(n)):(yield n.Eu.stop(),n._u.length>0&&($e("RemoteStore",`Stopping write stream with ${n._u.length} pending writes`),n._u=[]))});return function(t){return e.apply(this,arguments)}}())),n.Eu}class ax{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,h=new ax(e,t,c,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Le(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function a_(n,e){if(Nr("AsyncQueue",`${e}: ${n}`),jc(n))return new Le(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class u_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||tt.comparator(t.key,r.key):(t,r)=>tt.comparator(t.key,r.key),this.keyedMap=Ow(),this.sortedSet=new jr(this.comparator)}static emptySet(e){return new u_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof u_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new u_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Ik{constructor(){this.Au=new jr(tt.comparator)}track(e){const t=e.doc.key,r=this.Au.get(t);r?0!==e.type&&3===r.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==r.type?this.Au=this.Au.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Au=this.Au.remove(t):1===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):ht():this.Au=this.Au.insert(t,e)}Ru(){const e=[];return this.Au.inorderTraversal((t,r)=>{e.push(r)}),e}}class c_{constructor(e,t,r,i,a,c,h,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=w}static fromInitialDocuments(e,t,r,i,a){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new c_(e,t,u_.emptySet(t),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class iB{constructor(){this.Pu=void 0,this.listeners=[]}}class sB{constructor(){this.queries=new _d(e=>VP(e),xw),this.onlineState="Unknown",this.vu=new Set}}function ux(n,e){return cx.apply(this,arguments)}function cx(){return cx=(0,ve.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new iB),i)try{a.Pu=yield t.onListen(r)}catch(c){const h=a_(c,`Initialization of query '${dR(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Pu&&e.Vu(a.Pu)&&hx(t)}),cx.apply(this,arguments)}function lx(n,e){return dx.apply(this,arguments)}function dx(){return dx=(0,ve.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),dx.apply(this,arguments)}function oB(n,e){const t=rt(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const h of c.listeners)h.Vu(i)&&(r=!0);c.Pu=i}}r&&hx(t)}function aB(n,e,t){const r=rt(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function hx(n){n.vu.forEach(e=>{e.next()})}class fx{constructor(e,t,r){this.query=e,this.Su=t,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new c_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Du?this.xu(e)&&(this.Su.next(e),t=!0):this.Nu(e,this.onlineState)&&(this.ku(e),t=!0),this.Cu=e,t}onError(e){this.Su.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}Nu(e,t){return!e.fromCache||(!this.options.$u||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}xu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ku(e){e=c_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}class uB{constructor(e,t){this.Mu=e,this.byteLength=t}Ou(){return"metadata"in this.Mu}}class Ck{constructor(e){this.Tt=e}Zi(e){return Mu(this.Tt,e)}Xi(e){return e.metadata.exists?mO(this.Tt,e.document,!1):fr.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return Kr(e)}}class cB{constructor(e,t,r){this.Fu=e,this.localStore=t,this.Tt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Tk(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++t;const r=vn.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Lu(e){const t=new Map,r=new Ck(this.Tt);for(const i of e)if(i.metadata.queries){const a=r.Zi(i.metadata.name);for(const c of i.metadata.queries){const h=(t.get(c)||un()).add(a);t.set(c,h)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function FV(n,e,t,r){return kR.apply(this,arguments)}(e.localStore,new Ck(e.Tt),e.documents,e.Fu.id),r=e.Lu(e.documents);for(const i of e.queries)yield UV(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,qu:e.collectionGroups,Uu:t}})()}}function Tk(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class bk{constructor(e){this.key=e}}class Dk{constructor(e){this.key=e}}class Sk{constructor(e,t){this.query=e,this.Ku=t,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=un(),this.mutatedKeys=un(),this.ju=$P(e),this.zu=new u_(this.ju)}get Wu(){return this.Ku}Hu(e,t){const r=t?t.Ju:new Ik,i=t?t.zu:this.zu;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,D)=>{const R=i.get(C),F=Mw(this.query,D)?D:null,j=!!R&&this.mutatedKeys.has(R.key),J=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let se=!1;R&&F?R.data.isEqual(F.data)?j!==J&&(r.track({type:3,doc:F}),se=!0):this.Yu(R,F)||(r.track({type:2,doc:F}),se=!0,(m&&this.ju(F,m)>0||w&&this.ju(F,w)<0)&&(h=!0)):!R&&F?(r.track({type:0,doc:F}),se=!0):R&&!F&&(r.track({type:1,doc:R}),se=!0,(m||w)&&(h=!0)),se&&(F?(c=c.add(F),a=J?a.add(C):a.delete(C)):(c=c.delete(C),a=a.delete(C)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const C="F"===this.query.limitType?c.last():c.first();c=c.delete(C.key),a=a.delete(C.key),r.track({type:1,doc:C})}return{zu:c,Ju:r,Li:h,mutatedKeys:a}}Yu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const a=e.Ju.Ru();a.sort((w,C)=>function(D,R){const F=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht()}};return F(D)-F(R)}(w.type,C.type)||this.ju(w.doc,C.doc)),this.Zu(r);const c=t?this.Xu():[],h=0===this.Qu.size&&this.current?1:0,m=h!==this.Gu;return this.Gu=h,0!==a.length||m?{snapshot:new c_(this.query,e.zu,i,a,e.mutatedKeys,0===h,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),tc:c}:{tc:c}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new Ik,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(t=>this.Ku=this.Ku.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ku=this.Ku.delete(t)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=un(),this.zu.forEach(r=>{this.ec(r.key)&&(this.Qu=this.Qu.add(r.key))});const t=[];return e.forEach(r=>{this.Qu.has(r)||t.push(new Dk(r))}),this.Qu.forEach(r=>{e.has(r)||t.push(new bk(r))}),t}nc(e){this.Ku=e.Yi,this.Qu=un();const t=this.Hu(e.documents);return this.applyChanges(t,!0)}sc(){return c_.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class lB{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class dB{constructor(e){this.key=e,this.ic=!1}}class hB{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.rc={},this.oc=new _d(h=>VP(h),xw),this.uc=new Map,this.cc=new Set,this.ac=new jr(tt.comparator),this.hc=new Map,this.lc=new AR,this.fc={},this.dc=new Map,this._c=ap.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}function fB(n,e){return px.apply(this,arguments)}function px(){return px=(0,ve.Z)(function*(n,e){const t=Fx(n);let r,i;const a=t.oc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.sc();else{const c=yield n_(t.localStore,ws(e));t.isPrimaryClient&&ib(t.remoteStore,c);const h=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield gx(t,e,r,"current"===h,c.resumeToken)}return i}),px.apply(this,arguments)}function gx(n,e,t,r,i){return mx.apply(this,arguments)}function mx(){return mx=(0,ve.Z)(function*(n,e,t,r,i){n.mc=(D,R,F)=>{return(j=(0,ve.Z)(function*(J,se,dt,yt){let lt=se.view.Hu(dt);lt.Li&&(lt=yield JT(J.localStore,se.query,!1).then(({documents:Zt})=>se.view.Hu(Zt,lt)));const Et=yt&&yt.targetChanges.get(se.targetId),Vt=se.view.applyChanges(lt,J.isPrimaryClient,Et);return Dx(J,se.targetId,Vt.tc),Vt.snapshot}),function(J,se,dt,yt){return j.apply(this,arguments)})(n,D,R,F);var j};const a=yield JT(n.localStore,e,!0),c=new Sk(e,a.Yi),h=c.Hu(a.documents),m=Fw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),w=c.applyChanges(h,n.isPrimaryClient,m);Dx(n,t,w.tc);const C=new lB(e,t,c);return n.oc.set(e,C),n.uc.has(t)?n.uc.get(t).push(e):n.uc.set(t,[e]),w.snapshot}),mx.apply(this,arguments)}function pB(n,e){return _x.apply(this,arguments)}function _x(){return _x=(0,ve.Z)(function*(n,e){const t=rt(n),r=t.oc.get(e),i=t.uc.get(r.targetId);if(i.length>1)return t.uc.set(r.targetId,i.filter(a=>!xw(a,e))),void t.oc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield r_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Qw(t.remoteStore,r.targetId),l_(t,r.targetId)}).catch(Au))):(l_(t,r.targetId),yield r_(t.localStore,r.targetId,!0))}),_x.apply(this,arguments)}function yx(){return yx=(0,ve.Z)(function*(n,e,t){const r=Ux(n);try{const i=yield function(a,c){const h=rt(a),m=ir.now(),w=c.reduce((R,F)=>R.add(F.key),un());let C,D;return h.persistence.runTransaction("Locally write mutations","readwrite",R=>{let F=Vs(),j=un();return h.ji.getEntries(R,w).next(J=>{F=J,F.forEach((se,dt)=>{dt.isValidDocument()||(j=j.add(se))})}).next(()=>h.localDocuments.getOverlayedDocuments(R,F)).next(J=>{C=J;const se=[];for(const dt of c){const yt=CU(dt,C.get(dt.key).overlayedDocument);null!=yt&&se.push(new Gc(dt.key,yt,OP(yt.value.mapValue),Er.exists(!0)))}return h.mutationQueue.addMutationBatch(R,m,se,c)}).next(J=>{D=J;const se=J.applyToLocalDocumentSet(C,j);return h.documentOverlayCache.saveOverlays(R,J.batchId,se)})}).then(()=>({batchId:D.batchId,changes:iO(C)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,h){let m=a.fc[a.currentUser.toKey()];m||(m=new jr(Jt)),m=m.insert(c,h),a.fc[a.currentUser.toKey()]=m}(r,i.batchId,t),yield Wc(r,i.changes),yield s_(r.remoteStore)}catch(i){const a=a_(i,"Failed to persist write");t.reject(a)}}),yx.apply(this,arguments)}function Ak(n,e){return vx.apply(this,arguments)}function vx(){return vx=(0,ve.Z)(function*(n,e){const t=rt(n);try{const r=yield function kV(n,e){const t=rt(n),r=e.snapshotVersion;let i=t.Ki;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.ji.newChangeBuffer({trackRemovals:!0});i=t.Ki;const h=[];e.targetChanges.forEach((C,D)=>{const R=i.get(D);if(!R)return;h.push(t.Ns.removeMatchingKeys(a,C.removedDocuments,D).next(()=>t.Ns.addMatchingKeys(a,C.addedDocuments,D)));let F=R.withSequenceNumber(a.currentSequenceNumber);var j,J,se;e.targetMismatches.has(D)?F=F.withResumeToken(ze.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):C.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(C.resumeToken,r)),i=i.insert(D,F),J=F,se=C,(0===(j=R).resumeToken.approximateByteSize()||J.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8||se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0)&&h.push(t.Ns.updateTargetData(a,F))});let m=Vs(),w=un();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,C))}),h.push(ok(a,c,e.documentUpdates).next(C=>{m=C.Hi,w=C.Ji})),!r.isEqual(Mt.min())){const C=t.Ns.getLastRemoteSnapshotVersion(a).next(D=>t.Ns.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(C)}return ie.waitFor(h).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,m,w)).next(()=>m)}).then(a=>(t.Ki=i,a))}(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.hc.get(a);c&&(Dt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.ic=!0:i.modifiedDocuments.size>0?Dt(c.ic):i.removedDocuments.size>0&&(Dt(c.ic),c.ic=!1))}),yield Wc(t,r,e)}catch(r){yield Au(r)}}),vx.apply(this,arguments)}function Rk(n,e,t){const r=rt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.oc.forEach((a,c)=>{const h=c.view.bu(e);h.snapshot&&i.push(h.snapshot)}),function(a,c){const h=rt(a);h.onlineState=c;let m=!1;h.queries.forEach((w,C)=>{for(const D of C.listeners)D.bu(c)&&(m=!0)}),m&&hx(h)}(r.eventManager,e),i.length&&r.rc.Ho(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function mB(n,e,t){return wx.apply(this,arguments)}function wx(){return wx=(0,ve.Z)(function*(n,e,t){const r=rt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.hc.get(e),a=i&&i.key;if(a){let c=new jr(tt.comparator);c=c.insert(a,fr.newNoDocument(a,Mt.min()));const h=un().add(a),m=new Lw(Mt.min(),new Map,new qn(Jt),c,h);yield Ak(r,m),r.ac=r.ac.remove(a),r.hc.delete(e),Sx(r)}else yield r_(r.localStore,e,!1).then(()=>l_(r,e,t)).catch(Au)}),wx.apply(this,arguments)}function _B(n,e){return Ex.apply(this,arguments)}function Ex(){return Ex=(0,ve.Z)(function*(n,e){const t=rt(n),r=e.batch.batchId;try{const i=yield function OV(n,e){const t=rt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.ji.newChangeBuffer({trackRemovals:!0});return function(c,h,m,w){const C=m.batch,D=C.keys();let R=ie.resolve();return D.forEach(F=>{R=R.next(()=>w.getEntry(h,F)).next(j=>{const J=m.docVersions.get(F);Dt(null!==J),j.version.compareTo(J)<0&&(C.applyToRemoteDocument(j,m),j.isValidDocument()&&(j.setReadTime(m.commitVersion),w.addEntry(j)))})}),R.next(()=>c.mutationQueue.removeMutationBatch(h,C))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=un();for(let m=0;m<c.mutationResults.length;++m)c.mutationResults[m].transformResults.length>0&&(h=h.add(c.batch.mutations[m].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);bx(t,r,null),Tx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Wc(t,i)}catch(i){yield Au(i)}}),Ex.apply(this,arguments)}function yB(n,e,t){return Ix.apply(this,arguments)}function Ix(){return Ix=(0,ve.Z)(function*(n,e,t){const r=rt(n);try{const i=yield function(a,c){const h=rt(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let w;return h.mutationQueue.lookupMutationBatch(m,c).next(C=>(Dt(null!==C),w=C.keys(),h.mutationQueue.removeMutationBatch(m,C))).next(()=>h.mutationQueue.performConsistencyCheck(m)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(m,w,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,w)).next(()=>h.localDocuments.getDocuments(m,w))})}(r.localStore,e);bx(r,e,t),Tx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Wc(r,i)}catch(i){yield Au(i)}}),Ix.apply(this,arguments)}function Cx(){return Cx=(0,ve.Z)(function*(n,e){const t=rt(n);zc(t.remoteStore)||$e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=rt(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.dc.get(r)||[];i.push(e),t.dc.set(r,i)}catch(r){const i=a_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Cx.apply(this,arguments)}function Tx(n,e){(n.dc.get(e)||[]).forEach(t=>{t.resolve()}),n.dc.delete(e)}function bx(n,e,t){const r=rt(n);let i=r.fc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.fc[r.currentUser.toKey()]=i}}function l_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.uc.get(e))n.oc.delete(r),t&&n.rc.gc(r,t);n.uc.delete(e),n.isPrimaryClient&&n.lc.ds(e).forEach(r=>{n.lc.containsKey(r)||xk(n,r)})}function xk(n,e){n.cc.delete(e.path.canonicalString());const t=n.ac.get(e);null!==t&&(Qw(n.remoteStore,t),n.ac=n.ac.remove(e),n.hc.delete(t),Sx(n))}function Dx(n,e,t){for(const r of t)r instanceof bk?(n.lc.addReference(r.key,e),wB(n,r)):r instanceof Dk?($e("SyncEngine","Document no longer in limbo: "+r.key),n.lc.removeReference(r.key,e),n.lc.containsKey(r.key)||xk(n,r.key)):ht()}function wB(n,e){const t=e.key,r=t.path.canonicalString();n.ac.get(t)||n.cc.has(r)||($e("SyncEngine","New document in limbo: "+t),n.cc.add(r),Sx(n))}function Sx(n){for(;n.cc.size>0&&n.ac.size<n.maxConcurrentLimboResolutions;){const e=n.cc.values().next().value;n.cc.delete(e);const t=new tt(vn.fromString(e)),r=n._c.next();n.hc.set(r,new dB(t)),n.ac=n.ac.insert(t,r),ib(n.remoteStore,new vd(ws(qm(t.path)),r,2,u.at))}}function Wc(n,e,t){return Ax.apply(this,arguments)}function Ax(){return Ax=(0,ve.Z)(function*(n,e,t){const r=rt(n),i=[],a=[],c=[];var h;r.oc.isEmpty()||(r.oc.forEach((h,m)=>{c.push(r.mc(m,e,t).then(w=>{if((w||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,w?.fromCache?"not-current":"current"),w){i.push(w);const C=NR.Ni(m.targetId,w);a.push(C)}}))}),yield Promise.all(c),r.rc.Ho(i),yield(h=(0,ve.Z)(function*(m,w){const C=rt(m);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>ie.forEach(w,R=>ie.forEach(R.Ci,F=>C.persistence.referenceDelegate.addReference(D,R.targetId,F)).next(()=>ie.forEach(R.xi,F=>C.persistence.referenceDelegate.removeReference(D,R.targetId,F)))))}catch(D){if(!jc(D))throw D;$e("LocalStore","Failed to update sequence numbers: "+D)}for(const D of w){const R=D.targetId;if(!D.fromCache){const F=C.Ki.get(R),J=F.withLastLimboFreeSnapshotVersion(F.snapshotVersion);C.Ki=C.Ki.insert(R,J)}}}),function(m,w){return h.apply(this,arguments)})(r.localStore,a))}),Ax.apply(this,arguments)}function EB(n,e){return Rx.apply(this,arguments)}function Rx(){return Rx=(0,ve.Z)(function*(n,e){const t=rt(n);if(!t.currentUser.isEqual(e)){$e("SyncEngine","User change. New user:",e.toKey());const r=yield ik(t.localStore,e);t.currentUser=e,(i=t).dc.forEach(c=>{c.forEach(h=>{h.reject(new Le(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.dc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Wc(t,r.Wi)}var i}),Rx.apply(this,arguments)}function IB(n,e){const t=rt(n),r=t.hc.get(e);if(r&&r.ic)return un().add(r.key);{let i=un();const a=t.uc.get(e);if(!a)return i;for(const c of a){const h=t.oc.get(c);i=i.unionWith(h.view.Wu)}return i}}function CB(n,e){return xx.apply(this,arguments)}function xx(){return xx=(0,ve.Z)(function*(n,e){const t=rt(n),r=yield JT(t.localStore,e.query,!0),i=e.view.nc(r);return t.isPrimaryClient&&Dx(t,e.targetId,i.tc),i}),xx.apply(this,arguments)}function TB(n,e){return Mx.apply(this,arguments)}function Mx(){return Mx=(0,ve.Z)(function*(n,e){const t=rt(n);return uk(t.localStore,e).then(r=>Wc(t,r))}),Mx.apply(this,arguments)}function bB(n,e,t,r){return Nx.apply(this,arguments)}function Nx(){return Nx=(0,ve.Z)(function*(n,e,t,r){const i=rt(n),a=yield function(c,h){const m=rt(c),w=rt(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",C=>w.An(C,h).next(D=>D?m.localDocuments.getDocuments(C,D):ie.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield s_(i.remoteStore):"acknowledged"===t||"rejected"===t?(bx(i,e,r||null),Tx(i,e),h=e,rt(rt(i.localStore).mutationQueue).Pn(h)):ht(),yield Wc(i,a)):$e("SyncEngine","Cannot apply mutation batch with id: "+e)}),Nx.apply(this,arguments)}function Px(){return Px=(0,ve.Z)(function*(n,e){const t=rt(n);if(Fx(t),Ux(t),!0===e&&!0!==t.wc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Mk(t,r.toArray());t.wc=!0,yield sx(t.remoteStore,!0);for(const a of i)ib(t.remoteStore,a)}else if(!1===e&&!1!==t.wc){const r=[];let i=Promise.resolve();t.uc.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(l_(t,c),r_(t.localStore,c,!0))),Qw(t.remoteStore,c)}),yield i,yield Mk(t,r),function(a){const c=rt(a);c.hc.forEach((h,m)=>{Qw(c.remoteStore,m)}),c.lc._s(),c.hc=new Map,c.ac=new jr(tt.comparator)}(t),t.wc=!1,yield sx(t.remoteStore,!1)}}),Px.apply(this,arguments)}function Mk(n,e,t){return Ox.apply(this,arguments)}function Ox(){return Ox=(0,ve.Z)(function*(n,e,t){const r=rt(n),i=[],a=[];for(const c of e){let h;const m=r.uc.get(c);if(m&&0!==m.length){h=yield n_(r.localStore,ws(m[0]));for(const w of m){const C=r.oc.get(w),D=yield CB(r,C);D.snapshot&&a.push(D.snapshot)}}else{const w=yield ak(r.localStore,c);h=yield n_(r.localStore,w),yield gx(r,Nk(w),c,!1,h.resumeToken)}i.push(h)}return r.rc.Ho(a),i}),Ox.apply(this,arguments)}function Nk(n){return FP(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function SB(n){const e=rt(n);return rt(rt(e.localStore).persistence).Si()}function AB(n,e,t,r){return kx.apply(this,arguments)}function kx(){return kx=(0,ve.Z)(function*(n,e,t,r){const i=rt(n);if(i.wc)return void $e("SyncEngine","Ignoring unexpected query state notification.");const a=i.uc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const c=yield uk(i.localStore,BP(a[0])),h=Lw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ze.EMPTY_BYTE_STRING);yield Wc(i,c,h);break}case"rejected":yield r_(i.localStore,e,!0),l_(i,e,r);break;default:ht()}}),kx.apply(this,arguments)}function RB(n,e,t){return Lx.apply(this,arguments)}function Lx(){return Lx=(0,ve.Z)(function*(n,e,t){const r=Fx(n);if(r.wc){for(const i of e){if(r.uc.has(i)){$e("SyncEngine","Adding an already active target "+i);continue}const a=yield ak(r.localStore,i),c=yield n_(r.localStore,a);yield gx(r,Nk(a),c.targetId,!1,c.resumeToken),ib(r.remoteStore,c)}for(const i of t)r.uc.has(i)&&(yield r_(r.localStore,i,!1).then(()=>{Qw(r.remoteStore,i),l_(r,i)}).catch(Au))}}),Lx.apply(this,arguments)}function Fx(n){const e=rt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ak.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mB.bind(null,e),e.rc.Ho=oB.bind(null,e.eventManager),e.rc.gc=aB.bind(null,e.eventManager),e}function Ux(n){const e=rt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_B.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yB.bind(null,e),e}class Pk{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.Tt=Zw(e.databaseInfo.databaseId),t.sharedClientState=t.Ic(e),t.persistence=t.Tc(e),yield t.persistence.start(),t.localStore=t.Ec(e),t.gcScheduler=t.Ac(e,t.localStore),t.indexBackfillerScheduler=t.Rc(e,t.localStore)})()}Ac(e,t){return null}Rc(e,t){return null}Ec(e){return rk(this.persistence,new nk,e.initialUser,this.Tt)}Tc(e){return new ek(QT.qs,this.Tt)}Ic(e){return new hk}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Ok extends Pk{constructor(e,t,r){super(),this.Pc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield r.Pc.initialize(r,e),yield Ux(r.Pc.syncEngine),yield s_(r.Pc.remoteStore),yield r.persistence.di(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ec(e){return rk(this.persistence,new nk,e.initialUser,this.Tt)}Ac(e,t){return new vV(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Rc(e,t){const r=new o(t,this.persistence);return new s(e.asyncQueue,r)}Tc(e){const t=MR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Bs.withCacheSize(this.cacheSizeBytes):Bs.DEFAULT;return new xR(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,pk(),rb(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new hk}}class MB extends Ok{constructor(e,t){super(e,t,!1),this.Pc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const i=r.Pc.syncEngine;r.sharedClientState instanceof BR&&(r.sharedClientState.syncEngine={Br:bB.bind(null,i),Lr:AB.bind(null,i),qr:RB.bind(null,i),Si:SB.bind(null,i),Fr:TB.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.di(function(){var a=(0,ve.Z)(function*(c){yield function DB(n,e){return Px.apply(this,arguments)}(r.Pc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}Ic(e){const t=pk();if(!BR.C(t))throw new Le(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=MR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new BR(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Vx{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Rk(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=EB.bind(null,r.syncEngine),yield sx(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new sB}createDatastore(e){const t=Zw(e.databaseInfo.databaseId),r=new jV(e.databaseInfo);return new zV(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>Rk(this.syncEngine,h,0),c=fk.C()?new fk:new VV,new KV(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,h,m,w){const C=new hB(r,i,a,c,h,m);return w&&(C.wc=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=rt(t);$e("RemoteStore","RemoteStore shutting down."),r.mu.add(5),yield i_(r),r.yu.shutdown(),r.pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function kk(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ob{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):Nr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class NB{constructor(e,t){this.Vc=e,this.Tt=t,this.metadata=new qr,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Mu)}`))},r=>this.metadata.reject(r))}close(){return this.Vc.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}yc(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Dc()})()}Dc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Cc();if(null===t)return null;const r=e.Sc.decode(t),i=Number(r);isNaN(i)&&e.xc(`length string (${r}) is not valid number`);const a=yield e.Nc(i);return new uB(JSON.parse(a),t.length+i)})()}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Cc(){var e=this;return(0,ve.Z)(function*(){for(;e.kc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const t=e.kc();t<0&&e.xc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Nc(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.$c())&&t.xc("Reached the end of bundle when more is expected.");const r=t.Sc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Vc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class PB{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Le(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ve.Z)(function*(a,c){const h=rt(a),m=Vw(h.Tt)+"/documents",w={documents:c.map(F=>Uw(h.Tt,F))},C=yield h.mo("BatchGetDocuments",m,w,c.length),D=new Map;C.forEach(F=>{const j=function kU(n,e){return"found"in e?function(t,r){Dt(!!r.found);const i=Mu(t,r.found.name),a=Kr(r.found.updateTime),c=r.found.createTime?Kr(r.found.createTime):Mt.min(),h=new Ri({mapValue:{fields:r.found.fields}});return fr.newFoundDocument(i,a,c,h)}(n,e):"missing"in e?function(t,r){Dt(!!r.missing),Dt(!!r.readTime);const i=Mu(t,r.missing),a=Kr(r.readTime);return fr.newNoDocument(i,a)}(n,e):ht()}(h.Tt,F);D.set(j.key.toString(),j)});const R=[];return c.forEach(F=>{const j=D.get(F.toString());Dt(!!j),R.push(j)}),R}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Qm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=tt.fromPath(i);e.mutations.push(new hR(a,e.precondition(a)))}),yield(r=(0,ve.Z)(function*(i,a){const c=rt(i),h=Vw(c.Tt)+"/documents",m={writes:a.map(w=>Bw(c.Tt,w))};yield c.lo("Commit",h,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ht();t=Mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Le(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Mt.min())?Er.exists(!1):Er.updateTime(t):Er.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Mt.min()))throw new Le(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Er.updateTime(t)}return Er.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class OB{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Mc=r.maxAttempts,this.ko=new jR(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Oc()}Oc(){var e=this;this.ko.vo((0,ve.Z)(function*(){const t=new PB(e.datastore),r=e.Fc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Bc(a)}))}).catch(i=>{e.Bc(i)})}))}Fc(e){try{const t=this.updateFunction(e);return!U(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!tO(t)}return!1}}class kB{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=oi.UNAUTHENTICATED,this.clientId=JA.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ve.Z)(function*(h){$e("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>($e("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Le(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=a_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Lk(n,e){return Bx.apply(this,arguments)}function Bx(){return Bx=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ve.Z)(function*(a){r.isEqual(a)||(yield ik(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Bx.apply(this,arguments)}function Fk(n,e){return $x.apply(this,arguments)}function $x(){return $x=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield jx(n);$e("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Ek(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>Ek(e.remoteStore,a)),n.onlineComponents=e}),$x.apply(this,arguments)}function jx(n){return Hx.apply(this,arguments)}function Hx(){return Hx=(0,ve.Z)(function*(n){return n.offlineComponents||($e("FirestoreClient","Using default OfflineComponentProvider"),yield Lk(n,new Pk)),n.offlineComponents}),Hx.apply(this,arguments)}function ab(n){return Gx.apply(this,arguments)}function Gx(){return Gx=(0,ve.Z)(function*(n){return n.onlineComponents||($e("FirestoreClient","Using default OnlineComponentProvider"),yield Fk(n,new Vx)),n.onlineComponents}),Gx.apply(this,arguments)}function Uk(n){return jx(n).then(e=>e.persistence)}function ub(n){return jx(n).then(e=>e.localStore)}function zx(n){return ab(n).then(e=>e.remoteStore)}function Wx(n){return ab(n).then(e=>e.syncEngine)}function d_(n){return qx.apply(this,arguments)}function qx(){return qx=(0,ve.Z)(function*(n){const e=yield ab(n),t=e.eventManager;return t.onListen=fB.bind(null,e.syncEngine),t.onUnlisten=pB.bind(null,e.syncEngine),t}),qx.apply(this,arguments)}function Bk(n,e,t={}){const r=new qr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,a,c,h,m){const w=new ob({next:D=>{a.enqueueAndForget(()=>lx(i,C));const R=D.docs.has(c);!R&&D.fromCache?m.reject(new Le(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&D.fromCache&&h&&"server"===h.source?m.reject(new Le(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(D)},error:D=>m.reject(D)}),C=new fx(qm(c.path),w,{includeMetadataChanges:!0,$u:!0});return ux(i,C)}(yield d_(n),n.asyncQueue,e,t,r)})),r.promise}function $k(n,e,t={}){const r=new qr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,a,c,h,m){const w=new ob({next:D=>{a.enqueueAndForget(()=>lx(i,C)),D.fromCache&&"server"===h.source?m.reject(new Le(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(D)},error:D=>m.reject(D)}),C=new fx(c,w,{includeMetadataChanges:!0,$u:!0});return ux(i,C)}(yield d_(n),n.asyncQueue,e,t,r)})),r.promise}const jk=new Map;function Kx(n,e,t){if(!t)throw new Le(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Hk(n,e,t,r){if(!0===e&&!0===r)throw new Le(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Gk(n){if(!tt.isDocumentKey(n))throw new Le(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function zk(n){if(tt.isDocumentKey(n))throw new Le(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function cb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ht()}function En(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Le(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=cb(n);throw new Le(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Wk(n,e){if(e<=0)throw new Le(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class qk{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Le(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Le(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Hk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xw{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qk({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Le(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Le(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qk(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Bc;switch(t.type){case"gapi":return new XA(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Le(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=jk.get(e);t&&($e("ComponentProvider","Removing Datastore"),jk.delete(e),t.terminate())}(this),Promise.resolve()}}class pr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pr(this.firestore,e,this._key)}}class Hi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hi(this.firestore,e,this._query)}}class Pu extends Hi{constructor(e,t,r){super(e,t,qm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pr(this.firestore,null,new tt(e))}withConverter(e){return new Pu(this.firestore,e,this._path)}}function Zk(n,e,...t){if(n=(0,N.m9)(n),Kx("collection","path",e),n instanceof Xw){const r=vn.fromString(e,...t);return zk(r),new Pu(n,null,r)}{if(!(n instanceof pr||n instanceof Pu))throw new Le(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(vn.fromString(e,...t));return zk(r),new Pu(n.firestore,null,r)}}function lb(n,e,...t){if(n=(0,N.m9)(n),1===arguments.length&&(e=JA.R()),Kx("doc","path",e),n instanceof Xw){const r=vn.fromString(e,...t);return Gk(r),new pr(n,null,new tt(r))}{if(!(n instanceof pr||n instanceof Pu))throw new Le(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(vn.fromString(e,...t));return Gk(r),new pr(n.firestore,n instanceof Pu?n.converter:null,new tt(r))}}function Yk(n,e){return n=(0,N.m9)(n),e=(0,N.m9)(e),(n instanceof pr||n instanceof Pu)&&(e instanceof pr||e instanceof Pu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Zx(n,e){return n=(0,N.m9)(n),e=(0,N.m9)(e),n instanceof Hi&&e instanceof Hi&&n.firestore===e.firestore&&xw(n._query,e._query)&&n.converter===e.converter}class GB{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new jR(this,"async_queue_retry"),this.Hc=()=>{const t=rb();t&&$e("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ko.Vo()};const e=rb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const t=rb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const t=new qr;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}Zc(){var e=this;return(0,ve.Z)(function*(){if(0!==e.Uc.length){try{yield e.Uc[0](),e.Uc.shift(),e.ko.reset()}catch(t){if(!jc(t))throw t;$e("AsyncQueue","Operation failed with retryable error: "+t)}e.Uc.length>0&&e.ko.vo(()=>e.Zc())}})()}Yc(e){const t=this.qc.then(()=>(this.jc=!0,e().catch(r=>{throw this.Qc=r,this.jc=!1,Nr("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.jc=!1,r))));return this.qc=t,t}enqueueAfterDelay(e,t,r){this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);const i=ax.createAndSchedule(this,e,t,r,a=>this.Xc(a));return this.Gc.push(i),i}Jc(){this.Qc&&ht()}verifyOperationInProgress(){}ta(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.qc,yield t}while(t!==e.qc)})()}ea(e){for(const t of this.Gc)if(t.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Gc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}function Yx(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class zB{constructor(){this._progressObserver={},this._taskCompletionResolver=new qr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class gr extends Xw{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new GB,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Qk(this),this._firestoreClient.terminate()}}function Zr(n){return n._firestoreClient||Qk(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Qk(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new v(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new kB(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Xk(n,e,t){const r=new qr;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield Lk(n,t),yield Fk(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(c=a).name?c.code===ae.FAILED_PRECONDITION||c.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw a;hd("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var c})).then(()=>r.promise)}function Jk(n){if(n._initialized||n._terminated)throw new Le(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ou{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ou(ze.fromBase64String(e))}catch(t){throw new Le(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ou(ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class qc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Le(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class cp{constructor(e){this._methodName=e}}class db{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Le(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Le(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Jt(this._lat,e._lat)||Jt(this._long,e._long)}}const n2=/^__.*__$/;class r2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Gc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ym(e,this.data,t,this.fieldTransforms)}}class e1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Gc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function t1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht()}}class hb{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.Tt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ia(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new hb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.oa({path:r,ca:!1});return i.aa(e),i}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.oa({path:r,ca:!1});return i.ia(),i}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return gb(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(t1(this.ra)&&n2.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class s2{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.Tt=r||Zw(e)}wa(e,t,r,i=!1){return new hb({ra:e,methodName:t,_a:r,path:hr.emptyPath(),ca:!1,da:i},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function lp(n){const e=n._freezeSettings(),t=Zw(n._databaseId);return new s2(n._databaseId,!!e.ignoreUndefinedProperties,t)}function fb(n,e,t,r,i,a={}){const c=n.wa(a.merge||a.mergeFields?2:0,e,t,i);eM("Data must be an object, but it was:",c,r);const h=s1(r,c);let m,w;if(a.merge)m=new Us(c.fieldMask),w=c.fieldTransforms;else if(a.mergeFields){const C=[];for(const D of a.mergeFields){const R=t0(e,D,t);if(!c.contains(R))throw new Le(ae.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);a1(C,R)||C.push(R)}m=new Us(C),w=c.fieldTransforms.filter(D=>m.covers(D.field))}else m=null,w=c.fieldTransforms;return new r2(new Ri(h),m,w)}class e0 extends cp{_toFieldTransform(e){if(2!==e.ra)throw e.fa(1===e.ra?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof e0}}function n1(n,e,t){return new hb({ra:3,_a:e.settings._a,methodName:n._methodName,ca:t},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class Qx extends cp{_toFieldTransform(e){return new Nw(e.path,new Km)}isEqual(e){return e instanceof Qx}}class o2 extends cp{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=n1(this,e,!0),r=this.ma.map(a=>dp(a,t)),i=new ep(r);return new Nw(e.path,i)}isEqual(e){return this===e}}class a2 extends cp{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=n1(this,e,!0),r=this.ma.map(a=>dp(a,t)),i=new tp(r);return new Nw(e.path,i)}isEqual(e){return this===e}}class u2 extends cp{constructor(e,t){super(e),this.ga=t}_toFieldTransform(e){const t=new Zm(e.Tt,GP(e.Tt,this.ga));return new Nw(e.path,t)}isEqual(e){return this===e}}function Xx(n,e,t,r){const i=n.wa(1,e,t);eM("Data must be an object, but it was:",i,r);const a=[],c=Ri.empty();S(r,(m,w)=>{const C=pb(e,m,t);w=(0,N.m9)(w);const D=i.ha(C);if(w instanceof e0)a.push(C);else{const R=dp(w,D);null!=R&&(a.push(C),c.set(C,R))}});const h=new Us(a);return new e1(c,h,i.fieldTransforms)}function Jx(n,e,t,r,i,a){const c=n.wa(1,e,t),h=[t0(e,r,t)],m=[i];if(a.length%2!=0)throw new Le(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<a.length;R+=2)h.push(t0(e,a[R])),m.push(a[R+1]);const w=[],C=Ri.empty();for(let R=h.length-1;R>=0;--R)if(!a1(w,h[R])){const F=h[R];let j=m[R];j=(0,N.m9)(j);const J=c.ha(F);if(j instanceof e0)w.push(F);else{const se=dp(j,J);null!=se&&(w.push(F),C.set(F,se))}}const D=new Us(w);return new e1(C,D,c.fieldTransforms)}function r1(n,e,t,r=!1){return dp(t,n.wa(r?4:3,e))}function dp(n,e){if(o1(n=(0,N.m9)(n)))return eM("Unsupported field value:",e,n),s1(n,e);if(n instanceof cp)return function(t,r){if(!t1(r.ra))throw r.fa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.fa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ca&&4!==e.ra)throw e.fa("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let h=dp(c,r.la(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,N.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return GP(r.Tt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=ir.fromDate(t);return{timestampValue:Xm(r.Tt,i)}}if(t instanceof ir){const i=new ir(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Xm(r.Tt,i)}}if(t instanceof db)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ou)return{bytesValue:dO(r.Tt,t._byteString)};if(t instanceof pr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.fa(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:fR(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.fa(`Unsupported field value: ${cb(t)}`)}(n,e)}function s1(n,e){const t={};return x(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):S(n,(r,i)=>{const a=dp(i,e.ua(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function o1(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ir||n instanceof db||n instanceof Ou||n instanceof pr||n instanceof cp)}function eM(n,e,t){if(!o1(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=cb(t);throw e.fa("an object"===r?n+" a custom object":n+" "+r)}var r}function t0(n,e,t){if((e=(0,N.m9)(e))instanceof qc)return e._internalPath;if("string"==typeof e)return pb(n,e);throw gb("Field path arguments must be of type string or ",n,!1,void 0,t)}const c2=new RegExp("[~\\*/\\[\\]]");function pb(n,e,t){if(e.search(c2)>=0)throw gb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new qc(...e.split("."))._internalPath}catch{throw gb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function gb(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(a||c)&&(m+=" (found",a&&(m+=` in field ${r}`),c&&(m+=` in document ${i}`),m+=")"),new Le(ae.INVALID_ARGUMENT,h+n+m)}function a1(n,e){return n.some(t=>t.isEqual(e))}class n0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new pr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new l2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(mb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class l2 extends n0{data(){return super.data()}}function mb(n,e){return"string"==typeof e?pb(n,e):e instanceof qc?e._internalPath:e._delegate._internalPath}function u1(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Le(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tM{}class r0 extends tM{}function Td(n,e,...t){let r=[];e instanceof tM&&r.push(e),r=r.concat(t),function(i){const a=i.filter(h=>h instanceof h_).length,c=i.filter(h=>h instanceof s0).length;if(a>1||a>0&&c>0)throw new Le(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class s0 extends r0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new s0(e,t,r)}_apply(e){const t=this._parse(e);return h1(e._query,t),new Hi(e.firestore,e.converter,lR(e._query,t))}_parse(e){const t=lp(e.firestore);return function(i,a,c,h,m,w,C){let D;if(m.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Le(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){d1(C,w);const R=[];for(const F of C)R.push(l1(h,i,F));D={arrayValue:{values:R}}}else D=l1(h,i,C)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||d1(C,w),D=r1(c,"where",C,"in"===w||"not-in"===w);return wn.create(m,w,D)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class h_ extends tM{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new h_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Bn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const c=i.getFlattenedFilters();for(const h of c)h1(a,h),a=lR(a,h)}(e._query,t),new Hi(e.firestore,e.converter,lR(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class nM extends r0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new nM(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Le(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Le(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new zm(i,a);return function(h,m){if(null===uR(h)){const w=kT(h);null!==w&&f1(0,w,m.field)}}(r,c),c}(e._query,this._field,this._direction);return new Hi(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Hc(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class _b extends r0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new _b(e,t,r)}_apply(e){return new Hi(e.firestore,e.converter,LT(e._query,this._limit,this._limitType))}}class yb extends r0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new yb(e,t,r)}_apply(e){const t=c1(e,this.type,this._docOrFields,this._inclusive);return new Hi(e.firestore,e.converter,(i=t,new Hc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class vb extends r0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new vb(e,t,r)}_apply(e){const t=c1(e,this.type,this._docOrFields,this._inclusive);return new Hi(e.firestore,e.converter,(i=t,new Hc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function c1(n,e,t,r){if(t[0]=(0,N.m9)(t[0]),t[0]instanceof n0)return function(i,a,c,h,m){if(!h)throw new Le(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const w=[];for(const C of Jf(i))if(C.field.isKeyField())w.push(Qf(a,h.key));else{const D=h.data.field(C.field);if(Wn(D))throw new Le(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const R=C.field.canonicalString();throw new Le(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}w.push(D)}return new md(w,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=lp(n.firestore);return function(a,c,h,m,w,C){const D=a.explicitOrderBy;if(w.length>D.length)throw new Le(ae.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let F=0;F<w.length;F++){const j=w[F];if(D[F].field.isKeyField()){if("string"!=typeof j)throw new Le(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof j}`);if(!cR(a)&&-1!==j.indexOf("/"))throw new Le(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${j}' contains a slash.`);const J=a.path.child(vn.fromString(j));if(!tt.isDocumentKey(J))throw new Le(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${J}' is not because it contains an odd number of segments.`);const se=new tt(J);R.push(Qf(c,se))}else{const J=r1(h,m,j);R.push(J)}}return new md(R,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function l1(n,e,t){if("string"==typeof(t=(0,N.m9)(t))){if(""===t)throw new Le(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cR(e)&&-1!==t.indexOf("/"))throw new Le(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(vn.fromString(t));if(!tt.isDocumentKey(r))throw new Le(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Qf(n,new tt(r))}if(t instanceof pr)return Qf(n,t._key);throw new Le(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cb(t)}.`)}function d1(n,e){if(!Array.isArray(n)||0===n.length)throw new Le(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function h1(n,e){if(e.isInequality()){const r=kT(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Le(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=uR(n);null!==a&&f1(0,i,a)}const t=function(r,i){for(const a of r)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Le(ae.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function f1(n,e,t){if(!t.isEqual(e))throw new Le(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class rM{convertValue(e,t="none"){switch(Yf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($t(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ht()}}convertObject(e,t){const r={};return S(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new db(Ce(e.latitude),Ce(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=wr(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(jm(e));default:return null}}convertTimestamp(e){const t=At(e);return new ir(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=vn.fromString(e);Dt(EO(r));const i=new I(r.get(1),r.get(3)),a=new tt(r.popFirst(5));return i.isEqual(t)||Nr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function wb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class v2 extends rM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ou(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pr(this.firestore,null,t)}}class hp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Kc extends n0{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new o0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(mb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class o0 extends Kc{data(e={}){return super.data(e)}}class bd{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new hp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new o0(this._firestore,this._userDataWriter,r.key,r,new hp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Le(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new o0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new hp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const h=new o0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new hp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,w=-1;return 0!==c.type&&(m=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),w=a.indexOf(c.doc.key)),{type:E2(c.type),doc:h,oldIndex:m,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function E2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht()}}function g1(n,e){return n instanceof Kc&&e instanceof Kc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof bd&&e instanceof bd&&n._firestore===e._firestore&&Zx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Dd extends rM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ou(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pr(this.firestore,null,t)}}function m1(n,e,t){n=En(n,pr);const r=En(n.firestore,gr),i=wb(n.converter,e,t);return f_(r,[fb(lp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Er.none())])}function _1(n,e,t,...r){n=En(n,pr);const i=En(n.firestore,gr),a=lp(i);let c;return c="string"==typeof(e=(0,N.m9)(e))||e instanceof qc?Jx(a,"updateDoc",n._key,e,t,r):Xx(a,"updateDoc",n._key,e),f_(i,[c.toMutation(n._key,Er.exists(!0))])}function y1(n,...e){var t,r,i;n=(0,N.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||Yx(e[c])||(a=e[c],c++);const h={includeMetadataChanges:a.includeMetadataChanges};if(Yx(e[c])){const D=e[c];e[c]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[c+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[c+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let m,w,C;if(n instanceof pr)w=En(n.firestore,gr),C=qm(n._key.path),m={next:D=>{e[c]&&e[c](iM(w,n,D))},error:e[c+1],complete:e[c+2]};else{const D=En(n,Hi);w=En(D.firestore,gr),C=D._query;const R=new Dd(w);m={next:F=>{e[c]&&e[c](new bd(w,R,D,F))},error:e[c+1],complete:e[c+2]},u1(n._query)}return function(D,R,F,j){const J=new ob(j),se=new fx(R,J,F);return D.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return ux(yield d_(D),se)})),()=>{J.bc(),D.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return lx(yield d_(D),se)}))}}(Zr(w),C,h,m)}function f_(n,e){return function(t,r){const i=new qr;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function gB(n,e,t){return yx.apply(this,arguments)}(yield Wx(t),r,i)})),i.promise}(Zr(n),e)}function iM(n,e,t){const r=t.docs.get(e._key),i=new Dd(n);return new Kc(n,i,e._key,r,new hp(t.hasPendingWrites,t.fromCache),e.converter)}const N2={maxAttempts:5};class v1{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=lp(e)}set(e,t,r){this._verifyNotCommitted();const i=Sd(e,this._firestore),a=wb(i.converter,t,r),c=fb(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Er.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Sd(e,this._firestore);let c;return c="string"==typeof(t=(0,N.m9)(t))||t instanceof qc?Jx(this._dataReader,"WriteBatch.update",a._key,t,r,i):Xx(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,Er.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Sd(e,this._firestore);return this._mutations=this._mutations.concat(new Qm(t._key,Er.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Le(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Sd(n,e){if((n=(0,N.m9)(n)).firestore!==e)throw new Le(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class P2 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=lp(e)}get(e){const t=Sd(e,this._firestore),r=new v2(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ht();const a=i[0];if(a.isFoundDocument())return new n0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new n0(this._firestore,r,t._key,null,t.converter);throw ht()})}set(e,t,r){const i=Sd(e,this._firestore),a=wb(i.converter,t,r),c=fb(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=Sd(e,this._firestore);let c;return c="string"==typeof(t=(0,N.m9)(t))||t instanceof qc?Jx(this._dataReader,"Transaction.update",a._key,t,r,i):Xx(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=Sd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Sd(e,this._firestore),r=new Dd(this._firestore);return super.get(e).then(i=>new Kc(this._firestore,r,t._key,i._document,new hp(!1,!1),t.converter))}}!function(n,e=!0){qf=pi.SDK_VERSION,(0,pi._registerComponent)(new to.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),c=new gr(new _w(t.getProvider("auth-internal")),new vw(t.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Le(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new I(h.options.projectId,m)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,pi.registerVersion)(yT,"3.9.0",n),(0,pi.registerVersion)(yT,"3.9.0","esm2017")}();function sM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Le("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function E1(){if(typeof Uint8Array>"u")throw new Le("unimplemented","Uint8Arrays are not available in this environment.")}function I1(){if(!function We(){return typeof atob<"u"}())throw new Le("unimplemented","Blobs are unavailable in Firestore in this environment.")}class a0{constructor(e){this._delegate=e}static fromBase64String(e){return I1(),new a0(Ou.fromBase64String(e))}static fromUint8Array(e){return E1(),new a0(Ou.fromUint8Array(e))}toBase64(){return I1(),this._delegate.toBase64()}toUint8Array(){return E1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function oM(n){return function j2(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class H2{enableIndexedDbPersistence(e,t){return function qB(n,e){Jk(n=En(n,gr));const t=Zr(n),r=n._freezeSettings(),i=new Vx;return Xk(t,i,new Ok(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function KB(n){Jk(n=En(n,gr));const e=Zr(n),t=n._freezeSettings(),r=new Vx;return Xk(e,r,new MB(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function ZB(n){if(n._initialized&&!n._terminated)throw new Le(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new qr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!qo.C())return Promise.resolve();const i=r+"main";yield qo.delete(i)}),function(r){return t.apply(this,arguments)})(MR(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class C1{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof I||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&hd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Kk(n,e,t,r={}){var i;const a=(n=En(n,Xw))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&hd("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,h;if("string"==typeof r.mockUserToken)c=r.mockUserToken,h=oi.MOCK_USER;else{c=(0,N.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Le(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new oi(m)}n._authCredentials=new wT(new mw(c,h))}}(this._delegate,e,t,r)}enableNetwork(){return function QB(n){return function LB(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield Uk(n),t=yield zx(n);return e.setNetworkEnabled(!0),function(r){const i=rt(r);return i.mu.delete(0),Yw(i)}(t)}))}(Zr(n=En(n,gr)))}(this._delegate)}disableNetwork(){return function XB(n){return function FB(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield Uk(n),t=yield zx(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(i){const a=rt(i);a.mu.add(0),yield i_(a),a.pu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Zr(n=En(n,gr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Hk("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function YB(n){return function(e){const t=new qr;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function vB(n,e){return Cx.apply(this,arguments)}(yield Wx(e),t)})),t.promise}(Zr(n=En(n,gr)))}(this._delegate)}onSnapshotsInSync(e){return function x2(n,e){return function BB(n,e){const t=new ob(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield d_(n),i=t,rt(r).vu.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield d_(n),i=t,void rt(r).vu.delete(i);var r,i}))}}(Zr(n=En(n,gr)),Yx(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Le("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new p_(this,Zk(this._delegate,e))}catch(t){throw Is(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ko(this,lb(this._delegate,e))}catch(t){throw Is(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Cs(this,function HB(n,e){if(n=En(n,Xw),Kx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Le(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Hi(n,null,(t=e,new Hc(vn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Is(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function O2(n,e,t){n=En(n,gr);const r=Object.assign(Object.assign({},N2),t);return function(i){if(i.maxAttempts<1)throw new Le(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,c){const h=new qr;return i.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const m=yield function Vk(n){return ab(n).then(e=>e.datastore)}(i);new OB(i.asyncQueue,m,c,a,h).run()})),h.promise}(Zr(n),i=>e(new P2(n,i)),r)}(this._delegate,t=>e(new T1(this,t)))}batch(){return Zr(this._delegate),new b1(new v1(this._delegate,e=>f_(this._delegate,e)))}loadBundle(e){return function JB(n,e){const t=Zr(n=En(n,gr)),r=new zB;return function $B(n,e,t,r){const i=function(a,c){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,w){if(m instanceof Uint8Array)return kk(m,w);if(m instanceof ArrayBuffer)return kk(new Uint8Array(m),w);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new NB(m,c);var m}(t,Zw(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function xB(n,e,t){const r=rt(n);var i;(i=(0,ve.Z)(function*(a,c,h){try{const m=yield c.getMetadata();if(yield function(R,F){const j=rt(R),J=Kr(F.createTime);return j.persistence.runTransaction("hasNewerBundle","readonly",se=>j.$s.getBundleMetadata(se,F.id)).then(se=>!!se&&se.createTime.compareTo(J)>=0)}(a.localStore,m))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:(R=m).totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}),Promise.resolve(new Set);h._updateProgress(Tk(m));const w=new cB(m,a.localStore,c.Tt);let C=yield c.yc();for(;C;){const R=yield w.Bu(C);R&&h._updateProgress(R),C=yield c.yc()}const D=yield w.complete();return yield Wc(a,D.Uu,void 0),yield function(R,F){const j=rt(R);return j.persistence.runTransaction("Save bundle","readwrite",J=>j.$s.saveBundleMetadata(J,F))}(a.localStore,m),h._completeWith(D.progress),Promise.resolve(D.qu)}catch(m){return hd("SyncEngine",`Loading bundle failed with ${m}`),h._failWith(m),Promise.resolve(new Set)}var R}),function(a,c,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Wx(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function e2(n,e){return function jB(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const i=rt(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.$s.getNamedQuery(a,r))}(yield ub(n),e)}))}(Zr(n=En(n,gr)),e).then(t=>t?new Hi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Cs(this,t):null)}}class Eb extends rM{constructor(e){super(),this.firestore=e}convertBytes(e){return new a0(new Ou(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ko.forKey(t,this.firestore,null)}}class T1{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Eb(e)}get(e){const t=pp(e);return this._delegate.get(t).then(r=>new u0(this._firestore,new Kc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=pp(e);return r?(sM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=pp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=pp(e);return this._delegate.delete(t),this}}class b1{constructor(e){this._delegate=e}set(e,t,r){const i=pp(e);return r?(sM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=pp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=pp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class fp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new o0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new c0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=fp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new fp(e,new Eb(e),t),i.set(t,a)),a}}fp.INSTANCES=new WeakMap;class Ko{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Eb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Le("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ko(t,new pr(t._delegate,r,new tt(e)))}static forKey(e,t,r){return new Ko(t,new pr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new p_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new p_(this.firestore,Zk(this._delegate,e))}catch(t){throw Is(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,N.m9)(e))instanceof pr&&Yk(this._delegate,e)}set(e,t){t=sM("DocumentReference.set",t);try{return t?m1(this._delegate,e,t):m1(this._delegate,e)}catch(r){throw Is(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?_1(this._delegate,e):_1(this._delegate,e,t,...r)}catch(i){throw Is(i,"updateDoc()","DocumentReference.update()")}}delete(){return function A2(n){return f_(En(n.firestore,gr),[new Qm(n._key,Er.none())])}(this._delegate)}onSnapshot(...e){const t=D1(e),r=S1(e,i=>new u0(this.firestore,new Kc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return y1(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function C2(n){n=En(n,pr);const e=En(n.firestore,gr),t=Zr(e),r=new Dd(e);return function UB(n,e){const t=new qr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,a,c){try{const h=yield function(m,w){const C=rt(m);return C.persistence.runTransaction("read document","readonly",D=>C.localDocuments.getDocument(D,w))}(i,a);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new Le(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=a_(h,`Failed to get document '${a} from cache`);c.reject(m)}}),function(i,a,c){return r.apply(this,arguments)})(yield ub(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Kc(e,r,n._key,i,new hp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function T2(n){n=En(n,pr);const e=En(n.firestore,gr);return Bk(Zr(e),n._key,{source:"server"}).then(t=>iM(e,n,t))}(this._delegate):function I2(n){n=En(n,pr);const e=En(n.firestore,gr);return Bk(Zr(e),n._key).then(t=>iM(e,n,t))}(this._delegate),t.then(r=>new u0(this.firestore,new Kc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ko(this.firestore,this._delegate.withConverter(e?fp.getInstance(this.firestore,e):null))}}function Is(n,e,t){return n.message=n.message.replace(e,t),n}function D1(n){for(const e of n)if("object"==typeof e&&!oM(e))return e;return{}}function S1(n,e){var t,r;let i;return i=oM(n[0])?n[0]:oM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class u0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ko(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return g1(this._delegate,e._delegate)}}class c0 extends u0{data(e){const t=this._delegate.data(e);return function gP(n,e){n||ht()}(void 0!==t),t}}class Cs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Eb(e)}where(e,t,r){try{return new Cs(this.firestore,Td(this._delegate,function d2(n,e,t){const r=e,i=mb("where",n);return s0._create(i,r,t)}(e,t,r)))}catch(i){throw Is(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Cs(this.firestore,Td(this._delegate,function h2(n,e="asc"){const t=e,r=mb("orderBy",n);return nM._create(r,t)}(e,t)))}catch(r){throw Is(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Cs(this.firestore,Td(this._delegate,function f2(n){return Wk("limit",n),_b._create("limit",n,"F")}(e)))}catch(t){throw Is(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Cs(this.firestore,Td(this._delegate,function p2(n){return Wk("limitToLast",n),_b._create("limitToLast",n,"L")}(e)))}catch(t){throw Is(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Cs(this.firestore,Td(this._delegate,function g2(...n){return yb._create("startAt",n,!0)}(...e)))}catch(t){throw Is(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Cs(this.firestore,Td(this._delegate,function m2(...n){return yb._create("startAfter",n,!1)}(...e)))}catch(t){throw Is(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Cs(this.firestore,Td(this._delegate,function _2(...n){return vb._create("endBefore",n,!1)}(...e)))}catch(t){throw Is(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Cs(this.firestore,Td(this._delegate,function y2(...n){return vb._create("endAt",n,!0)}(...e)))}catch(t){throw Is(t,"endAt()","Query.endAt()")}}isEqual(e){return Zx(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function D2(n){n=En(n,Hi);const e=En(n.firestore,gr),t=Zr(e),r=new Dd(e);return function VB(n,e){const t=new qr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,a,c){try{const h=yield JT(i,a,!0),m=new Sk(a,h.Yi),w=m.Hu(h.documents),C=m.applyChanges(w,!1);c.resolve(C.snapshot)}catch(h){const m=a_(h,`Failed to execute query '${a} against cache`);c.reject(m)}}),function(i,a,c){return r.apply(this,arguments)})(yield ub(n),e,t);var r})),t.promise}(t,n._query).then(i=>new bd(e,r,n,i))}(this._delegate):"server"===e?.source?function S2(n){n=En(n,Hi);const e=En(n.firestore,gr),t=Zr(e),r=new Dd(e);return $k(t,n._query,{source:"server"}).then(i=>new bd(e,r,n,i))}(this._delegate):function b2(n){n=En(n,Hi);const e=En(n.firestore,gr),t=Zr(e),r=new Dd(e);return u1(n._query),$k(t,n._query).then(i=>new bd(e,r,n,i))}(this._delegate),t.then(r=>new aM(this.firestore,new bd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=D1(e),r=S1(e,i=>new aM(this.firestore,new bd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return y1(this._delegate,t,r)}withConverter(e){return new Cs(this.firestore,this._delegate.withConverter(e?fp.getInstance(this.firestore,e):null))}}class z2{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new c0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class aM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Cs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new c0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new z2(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new c0(this._firestore,r))})}isEqual(e){return g1(this._delegate,e._delegate)}}class p_ extends Cs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ko(this.firestore,e):null}doc(e){try{return new Ko(this.firestore,void 0===e?lb(this._delegate):lb(this._delegate,e))}catch(t){throw Is(t,"doc()","CollectionReference.doc()")}}add(e){return function R2(n,e){const t=En(n.firestore,gr),r=lb(n),i=wb(n.converter,e);return f_(t,[fb(lp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Er.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ko(this.firestore,t))}isEqual(e){return Yk(this._delegate,e._delegate)}withConverter(e){return new p_(this.firestore,this._delegate.withConverter(e?fp.getInstance(this.firestore,e):null))}}function pp(n){return En(n,pr)}class uM{constructor(...e){this._delegate=new qc(...e)}static documentId(){return new uM(hr.keyField().canonicalString())}isEqual(e){return(e=(0,N.m9)(e))instanceof qc&&this._delegate._internalPath.isEqual(e._internalPath)}}class gp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function L2(){return new Qx("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new gp(e)}static delete(){const e=function k2(){return new e0("deleteField")}();return e._methodName="FieldValue.delete",new gp(e)}static arrayUnion(...e){const t=function F2(...n){return new o2("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new gp(t)}static arrayRemove(...e){const t=function U2(...n){return new a2("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new gp(t)}static increment(e){const t=function V2(n){return new u2("increment",n)}(e);return t._methodName="FieldValue.increment",new gp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const W2={Firestore:C1,GeoPoint:db,Timestamp:ir,Blob:a0,Transaction:T1,WriteBatch:b1,DocumentReference:Ko,DocumentSnapshot:u0,Query:Cs,QueryDocumentSnapshot:c0,QuerySnapshot:aM,CollectionReference:p_,FieldPath:uM,FieldValue:gp,setLogLevel:function G2(n){!function QA(n){Vc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function A1(n,e){return function Z2(n,e=Ma.z){return new Fi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function cM(n,e){return A1(n,e).pipe((0,Tt.U)(t=>({payload:t,type:"query"})))}function Ib(n,e){return cM(n,e).pipe(sc(void 0),em(),(0,Tt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,h)=>{const m=i.find(C=>C.doc.ref.isEqual(c.ref)),w=t?.payload.docs.find(C=>C.ref.isEqual(c.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(c.metadata)||!m&&w&&JSON.stringify(w.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),a}))}function R1(n,e,t){return Ib(n,t).pipe(Mo((r,i)=>function Q2(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function X2(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return lM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return lM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return lM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),wv(),(0,Tt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function lM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function x1(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function K2(n){(function q2(n,e){n.INTERNAL.registerComponent(new to.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},W2)))})(n,(e,t)=>new C1(e,t,new H2)),n.registerVersion("@firebase/firestore-compat","0.3.5")}(rv.Z);class M1{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Ib(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Tt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(sc(void 0),em(),Ui(([r,i])=>i.length>0||!r),(0,Tt.U)(([r,i])=>i),an.iC)}auditTrail(e){return this.stateChanges(e).pipe(Mo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=x1(e);return R1(this.query,t,this.afs.schedulers.outsideAngular).pipe(an.iC)}valueChanges(e={}){return cM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),an.iC)}get(e){return(0,Xt.D)(this.query.get(e)).pipe(an.iC)}add(e){return this.ref.add(e)}doc(e){return new N1(this.ref.doc(e),this.afs)}}class N1{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=k1(r,t);return new M1(i,a,this.afs)}snapshotChanges(){return function Y2(n,e){return A1(n,e).pipe(sc(void 0),em(),(0,Tt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(an.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Tt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Xt.D)(this.ref.get(e)).pipe(an.iC)}}class J2{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Ib(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ui(t=>t.length>0),an.iC):Ib(this.query,this.afs.schedulers.outsideAngular).pipe(an.iC)}auditTrail(e){return this.stateChanges(e).pipe(Mo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=x1(e);return R1(this.query,t,this.afs.schedulers.outsideAngular).pipe(an.iC)}valueChanges(e={}){return cM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),an.iC)}get(e){return(0,Xt.D)(this.query.get(e)).pipe(an.iC)}}const P1=new _.OlP("angularfire2.enableFirestorePersistence"),O1=new _.OlP("angularfire2.firestore.persistenceSettings"),e$=new _.OlP("angularfire2.firestore.settings"),t$=new _.OlP("angularfire2.firestore.use-emulator");function k1(n,e=(t=>t)){return{query:e(n),ref:n}}let n$=(()=>{class n{constructor(t,r,i,a,c,h,m,w,C,D,R,F,j,J,se,dt,yt){this.schedulers=m;const lt=(0,nr.on)(t,h,r),Et=C;D&&ev(lt,h,R,j,J,se,F,dt),[this.firestore,this.persistenceEnabled$]=(0,nr.cc)(`${lt.name}.firestore`,"AngularFirestore",lt.name,()=>{const Vt=h.runOutsideAngular(()=>lt.firestore());if(a&&Vt.settings(a),Et&&Vt.useEmulator(...Et),i&&!ua(c)){const Zt=()=>{try{return(0,Xt.D)(Vt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Hr){return typeof console<"u"&&console.warn(Hr),st(!1)}};return[Vt,h.runOutsideAngular(Zt)]}return[Vt,st(!1)]},[a,Et,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=k1(i,r),h=this.schedulers.ngZone.run(()=>a);return new M1(h,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new J2(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new N1(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(nr.Dh),_.LFG(nr.xv,8),_.LFG(P1,8),_.LFG(e$,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(an.HU),_.LFG(O1,8),_.LFG(t$,8),_.LFG(cf,8),_.LFG(Ng,8),_.LFG(Pg,8),_.LFG(Og,8),_.LFG(kg,8),_.LFG(rd,8),_.LFG(Vo,8),_.LFG(nd,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),r$=(()=>{class n{constructor(){Cu.Z.registerVersion("angularfire",an.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:P1,useValue:!0},{provide:O1,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[n$]}),n})();var i$=P(5032);const L1="@firebase/database";let dM="";function U1(n){dM=n}class a${constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,N.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,N.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class u${constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,N.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const V1=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new a$(e)}}catch{}return new u$},mp=V1("localStorage"),hM=V1("sessionStorage"),g_=new ns.Yd("@firebase/database"),B1=function(){let n=1;return function(){return n++}}(),$1=function(n){const e=(0,N.dS)(n),t=new N.gQ;t.update(e);const r=t.digest();return N.US.encodeByteArray(r)},l0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=l0.apply(null,r):e+="object"==typeof r?(0,N.Wl)(r):r,e+=" "}return e};let _p=null,j1=!0;const H1=function(n,e){(0,N.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(g_.logLevel=ns.in.VERBOSE,_p=g_.log.bind(g_),e&&hM.set("logging_enabled",!0)):"function"==typeof n?_p=n:(_p=null,hM.remove("logging_enabled"))},Ni=function(...n){if(!0===j1&&(j1=!1,null===_p&&!0===hM.get("logging_enabled")&&H1(!0)),_p){const e=l0.apply(null,n);_p(e)}},d0=function(n){return function(...e){Ni(n,...e)}},fM=function(...n){const e="FIREBASE INTERNAL ERROR: "+l0(...n);g_.error(e)},ku=function(...n){const e=`FIREBASE FATAL ERROR: ${l0(...n)}`;throw g_.error(e),new Error(e)},os=function(...n){const e="FIREBASE WARNING: "+l0(...n);g_.warn(e)},Cb=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Ad="[MIN_NAME]",Zc="[MAX_NAME]",yp=function(n,e){if(n===e)return 0;if(n===Ad||e===Zc)return-1;if(e===Ad||n===Zc)return 1;{const t=W1(n),r=W1(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},d$=function(n,e){return n===e?0:n<e?-1:1},h0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,N.Wl)(e))},pM=function(n){if("object"!=typeof n||null===n)return(0,N.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,N.Wl)(e[r]),t+=":",t+=pM(n[e[r]]);return t+="}",t},G1=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Pi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const z1=function(n){(0,N.hu)(!Cb(n),"Invalid JSON number");const r=1023;let i,a,c,h,m;0===n?(a=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,c=Math.round(n/Math.pow(2,-1074))));const w=[];for(m=52;m;m-=1)w.push(c%2?1:0),c=Math.floor(c/2);for(m=11;m;m-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const C=w.join("");let D="";for(m=0;m<64;m+=8){let R=parseInt(C.substr(m,8),2).toString(16);1===R.length&&(R="0"+R),D+=R}return D.toLowerCase()},g$=new RegExp("^-?(0*)\\d{1,10}$"),W1=function(n){if(g$.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},m_=function(n){try{n()}catch(e){setTimeout(()=>{throw os("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},y$=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},f0=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class v${constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){os(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class w${constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ni("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',os(e)}}let p0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Q1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,eL="websocket",tL="long_polling";class mM{constructor(e,t,r,i,a=!1,c="",h=!1,m=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=mp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&mp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function nL(n,e,t){let r;if((0,N.hu)("string"==typeof e,"typeof type must == string"),(0,N.hu)("object"==typeof t,"typeof params must == object"),e===eL)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==tL)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function E$(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Pi(t,(a,c)=>{i.push(a+"="+c)}),r+i.join("&")}class I${constructor(){this.counters_={}}incrementCounter(e,t=1){(0,N.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,N.p$)(this.counters_)}}const _M={},yM={};function vM(n){const e=n.toString();return _M[e]||(_M[e]=new I$),_M[e]}class T${constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&m_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Rd{constructor(e,t,r,i,a,c,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=d0(e),this.stats_=vM(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),nL(t,tL,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new T$(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,N.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new wM((...a)=>{const[c,h,m,w,C]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=m;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[c,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Q1.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Rd.forceAllow_=!0}static forceDisallow(){Rd.forceDisallow_=!0}static isAvailable(){return!((0,N.Yr)()||!Rd.forceAllow_&&(Rd.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,N.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,N.h$)(t),i=G1(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,N.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,N.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class wM{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,N.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=B1(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=wM.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){Ni("frame writing exception"),h.stack&&Ni(h.stack),Ni(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ni("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,N.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ni("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let bb=null;typeof MozWebSocket<"u"?bb=MozWebSocket:typeof WebSocket<"u"&&(bb=WebSocket);let __=(()=>{class n{constructor(t,r,i,a,c,h,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=d0(this.connId),this.stats_=vM(r),this.connURL=n.connectionURL_(r,h,m,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,c){const h={v:"5"};return!(0,N.Yr)()&&typeof location<"u"&&location.hostname&&Q1.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),c&&(h.p=c),nL(t,eL,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,mp.set("previous_websocket_failure",!0);try{let i;if((0,N.Yr)()){i={headers:{"User-Agent":`Firebase/5/${dM}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,h=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new bb(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==bb&&!n.forceDisallow_}static previouslyFailed(){return mp.isInMemoryStorage||!0===mp.get("previous_websocket_failure")}markConnectionHealthy(){mp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,N.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,N.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,N.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=G1(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),cL=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Rd,__]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=__&&__.isAvailable();let i=r&&!__.previouslyFailed();if(t.webSocketOnly&&(r||os("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[__];else{const a=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&a.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class mL{constructor(e,t,r,i,a,c,h,m,w,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=m,this.onKill_=w,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=d0("c:"+this.id+":"),this.transportManager_=new cL(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=f0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=h0("t",e),r=h0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=h0("t",e),r=h0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=h0("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?fM("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):fM("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&os("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),f0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):f0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(mp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class _L{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class yL{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,N.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,N.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Db extends yL{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,N.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Db}getInitialEvent(e){return(0,N.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const vL=32,wL=768;class Fn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Mn(){return new Fn("")}function pn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function xd(n){return n.pieces_.length-n.pieceNum_}function Xn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Fn(n.pieces_,e)}function IM(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function g0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function EL(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Fn(e,0)}function Ir(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Fn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Fn(t,0)}function gn(n){return n.pieceNum_>=n.pieces_.length}function Ts(n,e){const t=pn(n),r=pn(e);if(null===t)return e;if(t===r)return Ts(Xn(n),Xn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function W$(n,e){const t=g0(n,0),r=g0(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=yp(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function CM(n,e){if(xd(n)!==xd(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Zo(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(xd(n)>xd(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class q${constructor(e,t){this.errorPrefix_=t,this.parts_=g0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,N.ug)(this.parts_[r]);IL(this)}}function IL(n){if(n.byteLength_>wL)throw new Error(n.errorPrefix_+"has a key path longer than "+wL+" bytes ("+n.byteLength_+").");if(n.parts_.length>vL)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+vL+") or object contains a cycle "+vp(n))}function vp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class TM extends yL{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new TM}getInitialEvent(e){return(0,N.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const m0=1e3;let Ab,wp=(()=>{class n extends _L{constructor(t,r,i,a,c,h,m,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=d0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=m0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,N.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");TM.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Db.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,c={r:a,a:t,b:r};this.log_((0,N.Wl)(c)),(0,N.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new N.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const m=h.d;"ok"===h.s?r.resolve(m):r.reject(m)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,N.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,N.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(c,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,m=>{const w=m.d,C=m.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==C&&this.removeListen_(i,a),t.onComplete&&t.onComplete(C,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,N.r3)(t,"w")){const i=(0,N.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();os(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,N.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,N.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const c=a.s,h=a.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,N.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const c={p:t};a&&(c.q=i,c.t=a),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,c){this.initConnection_();const h={p:r,d:i};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,N.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):fM("Unrecognized action received from server: "+(0,N.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,N.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=m0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=m0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=m0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ve.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let m=!1,w=null;const C=function(){w?w.close():(m=!0,a())};t.realtime_={close:C,sendRequest:function(F){(0,N.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(F)}};const R=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[F,j]=yield Promise.all([t.authTokenProvider_.getToken(R),t.appCheckTokenProvider_.getToken(R)]);m?Ni("getToken() completed but was canceled"):(Ni("getToken() completed. Creating connection."),t.authToken_=F&&F.accessToken,t.appCheckToken_=j&&j.token,w=new mL(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,J=>{os(J+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(F){t.log_("Failed to get token: "+F),m||(t.repoInfo_.nodeAdmin&&os(F),C())}}})()}interrupt(t){Ni("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ni("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,N.xb)(this.interruptReasons_)&&(this.reconnectDelay_=m0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>pM(c)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Fn(t).toString();let a;if(this.listens.has(i)){const c=this.listens.get(i);a=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Ni("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ni("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,N.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+dM.replace(/\./g,"-")]=1,(0,N.uI)()?t["framework.cordova"]=1:(0,N.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Db.getInstance().currentlyOnline();return(0,N.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class _n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new _n(e,t)}}class Sb{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new _n(Ad,e),i=new _n(Ad,t);return 0!==this.compare(r,i)}minPost(){return _n.MIN}}class bL extends Sb{static get __EMPTY_NODE(){return Ab}static set __EMPTY_NODE(e){Ab=e}compare(e,t){return yp(e.name,t.name)}isDefinedOn(e){throw(0,N.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return _n.MIN}maxPost(){return new _n(Zc,Ab)}makePost(e,t){return(0,N.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new _n(e,Ab)}toString(){return".key"}}const Lu=new bL;class Rb{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let DM,Fa=(()=>{class n{constructor(t,r,i,a,c){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??$s.EMPTY_NODE,this.right=c??$s.EMPTY_NODE}copy(t,r,i,a,c){return new n(t??this.key,r??this.value,i??this.color,a??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const c=i(t,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===c?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return $s.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return $s.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class $s{constructor(e,t=$s.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new $s(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Fa.BLACK,null,null))}remove(e){return new $s(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Fa.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Rb(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Rb(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Rb(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Rb(this.root_,null,this.comparator_,!0,e)}}function tj(n,e){return yp(n.name,e.name)}function bM(n,e){return yp(n,e)}$s.EMPTY_NODE=new class ej{copy(e,t,r,i,a){return this}insert(e,t,r){return new Fa(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const DL=function(n){return"number"==typeof n?"number:"+z1(n):"string:"+n},SL=function(n){if(n.isLeafNode()){const e=n.val();(0,N.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,N.r3)(e,".sv"),"Priority must be a string or number.")}else(0,N.hu)(n===DM||n.isEmpty(),"priority of unexpected type.");(0,N.hu)(n===DM||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let AL,RL,xL,y_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,N.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),SL(this.priorityNode_)}static set __childrenNodeConstructor(t){AL=t}static get __childrenNodeConstructor(){return AL}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return gn(t)?this:".priority"===pn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=pn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,N.hu)(".priority"!==i||1===xd(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Xn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+DL(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?z1(this.value_):this.value_,this.lazyHash_=$1(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,N.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,N.hu)(a>=0,"Unknown leaf type: "+r),(0,N.hu)(c>=0,"Unknown leaf type: "+i),a===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const sr=new class sj extends Sb{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?yp(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return _n.MIN}maxPost(){return new _n(Zc,new y_("[PRIORITY-POST]",xL))}makePost(e,t){const r=RL(e);return new _n(t,new y_("[PRIORITY-POST]",r))}toString(){return".priority"}},oj=Math.log(2);class aj{constructor(e){this.count=parseInt(Math.log(e+1)/oj,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const xb=function(n,e,t,r){n.sort(e);const i=function(m,w){const C=w-m;let D,R;if(0===C)return null;if(1===C)return D=n[m],R=t?t(D):D,new Fa(R,D.node,Fa.BLACK,null,null);{const F=parseInt(C/2,10)+m,j=i(m,F),J=i(F+1,w);return D=n[F],R=t?t(D):D,new Fa(R,D.node,Fa.BLACK,j,J)}},h=function(m){let w=null,C=null,D=n.length;const R=function(j,J){const se=D-j,dt=D;D-=j;const yt=i(se+1,dt),lt=n[se],Et=t?t(lt):lt;F(new Fa(Et,lt.node,J,null,yt))},F=function(j){w?(w.left=j,w=j):(C=j,w=j)};for(let j=0;j<m.count;++j){const J=m.nextBitIsOne(),se=Math.pow(2,m.count-(j+1));J?R(se,Fa.BLACK):(R(se,Fa.BLACK),R(se,Fa.RED))}return C}(new aj(n.length));return new $s(r||e,h)};let SM;const v_={};class Yc{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,N.hu)(v_&&sr,"ChildrenNode.ts has not been loaded"),SM=SM||new Yc({".priority":v_},{".priority":sr}),SM}get(e){const t=(0,N.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof $s?t:null}hasIndex(e){return(0,N.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,N.hu)(e!==Lu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(_n.Wrap);let h,c=a.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=a.getNext();h=i?xb(r,e.getCompare()):v_;const m=e.toString(),w=Object.assign({},this.indexSet_);w[m]=e;const C=Object.assign({},this.indexes_);return C[m]=h,new Yc(C,w)}addToIndexes(e,t){const r=(0,N.UI)(this.indexes_,(i,a)=>{const c=(0,N.DV)(this.indexSet_,a);if((0,N.hu)(c,"Missing index implementation for "+a),i===v_){if(c.isDefinedOn(e.node)){const h=[],m=t.getIterator(_n.Wrap);let w=m.getNext();for(;w;)w.name!==e.name&&h.push(w),w=m.getNext();return h.push(e),xb(h,c.getCompare())}return v_}{const h=t.get(e.name);let m=i;return h&&(m=m.remove(new _n(e.name,h))),m.insert(e,e.node)}});return new Yc(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,N.UI)(this.indexes_,i=>{if(i===v_)return i;{const a=t.get(e.name);return a?i.remove(new _n(e.name,a)):i}});return new Yc(r,this.indexSet_)}}let _0,on=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&SL(this.priorityNode_),this.children_.isEmpty()&&(0,N.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return _0||(_0=new n(new $s(bM),null,Yc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||_0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?_0:r}}getChild(t){const r=pn(t);return null===r?this:this.getImmediateChild(r).getChild(Xn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,N.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new _n(t,r);let a,c;r.isEmpty()?(a=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?_0:this.priorityNode_;return new n(a,h,c)}}updateChild(t,r){const i=pn(t);if(null===i)return r;{(0,N.hu)(".priority"!==pn(t)||1===xd(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Xn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,c=!0;if(this.forEachChild(sr,(h,m)=>{r[h]=m.val(t),i++,c&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):c=!1}),!t&&c&&a<2*i){const h=[];for(const m in r)h[m]=r[m];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+DL(this.getPriority().val())+":"),this.forEachChild(sr,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":$1(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const c=a.getPredecessorKey(new _n(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new _n(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new _n(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,_n.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,_n.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)>0;)a.getNext(),c=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===y0?-1:0}withIndex(t){if(t===Lu||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Lu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(sr),a=r.getIterator(sr);let c=i.getNext(),h=a.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=a.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(t){return t===Lu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const y0=new class uj extends on{constructor(){super(new $s(bM),on.EMPTY_NODE,Yc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return on.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(_n,{MIN:{value:new _n(Ad,on.EMPTY_NODE)},MAX:{value:new _n(Zc,y0)}}),bL.__EMPTY_NODE=on.EMPTY_NODE,y_.__childrenNodeConstructor=on,function nj(n){DM=n}(y0),function ij(n){xL=n}(y0);const cj=!0;function Pr(n,e=null){if(null===n)return on.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,N.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new y_(n,Pr(e));if(n instanceof Array||!cj){let t=on.EMPTY_NODE;return Pi(n,(r,i)=>{if((0,N.r3)(n,r)&&"."!==r.substring(0,1)){const a=Pr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Pr(e))}{const t=[];let r=!1;if(Pi(n,(c,h)=>{if("."!==c.substring(0,1)){const m=Pr(h);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new _n(c,m)))}}),0===t.length)return on.EMPTY_NODE;const a=xb(t,tj,c=>c.name,bM);if(r){const c=xb(t,sr.getCompare());return new on(a,Pr(e),new Yc({".priority":c},{".priority":sr}))}return new on(a,Pr(e),Yc.Default)}}!function rj(n){RL=n}(Pr);class AM extends Sb{constructor(e){super(),this.indexPath_=e,(0,N.hu)(!gn(e)&&".priority"!==pn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?yp(e.name,t.name):a}makePost(e,t){const r=Pr(e),i=on.EMPTY_NODE.updateChild(this.indexPath_,r);return new _n(t,i)}maxPost(){const e=on.EMPTY_NODE.updateChild(this.indexPath_,y0);return new _n(Zc,e)}toString(){return g0(this.indexPath_,0).join("/")}}const RM=new class lj extends Sb{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?yp(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return _n.MIN}maxPost(){return _n.MAX}makePost(e,t){const r=Pr(e);return new _n(t,r)}toString(){return".value"}};function ML(n){return{type:"value",snapshotNode:n}}function w_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function v0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function w0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class xM{constructor(e){this.index_=e}updateChild(e,t,r,i,a,c){(0,N.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(v0(t,h)):(0,N.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(w_(t,r)):c.trackChildChange(w0(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(sr,(i,a)=>{t.hasChild(i)||r.trackChildChange(v0(i,a))}),t.isLeafNode()||t.forEachChild(sr,(i,a)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(a)||r.trackChildChange(w0(i,a,c))}else r.trackChildChange(w_(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?on.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class E0{constructor(e){this.indexedFilter_=new xM(e.getIndex()),this.index_=e.getIndex(),this.startPost_=E0.getStartPost_(e),this.endPost_=E0.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,a,c){return this.matches(new _n(t,r))||(r=on.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=on.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(on.EMPTY_NODE);const a=this;return t.forEachChild(sr,(c,h)=>{a.matches(new _n(c,h))||(i=i.updateImmediateChild(c,on.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class hj{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new E0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,a,c){return this.rangedFilter_.matches(new _n(t,r))||(r=on.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,c):this.fullLimitUpdateChild_(e,t,r,a,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=on.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=on.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const h=a.getNext();if(this.withinDirectionalStart(h)){if(!this.withinDirectionalEnd(h))break;i=i.updateImmediateChild(h.name,h.node),c++}}}else{let a;i=t.withIndex(this.index_),i=i.updatePriority(on.EMPTY_NODE),a=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let c=0;for(;a.hasNext();){const h=a.getNext();c<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?c++:i=i.updateImmediateChild(h.name,on.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let c;if(this.reverse_){const D=this.index_.getCompare();c=(R,F)=>D(F,R)}else c=this.index_.getCompare();const h=e;(0,N.hu)(h.numChildren()===this.limit_,"");const m=new _n(t,r),w=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),C=this.rangedFilter_.matches(m);if(h.hasChild(t)){const D=h.getImmediateChild(t);let R=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=R&&(R.name===t||h.hasChild(R.name));)R=i.getChildAfterChild(this.index_,R,this.reverse_);const F=null==R?1:c(R,m);if(C&&!r.isEmpty()&&F>=0)return a?.trackChildChange(w0(t,r,D)),h.updateImmediateChild(t,r);{a?.trackChildChange(v0(t,D));const J=h.updateImmediateChild(t,on.EMPTY_NODE);return null!=R&&this.rangedFilter_.matches(R)?(a?.trackChildChange(w_(R.name,R.node)),J.updateImmediateChild(R.name,R.node)):J}}return r.isEmpty()?e:C&&c(w,m)>=0?(null!=a&&(a.trackChildChange(v0(w.name,w.node)),a.trackChildChange(w_(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(w.name,on.EMPTY_NODE)):e}}class Mb{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=sr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ad}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Zc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,N.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===sr}copy(){const e=new Mb;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function MM(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function NM(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function Nb(n,e){const t=n.copy();return t.index_=e,t}function NL(n){const e={};if(n.isDefault())return e;let t;if(n.index_===sr?t="$priority":n.index_===RM?t="$value":n.index_===Lu?t="$key":((0,N.hu)(n.index_ instanceof AM,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,N.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,N.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,N.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,N.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,N.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function PL(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==sr&&(e.i=n.index_.toString()),e}class Pb extends _L{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=d0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,N.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=Pb.getListenId_(e,r),h={};this.listens_[c]=h;const m=NL(e._queryParams);this.restRequest_(a+".json",m,(w,C)=>{let D=C;if(404===w&&(D=null,w=null),null===w&&this.onDataUpdate_(a,D,!1,r),(0,N.DV)(this.listens_,c)===h){let R;R=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(R,null)}})}unlisten(e,t){const r=Pb.getListenId_(e,t);delete this.listens_[r]}get(e){const t=NL(e._queryParams),r=e._path.toString(),i=new N.BH;return this.restRequest_(r+".json",t,(a,c)=>{let h=c;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,N.xO)(t);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=(0,N.cI)(h.responseText)}catch{os("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,m)}else 401!==h.status&&404!==h.status&&os("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}}class yj{constructor(){this.rootNode_=on.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Ob(){return{value:null,children:new Map}}function E_(n,e,t){if(gn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=pn(e);n.children.has(r)||n.children.set(r,Ob()),E_(n.children.get(r),e=Xn(e),t)}}function PM(n,e){if(gn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(sr,(r,i)=>{E_(n,new Fn(r),i)}),PM(n,e)}}if(n.children.size>0){const t=pn(e);return e=Xn(e),n.children.has(t)&&PM(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function OM(n,e,t){null!==n.value?t(e,n.value):function vj(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{OM(i,new Fn(e.toString()+"/"+r),t)})}class wj{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Pi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Cj{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new wj(e);const r=1e4+2e4*Math.random();f0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Pi(e,(i,a)=>{a>0&&(0,N.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),f0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Yo=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Yo||(Yo={})),Yo))();function FM(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class kb{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Yo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(gn(this.path)){if(null!=this.affectedTree.value)return(0,N.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Fn(e));return new kb(Mn(),t,this.revert)}}return(0,N.hu)(pn(this.path)===e,"operationForChild called for unrelated child."),new kb(Xn(this.path),this.affectedTree,this.revert)}}class I0{constructor(e,t){this.source=e,this.path=t,this.type=Yo.LISTEN_COMPLETE}operationForChild(e){return gn(this.path)?new I0(this.source,Mn()):new I0(this.source,Xn(this.path))}}class Ep{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Yo.OVERWRITE}operationForChild(e){return gn(this.path)?new Ep(this.source,Mn(),this.snap.getImmediateChild(e)):new Ep(this.source,Xn(this.path),this.snap)}}class I_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Yo.MERGE}operationForChild(e){if(gn(this.path)){const t=this.children.subtree(new Fn(e));return t.isEmpty()?null:t.value?new Ep(this.source,Mn(),t.value):new I_(this.source,Mn(),t)}return(0,N.hu)(pn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new I_(this.source,Xn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Md{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(gn(e))return this.isFullyInitialized()&&!this.filtered_;const t=pn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Tj{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function C0(n,e,t,r,i,a){const c=r.filter(h=>h.type===t);c.sort((h,m)=>function Sj(n,e,t){if(null==e.childName||null==t.childName)throw(0,N.g5)("Should only compare child_ events.");const r=new _n(e.childName,e.snapshotNode),i=new _n(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,m)),c.forEach(h=>{const m=function Dj(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(w=>{w.respondsTo(h.type)&&e.push(w.createEvent(m,n.query_))})})}function Lb(n,e){return{eventCache:n,serverCache:e}}function T0(n,e,t,r){return Lb(new Md(e,t,r),n.serverCache)}function kL(n,e,t,r){return Lb(n.eventCache,new Md(e,t,r))}function Fb(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ip(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let UM;class or{constructor(e,t=(()=>(UM||(UM=new $s(d$)),UM))()){this.value=e,this.children=t}static fromObject(e){let t=new or(null);return Pi(e,(r,i)=>{t=t.set(new Fn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Mn(),value:this.value};if(gn(e))return null;{const r=pn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Xn(e),t);return null!=a?{path:Ir(new Fn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(gn(e))return this;{const t=pn(e),r=this.children.get(t);return null!==r?r.subtree(Xn(e)):new or(null)}}set(e,t){if(gn(e))return new or(t,this.children);{const r=pn(e),a=(this.children.get(r)||new or(null)).set(Xn(e),t),c=this.children.insert(r,a);return new or(this.value,c)}}remove(e){if(gn(e))return this.children.isEmpty()?new or(null):new or(null,this.children);{const t=pn(e),r=this.children.get(t);if(r){const i=r.remove(Xn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new or(null):new or(this.value,a)}return this}}get(e){if(gn(e))return this.value;{const t=pn(e),r=this.children.get(t);return r?r.get(Xn(e)):null}}setTree(e,t){if(gn(e))return t;{const r=pn(e),a=(this.children.get(r)||new or(null)).setTree(Xn(e),t);let c;return c=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new or(this.value,c)}}fold(e){return this.fold_(Mn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Ir(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Mn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(gn(e))return null;{const a=pn(e),c=this.children.get(a);return c?c.findOnPath_(Xn(e),Ir(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Mn(),t)}foreachOnPath_(e,t,r){if(gn(e))return this;{this.value&&r(t,this.value);const i=pn(e),a=this.children.get(i);return a?a.foreachOnPath_(Xn(e),Ir(t,i),r):new or(null)}}foreach(e){this.foreach_(Mn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Ir(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Ua{constructor(e){this.writeTree_=e}static empty(){return new Ua(new or(null))}}function b0(n,e,t){if(gn(e))return new Ua(new or(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const c=Ts(i,e);return a=a.updateChild(c,t),new Ua(n.writeTree_.set(i,a))}{const i=new or(t),a=n.writeTree_.setTree(e,i);return new Ua(a)}}}function VM(n,e,t){let r=n;return Pi(t,(i,a)=>{r=b0(r,Ir(e,i),a)}),r}function LL(n,e){if(gn(e))return Ua.empty();{const t=n.writeTree_.setTree(e,new or(null));return new Ua(t)}}function BM(n,e){return null!=Cp(n,e)}function Cp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ts(t.path,e)):null}function FL(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(sr,(r,i)=>{e.push(new _n(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new _n(r,i.value))}),e}function Nd(n,e){if(gn(e))return n;{const t=Cp(n,e);return new Ua(null!=t?new or(t):n.writeTree_.subtree(e))}}function $M(n){return n.writeTree_.isEmpty()}function C_(n,e){return UL(Mn(),n.writeTree_,e)}function UL(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,N.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=UL(Ir(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Ir(n,".priority"),r)),t}}function Ub(n,e){return HL(e,n)}function Pj(n,e){if(n.snap)return Zo(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Zo(Ir(n.path,t),e))return!0;return!1}function kj(n){return n.visible}function VL(n,e,t){let r=Ua.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const c=a.path;let h;if(a.snap)Zo(t,c)?(h=Ts(t,c),r=b0(r,h,a.snap)):Zo(c,t)&&(h=Ts(c,t),r=b0(r,Mn(),a.snap.getChild(h)));else{if(!a.children)throw(0,N.g5)("WriteRecord should have .snap or .children");if(Zo(t,c))h=Ts(t,c),r=VM(r,h,a.children);else if(Zo(c,t))if(h=Ts(c,t),gn(h))r=VM(r,Mn(),a.children);else{const m=(0,N.DV)(a.children,pn(h));if(m){const w=m.getChild(Xn(h));r=b0(r,Mn(),w)}}}}}return r}function BL(n,e,t,r,i){if(r||i){const a=Nd(n.visibleWrites,e);return!i&&$M(a)?t:i||null!=t||BM(a,Mn())?C_(VL(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(Zo(w.path,e)||Zo(e,w.path))},e),t||on.EMPTY_NODE):null}{const a=Cp(n.visibleWrites,e);if(null!=a)return a;{const c=Nd(n.visibleWrites,e);return $M(c)?t:null!=t||BM(c,Mn())?C_(c,t||on.EMPTY_NODE):null}}}function Vb(n,e,t,r){return BL(n.writeTree,n.treePath,e,t,r)}function jM(n,e){return function Lj(n,e,t){let r=on.EMPTY_NODE;const i=Cp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(sr,(a,c)=>{r=r.updateImmediateChild(a,c)}),r;if(t){const a=Nd(n.visibleWrites,e);return t.forEachChild(sr,(c,h)=>{const m=C_(Nd(a,new Fn(c)),h);r=r.updateImmediateChild(c,m)}),FL(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return FL(Nd(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function $L(n,e,t,r){return function Fj(n,e,t,r,i){(0,N.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Ir(e,t);if(BM(n.visibleWrites,a))return null;{const c=Nd(n.visibleWrites,a);return $M(c)?i.getChild(t):C_(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Bb(n,e){return function Vj(n,e){return Cp(n.visibleWrites,e)}(n.writeTree,Ir(n.treePath,e))}function HM(n,e,t){return function Uj(n,e,t,r){const i=Ir(e,t),a=Cp(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?C_(Nd(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function jL(n,e){return HL(Ir(n.treePath,e),n.writeTree)}function HL(n,e){return{treePath:n,writeTree:e}}class Hj{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,N.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,N.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,w0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,v0(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,w_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,N.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,w0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const GL=new class Gj{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class GM{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Md(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return HM(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ip(this.viewCache_),a=function jj(n,e,t,r,i,a){return function Bj(n,e,t,r,i,a,c){let h;const m=Nd(n.visibleWrites,e),w=Cp(m,Mn());if(null!=w)h=w;else{if(null==t)return[];h=C_(m,t)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const C=[],D=c.getCompare(),R=a?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c);let F=R.getNext();for(;F&&C.length<i;)0!==D(F,r)&&C.push(F),F=R.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function zL(n,e,t,r,i,a){const c=e.eventCache;if(null!=Bb(r,t))return e;{let h,m;if(gn(t))if((0,N.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=Ip(e),D=jM(r,w instanceof on?w:on.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),D,a)}else{const w=Vb(r,Ip(e));h=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=pn(t);if(".priority"===w){(0,N.hu)(1===xd(t),"Can't have a priority with additional path components");const C=c.getNode();m=e.serverCache.getNode();const D=$L(r,t,C,m);h=null!=D?n.filter.updatePriority(C,D):c.getNode()}else{const C=Xn(t);let D;if(c.isCompleteForChild(w)){m=e.serverCache.getNode();const R=$L(r,t,c.getNode(),m);D=null!=R?c.getNode().getImmediateChild(w).updateChild(C,R):c.getNode().getImmediateChild(w)}else D=HM(r,w,e.serverCache);h=null!=D?n.filter.updateChild(c.getNode(),w,D,C,i,a):c.getNode()}}return T0(e,h,c.isFullyInitialized()||gn(t),n.filter.filtersNodes())}}function $b(n,e,t,r,i,a,c,h){const m=e.serverCache;let w;const C=c?n.filter:n.filter.getIndexedFilter();if(gn(t))w=C.updateFullNode(m.getNode(),r,null);else if(C.filtersNodes()&&!m.isFiltered()){const F=m.getNode().updateChild(t,r);w=C.updateFullNode(m.getNode(),F,null)}else{const F=pn(t);if(!m.isCompleteForPath(t)&&xd(t)>1)return e;const j=Xn(t),se=m.getNode().getImmediateChild(F).updateChild(j,r);w=".priority"===F?C.updatePriority(m.getNode(),se):C.updateChild(m.getNode(),F,se,j,GL,null)}const D=kL(e,w,m.isFullyInitialized()||gn(t),C.filtersNodes());return zL(n,D,t,i,new GM(i,D,a),h)}function zM(n,e,t,r,i,a,c){const h=e.eventCache;let m,w;const C=new GM(i,e,a);if(gn(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,c),m=T0(e,w,!0,n.filter.filtersNodes());else{const D=pn(t);if(".priority"===D)w=n.filter.updatePriority(e.eventCache.getNode(),r),m=T0(e,w,h.isFullyInitialized(),h.isFiltered());else{const R=Xn(t),F=h.getNode().getImmediateChild(D);let j;if(gn(R))j=r;else{const J=C.getCompleteChild(D);j=null!=J?".priority"===IM(R)&&J.getChild(EL(R)).isEmpty()?J:J.updateChild(R,r):on.EMPTY_NODE}m=F.equals(j)?e:T0(e,n.filter.updateChild(h.getNode(),D,j,R,C,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return m}function WL(n,e){return n.eventCache.isCompleteForChild(e)}function qL(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function WM(n,e,t,r,i,a,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,m=e;w=gn(t)?r:new or(null).setTree(t,r);const C=e.serverCache.getNode();return w.children.inorderTraversal((D,R)=>{if(C.hasChild(D)){const j=qL(0,e.serverCache.getNode().getImmediateChild(D),R);m=$b(n,m,new Fn(D),j,i,a,c,h)}}),w.children.inorderTraversal((D,R)=>{const F=!e.serverCache.isCompleteForChild(D)&&null===R.value;if(!C.hasChild(D)&&!F){const J=qL(0,e.serverCache.getNode().getImmediateChild(D),R);m=$b(n,m,new Fn(D),J,i,a,c,h)}}),m}class Jj{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new xM(r.getIndex()),a=function fj(n){return n.loadsAllData()?new xM(n.getIndex()):n.hasLimit()?new hj(n):new E0(n)}(r);this.processor_=function zj(n){return{filter:n}}(a);const c=t.serverCache,h=t.eventCache,m=i.updateFullNode(on.EMPTY_NODE,c.getNode(),null),w=a.updateFullNode(on.EMPTY_NODE,h.getNode(),null),C=new Md(m,c.isFullyInitialized(),i.filtersNodes()),D=new Md(w,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=Lb(D,C),this.eventGenerator_=new Tj(this.query_)}get query(){return this.query_}}function nH(n,e){const t=Ip(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!gn(e)&&!t.getImmediateChild(pn(e)).isEmpty())?t.getChild(e):null}function KL(n){return 0===n.eventRegistrations_.length}function ZL(n,e,t){const r=[];if(t){(0,N.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const c=n.eventRegistrations_[a];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function YL(n,e,t,r){e.type===Yo.MERGE&&null!==e.source.queryId&&((0,N.hu)(Ip(n.viewCache_),"We should always have a full cache before handling merges"),(0,N.hu)(Fb(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function qj(n,e,t,r,i){const a=new Hj;let c,h;if(t.type===Yo.OVERWRITE){const w=t;w.source.fromUser?c=zM(n,e,w.path,w.snap,r,i,a):((0,N.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered()&&!gn(w.path),c=$b(n,e,w.path,w.snap,r,i,h,a))}else if(t.type===Yo.MERGE){const w=t;w.source.fromUser?c=function Zj(n,e,t,r,i,a,c){let h=e;return r.foreach((m,w)=>{const C=Ir(t,m);WL(e,pn(C))&&(h=zM(n,h,C,w,i,a,c))}),r.foreach((m,w)=>{const C=Ir(t,m);WL(e,pn(C))||(h=zM(n,h,C,w,i,a,c))}),h}(n,e,w.path,w.children,r,i,a):((0,N.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered(),c=WM(n,e,w.path,w.children,r,i,h,a))}else if(t.type===Yo.ACK_USER_WRITE){const w=t;c=w.revert?function Xj(n,e,t,r,i,a){let c;if(null!=Bb(r,t))return e;{const h=new GM(r,e,i),m=e.eventCache.getNode();let w;if(gn(t)||".priority"===pn(t)){let C;if(e.serverCache.isFullyInitialized())C=Vb(r,Ip(e));else{const D=e.serverCache.getNode();(0,N.hu)(D instanceof on,"serverChildren would be complete if leaf node"),C=jM(r,D)}w=n.filter.updateFullNode(m,C,a)}else{const C=pn(t);let D=HM(r,C,e.serverCache);null==D&&e.serverCache.isCompleteForChild(C)&&(D=m.getImmediateChild(C)),w=null!=D?n.filter.updateChild(m,C,D,Xn(t),h,a):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(m,C,on.EMPTY_NODE,Xn(t),h,a):m,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=Vb(r,Ip(e)),c.isLeafNode()&&(w=n.filter.updateFullNode(w,c,a)))}return c=e.serverCache.isFullyInitialized()||null!=Bb(r,Mn()),T0(e,w,c,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function Yj(n,e,t,r,i,a,c){if(null!=Bb(i,t))return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(gn(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return $b(n,e,t,m.getNode().getChild(t),i,a,h,c);if(gn(t)){let w=new or(null);return m.getNode().forEachChild(Lu,(C,D)=>{w=w.set(new Fn(C),D)}),WM(n,e,t,w,i,a,h,c)}return e}{let w=new or(null);return r.foreach((C,D)=>{const R=Ir(t,C);m.isCompleteForPath(R)&&(w=w.set(C,m.getNode().getChild(R)))}),WM(n,e,t,w,i,a,h,c)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==Yo.LISTEN_COMPLETE)throw(0,N.g5)("Unknown operation type: "+t.type);c=function Qj(n,e,t,r,i){const a=e.serverCache;return zL(n,kL(e,a.getNode(),a.isFullyInitialized()||gn(t),a.isFiltered()),t,r,GL,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function Kj(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Fb(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(ML(Fb(e)))}}(e,c,m),{viewCache:c,changes:m}}(n.processor_,i,e,t,r);return function Wj(n,e){(0,N.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,N.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,N.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,QL(n,a.changes,a.viewCache.eventCache.getNode(),null)}function QL(n,e,t,r){return function bj(n,e,t,r){const i=[],a=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(function dj(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),C0(n,i,"child_removed",e,r,t),C0(n,i,"child_added",e,r,t),C0(n,i,"child_moved",a,r,t),C0(n,i,"child_changed",e,r,t),C0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let jb,Gb;class XL{constructor(){this.views=new Map}}function qM(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,N.hu)(null!=a,"SyncTree gave us an op for an invalid query."),YL(a,e,t,r)}{let a=[];for(const c of n.views.values())a=a.concat(YL(c,e,t,r));return a}}function JL(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let h=Vb(t,i?r:null),m=!1;h?m=!0:r instanceof on?(h=jM(t,r),m=!1):(h=on.EMPTY_NODE,m=!1);const w=Lb(new Md(h,m,!1),new Md(r,i,!1));return new Jj(e,w)}return c}function eF(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Pd(n,e){let t=null;for(const r of n.views.values())t=t||nH(r,e);return t}function tF(n,e){return e._queryParams.loadsAllData()?Hb(n):n.views.get(e._queryIdentifier)}function nF(n,e){return null!=tF(n,e)}function Od(n){return null!=Hb(n)}function Hb(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let hH=1;class rF{constructor(e){this.listenProvider_=e,this.syncPointTree_=new or(null),this.pendingWriteTree_=function $j(){return{visibleWrites:Ua.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function KM(n,e,t,r,i){return function Rj(n,e,t,r,i){(0,N.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=b0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?T_(n,new Ep({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function kd(n,e,t=!1){const r=function Mj(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Nj(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,N.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=t&&Pj(h,r.path)?i=!1:Zo(r.path,h.path)&&(a=!0)),c--}return!!i&&(a?(function Oj(n){n.visibleWrites=VL(n.allWrites,kj,Mn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=LL(n.visibleWrites,r.path):Pi(r.children,m=>{n.visibleWrites=LL(n.visibleWrites,Ir(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new or(null);return null!=r.snap?a=a.set(Mn(),!0):Pi(r.children,c=>{a=a.set(new Fn(c),!0)}),T_(n,new kb(r.path,a,t))}return[]}function D0(n,e,t){return T_(n,new Ep({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function zb(n,e,t,r,i=!1){const a=e._path,c=n.syncPointTree_.get(a);let h=[];if(c&&("default"===e._queryIdentifier||nF(c,e))){const m=function cH(n,e,t,r){const i=e._queryIdentifier,a=[];let c=[];const h=Od(n);if("default"===i)for(const[m,w]of n.views.entries())c=c.concat(ZL(w,t,r)),KL(w)&&(n.views.delete(m),w.query._queryParams.loadsAllData()||a.push(w.query));else{const m=n.views.get(i);m&&(c=c.concat(ZL(m,t,r)),KL(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||a.push(m.query)))}return h&&!Od(n)&&a.push(new(function oH(){return(0,N.hu)(jb,"Reference.ts has not been loaded"),jb}())(e._repo,e._path)),{removed:a,events:c}}(c,e,t,r);(function aH(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const w=m.removed;if(h=m.events,!i){const C=-1!==w.findIndex(R=>R._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(a,(R,F)=>Od(F));if(C&&!D){const R=n.syncPointTree_.subtree(a);if(!R.isEmpty()){const F=function vH(n){return n.fold((e,t,r)=>{if(t&&Od(t))return[Hb(t)];{let i=[];return t&&(i=eF(t)),Pi(r,(a,c)=>{i=i.concat(c)}),i}})}(R);for(let j=0;j<F.length;++j){const J=F[j],se=J.query,dt=aF(n,J);n.listenProvider_.startListening(A0(se),S0(n,se),dt.hashFn,dt.onComplete)}}}!D&&w.length>0&&!r&&(C?n.listenProvider_.stopListening(A0(e),null):w.forEach(R=>{const F=n.queryToTagMap.get(qb(R));n.listenProvider_.stopListening(A0(R),F)}))}!function wH(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=qb(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,w)}return h}function iF(n,e,t,r){const i=YM(n,r);if(null!=i){const a=QM(i),c=a.path,h=a.queryId,m=Ts(c,e);return XM(n,c,new Ep(FM(h),m,t))}return[]}function ZM(n,e,t,r=!1){const i=e._path;let a=null,c=!1;n.syncPointTree_.foreachOnPath(i,(R,F)=>{const j=Ts(R,i);a=a||Pd(F,j),c=c||Od(F)});let m,h=n.syncPointTree_.get(i);h?(c=c||Od(h),a=a||Pd(h,Mn())):(h=new XL,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=a?m=!0:(m=!1,a=on.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((F,j)=>{const J=Pd(j,Mn());J&&(a=a.updateImmediateChild(F,J))}));const w=nF(h,e);if(!w&&!e._queryParams.loadsAllData()){const R=qb(e);(0,N.hu)(!n.queryToTagMap.has(R),"View does not exist, but we have a tag");const F=function EH(){return hH++}();n.queryToTagMap.set(R,F),n.tagToQueryMap.set(F,R)}let D=function uH(n,e,t,r,i,a){const c=JL(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function rH(n,e){n.eventRegistrations_.push(e)}(c,t),function iH(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(sr,(a,c)=>{r.push(w_(a,c))}),t.isFullyInitialized()&&r.push(ML(t.getNode())),QL(n,r,t.getNode(),e)}(c,t)}(h,e,t,Ub(n.pendingWriteTree_,i),a,m);if(!w&&!c&&!r){const R=tF(h,e);D=D.concat(function IH(n,e,t){const r=e._path,i=S0(n,e),a=aF(n,t),c=n.listenProvider_.startListening(A0(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,N.hu)(!Od(h.value),"If we're adding a query, it shouldn't be shadowed");else{const m=h.fold((w,C,D)=>{if(!gn(w)&&C&&Od(C))return[Hb(C).query];{let R=[];return C&&(R=R.concat(eF(C).map(F=>F.query))),Pi(D,(F,j)=>{R=R.concat(j)}),R}});for(let w=0;w<m.length;++w){const C=m[w];n.listenProvider_.stopListening(A0(C),S0(n,C))}}return c}(n,e,R))}return D}function Wb(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(c,h)=>{const w=Pd(h,Ts(c,e));if(w)return w});return BL(i,e,a,t,!0)}function T_(n,e){return sF(e,n.syncPointTree_,null,Ub(n.pendingWriteTree_,Mn()))}function sF(n,e,t,r){if(gn(n.path))return oF(n,e,t,r);{const i=e.get(Mn());null==t&&null!=i&&(t=Pd(i,Mn()));let a=[];const c=pn(n.path),h=n.operationForChild(c),m=e.children.get(c);if(m&&h){const w=t?t.getImmediateChild(c):null,C=jL(r,c);a=a.concat(sF(h,m,w,C))}return i&&(a=a.concat(qM(i,n,r,t))),a}}function oF(n,e,t,r){const i=e.get(Mn());null==t&&null!=i&&(t=Pd(i,Mn()));let a=[];return e.children.inorderTraversal((c,h)=>{const m=t?t.getImmediateChild(c):null,w=jL(r,c),C=n.operationForChild(c);C&&(a=a.concat(oF(C,h,m,w)))}),i&&(a=a.concat(qM(i,n,r,t))),a}function aF(n,e){const t=e.query,r=S0(n,t);return{hashFn:()=>(function eH(n){return n.viewCache_.serverCache.getNode()}(e)||on.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function mH(n,e,t){const r=YM(n,t);if(r){const i=QM(r),a=i.path,c=i.queryId,h=Ts(a,e);return XM(n,a,new I0(FM(c),h))}return[]}(n,t._path,r):function gH(n,e){return T_(n,new I0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function p$(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return zb(n,t,null,a)}}}}function S0(n,e){const t=qb(e);return n.queryToTagMap.get(t)}function qb(n){return n._path.toString()+"$"+n._queryIdentifier}function YM(n,e){return n.tagToQueryMap.get(e)}function QM(n){const e=n.indexOf("$");return(0,N.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Fn(n.substr(0,e))}}function XM(n,e,t){const r=n.syncPointTree_.get(e);return(0,N.hu)(r,"Missing sync point for query tag that we're tracking"),qM(r,t,Ub(n.pendingWriteTree_,e),null)}function A0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function dH(){return(0,N.hu)(Gb,"Reference.ts has not been loaded"),Gb}())(n._repo,n._path):n}class JM{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new JM(t)}node(){return this.node_}}class eN{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Ir(this.path_,e);return new eN(this.syncTree_,t)}node(){return Wb(this.syncTree_,this.path_)}}const CH=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},uF=function(n,e,t){return n&&"object"==typeof n?((0,N.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?TH(n[".sv"],e,t):"object"==typeof n[".sv"]?bH(n[".sv"],e):void(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},TH=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,N.hu)(!1,"Unexpected server value: "+n)},bH=function(n,e,t){n.hasOwnProperty("increment")||(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,N.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,N.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},cF=function(n,e,t,r){return nN(e,new eN(t,n),r)},tN=function(n,e,t){return nN(n,new JM(e),t)};function nN(n,e,t){const r=n.getPriority().val(),i=uF(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const c=n,h=uF(c.getValue(),e,t);return h!==c.getValue()||i!==c.getPriority().val()?new y_(h,Pr(i)):n}{const c=n;return a=c,i!==c.getPriority().val()&&(a=a.updatePriority(new y_(i))),c.forEachChild(sr,(h,m)=>{const w=nN(m,e.getImmediateChild(h),t);w!==m&&(a=a.updateImmediateChild(h,w))}),a}}class rN{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Kb(n,e){let t=e instanceof Fn?e:new Fn(e),r=n,i=pn(t);for(;null!==i;){const a=(0,N.DV)(r.node.children,i)||{children:{},childCount:0};r=new rN(i,r,a),t=Xn(t),i=pn(t)}return r}function Tp(n){return n.node.value}function iN(n,e){n.node.value=e,sN(n)}function lF(n){return n.node.childCount>0}function Zb(n,e){Pi(n.node.children,(t,r)=>{e(new rN(t,n,r))})}function dF(n,e,t,r){t&&!r&&e(n),Zb(n,i=>{dF(i,e,!0,r)}),t&&r&&e(n)}function R0(n){return new Fn(null===n.parent?n.name:R0(n.parent)+"/"+n.name)}function sN(n){null!==n.parent&&function AH(n,e,t){const r=function DH(n){return void 0===Tp(n)&&!lF(n)}(t),i=(0,N.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,sN(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,sN(n))}(n.parent,n.name,n)}const RH=/[\[\].#$\/\u0000-\u001F\u007F]/,xH=/[\[\].#$\u0000-\u001F\u007F]/,oN=10485760,Yb=function(n){return"string"==typeof n&&0!==n.length&&!RH.test(n)},hF=function(n){return"string"==typeof n&&0!==n.length&&!xH.test(n)},x0=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Cb(n)||n&&"object"==typeof n&&(0,N.r3)(n,".sv")},Fu=function(n,e,t,r){r&&void 0===e||M0((0,N.gK)(n,"value"),e,t)},M0=function(n,e,t){const r=t instanceof Fn?new q$(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+vp(r));if("function"==typeof e)throw new Error(n+"contains a function "+vp(r)+" with contents = "+e.toString());if(Cb(e))throw new Error(n+"contains "+e.toString()+" "+vp(r));if("string"==typeof e&&e.length>oN/3&&(0,N.ug)(e)>oN)throw new Error(n+"contains a string greater than "+oN+" utf8 bytes "+vp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Pi(e,(c,h)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(a=!0,!Yb(c)))throw new Error(n+" contains an invalid key ("+c+") "+vp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function K$(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,N.ug)(e),IL(n)})(r,c),M0(n,h,r),function Z$(n){const e=n.parts_.pop();n.byteLength_-=(0,N.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+vp(r)+" in addition to actual children.")}},fF=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,N.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Pi(e,(c,h)=>{const m=new Fn(c);if(M0(i,h,Ir(t,m)),".priority"===IM(m)&&!x0(h))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=g0(r);for(let c=0;c<a.length;c++)if((".priority"!==a[c]||c!==a.length-1)&&!Yb(a[c]))throw new Error(n+"contains an invalid key ("+a[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(W$);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Zo(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},aN=function(n,e,t){if(!t||void 0!==e){if(Cb(e))throw new Error((0,N.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!x0(e))throw new Error((0,N.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},N0=function(n,e,t,r){if(!(r&&void 0===t||Yb(t)))throw new Error((0,N.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},P0=function(n,e,t,r){if(!(r&&void 0===t||hF(t)))throw new Error((0,N.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},PH=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),P0(n,e,t,r)},Qo=function(n,e){if(".info"===pn(e))throw new Error(n+" failed = Can't modify data under /.info/")},pF=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Yb(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),hF(n)}(t))throw new Error((0,N.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class OH{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Qb(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!CM(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function gF(n,e,t){Qb(n,t),mF(n,r=>CM(r,e))}function ho(n,e,t){Qb(n,t),mF(n,r=>Zo(r,e)||Zo(e,r))}function mF(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(kH(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function kH(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();_p&&Ni("event: "+t.toString()),m_(r)}}}const _F="repo_interrupt",LH=25;class FH{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new OH,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ob(),this.transactionQueueTree_=new rN,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function yF(n){const t=n.infoData_.getNode(new Fn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function O0(n){return CH({timestamp:yF(n)})}function vF(n,e,t,r,i){n.dataUpdateCount++;const a=new Fn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const m=(0,N.UI)(t,w=>Pr(w));c=function _H(n,e,t,r){const i=YM(n,r);if(i){const a=QM(i),c=a.path,h=a.queryId,m=Ts(c,e),w=or.fromObject(t);return XM(n,c,new I_(FM(h),m,w))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=Pr(t);c=iF(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,N.UI)(t,w=>Pr(w));c=function pH(n,e,t){const r=or.fromObject(t);return T_(n,new I_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=Pr(t);c=D0(n.serverSyncTree_,a,m)}let h=a;c.length>0&&(h=D_(n,a)),ho(n.eventQueue_,h,c)}function wF(n,e){uN(n,"connected",e),!1===e&&function jH(n){b_(n,"onDisconnectEvents");const e=O0(n),t=Ob();OM(n.onDisconnect_,Mn(),(i,a)=>{const c=cF(i,a,n.serverSyncTree_,e);E_(t,i,c)});let r=[];OM(t,Mn(),(i,a)=>{r=r.concat(D0(n.serverSyncTree_,i,a));const c=hN(n,i);D_(n,c)}),n.onDisconnect_=Ob(),ho(n.eventQueue_,Mn(),r)}(n)}function uN(n,e,t){const r=new Fn("/.info/"+e),i=Pr(t);n.infoData_.updateSnapshot(r,i);const a=D0(n.infoSyncTree_,r,i);ho(n.eventQueue_,r,a)}function Xb(n){return n.nextWriteId_++}function cN(n,e,t,r,i){b_(n,"set",{path:e.toString(),value:t,priority:r});const a=O0(n),c=Pr(t,r),h=Wb(n.serverSyncTree_,e),m=tN(c,h,a),w=Xb(n),C=KM(n.serverSyncTree_,e,m,w,!0);Qb(n.eventQueue_,C),n.server_.put(e.toString(),c.val(!0),(R,F)=>{const j="ok"===R;j||os("set at "+e+" failed: "+R);const J=kd(n.serverSyncTree_,w,!j);ho(n.eventQueue_,e,J),Ld(0,i,R,F)});const D=hN(n,e);D_(n,D),ho(n.eventQueue_,D,[])}function HH(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&PM(n.onDisconnect_,e),Ld(0,t,r,i)})}function EF(n,e,t,r){const i=Pr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,c)=>{"ok"===a&&E_(n.onDisconnect_,e,i),Ld(0,r,a,c)})}function lN(n,e,t){let r;r=".info"===pn(e._path)?zb(n.infoSyncTree_,e,t):zb(n.serverSyncTree_,e,t),gF(n.eventQueue_,e._path,r)}function IF(n){n.persistentConnection_&&n.persistentConnection_.interrupt(_F)}function b_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ni(t,...e)}function Ld(n,e,t,r){e&&m_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const c=new Error(a);c.code=i,e(c)}})}function dN(n,e,t){return Wb(n.serverSyncTree_,e,t)||on.EMPTY_NODE}function Jb(n,e=n.transactionQueueTree_){if(e||eD(n,e),Tp(e)){const t=TF(n,e);(0,N.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function ZH(n,e,t){const r=t.map(w=>w.currentWriteId),i=dN(n,e,r);let a=i;const c=i.hash();for(let w=0;w<t.length;w++){const C=t[w];(0,N.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const D=Ts(e,C.path);a=a.updateChild(D,C.currentOutputSnapshotRaw)}const h=a.val(!0),m=e;n.server_.put(m.toString(),h,w=>{b_(n,"transaction put response",{path:m.toString(),status:w});let C=[];if("ok"===w){const D=[];for(let R=0;R<t.length;R++)t[R].status=2,C=C.concat(kd(n.serverSyncTree_,t[R].currentWriteId)),t[R].onComplete&&D.push(()=>t[R].onComplete(null,!0,t[R].currentOutputSnapshotResolved)),t[R].unwatcher();eD(n,Kb(n.transactionQueueTree_,e)),Jb(n,n.transactionQueueTree_),ho(n.eventQueue_,e,C);for(let R=0;R<D.length;R++)m_(D[R])}else{if("datastale"===w)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{os("transaction at "+m.toString()+" failed: "+w);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=w}D_(n,e)}},c)}(n,R0(e),t)}else lF(e)&&Zb(e,t=>{Jb(n,t)})}function D_(n,e){const t=CF(n,e),r=R0(t);return function YH(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],w=Ts(t,m.path);let D,C=!1;if((0,N.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)C=!0,D=m.abortReason,i=i.concat(kd(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=LH)C=!0,D="maxretry",i=i.concat(kd(n.serverSyncTree_,m.currentWriteId,!0));else{const R=dN(n,m.path,c);m.currentInputSnapshot=R;const F=e[h].update(R.val());if(void 0!==F){M0("transaction failed: Data returned ",F,m.path);let j=Pr(F);"object"==typeof F&&null!=F&&(0,N.r3)(F,".priority")||(j=j.updatePriority(R.getPriority()));const se=m.currentWriteId,dt=O0(n),yt=tN(j,R,dt);m.currentOutputSnapshotRaw=j,m.currentOutputSnapshotResolved=yt,m.currentWriteId=Xb(n),c.splice(c.indexOf(se),1),i=i.concat(KM(n.serverSyncTree_,m.path,yt,m.currentWriteId,m.applyLocally)),i=i.concat(kd(n.serverSyncTree_,se,!0))}else C=!0,D="nodata",i=i.concat(kd(n.serverSyncTree_,m.currentWriteId,!0))}ho(n.eventQueue_,t,i),i=[],C&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===D?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(D),!1,null)))}eD(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)m_(r[h]);Jb(n,n.transactionQueueTree_)}(n,TF(n,t),r),r}function CF(n,e){let t,r=n.transactionQueueTree_;for(t=pn(e);null!==t&&void 0===Tp(r);)r=Kb(r,t),t=pn(e=Xn(e));return r}function TF(n,e){const t=[];return bF(n,e,t),t.sort((r,i)=>r.order-i.order),t}function bF(n,e,t){const r=Tp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Zb(e,i=>{bF(n,i,t)})}function eD(n,e){const t=Tp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,iN(e,t.length>0?t:void 0)}Zb(e,r=>{eD(n,r)})}function hN(n,e){const t=R0(CF(n,e)),r=Kb(n.transactionQueueTree_,e);return function SH(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{fN(n,i)}),fN(n,r),dF(r,i=>{fN(n,i)}),t}function fN(n,e){const t=Tp(e);if(t){const r=[];let i=[],a=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,N.hu)(a===c-1,"All SENT items should be at beginning of queue."),a=c,t[c].status=3,t[c].abortReason="set"):((0,N.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(kd(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===a?iN(e,void 0):t.length=a+1,ho(n.eventQueue_,R0(e),i);for(let c=0;c<r.length;c++)m_(r[c])}}const pN=function(n,e){const t=JH(n),r=t.namespace;return"firebase.com"===t.domain&&ku(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ku("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&os("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new mM(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Fn(t.pathString)}},JH=function(n){let e="",t="",r="",i="",a="",c=!0,h="https",m=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(h=n.substring(0,w-1),n=n.substring(w+2));let C=n.indexOf("/");-1===C&&(C=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(C,D)),C<D&&(i=function QH(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(C,D)));const R=function XH(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):os(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));w=e.indexOf(":"),w>=0?(c="https"===h||"wss"===h,m=parseInt(e.substring(w+1),10)):w=e.length;const F=e.slice(0,w);if("localhost"===F.toLowerCase())t="localhost";else if(F.split(".").length<=2)t=F;else{const j=e.indexOf(".");r=e.substring(0,j).toLowerCase(),t=e.substring(j+1),a=r}"ns"in R&&(a=R.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:c,scheme:h,pathString:i,namespace:a}},DF="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",eG=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=DF.charAt(t%64),t=Math.floor(t/64);(0,N.hu)(0===t,"Cannot push at time == 0");let c=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=DF.charAt(e[i]);return(0,N.hu)(20===c.length,"nextPushId: Length should be 20."),c}}();class SF{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,N.Wl)(this.snapshot.exportVal())}}class AF{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class gN{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,N.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class RF{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new N.BH;return HH(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Qo("OnDisconnect.remove",this._path);const e=new N.BH;return EF(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Qo("OnDisconnect.set",this._path),Fu("OnDisconnect.set",e,this._path,!1);const t=new N.BH;return EF(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Qo("OnDisconnect.setWithPriority",this._path),Fu("OnDisconnect.setWithPriority",e,this._path,!1),aN("OnDisconnect.setWithPriority",t,!1);const r=new N.BH;return function GH(n,e,t,r,i){const a=Pr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(c,h)=>{"ok"===c&&E_(n.onDisconnect_,e,a),Ld(0,i,c,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Qo("OnDisconnect.update",this._path),fF("OnDisconnect.update",e,this._path,!1);const t=new N.BH;return function zH(n,e,t,r){if((0,N.xb)(t))return Ni("onDisconnect().update() called with empty data.  Don't do anything."),void Ld(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Pi(t,(c,h)=>{const m=Pr(h);E_(n.onDisconnect_,Ir(e,c),m)}),Ld(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class js{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return gn(this._path)?null:IM(this._path)}get ref(){return new Xo(this._repo,this._path)}get _queryIdentifier(){const e=PL(this._queryParams),t=pM(e);return"{}"===t?"default":t}get _queryObject(){return PL(this._queryParams)}isEqual(e){if(!((e=(0,N.m9)(e))instanceof js))return!1;const t=this._repo===e._repo,r=CM(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function z$(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function tD(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Fd(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Lu){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Ad)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Zc)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===sr){if(null!=e&&!x0(e)||null!=t&&!x0(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,N.hu)(n.getIndex()instanceof AM||n.getIndex()===RM,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function nD(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Xo extends js{constructor(e,t){super(e,t,new Mb,!1)}get parent(){const e=EL(this._path);return null===e?null:new Xo(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class bp{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Fn(e),r=Dp(this.ref,e);return new bp(this._node.getChild(t),r,sr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new bp(i,Dp(this.ref,r),sr)))}hasChild(e){const t=new Fn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function xF(n,e){return(n=(0,N.m9)(n))._checkNotDeleted("ref"),void 0!==e?Dp(n._root,e):n._root}function MF(n,e){(n=(0,N.m9)(n))._checkNotDeleted("refFromURL");const t=pN(e,n._repo.repoInfo_.nodeAdmin);pF("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ku("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),xF(n,t.path.toString())}function Dp(n,e){return null===pn((n=(0,N.m9)(n))._path)?PH("child","path",e,!1):P0("child","path",e,!1),new Xo(n._repo,Ir(n._path,e))}function mN(n,e){n=(0,N.m9)(n),Qo("set",n._path),Fu("set",e,n._path,!1);const t=new N.BH;return cN(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function sG(n,e){fF("update",e,n._path,!1);const t=new N.BH;return function $H(n,e,t,r){b_(n,"update",{path:e.toString(),value:t});let i=!0;const a=O0(n),c={};if(Pi(t,(h,m)=>{i=!1,c[h]=cF(Ir(e,h),Pr(m),n.serverSyncTree_,a)}),i)Ni("update() called with empty data.  Don't do anything."),Ld(0,r,"ok",void 0);else{const h=Xb(n),m=function fH(n,e,t,r){!function xj(n,e,t,r){(0,N.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=VM(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=or.fromObject(t);return T_(n,new I_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,h);Qb(n.eventQueue_,m),n.server_.merge(e.toString(),t,(w,C)=>{const D="ok"===w;D||os("update at "+e+" failed: "+w);const R=kd(n.serverSyncTree_,h,!D),F=R.length>0?D_(n,e):e;ho(n.eventQueue_,F,R),Ld(0,r,w,C)}),Pi(t,w=>{const C=hN(n,Ir(e,w));D_(n,C)}),ho(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function oG(n){n=(0,N.m9)(n);const e=new gN(()=>{}),t=new k0(e);return function BH(n,e,t){const r=function yH(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,C)=>{const D=Ts(w,t);r=r||Pd(C,D)});let i=n.syncPointTree_.get(t);i?r=r||Pd(i,Mn()):(i=new XL,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,c=a?new Md(r,!0,!1):null;return function tH(n){return Fb(n.viewCache_)}(JL(i,e,Ub(n.pendingWriteTree_,e._path),a?c.getNode():on.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=Pr(i).withIndex(e._queryParams.getIndex());let c;if(ZM(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())c=D0(n.serverSyncTree_,e._path,a);else{const h=S0(n.serverSyncTree_,e);c=iF(n.serverSyncTree_,e._path,a,h)}return ho(n.eventQueue_,e._path,c),zb(n.serverSyncTree_,e,t,null,!0),a},i=>(b_(n,"get for query "+(0,N.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new bp(r,new Xo(n._repo,n._path),n._queryParams.getIndex()))}class k0{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new SF("value",this,new bp(e.snapshotNode,new Xo(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new AF(this,e,t):null}matches(e){return e instanceof k0&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class rD{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new AF(this,e,t):null}createEvent(e,t){(0,N.hu)(null!=e.childName,"Child events should have a childName.");const r=Dp(new Xo(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new SF(e.type,this,new bp(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof rD&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function L0(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const m=t,w=(C,D)=>{lN(n._repo,n,h),m(C,D)};w.userCallback=t.userCallback,w.context=t.context,t=w}const c=new gN(t,a||void 0),h="value"===e?new k0(c):new rD(e,c);return function WH(n,e,t){let r;r=".info"===pn(e._path)?ZM(n.infoSyncTree_,e,t):ZM(n.serverSyncTree_,e,t),gF(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>lN(n._repo,n,h)}function _N(n,e,t,r){return L0(n,"value",e,t,r)}function NF(n,e,t,r){return L0(n,"child_added",e,t,r)}function PF(n,e,t,r){return L0(n,"child_changed",e,t,r)}function OF(n,e,t,r){return L0(n,"child_moved",e,t,r)}function kF(n,e,t,r){return L0(n,"child_removed",e,t,r)}function LF(n,e,t){let r=null;const i=t?new gN(t):null;"value"===e?r=new k0(i):e&&(r=new rD(e,i)),lN(n._repo,n,r)}class Va{}class FF extends Va{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fu("endAt",this._value,e._path,!0);const t=NM(e._queryParams,this._value,this._key);if(nD(t),Fd(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new js(e._repo,e._path,t,e._orderByCalled)}}class uG extends Va{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fu("endBefore",this._value,e._path,!1);const t=function _j(n,e,t){let r;return r=NM(n,e,n.index_===Lu||t?t:Ad),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(nD(t),Fd(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new js(e._repo,e._path,t,e._orderByCalled)}}class UF extends Va{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fu("startAt",this._value,e._path,!0);const t=MM(e._queryParams,this._value,this._key);if(nD(t),Fd(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new js(e._repo,e._path,t,e._orderByCalled)}}class dG extends Va{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fu("startAfter",this._value,e._path,!1);const t=function mj(n,e,t){let r;return r=MM(n,e,n.index_===Lu||t?t:Zc),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(nD(t),Fd(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new js(e._repo,e._path,t,e._orderByCalled)}}class fG extends Va{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new js(e._repo,e._path,function pj(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class gG extends Va{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new js(e._repo,e._path,function gj(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class _G extends Va{constructor(e){super(),this._path=e}_apply(e){tD(e,"orderByChild");const t=new Fn(this._path);if(gn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new AM(t),i=Nb(e._queryParams,r);return Fd(i),new js(e._repo,e._path,i,!0)}}class vG extends Va{_apply(e){tD(e,"orderByKey");const t=Nb(e._queryParams,Lu);return Fd(t),new js(e._repo,e._path,t,!0)}}class EG extends Va{_apply(e){tD(e,"orderByPriority");const t=Nb(e._queryParams,sr);return Fd(t),new js(e._repo,e._path,t,!0)}}class CG extends Va{_apply(e){tD(e,"orderByValue");const t=Nb(e._queryParams,RM);return Fd(t),new js(e._repo,e._path,t,!0)}}class bG extends Va{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Fu("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new FF(this._value,this._key)._apply(new UF(this._value,this._key)._apply(e))}}function Ba(n,...e){let t=(0,N.m9)(n);for(const r of e)t=r._apply(t);return t}(function sH(n){(0,N.hu)(!jb,"__referenceConstructor has already been defined"),jb=n})(Xo),function lH(n){(0,N.hu)(!Gb,"__referenceConstructor has already been defined"),Gb=n}(Xo);const SG="FIREBASE_DATABASE_EMULATOR_HOST",yN={};let VF=!1;function BF(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||ku("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ni("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,w,c=pN(a,i),h=c.repoInfo;typeof process<"u"&&process.env&&(w=process.env[SG]),w?(m=!0,a=`http://${w}?ns=${h.namespace}`,c=pN(a,i),h=c.repoInfo):m=!c.repoInfo.secure;const C=i&&m?new p0(p0.OWNER):new w$(n.name,n.options,e);pF("Invalid Firebase Database URL",c),gn(c.path)||ku("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function xG(n,e,t,r){let i=yN[e.name];i||(i={},yN[e.name]=i);let a=i[n.toURLString()];return a&&ku("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new FH(n,VF,t,r),i[n.toURLString()]=a,a}(h,n,C,new v$(n.name,t));return new NG(D,n)}class NG{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function UH(n,e,t){if(n.stats_=vM(n.repoInfo_),n.forceRestClient_||y$())n.server_=new Pb(n.repoInfo_,(r,i,a,c)=>{vF(n,r,i,a,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>wF(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,N.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new wp(n.repoInfo_,e,(r,i,a,c)=>{vF(n,r,i,a,c)},r=>{wF(n,r)},r=>{!function VH(n,e){Pi(e,(t,r)=>{uN(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function C$(n,e){const t=n.toString();return yM[t]||(yM[t]=e()),yM[t]}(n.repoInfo_,()=>new Cj(n.stats_,n.server_)),n.infoData_=new yj,n.infoSyncTree_=new rF({startListening:(r,i,a,c)=>{let h=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(h=D0(n.infoSyncTree_,r._path,m),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),uN(n,"connected",!1),n.serverSyncTree_=new rF({startListening:(r,i,a,c)=>(n.server_.listen(r,a,i,(h,m)=>{const w=c(h,m);ho(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Xo(this._repo,Mn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function RG(n,e){const t=yN[e];(!t||t[n.key]!==n)&&ku(`Database ${e}(${n.repoInfo_}) has already been deleted.`),IF(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ku("Cannot call "+e+" on a deleted database.")}}function $F(){cL.IS_TRANSPORT_INITIALIZED&&os("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function PG(){$F(),Rd.forceDisallow()}function OG(){$F(),__.forceDisallow(),Rd.forceAllow()}function FG(n,e){H1(n,e)}const VG={".sv":"timestamp"};class jG{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}wp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},wp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function UG(n){U1(pi.SDK_VERSION),(0,pi._registerComponent)(new to.wA("database",(e,{instanceIdentifier:t})=>BF(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,pi.registerVersion)(L1,"0.14.4",n),(0,pi.registerVersion)(L1,"0.14.4","esm2017")}();const WG=new ns.Yd("@firebase/database-compat"),HF=function(n){WG.warn("FIREBASE WARNING: "+n)};class ZG{constructor(e){this._delegate=e}cancel(e){(0,N.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,N.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,N.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,N.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,N.Dv)("OnDisconnect.set",1,2,arguments.length),(0,N.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,N.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,N.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,N.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,HF("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,N.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class YG{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,N.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ud{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,N.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,N.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,N.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,N.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,N.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),P0("DataSnapshot.child","path",e,!1),new Ud(this._database,this._delegate.child(e))}hasChild(e){return(0,N.Dv)("DataSnapshot.hasChild",1,1,arguments.length),P0("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,N.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,N.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,N.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Ud(this._database,t)))}hasChildren(){return(0,N.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,N.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,N.Dv)("DataSnapshot.ref",0,0,arguments.length),new fo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Gi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,N.Dv)("Query.on",2,4,arguments.length),(0,N.Wj)("Query.on","callback",t,!1);const c=Gi.getCancelAndContextArgs_("Query.on",r,i),h=(w,C)=>{t.call(c.context,new Ud(this.database,w),C)};h.userCallback=t,h.context=c.context;const m=null===(a=c.cancel)||void 0===a?void 0:a.bind(c.context);switch(e){case"value":return _N(this._delegate,h,m),t;case"child_added":return NF(this._delegate,h,m),t;case"child_removed":return kF(this._delegate,h,m),t;case"child_changed":return PF(this._delegate,h,m),t;case"child_moved":return OF(this._delegate,h,m),t;default:throw new Error((0,N.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,N.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,N.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,N.Wj)("Query.off","callback",t,!0),(0,N.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,LF(this._delegate,e,i)}else LF(this._delegate,e)}get(){return oG(this._delegate).then(e=>new Ud(this.database,e))}once(e,t,r,i){(0,N.Dv)("Query.once",1,4,arguments.length),(0,N.Wj)("Query.once","callback",t,!0);const a=Gi.getCancelAndContextArgs_("Query.once",r,i),c=new N.BH,h=(w,C)=>{const D=new Ud(this.database,w);t&&t.call(a.context,D,C),c.resolve(D)};h.userCallback=t,h.context=a.context;const m=w=>{a.cancel&&a.cancel.call(a.context,w),c.reject(w)};switch(e){case"value":_N(this._delegate,h,m,{onlyOnce:!0});break;case"child_added":NF(this._delegate,h,m,{onlyOnce:!0});break;case"child_removed":kF(this._delegate,h,m,{onlyOnce:!0});break;case"child_changed":PF(this._delegate,h,m,{onlyOnce:!0});break;case"child_moved":OF(this._delegate,h,m,{onlyOnce:!0});break;default:throw new Error((0,N.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,N.Dv)("Query.limitToFirst",1,1,arguments.length),new Gi(this.database,Ba(this._delegate,function pG(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new fG(n)}(e)))}limitToLast(e){return(0,N.Dv)("Query.limitToLast",1,1,arguments.length),new Gi(this.database,Ba(this._delegate,function mG(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new gG(n)}(e)))}orderByChild(e){return(0,N.Dv)("Query.orderByChild",1,1,arguments.length),new Gi(this.database,Ba(this._delegate,function yG(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return P0("orderByChild","path",n,!1),new _G(n)}(e)))}orderByKey(){return(0,N.Dv)("Query.orderByKey",0,0,arguments.length),new Gi(this.database,Ba(this._delegate,function wG(){return new vG}()))}orderByPriority(){return(0,N.Dv)("Query.orderByPriority",0,0,arguments.length),new Gi(this.database,Ba(this._delegate,function IG(){return new EG}()))}orderByValue(){return(0,N.Dv)("Query.orderByValue",0,0,arguments.length),new Gi(this.database,Ba(this._delegate,function TG(){return new CG}()))}startAt(e=null,t){return(0,N.Dv)("Query.startAt",0,2,arguments.length),new Gi(this.database,Ba(this._delegate,function lG(n=null,e){return N0("startAt","key",e,!0),new UF(n,e)}(e,t)))}startAfter(e=null,t){return(0,N.Dv)("Query.startAfter",0,2,arguments.length),new Gi(this.database,Ba(this._delegate,function hG(n,e){return N0("startAfter","key",e,!0),new dG(n,e)}(e,t)))}endAt(e=null,t){return(0,N.Dv)("Query.endAt",0,2,arguments.length),new Gi(this.database,Ba(this._delegate,function aG(n,e){return N0("endAt","key",e,!0),new FF(n,e)}(e,t)))}endBefore(e=null,t){return(0,N.Dv)("Query.endBefore",0,2,arguments.length),new Gi(this.database,Ba(this._delegate,function cG(n,e){return N0("endBefore","key",e,!0),new uG(n,e)}(e,t)))}equalTo(e,t){return(0,N.Dv)("Query.equalTo",1,2,arguments.length),new Gi(this.database,Ba(this._delegate,function DG(n,e){return N0("equalTo","key",e,!0),new bG(n,e)}(e,t)))}toString(){return(0,N.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,N.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,N.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Gi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,N.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,N.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,N.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new fo(this.database,new Xo(this._delegate._repo,this._delegate._path))}}class fo extends Gi{constructor(e,t){super(e,new js(t._repo,t._path,new Mb,!1)),this.database=e,this._delegate=t}getKey(){return(0,N.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,N.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new fo(this.database,Dp(this._delegate,e))}getParent(){(0,N.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new fo(this.database,e):null}getRoot(){return(0,N.Dv)("Reference.root",0,0,arguments.length),new fo(this.database,this._delegate.root)}set(e,t){(0,N.Dv)("Reference.set",1,2,arguments.length),(0,N.Wj)("Reference.set","onComplete",t,!0);const r=mN(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,N.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,HF("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Qo("Reference.update",this._delegate._path),(0,N.Wj)("Reference.update","onComplete",t,!0);const r=sG(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,N.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,N.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function iG(n,e,t){if(Qo("setWithPriority",n._path),Fu("setWithPriority",e,n._path,!1),aN("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new N.BH;return cN(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,N.Dv)("Reference.remove",0,1,arguments.length),(0,N.Wj)("Reference.remove","onComplete",e,!0);const t=function nG(n){return Qo("remove",n._path),mN(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,N.Dv)("Reference.transaction",1,3,arguments.length),(0,N.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,N.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,N.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function HG(n,e,t){var r;if(n=(0,N.m9)(n),Qo("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new N.BH,h=_N(n,()=>{});return function KH(n,e,t,r,i,a){b_(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:B1(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=dN(n,e,void 0);c.currentInputSnapshot=h;const m=c.update(h.val());if(void 0===m)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{M0("transaction failed: Data returned ",m,c.path),c.status=0;const w=Kb(n.transactionQueueTree_,e),C=Tp(w)||[];let D;C.push(c),iN(w,C),"object"==typeof m&&null!==m&&(0,N.r3)(m,".priority")?(D=(0,N.DV)(m,".priority"),(0,N.hu)(x0(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(Wb(n.serverSyncTree_,e)||on.EMPTY_NODE).getPriority().val();const R=O0(n),F=Pr(m,D),j=tN(F,h,R);c.currentOutputSnapshotRaw=F,c.currentOutputSnapshotResolved=j,c.currentWriteId=Xb(n);const J=KM(n.serverSyncTree_,e,j,c.currentWriteId,c.applyLocally);ho(n.eventQueue_,e,J),Jb(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,w,C)=>{let D=null;m?a.reject(m):(D=new bp(C,new Xo(n._repo,n._path),sr),a.resolve(new jG(w,D)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new YG(a.committed,new Ud(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,N.Dv)("Reference.setPriority",1,2,arguments.length),(0,N.Wj)("Reference.setPriority","onComplete",t,!0);const r=function rG(n,e){n=(0,N.m9)(n),Qo("setPriority",n._path),aN("setPriority",e,!1);const t=new N.BH;return cN(n._repo,Ir(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,N.Dv)("Reference.push",0,2,arguments.length),(0,N.Wj)("Reference.push","onComplete",t,!0);const r=function tG(n,e){n=(0,N.m9)(n),Qo("push",n._path),Fu("push",e,n._path,!0);const t=yF(n._repo),r=eG(t),i=Dp(n,r),a=Dp(n,r);let c;return c=null!=e?mN(a,e).then(()=>a):Promise.resolve(a),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new fo(this.database,c));t&&i.then(()=>t(null),c=>t(c));const a=new fo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Qo("Reference.onDisconnect",this._delegate._path),new ZG(new RF(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class F0{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:PG,forceLongPolling:OG}}useEmulator(e,t,r={}){!function jF(n,e,t,r={}){(n=(0,N.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ku("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ku('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new p0(p0.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,N.Sg)(r.mockUserToken,n.app.options.projectId);a=new p0(c)}!function AG(n,e,t,r){n.repoInfo_=new mM(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,N.Dv)("database.ref",0,1,arguments.length),e instanceof fo){const t=MF(this._delegate,e.toString());return new fo(this,t)}{const t=xF(this._delegate,e);return new fo(this,t)}}refFromURL(e){(0,N.Dv)("database.refFromURL",1,1,arguments.length);const r=MF(this._delegate,e);return new fo(this,r)}goOffline(){return(0,N.Dv)("database.goOffline",0,0,arguments.length),function kG(n){(n=(0,N.m9)(n))._checkNotDeleted("goOffline"),IF(n._repo)}(this._delegate)}goOnline(){return(0,N.Dv)("database.goOnline",0,0,arguments.length),function LG(n){(n=(0,N.m9)(n))._checkNotDeleted("goOnline"),function qH(n){n.persistentConnection_&&n.persistentConnection_.resume(_F)}(n._repo)}(this._delegate)}}F0.ServerValue={TIMESTAMP:function BG(){return VG}(),increment:n=>function $G(n){return{".sv":{increment:n}}}(n)};var XG=Object.freeze({__proto__:null,initStandalone:function QG({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){U1(t);const c=new to.zt("auth-internal",new to.H0("database-standalone"));return c.setComponent(new to.wA("auth-internal",()=>r,"PRIVATE")),{instance:new F0(BF(n,c,void 0,e,a),n),namespace:i}}});const JG=F0.ServerValue;function GF(n){return null==n}function zF(n){return"function"==typeof n.set}function WF(n,e){return zF(e)?e:n.ref(e)}function qF(n,e){if(function tz(n){return"string"==typeof n}(n))return e.stringCase();if(zF(n))return e.firebaseCase();if(function nz(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function U0(n,e,t="on",r=Ma.z){return new Fi.y(i=>{let a=null;return a=n[t](e,(c,h)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,Tt.U)(i=>{const{snapshot:a,prevKey:c}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:c,key:h}}),(0,XE.B)())}function KF(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function sz(n,e){const{payload:t,prevKey:r,key:i}=e,a=KF(n,i),c=function iz(n,e){if(GF(e))return 0;{const t=KF(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(m=>{const w={payload:m,type:"value",prevKey:h,key:m.key};return h=m.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(c,0,h),n}return n;default:return n}}function ZF(n){return(GF(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function YF(n,e,t){return function rz(n,e,t){return U0(n,"value","once",t).pipe(Hn(r=>{const i=[st(r)];return e.forEach(a=>i.push(U0(n,a,"on",t))),(0,Ly.T)(...i).pipe(Mo(sz,[]))}),wv())}(n,e=ZF(e),t)}function QF(n,e,t){const r=(e=ZF(e)).map(i=>U0(n,i,"on",t));return(0,Ly.T)(...r)}function XF(n,e){return function(r,i){return qF(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function cz(n){return function(t){return t?qF(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function JF(n,e){return function(){return U0(n,"value","on",e)}}!function ez(n){n.INTERNAL.registerComponent(new to.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new F0(i,r)},"PUBLIC").setServiceProps({Reference:fo,Query:Gi,Database:F0,DataSnapshot:Ud,enableLogging:FG,INTERNAL:XG,ServerValue:JG}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(rv.Z);const hz=new _.OlP("angularfire2.realtimeDatabaseURL"),fz=new _.OlP("angularfire2.database.use-emulator");let pz=(()=>{class n{constructor(t,r,i,a,c,h,m,w,C,D,R,F,j,J,se){this.schedulers=h;const dt=m,yt=(0,nr.on)(t,c,r);w&&ev(yt,c,C,R,F,j,D,J),this.database=(0,nr.cc)(`${yt.name}.database.${i}`,"AngularFireDatabase",yt.name,()=>{const lt=c.runOutsideAngular(()=>yt.database(i||void 0));return dt&&lt.useEmulator(...dt),lt},[dt])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>WF(this.database,t));let a=i;return r&&(a=r(i)),function lz(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:XF(r,"update"),set:XF(r,"set"),push:i=>r.push(i),remove:cz(r),snapshotChanges:i=>YF(n,i,t).pipe(an.iC),stateChanges:i=>QF(n,i,t).pipe(an.iC),auditTrail:i=>function oz(n,e,t){return function uz(n,e,t){return function az(n,e){return U0(n,"value","on",e).pipe((0,Tt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function s$(...n){const e=(0,Ro.jO)(n);return(0,yr.e)((t,r)=>{const i=n.length,a=new Array(i);let c=n.map(()=>!1),h=!1;for(let m=0;m<i;m++)(0,wa.Xf)(n[m]).subscribe((0,Ln.x)(r,w=>{a[m]=w,!h&&!c[m]&&(c[m]=!0,(h=c.every(Xi.y))&&(c=null))},i$.Z));t.subscribe((0,Ln.x)(r,m=>{if(h){const w=[m,...a];r.next(e?e(...w):w)}}))})}(e),(0,Tt.U)(([i,a])=>{const c=i.lastKeyToLoad,h=a.map(m=>m.key);return{actions:a,lastKeyToLoad:c,loadedKeys:h}}),function o$(n){return(0,yr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Ln.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,Tt.U)(i=>i.actions))}(n,QF(n,e).pipe(Mo((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(an.iC),valueChanges:(i,a)=>YF(n,i,t).pipe((0,Tt.U)(h=>h.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),an.iC)}}(a,this)}object(t){return function dz(n,e){return{query:n,snapshotChanges:()=>JF(n,e.schedulers.outsideAngular)().pipe(an.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>JF(n,e.schedulers.outsideAngular)().pipe(an.iC,(0,Tt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>WF(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(nr.Dh),_.LFG(nr.xv,8),_.LFG(hz,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(an.HU),_.LFG(fz,8),_.LFG(cf,8),_.LFG(Ng,8),_.LFG(Pg,8),_.LFG(Og,8),_.LFG(kg,8),_.LFG(rd,8),_.LFG(Vo,8),_.LFG(nd,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),gz=(()=>{class n{constructor(){Cu.Z.registerVersion("angularfire",an.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[pz]}),n})();var eU=P(655),mz=P(5132);const nU="firebase_screen_id",wN="outlet",V0="screen_class",rU="screen_name";let Rz=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const EN={},xz=n=>{const e=[n[V0],n[wN]].join("#");if(EN.hasOwnProperty(e))return EN[e];{const t=Rz++;return EN[e]=t,t}},Lz=new _.OlP("angularfire2.analytics.analyticsCollectionEnabled"),Fz=new _.OlP("angularfire2.analytics.appVersion"),Uz=new _.OlP("angularfire2.analytics.appName"),Vz=new _.OlP("angularfire2.analytics.debugMode"),Bz=new _.OlP("angularfire2.analytics.config"),iD="dataLayer";let B0=(()=>{class n{constructor(t,r,i,a,c,h,m,w,C){if(this.analyticsInitialized=new Promise(()=>{}),function rl(n){return n===aa}(m)){window[iD]=window[iD]||[];const R=(...J)=>"config"===J[0]&&"firebase"===J[2].origin&&(this.measurementId=J[1],!0),F=J=>{window.gtag=(...se)=>{J&&J(...se),"event"===se[0]&&se[2].send_to===this.measurementId&&(a&&(se[2].app_name=a),i&&(se[2].app_version=i)),c&&typeof console<"u"&&console.info(...se),function(...dt){window[iD].push(arguments)}(...se)}};window[iD].some(R)?(this.analyticsInitialized=Promise.resolve(),F()):this.analyticsInitialized=new Promise(J=>{F((...se)=>{R(...se)&&J()})}),h&&this.updateConfig(h),c&&this.updateConfig({debug_mode:1})}else this.analyticsInitialized=Promise.resolve();const D=st(void 0).pipe((0,Wh.Q)(C.outsideAngular),Hn(mz.Gb),Hn(R=>R?w.runOutsideAngular(()=>P.e(814).then(P.bind(P,3814))):ds.E),(0,Tt.U)(()=>(0,nr.cc)("analytics","AngularFireAnalytics",t.name,()=>{const R=t.analytics();return!1===r&&R.setAnalyticsCollectionEnabled(!1),R},[t,r,h,c])),JE({bufferSize:1,refCount:!1}));return(0,nr.pX)(this,D,w)}updateConfig(t){return(0,eU.mG)(this,void 0,void 0,function*(){yield this.analyticsInitialized,window.gtag("config",this.measurementId,Object.assign(Object.assign({},t),{update:!0}))})}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(nr.Ot),_.LFG(Lz,8),_.LFG(Fz,8),_.LFG(Uz,8),_.LFG(Vz,8),_.LFG(Bz,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(an.HU))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),sU=(()=>{class n{constructor(t,r,i,a){if(this.disposables=[],Cu.Z.registerVersion("angularfire",an.q4.full,"compat-user-tracking"),ua(r))this.initialized=Promise.resolve();else{let c;this.initialized=a.runOutsideAngular(()=>new Promise(h=>c=h)),this.disposables=[i.authState.subscribe(h=>{t.setUserId(h?.uid),c()}),i.credential.subscribe(h=>{if(h){const m=h.user.isAnonymous?"anonymous":h.additionalUserInfo.providerId;h.additionalUserInfo.isNewUser&&t.logEvent("sign_up",{method:m}),t.logEvent("login",{method:m})}})]}}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(B0),_.LFG(_.Lbi),_.LFG(cf),_.LFG(_.R0b))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),qz=(()=>{class n{constructor(t,r,i,a,c,h){if(Cu.Z.registerVersion("angularfire",an.q4.full,"compat-screen-tracking"),!r||!t)return this;c.runOutsideAngular(()=>{this.disposable=((n,e,t)=>n.events.pipe(Ui(i=>i instanceof Vl)).pipe(Hn(i=>{var a;const h=(null===(a=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,F=>F.replace("://",":///"))).root.children[i.snapshot.outlet])||void 0===a?void 0:a.toString())||"",m=n.routerState.root.children.map(F=>F).find(F=>F.outlet===i.snapshot.outlet);if(!m)return st(null);let w=m;for(;w.firstChild;)w=w.firstChild;const C=w.pathFromRoot.map(F=>{var j;return null===(j=F.routeConfig)||void 0===j?void 0:j.path}).filter(F=>F).join("/")||"/",D={[rU]:C,page_path:`/${h}`,firebase_event_origin:"auto",firebase_screen:C,[wN]:i.snapshot.outlet};e&&(D.page_title=e.getTitle());let R=m.component;if(R){if(R===cg){let F=i.snapshot;for(;F.firstChild;)F=F.firstChild;R=F.component}}else R=i.snapshot.component;if("string"==typeof R)return st(Object.assign(Object.assign({},D),{[V0]:R}));if(R){const F=t.resolveComponentFactory(R);return st(Object.assign(Object.assign({},D),{[V0]:F.selector}))}return st(null)}),Ui(i=>!!i),(0,Tt.U)(i=>Object.assign({firebase_screen_class:i[V0],[nU]:xz(i)},i)),function _z(n,e,t,r){return(0,yr.e)((i,a)=>{let c;e&&"function"!=typeof e?({duration:t,element:c,connector:r}=e):c=e;const h=new Map,m=j=>{h.forEach(j),j(a)},w=j=>m(J=>J.error(j));let C=0,D=!1;const R=new Ln.Q(a,j=>{try{const J=n(j);let se=h.get(J);if(!se){h.set(J,se=r?r():new xo.x);const dt=function F(j,J){const se=new Fi.y(dt=>{C++;const yt=J.subscribe(dt);return()=>{yt.unsubscribe(),0==--C&&D&&R.unsubscribe()}});return se.key=j,se}(J,se);if(a.next(dt),t){const yt=(0,Ln.x)(se,()=>{se.complete(),yt?.unsubscribe()},void 0,void 0,()=>h.delete(J));R.add((0,wa.Xf)(t(dt)).subscribe(yt))}}se.next(c?c(j):j)}catch(J){w(J)}},()=>m(j=>j.complete()),w,()=>h.clear(),()=>(D=!0,0===C));i.subscribe(R)})}(i=>i[wN]),(0,Sr.z)(i=>i.pipe(wv((a,c)=>JSON.stringify(a)===JSON.stringify(c)),sc(void 0),em(),(0,Tt.U)(([a,c])=>a?Object.assign({firebase_previous_class:a[V0],firebase_previous_screen:a[rU],firebase_previous_id:a[nU]},c):c)))))(r,i,a).pipe(Hn(m=>(0,eU.mG)(this,void 0,void 0,function*(){return h&&(yield h.initialized),yield t.logEvent("screen_view",m)}))).subscribe()})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(B0),_.LFG(bi,8),_.LFG(So,8),_.LFG(_._Vd),_.LFG(_.R0b),_.LFG(sU,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),Kz=(()=>{class n{constructor(t,r,i){Cu.Z.registerVersion("angularfire",an.q4.full,"analytics-compat"),t.app.then(()=>{})}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(B0),_.LFG(qz,8),_.LFG(sU,8))},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[B0]}),n})();const oU_firebaseConfig={apiKey:"AIzaSyDp-n3JPvXmCB1RRaXBrODB11YauEjeZ4Y",authDomain:"opacscc-a73c7.firebaseapp.com",databaseURL:"https://opacscc-a73c7-default-rtdb.firebaseio.com",projectId:"opacscc-a73c7",storageBucket:"opacscc-a73c7.appspot.com",messagingSenderId:"514399829505",appId:"1:514399829505:web:63cae12e2f15759e694a00",measurementId:"G-BPS0HTXKS3"};let Zz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n,bootstrap:[YE]}),n.\u0275inj=_.cJS({imports:[Qa,VE.forRoot([]),ky,nr.hO.initializeApp(oU_firebaseConfig),tv,RC,r$,gz,Kz]}),n})();Qu().bootstrapModule(Zz).catch(n=>console.error(n))},9751:(gt,Se,P)=>{P.d(Se,{y:()=>ge});var _=P(930),X=P(727),V=P(8822),te=P(9635),ue=P(2416),ne=P(576),de=P(2806);let ge=(()=>{class Y{constructor(ye){ye&&(this._subscribe=ye)}lift(ye){const Ye=new Y;return Ye.source=this,Ye.operator=ye,Ye}subscribe(ye,Ye,nt){const pe=function W(Y){return Y&&Y instanceof _.Lv||function G(Y){return Y&&(0,ne.m)(Y.next)&&(0,ne.m)(Y.error)&&(0,ne.m)(Y.complete)}(Y)&&(0,X.Nn)(Y)}(ye)?ye:new _.Hp(ye,Ye,nt);return(0,de.x)(()=>{const{operator:be,source:Ne}=this;pe.add(be?be.call(pe,Ne):Ne?this._subscribe(pe):this._trySubscribe(pe))}),pe}_trySubscribe(ye){try{return this._subscribe(ye)}catch(Ye){ye.error(Ye)}}forEach(ye,Ye){return new(Ye=ce(Ye))((nt,pe)=>{const be=new _.Hp({next:Ne=>{try{ye(Ne)}catch(Ue){pe(Ue),be.unsubscribe()}},error:pe,complete:nt});this.subscribe(be)})}_subscribe(ye){var Ye;return null===(Ye=this.source)||void 0===Ye?void 0:Ye.subscribe(ye)}[V.L](){return this}pipe(...ye){return(0,te.U)(ye)(this)}toPromise(ye){return new(ye=ce(ye))((Ye,nt)=>{let pe;this.subscribe(be=>pe=be,be=>nt(be),()=>Ye(pe))})}}return Y.create=Oe=>new Y(Oe),Y})();function ce(Y){var Oe;return null!==(Oe=Y??ue.v.Promise)&&void 0!==Oe?Oe:Promise}},7579:(gt,Se,P)=>{P.d(Se,{x:()=>de});var _=P(9751),X=P(727);const te=(0,P(3888).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ue=P(8737),ne=P(2806);let de=(()=>{class ce extends _.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const Y=new ge(this,this);return Y.operator=W,Y}_throwIfClosed(){if(this.closed)throw new te}next(W){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next(W)}})}error(W){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:Y}=this;for(;Y.length;)Y.shift().error(W)}})}complete(){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:Y,isStopped:Oe,observers:ye}=this;return Y||Oe?X.Lc:(this.currentObservers=null,ye.push(W),new X.w0(()=>{this.currentObservers=null,(0,ue.P)(ye,W)}))}_checkFinalizedStatuses(W){const{hasError:Y,thrownError:Oe,isStopped:ye}=this;Y?W.error(Oe):ye&&W.complete()}asObservable(){const W=new _.y;return W.source=this,W}}return ce.create=(G,W)=>new ge(G,W),ce})();class ge extends de{constructor(G,W){super(),this.destination=G,this.source=W}next(G){var W,Y;null===(Y=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===Y||Y.call(W,G)}error(G){var W,Y;null===(Y=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===Y||Y.call(W,G)}complete(){var G,W;null===(W=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===W||W.call(G)}_subscribe(G){var W,Y;return null!==(Y=null===(W=this.source)||void 0===W?void 0:W.subscribe(G))&&void 0!==Y?Y:X.Lc}}},930:(gt,Se,P)=>{P.d(Se,{Hp:()=>nt,Lv:()=>Y});var _=P(576),X=P(727),V=P(2416),te=P(7849),ue=P(5032);const ne=ce("C",void 0,void 0);function ce(Re,Ee,xe){return{kind:Re,value:Ee,error:xe}}var G=P(3410),W=P(2806);class Y extends X.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,X.Nn)(Ee)&&Ee.add(this)):this.destination=Ue}static create(Ee,xe,Ge){return new nt(Ee,xe,Ge)}next(Ee){this.isStopped?Ne(function ge(Re){return ce("N",Re,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?Ne(function de(Re){return ce("E",void 0,Re)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?Ne(ne,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Oe=Function.prototype.bind;function ye(Re,Ee){return Oe.call(Re,Ee)}class Ye{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:xe}=this;if(xe.next)try{xe.next(Ee)}catch(Ge){pe(Ge)}}error(Ee){const{partialObserver:xe}=this;if(xe.error)try{xe.error(Ee)}catch(Ge){pe(Ge)}else pe(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(xe){pe(xe)}}}class nt extends Y{constructor(Ee,xe,Ge){let Ae;if(super(),(0,_.m)(Ee)||!Ee)Ae={next:Ee??void 0,error:xe??void 0,complete:Ge??void 0};else{let $;this&&V.v.useDeprecatedNextContext?($=Object.create(Ee),$.unsubscribe=()=>this.unsubscribe(),Ae={next:Ee.next&&ye(Ee.next,$),error:Ee.error&&ye(Ee.error,$),complete:Ee.complete&&ye(Ee.complete,$)}):Ae=Ee}this.destination=new Ye(Ae)}}function pe(Re){V.v.useDeprecatedSynchronousErrorHandling?(0,W.O)(Re):(0,te.h)(Re)}function Ne(Re,Ee){const{onStoppedNotification:xe}=V.v;xe&&G.z.setTimeout(()=>xe(Re,Ee))}const Ue={closed:!0,next:ue.Z,error:function be(Re){throw Re},complete:ue.Z}},727:(gt,Se,P)=>{P.d(Se,{Lc:()=>ne,w0:()=>ue,Nn:()=>de});var _=P(576);const V=(0,P(3888).d)(ce=>function(W){ce(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((Y,Oe)=>`${Oe+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var te=P(8737);class ue{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const ye of W)ye.remove(this);else W.remove(this);const{initialTeardown:Y}=this;if((0,_.m)(Y))try{Y()}catch(ye){G=ye instanceof V?ye.errors:[ye]}const{_finalizers:Oe}=this;if(Oe){this._finalizers=null;for(const ye of Oe)try{ge(ye)}catch(Ye){G=G??[],Ye instanceof V?G=[...G,...Ye.errors]:G.push(Ye)}}if(G)throw new V(G)}}add(G){var W;if(G&&G!==this)if(this.closed)ge(G);else{if(G instanceof ue){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(W=this._finalizers)&&void 0!==W?W:[]).push(G)}}_hasParent(G){const{_parentage:W}=this;return W===G||Array.isArray(W)&&W.includes(G)}_addParent(G){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push(G),W):W?[W,G]:G}_removeParent(G){const{_parentage:W}=this;W===G?this._parentage=null:Array.isArray(W)&&(0,te.P)(W,G)}remove(G){const{_finalizers:W}=this;W&&(0,te.P)(W,G),G instanceof ue&&G._removeParent(this)}}ue.EMPTY=(()=>{const ce=new ue;return ce.closed=!0,ce})();const ne=ue.EMPTY;function de(ce){return ce instanceof ue||ce&&"closed"in ce&&(0,_.m)(ce.remove)&&(0,_.m)(ce.add)&&(0,_.m)(ce.unsubscribe)}function ge(ce){(0,_.m)(ce)?ce():ce.unsubscribe()}},2416:(gt,Se,P)=>{P.d(Se,{v:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(gt,Se,P)=>{P.d(Se,{E:()=>X});const X=new(P(9751).y)(ue=>ue.complete())},8996:(gt,Se,P)=>{P.d(Se,{D:()=>Ee});var _=P(8421),X=P(5363),V=P(9468),ne=P(9751),ge=P(2202),ce=P(576),G=P(9672);function Y(xe,Ge){if(!xe)throw new Error("Iterable cannot be null");return new ne.y(Ae=>{(0,G.f)(Ae,Ge,()=>{const $=xe[Symbol.asyncIterator]();(0,G.f)(Ae,Ge,()=>{$.next().then(we=>{we.done?Ae.complete():Ae.next(we.value)})},0,!0)})})}var Oe=P(3670),ye=P(8239),Ye=P(1144),nt=P(6495),pe=P(2206),be=P(4532),Ne=P(3260);function Ee(xe,Ge){return Ge?function Re(xe,Ge){if(null!=xe){if((0,Oe.c)(xe))return function te(xe,Ge){return(0,_.Xf)(xe).pipe((0,V.R)(Ge),(0,X.Q)(Ge))}(xe,Ge);if((0,Ye.z)(xe))return function de(xe,Ge){return new ne.y(Ae=>{let $=0;return Ge.schedule(function(){$===xe.length?Ae.complete():(Ae.next(xe[$++]),Ae.closed||this.schedule())})})}(xe,Ge);if((0,ye.t)(xe))return function ue(xe,Ge){return(0,_.Xf)(xe).pipe((0,V.R)(Ge),(0,X.Q)(Ge))}(xe,Ge);if((0,pe.D)(xe))return Y(xe,Ge);if((0,nt.T)(xe))return function W(xe,Ge){return new ne.y(Ae=>{let $;return(0,G.f)(Ae,Ge,()=>{$=xe[ge.h](),(0,G.f)(Ae,Ge,()=>{let we,qe;try{({value:we,done:qe}=$.next())}catch(Qe){return void Ae.error(Qe)}qe?Ae.complete():Ae.next(we)},0,!0)}),()=>(0,ce.m)($?.return)&&$.return()})}(xe,Ge);if((0,Ne.L)(xe))return function Ue(xe,Ge){return Y((0,Ne.Q)(xe),Ge)}(xe,Ge)}throw(0,be.z)(xe)}(xe,Ge):(0,_.Xf)(xe)}},8421:(gt,Se,P)=>{P.d(Se,{Xf:()=>Oe});var _=P(655),X=P(1144),V=P(8239),te=P(9751),ue=P(3670),ne=P(2206),de=P(4532),ge=P(6495),ce=P(3260),G=P(576),W=P(7849),Y=P(8822);function Oe(Re){if(Re instanceof te.y)return Re;if(null!=Re){if((0,ue.c)(Re))return function ye(Re){return new te.y(Ee=>{const xe=Re[Y.L]();if((0,G.m)(xe.subscribe))return xe.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Re);if((0,X.z)(Re))return function Ye(Re){return new te.y(Ee=>{for(let xe=0;xe<Re.length&&!Ee.closed;xe++)Ee.next(Re[xe]);Ee.complete()})}(Re);if((0,V.t)(Re))return function nt(Re){return new te.y(Ee=>{Re.then(xe=>{Ee.closed||(Ee.next(xe),Ee.complete())},xe=>Ee.error(xe)).then(null,W.h)})}(Re);if((0,ne.D)(Re))return be(Re);if((0,ge.T)(Re))return function pe(Re){return new te.y(Ee=>{for(const xe of Re)if(Ee.next(xe),Ee.closed)return;Ee.complete()})}(Re);if((0,ce.L)(Re))return function Ne(Re){return be((0,ce.Q)(Re))}(Re)}throw(0,de.z)(Re)}function be(Re){return new te.y(Ee=>{(function Ue(Re,Ee){var xe,Ge,Ae,$;return(0,_.mG)(this,void 0,void 0,function*(){try{for(xe=(0,_.KL)(Re);!(Ge=yield xe.next()).done;)if(Ee.next(Ge.value),Ee.closed)return}catch(we){Ae={error:we}}finally{try{Ge&&!Ge.done&&($=xe.return)&&(yield $.call(xe))}finally{if(Ae)throw Ae.error}}Ee.complete()})})(Re,Ee).catch(xe=>Ee.error(xe))})}},6451:(gt,Se,P)=>{P.d(Se,{T:()=>ne});var _=P(8189),X=P(8421),V=P(515),te=P(7669),ue=P(8996);function ne(...de){const ge=(0,te.yG)(de),ce=(0,te._6)(de,1/0),G=de;return G.length?1===G.length?(0,X.Xf)(G[0]):(0,_.J)(ce)((0,ue.D)(G,ge)):V.E}},5403:(gt,Se,P)=>{P.d(Se,{Q:()=>V,x:()=>X});var _=P(930);function X(te,ue,ne,de,ge){return new V(te,ue,ne,de,ge)}class V extends _.Lv{constructor(ue,ne,de,ge,ce,G){super(ue),this.onFinalize=ce,this.shouldUnsubscribe=G,this._next=ne?function(W){try{ne(W)}catch(Y){ue.error(Y)}}:super._next,this._error=ge?function(W){try{ge(W)}catch(Y){ue.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=de?function(){try{de()}catch(W){ue.error(W)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ne}=this;super.unsubscribe(),!ne&&(null===(ue=this.onFinalize)||void 0===ue||ue.call(this))}}}},4004:(gt,Se,P)=>{P.d(Se,{U:()=>V});var _=P(4482),X=P(5403);function V(te,ue){return(0,_.e)((ne,de)=>{let ge=0;ne.subscribe((0,X.x)(de,ce=>{de.next(te.call(ue,ce,ge++))}))})}},8189:(gt,Se,P)=>{P.d(Se,{J:()=>V});var _=P(5577),X=P(4671);function V(te=1/0){return(0,_.z)(X.y,te)}},5577:(gt,Se,P)=>{P.d(Se,{z:()=>ge});var _=P(4004),X=P(8421),V=P(4482),te=P(9672),ue=P(5403),de=P(576);function ge(ce,G,W=1/0){return(0,de.m)(G)?ge((Y,Oe)=>(0,_.U)((ye,Ye)=>G(Y,ye,Oe,Ye))((0,X.Xf)(ce(Y,Oe))),W):("number"==typeof G&&(W=G),(0,V.e)((Y,Oe)=>function ne(ce,G,W,Y,Oe,ye,Ye,nt){const pe=[];let be=0,Ne=0,Ue=!1;const Re=()=>{Ue&&!pe.length&&!be&&G.complete()},Ee=Ge=>be<Y?xe(Ge):pe.push(Ge),xe=Ge=>{ye&&G.next(Ge),be++;let Ae=!1;(0,X.Xf)(W(Ge,Ne++)).subscribe((0,ue.x)(G,$=>{Oe?.($),ye?Ee($):G.next($)},()=>{Ae=!0},void 0,()=>{if(Ae)try{for(be--;pe.length&&be<Y;){const $=pe.shift();Ye?(0,te.f)(G,Ye,()=>xe($)):xe($)}Re()}catch($){G.error($)}}))};return ce.subscribe((0,ue.x)(G,Ee,()=>{Ue=!0,Re()})),()=>{nt?.()}}(Y,Oe,ce,W)))}},5363:(gt,Se,P)=>{P.d(Se,{Q:()=>te});var _=P(9672),X=P(4482),V=P(5403);function te(ue,ne=0){return(0,X.e)((de,ge)=>{de.subscribe((0,V.x)(ge,ce=>(0,_.f)(ge,ue,()=>ge.next(ce),ne),()=>(0,_.f)(ge,ue,()=>ge.complete(),ne),ce=>(0,_.f)(ge,ue,()=>ge.error(ce),ne)))})}},3099:(gt,Se,P)=>{P.d(Se,{B:()=>ue});var _=P(8421),X=P(7579),V=P(930),te=P(4482);function ue(de={}){const{connector:ge=(()=>new X.x),resetOnError:ce=!0,resetOnComplete:G=!0,resetOnRefCountZero:W=!0}=de;return Y=>{let Oe,ye,Ye,nt=0,pe=!1,be=!1;const Ne=()=>{ye?.unsubscribe(),ye=void 0},Ue=()=>{Ne(),Oe=Ye=void 0,pe=be=!1},Re=()=>{const Ee=Oe;Ue(),Ee?.unsubscribe()};return(0,te.e)((Ee,xe)=>{nt++,!be&&!pe&&Ne();const Ge=Ye=Ye??ge();xe.add(()=>{nt--,0===nt&&!be&&!pe&&(ye=ne(Re,W))}),Ge.subscribe(xe),!Oe&&nt>0&&(Oe=new V.Hp({next:Ae=>Ge.next(Ae),error:Ae=>{be=!0,Ne(),ye=ne(Ue,ce,Ae),Ge.error(Ae)},complete:()=>{pe=!0,Ne(),ye=ne(Ue,G),Ge.complete()}}),(0,_.Xf)(Ee).subscribe(Oe))})(Y)}}function ne(de,ge,...ce){if(!0===ge)return void de();if(!1===ge)return;const G=new V.Hp({next:()=>{G.unsubscribe(),de()}});return(0,_.Xf)(ge(...ce)).subscribe(G)}},9468:(gt,Se,P)=>{P.d(Se,{R:()=>X});var _=P(4482);function X(V,te=0){return(0,_.e)((ue,ne)=>{ne.add(V.schedule(()=>ue.subscribe(ne),te))})}},8505:(gt,Se,P)=>{P.d(Se,{b:()=>ue});var _=P(576),X=P(4482),V=P(5403),te=P(4671);function ue(ne,de,ge){const ce=(0,_.m)(ne)||de||ge?{next:ne,error:de,complete:ge}:ne;return ce?(0,X.e)((G,W)=>{var Y;null===(Y=ce.subscribe)||void 0===Y||Y.call(ce);let Oe=!0;G.subscribe((0,V.x)(W,ye=>{var Ye;null===(Ye=ce.next)||void 0===Ye||Ye.call(ce,ye),W.next(ye)},()=>{var ye;Oe=!1,null===(ye=ce.complete)||void 0===ye||ye.call(ce),W.complete()},ye=>{var Ye;Oe=!1,null===(Ye=ce.error)||void 0===Ye||Ye.call(ce,ye),W.error(ye)},()=>{var ye,Ye;Oe&&(null===(ye=ce.unsubscribe)||void 0===ye||ye.call(ce)),null===(Ye=ce.finalize)||void 0===Ye||Ye.call(ce)}))}):te.y}},4408:(gt,Se,P)=>{P.d(Se,{o:()=>ue});var _=P(727);class X extends _.w0{constructor(de,ge){super()}schedule(de,ge=0){return this}}const V={setInterval(ne,de,...ge){const{delegate:ce}=V;return ce?.setInterval?ce.setInterval(ne,de,...ge):setInterval(ne,de,...ge)},clearInterval(ne){const{delegate:de}=V;return(de?.clearInterval||clearInterval)(ne)},delegate:void 0};var te=P(8737);class ue extends X{constructor(de,ge){super(de,ge),this.scheduler=de,this.work=ge,this.pending=!1}schedule(de,ge=0){var ce;if(this.closed)return this;this.state=de;const G=this.id,W=this.scheduler;return null!=G&&(this.id=this.recycleAsyncId(W,G,ge)),this.pending=!0,this.delay=ge,this.id=null!==(ce=this.id)&&void 0!==ce?ce:this.requestAsyncId(W,this.id,ge),this}requestAsyncId(de,ge,ce=0){return V.setInterval(de.flush.bind(de,this),ce)}recycleAsyncId(de,ge,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return ge;null!=ge&&V.clearInterval(ge)}execute(de,ge){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(de,ge);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(de,ge){let G,ce=!1;try{this.work(de)}catch(W){ce=!0,G=W||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:de,scheduler:ge}=this,{actions:ce}=ge;this.work=this.state=this.scheduler=null,this.pending=!1,(0,te.P)(ce,this),null!=de&&(this.id=this.recycleAsyncId(ge,de,null)),this.delay=null,super.unsubscribe()}}}},7565:(gt,Se,P)=>{P.d(Se,{v:()=>V});var _=P(6063);class X{constructor(ue,ne=X.now){this.schedulerActionCtor=ue,this.now=ne}schedule(ue,ne=0,de){return new this.schedulerActionCtor(this,ue).schedule(de,ne)}}X.now=_.l.now;class V extends X{constructor(ue,ne=X.now){super(ue,ne),this.actions=[],this._active=!1}flush(ue){const{actions:ne}=this;if(this._active)return void ne.push(ue);let de;this._active=!0;do{if(de=ue.execute(ue.state,ue.delay))break}while(ue=ne.shift());if(this._active=!1,de){for(;ue=ne.shift();)ue.unsubscribe();throw de}}}},4986:(gt,Se,P)=>{P.d(Se,{z:()=>V});var _=P(4408);const V=new(P(7565).v)(_.o)},6063:(gt,Se,P)=>{P.d(Se,{l:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},3410:(gt,Se,P)=>{P.d(Se,{z:()=>_});const _={setTimeout(X,V,...te){const{delegate:ue}=_;return ue?.setTimeout?ue.setTimeout(X,V,...te):setTimeout(X,V,...te)},clearTimeout(X){const{delegate:V}=_;return(V?.clearTimeout||clearTimeout)(X)},delegate:void 0}},2202:(gt,Se,P)=>{P.d(Se,{h:()=>X});const X=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(gt,Se,P)=>{P.d(Se,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(gt,Se,P)=>{P.d(Se,{_6:()=>ne,jO:()=>te,yG:()=>ue});var _=P(576);function V(de){return de[de.length-1]}function te(de){return(0,_.m)(V(de))?de.pop():void 0}function ue(de){return function X(de){return de&&(0,_.m)(de.schedule)}(V(de))?de.pop():void 0}function ne(de,ge){return"number"==typeof V(de)?de.pop():ge}},8737:(gt,Se,P)=>{function _(X,V){if(X){const te=X.indexOf(V);0<=te&&X.splice(te,1)}}P.d(Se,{P:()=>_})},3888:(gt,Se,P)=>{function _(X){const te=X(ue=>{Error.call(ue),ue.stack=(new Error).stack});return te.prototype=Object.create(Error.prototype),te.prototype.constructor=te,te}P.d(Se,{d:()=>_})},2806:(gt,Se,P)=>{P.d(Se,{O:()=>te,x:()=>V});var _=P(2416);let X=null;function V(ue){if(_.v.useDeprecatedSynchronousErrorHandling){const ne=!X;if(ne&&(X={errorThrown:!1,error:null}),ue(),ne){const{errorThrown:de,error:ge}=X;if(X=null,de)throw ge}}else ue()}function te(ue){_.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=ue)}},9672:(gt,Se,P)=>{function _(X,V,te,ue=0,ne=!1){const de=V.schedule(function(){te(),ne?X.add(this.schedule(null,ue)):this.unsubscribe()},ue);if(X.add(de),!ne)return de}P.d(Se,{f:()=>_})},4671:(gt,Se,P)=>{function _(X){return X}P.d(Se,{y:()=>_})},1144:(gt,Se,P)=>{P.d(Se,{z:()=>_});const _=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(gt,Se,P)=>{P.d(Se,{D:()=>X});var _=P(576);function X(V){return Symbol.asyncIterator&&(0,_.m)(V?.[Symbol.asyncIterator])}},576:(gt,Se,P)=>{function _(X){return"function"==typeof X}P.d(Se,{m:()=>_})},3670:(gt,Se,P)=>{P.d(Se,{c:()=>V});var _=P(8822),X=P(576);function V(te){return(0,X.m)(te[_.L])}},6495:(gt,Se,P)=>{P.d(Se,{T:()=>V});var _=P(2202),X=P(576);function V(te){return(0,X.m)(te?.[_.h])}},8239:(gt,Se,P)=>{P.d(Se,{t:()=>X});var _=P(576);function X(V){return(0,_.m)(V?.then)}},3260:(gt,Se,P)=>{P.d(Se,{L:()=>te,Q:()=>V});var _=P(655),X=P(576);function V(ue){return(0,_.FC)(this,arguments,function*(){const de=ue.getReader();try{for(;;){const{value:ge,done:ce}=yield(0,_.qq)(de.read());if(ce)return yield(0,_.qq)(void 0);yield yield(0,_.qq)(ge)}}finally{de.releaseLock()}})}function te(ue){return(0,X.m)(ue?.getReader)}},4482:(gt,Se,P)=>{P.d(Se,{A:()=>X,e:()=>V});var _=P(576);function X(te){return(0,_.m)(te?.lift)}function V(te){return ue=>{if(X(ue))return ue.lift(function(ne){try{return te(ne,this)}catch(de){this.error(de)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(gt,Se,P)=>{function _(){}P.d(Se,{Z:()=>_})},9635:(gt,Se,P)=>{P.d(Se,{U:()=>V,z:()=>X});var _=P(4671);function X(...te){return V(te)}function V(te){return 0===te.length?_.y:1===te.length?te[0]:function(ne){return te.reduce((de,ge)=>ge(de),ne)}}},7849:(gt,Se,P)=>{P.d(Se,{h:()=>V});var _=P(2416),X=P(3410);function V(te){X.z.setTimeout(()=>{const{onUnhandledError:ue}=_.v;if(!ue)throw te;ue(te)})}},4532:(gt,Se,P)=>{function _(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Se,{z:()=>_})},655:(gt,Se,P)=>{function te(re,he){var me={};for(var Me in re)Object.prototype.hasOwnProperty.call(re,Me)&&he.indexOf(Me)<0&&(me[Me]=re[Me]);if(null!=re&&"function"==typeof Object.getOwnPropertySymbols){var Fe=0;for(Me=Object.getOwnPropertySymbols(re);Fe<Me.length;Fe++)he.indexOf(Me[Fe])<0&&Object.prototype.propertyIsEnumerable.call(re,Me[Fe])&&(me[Me[Fe]]=re[Me[Fe]])}return me}function Y(re,he,me,Me){return new(me||(me=Promise))(function(je,et){function it(nn){try{It(Me.next(nn))}catch(Xe){et(Xe)}}function yn(nn){try{It(Me.throw(nn))}catch(Xe){et(Xe)}}function It(nn){nn.done?je(nn.value):function Fe(je){return je instanceof me?je:new me(function(et){et(je)})}(nn.value).then(it,yn)}It((Me=Me.apply(re,he||[])).next())})}function Re(re){return this instanceof Re?(this.v=re,this):new Re(re)}function Ee(re,he,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,Me=me.apply(re,he||[]),je=[];return Fe={},et("next"),et("throw"),et("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe;function et(vt){Me[vt]&&(Fe[vt]=function(Nn){return new Promise(function(bn,Dn){je.push([vt,Nn,bn,Dn])>1||it(vt,Nn)})})}function it(vt,Nn){try{!function yn(vt){vt.value instanceof Re?Promise.resolve(vt.value.v).then(It,nn):Xe(je[0][2],vt)}(Me[vt](Nn))}catch(bn){Xe(je[0][3],bn)}}function It(vt){it("next",vt)}function nn(vt){it("throw",vt)}function Xe(vt,Nn){vt(Nn),je.shift(),je.length&&it(je[0][0],je[0][1])}}function Ge(re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,he=re[Symbol.asyncIterator];return he?he.call(re):(re=function nt(re){var he="function"==typeof Symbol&&Symbol.iterator,me=he&&re[he],Me=0;if(me)return me.call(re);if(re&&"number"==typeof re.length)return{next:function(){return re&&Me>=re.length&&(re=void 0),{value:re&&re[Me++],done:!re}}};throw new TypeError(he?"Object is not iterable.":"Symbol.iterator is not defined.")}(re),me={},Me("next"),Me("throw"),Me("return"),me[Symbol.asyncIterator]=function(){return this},me);function Me(je){me[je]=re[je]&&function(et){return new Promise(function(it,yn){!function Fe(je,et,it,yn){Promise.resolve(yn).then(function(It){je({value:It,done:it})},et)}(it,yn,(et=re[je](et)).done,et.value)})}}}P.d(Se,{FC:()=>Ee,KL:()=>Ge,_T:()=>te,mG:()=>Y,qq:()=>Re})},4650:(gt,Se,P)=>{P.d(Se,{$8M:()=>gl,$WT:()=>Zn,$Z:()=>BE,AFp:()=>rw,AaK:()=>ge,CRH:()=>Zv,CZH:()=>Dm,CqO:()=>mS,D6c:()=>Au,EJc:()=>HA,F4k:()=>nd,FYo:()=>EE,FiY:()=>Xi,G48:()=>oi,GfV:()=>IE,JOm:()=>Ii,LFG:()=>He,Lbi:()=>iw,Lck:()=>Ai,MMx:()=>nm,NdJ:()=>uf,OlP:()=>xn,P3R:()=>fy,PXZ:()=>Uc,Q6J:()=>xg,QGY:()=>af,Qsj:()=>wD,R0b:()=>$i,RDi:()=>gc,Rgc:()=>Tf,SBq:()=>Aa,Sil:()=>iT,Suo:()=>Kv,TTD:()=>la,TgZ:()=>Qy,X6Q:()=>yT,XFs:()=>mt,Xpm:()=>cr,Xts:()=>yu,Y36:()=>ql,YKP:()=>MC,YNc:()=>Yy,Yjl:()=>Ve,Yz7:()=>Xe,Z0I:()=>Dn,ZZ4:()=>Cw,_UZ:()=>sf,_Vd:()=>wu,_c5:()=>DT,_uU:()=>jI,aQg:()=>$c,c2e:()=>sw,cJS:()=>Nn,cg1:()=>hv,dDg:()=>Pm,dqk:()=>Rt,eFA:()=>Gf,eJc:()=>gi,eoX:()=>cT,f3M:()=>ot,g9A:()=>Am,h0i:()=>ad,hGG:()=>ST,iGM:()=>WC,ifc:()=>B,ip1:()=>nT,jDz:()=>bv,kL8:()=>rC,lG2:()=>_e,lqb:()=>vc,lri:()=>jf,n5z:()=>Jd,oAB:()=>go,q4F:()=>Iy,qLn:()=>Bh,qZA:()=>Xy,rWj:()=>hw,sBO:()=>QA,s_b:()=>$r,soG:()=>Rm,tb:()=>fw,tp0:()=>tc,uIk:()=>qy,vHH:()=>pe,vpe:()=>uo,wAp:()=>Ut,xp6:()=>ME,z2F:()=>zf,zSh:()=>_y,zs3:()=>Gl});var _=P(7579),X=P(727),V=P(9751),te=P(6451),ue=P(3099);function ne(s){for(let o in s)if(s[o]===ne)return o;throw Error("Could not find renamed property on target object.")}function ge(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ge).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function ce(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const G=ne({__forward_ref__:ne});function W(s){return s.__forward_ref__=W,s.toString=function(){return ge(this())},s}function Y(s){return Oe(s)?s():s}function Oe(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===W}function ye(s){return s&&!!s.\u0275providers}const nt="https://g.co/ng/security#xss";class pe extends Error{constructor(o,u){super(be(o,u)),this.code=o}}function be(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}function Ne(s){return"string"==typeof s?s:null==s?"":String(s)}function Ge(s,o){throw new pe(-201,!1)}function et(s,o){null==s&&function it(s,o,u,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${u} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function Xe(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Nn(s){return{providers:s.providers||[],imports:s.imports||[]}}function bn(s){return dn(s,Kn)||dn(s,In)}function Dn(s){return null!==bn(s)}function dn(s,o){return s.hasOwnProperty(o)?s[o]:null}function Yr(s){return s&&(s.hasOwnProperty(ui)||s.hasOwnProperty(Pn))?s[ui]:null}const Kn=ne({\u0275prov:ne}),ui=ne({\u0275inj:ne}),In=ne({ngInjectableDef:ne}),Pn=ne({ngInjectorDef:ne});var mt=(()=>((mt=mt||{})[mt.Default=0]="Default",mt[mt.Host=1]="Host",mt[mt.Self=2]="Self",mt[mt.SkipSelf=4]="SkipSelf",mt[mt.Optional=8]="Optional",mt))();let Qr;function mn(s){const o=Qr;return Qr=s,o}function ur(s,o,u){const l=bn(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:u&mt.Optional?null:void 0!==o?o:void Ge(ge(s))}const Rt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),en={},$n="__NG_DI_FLAG__",Jn="ngTempTokenPath",er="ngTokenPath",zi=/\n/gm,cn="\u0275",kr="__source";let Yt;function mr(s){const o=Yt;return Yt=s,o}function ci(s,o=mt.Default){if(void 0===Yt)throw new pe(-203,!1);return null===Yt?ur(s,void 0,o):Yt.get(s,o&mt.Optional?null:void 0,o)}function He(s,o=mt.Default){return(function Xr(){return Qr}()||ci)(Y(s),o)}function ot(s,o=mt.Default){return He(s,bt(o))}function bt(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Lt(s){const o=[];for(let u=0;u<s.length;u++){const l=Y(s[u]);if(Array.isArray(l)){if(0===l.length)throw new pe(900,!1);let d,g=mt.Default;for(let v=0;v<l.length;v++){const I=l[v],T=jn(I);"number"==typeof T?-1===T?d=I.token:g|=T:d=I}o.push(He(d,g))}else o.push(He(l))}return o}function Bt(s,o){return s[$n]=o,s.prototype[$n]=o,s}function jn(s){return s[$n]}function L(s){return{toString:s}.toString()}var q=(()=>((q=q||{})[q.OnPush=0]="OnPush",q[q.Default=1]="Default",q))(),B=(()=>{return(s=B||(B={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",B;var s})();const le={},Te=[],ct=ne({\u0275cmp:ne}),Pt=ne({\u0275dir:ne}),Ot=ne({\u0275pipe:ne}),tn=ne({\u0275mod:ne}),Ct=ne({\u0275fac:ne}),Sn=ne({__NG_ELEMENT_ID__:ne});let Cr=0;function cr(s){return L(()=>{const o=Wi(s),u={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===q.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||B.Emulated,id:"c"+Cr++,styles:s.styles||Te,_:null,schemas:s.schemas||null,tView:null};Lr(u);const l=s.dependencies;return u.directiveDefs=as(l,!1),u.pipeDefs=as(l,!0),u})}function ea(s){return Ke(s)||Qt(s)}function po(s){return null!==s}function go(s){return L(()=>({type:s.type,bootstrap:s.bootstrap||Te,declarations:s.declarations||Te,imports:s.imports||Te,exports:s.exports||Te,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Z(s,o){if(null==s)return le;const u={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),u[d]=l,o&&(o[d]=g)}return u}function _e(s){return L(()=>{const o=Wi(s);return Lr(o),o})}function Ve(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Ke(s){return s[ct]||null}function Qt(s){return s[Pt]||null}function jt(s){return s[Ot]||null}function Zn(s){const o=Ke(s)||Qt(s)||jt(s);return null!==o&&o.standalone}function hn(s,o){const u=s[tn]||null;if(!u&&!0===o)throw new Error(`Type ${ge(s)} does not have '\u0275mod' property.`);return u}function Wi(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||Te,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Z(s.inputs,o),outputs:Z(s.outputs)}}function Lr(s){s.features?.forEach(o=>o(s))}function as(s,o){if(!s)return null;const u=o?jt:ea;return()=>("function"==typeof s?s():s).map(l=>u(l)).filter(po)}const mi=0,ut=1,Ht=2,On=3,Jr=4,ki=5,tr=6,Gs=7,kn=8,na=9,bs=10,qt=11,us=12,zs=13,mo=14,_o=15,Tr=16,Ds=17,Ss=18,ei=19,_i=20,Uu=21,ln=22,ra=1,$a=2,yo=7,vo=8,ia=9,Fr=10;function yi(s){return Array.isArray(s)&&"object"==typeof s[ra]}function vi(s){return Array.isArray(s)&&!0===s[ra]}function cs(s){return 0!=(4&s.flags)}function sa(s){return s.componentOffset>-1}function ja(s){return 1==(1&s.flags)}function Gr(s){return!!s.template}function Sp(s){return 0!=(256&s[Ht])}function Rs(s,o){return s.hasOwnProperty(Ct)?s[Ct]:null}class Ap{constructor(o,u,l){this.previousValue=o,this.currentValue=u,this.firstChange=l}isFirstChange(){return this.firstChange}}function la(){return Zi}function Zi(s){return s.type.prototype.ngOnChanges&&(s.setInput=Yi),za}function za(){const s=il(this),o=s?.current;if(o){const u=s.previous;if(u===le)s.previous=o;else for(let l in o)u[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Yi(s,o,u,l){const d=this.declaredInputs[u],g=il(s)||function ju(s,o){return s[$u]=o}(s,{previous:le,current:null}),v=g.current||(g.current={}),I=g.previous,T=I[d];v[d]=new Ap(T&&T.currentValue,o,I===le),s[l]=o}la.ngInherit=!0;const $u="__ngSimpleChanges__";function il(s){return s[$u]||null}const ti=function(s,o,u){};function z(s){for(;Array.isArray(s);)s=s[mi];return s}function Be(s,o){return z(o[s.index])}function Vn(s,o){return s.data[o]}function rn(s,o){const u=o[s];return yi(u)?u:u[mi]}function Gt(s){return 64==(64&s[Ht])}function br(s,o){return null==o?null:s[o]}function da(s){s[Ss]=0}function Ws(s,o){s[ki]+=o;let u=s,l=s[On];for(;null!==l&&(1===o&&1===u[ki]||-1===o&&0===u[ki]);)l[ki]+=o,u=l,l=l[On]}const Ft={lFrame:O_(null),bindingsEnabled:!0};function A_(){return Ft.bindingsEnabled}function Pe(){return Ft.lFrame.lView}function fn(){return Ft.lFrame.tView}function Ur(){let s=R_();for(;null!==s&&64===s.type;)s=s.parent;return s}function R_(){return Ft.lFrame.currentTNode}function qs(s,o){const u=Ft.lFrame;u.currentTNode=s,u.isParent=o}function ol(){return Ft.lFrame.isParent}function fa(){return Ft.lFrame.bindingIndex++}function Np(s,o){const u=Ft.lFrame;u.bindingIndex=u.bindingRootIndex=s,Ks(o)}function Ks(s){Ft.lFrame.currentDirectiveIndex=s}function N_(){return Ft.lFrame.currentQueryIndex}function Pp(s){Ft.lFrame.currentQueryIndex=s}function G0(s){const o=s[ut];return 2===o.type?o.declTNode:1===o.type?s[tr]:null}function P_(s,o,u){if(u&mt.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||u&mt.Host||(d=G0(g),null===d||(g=g[_o],10&d.type))););if(null===d)return!1;o=d,s=g}const l=Ft.lFrame=z0();return l.currentTNode=o,l.lView=s,!0}function Op(s){const o=z0(),u=s[ut];Ft.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function z0(){const s=Ft.lFrame,o=null===s?null:s.child;return null===o?O_(s):o}function O_(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function k_(){const s=Ft.lFrame;return Ft.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const W0=k_;function kp(){const s=k_();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function wi(){return Ft.lFrame.selectedIndex}function Co(s){Ft.lFrame.selectedIndex=s}function Rn(){const s=Ft.lFrame;return Vn(s.tView,s.selectedIndex)}function Hu(s,o){for(let u=o.directiveStart,l=o.directiveEnd;u<l;u++){const g=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:T,ngAfterViewChecked:S,ngOnDestroy:x}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-u,v),I&&((s.contentHooks||(s.contentHooks=[])).push(u,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,I)),T&&(s.viewHooks||(s.viewHooks=[])).push(-u,T),S&&((s.viewHooks||(s.viewHooks=[])).push(u,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,S)),null!=x&&(s.destroyHooks||(s.destroyHooks=[])).push(u,x)}}function Gd(s,o,u){Ka(s,o,3,u)}function pa(s,o,u,l){(3&s[Ht])===u&&Ka(s,o,u,l)}function qa(s,o){let u=s[Ht];(3&u)===o&&(u&=2047,u+=1,s[Ht]=u)}function Ka(s,o,u,l){const g=l??-1,v=o.length-1;let I=0;for(let T=void 0!==l?65535&s[Ss]:0;T<v;T++)if("number"==typeof o[T+1]){if(I=o[T],null!=l&&I>=l)break}else o[T]<0&&(s[Ss]+=65536),(I<g||-1==g)&&(L_(s,u,o,T),s[Ss]=(4294901760&s[Ss])+T+2),T++}function L_(s,o,u,l){const d=u[l]<0,g=u[l+1],I=s[d?-u[l]:u[l]];if(d){if(s[Ht]>>11<s[Ss]>>16&&(3&s[Ht])===o){s[Ht]+=2048,ti(4,I,g);try{g.call(I)}finally{ti(5,I,g)}}}else{ti(4,I,g);try{g.call(I)}finally{ti(5,I,g)}}}const Zs=-1;class cl{constructor(o,u,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=l}}function ll(s,o,u){let l=0;for(;l<u.length;){const d=u[l];if("number"==typeof d){if(0!==d)break;l++;const g=u[l++],v=u[l++],I=u[l++];s.setAttribute(o,v,I,g)}else{const g=d,v=u[++l];dl(g)?s.setProperty(o,g,v):s.setAttribute(o,g,v),l++}}return l}function bo(s){return 3===s||4===s||6===s}function dl(s){return 64===s.charCodeAt(0)}function Ys(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?u=d:0===u||Wd(s,u,d,null,-1===u||2===u?o[++l]:null)}}return s}function Wd(s,o,u,l,d){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const I=s[g++];if("number"==typeof I){if(I===o){v=-1;break}if(I>o){v=g-1;break}}}for(;g<s.length;){const I=s[g];if("number"==typeof I)break;if(I===u){if(null===l)return void(null!==d&&(s[g+1]=d));if(l===s[g+1])return void(s[g+2]=d)}g++,null!==l&&g++,null!==d&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,u),null!==l&&s.splice(g++,0,l),null!==d&&s.splice(g++,0,d)}function qd(s){return s!==Zs}function zu(s){return 32767&s}function ga(s,o){let u=function U_(s){return s>>16}(s),l=o;for(;u>0;)l=l[_o],u--;return l}let Wu=!0;function Do(s){const o=Wu;return Wu=s,o}const Zd=255,qu=5;let hl=0;const Ei={};function ma(s,o){const u=Up(s,o);if(-1!==u)return u;const l=o[ut];l.firstCreatePass&&(s.injectorIndex=o.length,Ku(l.data,s),Ku(o,null),Ku(l.blueprint,null));const d=Zu(s,o),g=s.injectorIndex;if(qd(d)){const v=zu(d),I=ga(d,o),T=I[ut].data;for(let S=0;S<8;S++)o[g+S]=I[v+S]|T[v+S]}return o[g+8]=d,g}function Ku(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Up(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Zu(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,l=null,d=o;for(;null!==d;){if(l=eh(d),null===l)return Zs;if(u++,d=d[_o],-1!==l.injectorIndex)return l.injectorIndex|u<<16}return Zs}function Yd(s,o,u){!function V_(s,o,u){let l;"string"==typeof u?l=u.charCodeAt(0)||0:u.hasOwnProperty(Sn)&&(l=u[Sn]),null==l&&(l=u[Sn]=hl++);const d=l&Zd;o.data[s+(d>>qu)]|=1<<d}(s,o,u)}function Qd(s,o,u){if(u&mt.Optional||void 0!==s)return s;Ge()}function Vp(s,o,u,l){if(u&mt.Optional&&void 0===l&&(l=null),!(u&(mt.Self|mt.Host))){const d=s[na],g=mn(void 0);try{return d?d.get(o,l,u&mt.Optional):ur(o,l,u&mt.Optional)}finally{mn(g)}}return Qd(l,0,u)}function Bp(s,o,u,l=mt.Default,d){if(null!==s){if(1024&o[Ht]){const v=function jp(s,o,u,l,d){let g=s,v=o;for(;null!==g&&null!==v&&1024&v[Ht]&&!(256&v[Ht]);){const I=fl(g,v,u,l|mt.Self,Ei);if(I!==Ei)return I;let T=g.parent;if(!T){const S=v[Uu];if(S){const x=S.get(u,Ei,l);if(x!==Ei)return x}T=eh(v),v=v[_o]}g=T}return d}(s,o,u,l,Ei);if(v!==Ei)return v}const g=fl(s,o,u,l,Ei);if(g!==Ei)return g}return Vp(o,u,l,d)}function fl(s,o,u,l,d){const g=function $p(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Sn)?s[Sn]:void 0;return"number"==typeof o?o>=0?o&Zd:$_:o}(u);if("function"==typeof g){if(!P_(o,s,l))return l&mt.Host?Qd(d,0,l):Vp(o,u,l,d);try{const v=g(l);if(null!=v||l&mt.Optional)return v;Ge()}finally{W0()}}else if("number"==typeof g){let v=null,I=Up(s,o),T=Zs,S=l&mt.Host?o[Tr][tr]:null;for((-1===I||l&mt.SkipSelf)&&(T=-1===I?Zu(s,o):o[I+8],T!==Zs&&Yu(l,!1)?(v=o[ut],I=zu(T),o=ga(T,o)):I=-1);-1!==I;){const x=o[ut];if(B_(g,I,x.data)){const U=Xd(I,o,u,v,l,S);if(U!==Ei)return U}T=o[I+8],T!==Zs&&Yu(l,o[ut].data[I+8]===S)&&B_(g,I,o)?(v=x,I=zu(T),o=ga(T,o)):I=-1}}return d}function Xd(s,o,u,l,d,g){const v=o[ut],I=v.data[s+8],x=pl(I,v,u,null==l?sa(I)&&Wu:l!=v&&0!=(3&I.type),d&mt.Host&&g===I);return null!==x?_a(o,v,x,I):Ei}function pl(s,o,u,l,d){const g=s.providerIndexes,v=o.data,I=1048575&g,T=s.directiveStart,x=g>>20,K=d?I+x:s.directiveEnd;for(let ee=l?I:I+x;ee<K;ee++){const Ie=v[ee];if(ee<T&&u===Ie||ee>=T&&Ie.type===u)return ee}if(d){const ee=v[T];if(ee&&Gr(ee)&&ee.type===u)return T}return null}function _a(s,o,u,l){let d=s[u];const g=o.data;if(function Gu(s){return s instanceof cl}(d)){const v=d;v.resolving&&function Re(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new pe(-200,`Circular dependency in DI detected for ${s}${u}`)}(function Ue(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ne(s)}(g[u]));const I=Do(v.canSeeViewProviders);v.resolving=!0;const T=v.injectImpl?mn(v.injectImpl):null;P_(s,l,mt.Default);try{d=s[u]=v.factory(void 0,g,s,l),o.firstCreatePass&&u>=l.directiveStart&&function Fp(s,o,u){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(l){const v=Zi(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),g&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,g),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,g))}(u,g[u],o)}finally{null!==T&&mn(T),Do(I),v.resolving=!1,W0()}}return d}function B_(s,o,u){return!!(u[o+(s>>qu)]&1<<s)}function Yu(s,o){return!(s&mt.Self||s&mt.Host&&o)}class Ya{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,l){return Bp(this._tNode,this._lView,o,bt(l),u)}}function $_(){return new Ya(Ur(),Pe())}function Jd(s){return L(()=>{const o=s.prototype.constructor,u=o[Ct]||Qu(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const g=d[Ct]||Qu(d);if(g&&g!==u)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function Qu(s){return Oe(s)?()=>{const o=Qu(Y(s));return o&&o()}:Rs(s)}function eh(s){const o=s[ut],u=o.type;return 2===u?o.declTNode:1===u?s[tr]:null}function gl(s){return function Za(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const l=u.length;let d=0;for(;d<l;){const g=u[d];if(bo(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<l&&"string"==typeof u[d];)d++;else{if(g===o)return u[d+1];d+=2}}}return null}(Ur(),s)}const Xu="__parameters__";function So(s,o,u){return L(()=>{const l=function th(s){return function(...u){if(s){const l=s(...u);for(const d in l)this[d]=l[d]}}}(o);function d(...g){if(this instanceof d)return l.apply(this,g),this;const v=new d(...g);return I.annotation=v,I;function I(T,S,x){const U=T.hasOwnProperty(Xu)?T[Xu]:Object.defineProperty(T,Xu,{value:[]})[Xu];for(;U.length<=x;)U.push(null);return(U[x]=U[x]||[]).push(v),T}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class xn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Xe({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function va(s,o){s.forEach(u=>Array.isArray(u)?va(u,o):o(u))}function W_(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function ih(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}const Xi=Bt(So("Optional"),8),tc=Bt(So("SkipSelf"),4);var Ii=(()=>((Ii=Ii||{})[Ii.Important=1]="Important",Ii[Ii.DashCase=2]="DashCase",Ii))();const Ji=new Map;let Cl=0;const bl="__ngContext__";function ni(s,o){yi(o)?(s[bl]=o[_i],function mh(s){Ji.set(s[_i],s)}(o)):s[bl]=o}let Ca;function ac(s,o){return Ca(s,o)}function Po(s){const o=s[On];return vi(o)?o[On]:o}function au(s){return xl(s[zs])}function wh(s){return xl(s[Jr])}function xl(s){for(;null!==s&&!vi(s);)s=s[Jr];return s}function Xs(s,o,u,l,d){if(null!=l){let g,v=!1;vi(l)?g=l:yi(l)&&(v=!0,l=l[mi]);const I=z(l);0===s&&null!==u?null==d?eg(o,u,I):es(o,u,I,d||null,!0):1===s&&null!==u?es(o,u,I,d||null,!0):2===s?function du(s,o,u){const l=fc(s,o);l&&function dc(s,o,u,l){s.removeChild(o,u,l)}(s,l,o,u)}(o,I,v):3===s&&o.destroyNode(I),null!=g&&function fs(s,o,u,l,d){const g=u[yo];g!==z(u)&&Xs(o,s,l,g,d);for(let I=Fr;I<u.length;I++){const T=u[I];Oo(T[ut],T,s,o,l,g)}}(o,s,g,u,d)}}function Ih(s,o,u){return s.createElement(o,u)}function Jp(s,o){const u=s[ia],l=u.indexOf(o),d=o[On];512&o[Ht]&&(o[Ht]&=-513,Ws(d,-1)),u.splice(l,1)}function cc(s,o){if(s.length<=Fr)return;const u=Fr+o,l=s[u];if(l){const d=l[Ds];null!==d&&d!==s&&Jp(d,l),o>0&&(s[u-1][Jr]=l[Jr]);const g=ih(s,Fr+o);!function ny(s,o){Oo(s,o,o[qt],2,null,null),o[mi]=null,o[tr]=null}(l[ut],l);const v=g[ei];null!==v&&v.detachView(g[ut]),l[On]=null,l[Jr]=null,l[Ht]&=-65}return l}function lc(s,o){if(!(128&o[Ht])){const u=o[qt];u.destroyNode&&Oo(s,o,u,3,null,null),function ry(s){let o=s[zs];if(!o)return Ol(s[ut],s);for(;o;){let u=null;if(yi(o))u=o[zs];else{const l=o[Fr];l&&(u=l)}if(!u){for(;o&&!o[Jr]&&o!==s;)yi(o)&&Ol(o[ut],o),o=o[On];null===o&&(o=s),yi(o)&&Ol(o[ut],o),u=o&&o[Jr]}o=u}}(o)}}function Ol(s,o){if(!(128&o[Ht])){o[Ht]&=-65,o[Ht]|=128,function Th(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let l=0;l<u.length;l+=2){const d=o[u[l]];if(!(d instanceof cl)){const g=u[l+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const I=d[g[v]],T=g[v+1];ti(4,I,T);try{T.call(I)}finally{ti(5,I,T)}}else{ti(4,d,g);try{g.call(d)}finally{ti(5,d,g)}}}}}(s,o),function Ta(s,o){const u=s.cleanup,l=o[Gs];let d=-1;if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const v=u[g+3];v>=0?l[d=v]():l[d=-v].unsubscribe(),g+=2}else{const v=l[d=u[g+1]];u[g].call(v)}if(null!==l){for(let g=d+1;g<l.length;g++)(0,l[g])();o[Gs]=null}}(s,o),1===o[ut].type&&o[qt].destroy();const u=o[Ds];if(null!==u&&vi(o[On])){u!==o[On]&&Jp(u,o);const l=o[ei];null!==l&&l.detachView(s)}!function Ar(s){Ji.delete(s[_i])}(o)}}function sy(s,o,u){return function bh(s,o,u){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return u[mi];{const{componentOffset:d}=l;if(d>-1){const{encapsulation:g}=s.data[l.directiveStart+d];if(g===B.None||g===B.Emulated)return null}return Be(l,u)}}(s,o.parent,u)}function es(s,o,u,l,d){s.insertBefore(o,u,l,d)}function eg(s,o,u){s.appendChild(o,u)}function ba(s,o,u,l,d){null!==l?es(s,o,u,l,d):eg(s,o,u)}function fc(s,o){return s.parentNode(o)}let Fl,ps,mc,Ll=function Js(s,o,u){return 40&s.type?Be(s,u):null};function cu(s,o,u,l){const d=sy(s,l,o),g=o[qt],I=function kl(s,o,u){return Ll(s,o,u)}(l.parent||o[tr],l,o);if(null!=d)if(Array.isArray(u))for(let T=0;T<u.length;T++)ba(g,d,u[T],I,!1);else ba(g,d,u,I,!1);void 0!==Fl&&Fl(g,l,o,u,d)}function lu(s,o){if(null!==o){const u=o.type;if(3&u)return Be(o,s);if(4&u)return Da(-1,s[o.index]);if(8&u){const l=o.child;if(null!==l)return lu(s,l);{const d=s[o.index];return vi(d)?Da(-1,d):z(d)}}if(32&u)return ac(o,s)()||z(s[o.index]);{const l=Rr(s,o);return null!==l?Array.isArray(l)?l[0]:lu(Po(s[Tr]),l):lu(s,o.next)}}return null}function Rr(s,o){return null!==o?s[Tr][tr].projection[o.projection]:null}function Da(s,o){const u=Fr+s+1;if(u<o.length){const l=o[u],d=l[ut].firstChild;if(null!==d)return lu(l,d)}return o[yo]}function Sh(s,o,u,l,d,g,v){for(;null!=u;){const I=l[u.index],T=u.type;if(v&&0===o&&(I&&ni(z(I),l),u.flags|=2),32!=(32&u.flags))if(8&T)Sh(s,o,u.child,l,d,g,!1),Xs(o,s,d,I,g);else if(32&T){const S=ac(u,l);let x;for(;x=S();)Xs(o,s,d,x,g);Xs(o,s,d,I,g)}else 16&T?hu(s,o,l,u,d,g):Xs(o,s,d,I,g);u=v?u.projectionNext:u.next}}function Oo(s,o,u,l,d,g){Sh(u,l,s.firstChild,o,d,g,!1)}function hu(s,o,u,l,d,g){const v=u[Tr],T=v[tr].projection[l.projection];if(Array.isArray(T))for(let S=0;S<T.length;S++)Xs(o,s,d,T[S],g);else Sh(s,o,T,v[On],d,g,!0)}function fu(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function pc(s,o,u){const{mergedAttrs:l,classes:d,styles:g}=u;null!==l&&ll(s,o,l),null!==d&&fu(s,o,d),null!==g&&function fi(s,o,u){s.setAttribute(o,"style",u)}(s,o,g)}function gc(s){ps=s}function ig(s){return function Vl(){if(void 0===mc&&(mc=null,Rt.trustedTypes))try{mc=Rt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return mc}()?.createScriptURL(s)||s}class sg{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${nt})`}}function b(s){return s instanceof sg?s.changingThisBreaksApplicationSecurity:s}function M(s,o){const u=function Q(s){return s instanceof sg&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${nt})`)}return u===o}const yc=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Br=(()=>((Br=Br||{})[Br.NONE=0]="NONE",Br[Br.HTML=1]="HTML",Br[Br.STYLE=2]="STYLE",Br[Br.SCRIPT=3]="SCRIPT",Br[Br.URL=4]="URL",Br[Br.RESOURCE_URL=5]="RESOURCE_URL",Br))();function lg(s){const o=Fh();return o?o.sanitize(Br.URL,s)||"":M(s,"URL")?b(s):function mu(s){return(s=String(s)).match(yc)?s:"unsafe:"+s}(Ne(s))}function ms(s){const o=Fh();if(o)return ig(o.sanitize(Br.RESOURCE_URL,s)||"");if(M(s,"ResourceURL"))return ig(b(s));throw new pe(904,!1)}function fy(s,o,u){return function fD(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?ms:lg}(o,u)(s)}function Fh(){const s=Pe();return s&&s[us]}const yu=new xn("ENVIRONMENT_INITIALIZER"),$l=new xn("INJECTOR",-1),uE=new xn("INJECTOR_DEF_TYPES");class cE{get(o,u=en){if(u===en){const l=new Error(`NullInjectorError: No provider for ${ge(o)}!`);throw l.name="NullInjectorError",l}return u}}function Uh(...s){return{\u0275providers:lE(0,s),\u0275fromNgModule:!0}}function lE(s,...o){const u=[],l=new Set;let d;return va(o,g=>{const v=g;gy(v,u,[],l)&&(d||(d=[]),d.push(v))}),void 0!==d&&dE(d,u),u}function dE(s,o){for(let u=0;u<s.length;u++){const{providers:d}=s[u];my(d,g=>{o.push(g)})}}function gy(s,o,u,l){if(!(s=Y(s)))return!1;let d=null,g=Yr(s);const v=!g&&Ke(s);if(g||v){if(v&&!v.standalone)return!1;d=s}else{const T=s.ngModule;if(g=Yr(T),!g)return!1;d=T}const I=l.has(d);if(v){if(I)return!1;if(l.add(d),v.dependencies){const T="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const S of T)gy(S,o,u,l)}}else{if(!g)return!1;{if(null!=g.imports&&!I){let S;l.add(d);try{va(g.imports,x=>{gy(x,o,u,l)&&(S||(S=[]),S.push(x))})}finally{}void 0!==S&&dE(S,o)}if(!I){const S=Rs(d)||(()=>new d);o.push({provide:d,useFactory:S,deps:Te},{provide:uE,useValue:d,multi:!0},{provide:yu,useValue:()=>He(d),multi:!0})}const T=g.providers;null==T||I||my(T,x=>{o.push(x)})}}return d!==s&&void 0!==s.providers}function my(s,o){for(let u of s)ye(u)&&(u=u.\u0275providers),Array.isArray(u)?my(u,o):o(u)}const pD=ne({provide:String,useValue:ne});function hE(s){return null!==s&&"object"==typeof s&&pD in s}function ko(s){return"function"==typeof s}const _y=new xn("Set Injector scope."),fg={},gD={};let yy;function pg(){return void 0===yy&&(yy=new cE),yy}class vc{}class pE extends vc{get destroyed(){return this._destroyed}constructor(o,u,l,d){super(),this.parent=u,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ey(o,v=>this.processProvider(v)),this.records.set($l,vu(void 0,this)),d.has("environment")&&this.records.set(vc,vu(void 0,this));const g=this.records.get(_y);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(uE.multi,Te,mt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=mr(this),l=mn(void 0);try{return o()}finally{mr(u),mn(l)}}get(o,u=en,l=mt.Default){this.assertNotDestroyed(),l=bt(l);const d=mr(this),g=mn(void 0);try{if(!(l&mt.SkipSelf)){let I=this.records.get(o);if(void 0===I){const T=function gg(s){return"function"==typeof s||"object"==typeof s&&s instanceof xn}(o)&&bn(o);I=T&&this.injectableDefInScope(T)?vu(vy(o),fg):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(l&mt.Self?pg():this.parent).get(o,u=l&mt.Optional&&u===en?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[Jn]=v[Jn]||[]).unshift(ge(o)),d)throw v;return function H(s,o,u,l){const d=s[Jn];throw o[kr]&&d.unshift(o[kr]),s.message=function A(s,o,u,l=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==cn?s.slice(2):s;let d=ge(o);if(Array.isArray(o))d=o.map(ge).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let I=o[v];g.push(v+":"+("string"==typeof I?JSON.stringify(I):ge(I)))}d=`{${g.join(", ")}}`}return`${u}${l?"("+l+")":""}[${d}]: ${s.replace(zi,"\n  ")}`}("\n"+s.message,d,u,l),s[er]=d,s[Jn]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{mn(g),mr(d)}}resolveInjectorInitializers(){const o=mr(this),u=mn(void 0);try{const l=this.get(yu.multi,Te,mt.Self);for(const d of l)d()}finally{mr(o),mn(u)}}toString(){const o=[],u=this.records;for(const l of u.keys())o.push(ge(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new pe(205,!1)}processProvider(o){let u=ko(o=Y(o))?o:Y(o&&o.provide);const l=function gE(s){return hE(s)?vu(void 0,s.useValue):vu(function mE(s,o,u){let l;if(ko(s)){const d=Y(s);return Rs(d)||vy(d)}if(hE(s))l=()=>Y(s.useValue);else if(function hg(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...Lt(s.deps||[]));else if(function fE(s){return!(!s||!s.useExisting)}(s))l=()=>He(Y(s.useExisting));else{const d=Y(s&&(s.useClass||s.provide));if(!function _E(s){return!!s.deps}(s))return Rs(d)||vy(d);l=()=>new d(...Lt(s.deps))}return l}(s),fg)}(o);if(ko(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=vu(void 0,fg,!0),d.factory=()=>Lt(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,l)}hydrate(o,u){return u.value===fg&&(u.value=gD,u.value=u.factory()),"object"==typeof u.value&&u.value&&function wy(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=Y(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function vy(s){const o=bn(s),u=null!==o?o.factory:Rs(s);if(null!==u)return u;if(s instanceof xn)throw new pe(204,!1);if(s instanceof Function)return function mD(s){const o=s.length;if(o>0)throw function Ja(s,o){const u=[];for(let l=0;l<s;l++)u.push(o);return u}(o,"?"),new pe(204,!1);const u=function ar(s){const o=s&&(s[Kn]||s[In]);return o?(function Or(s){if(s.hasOwnProperty("name"))return s.name;(""+s).match(/^function\s*([^\s(]+)/)}(s),o):null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new pe(204,!1)}function vu(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function Ey(s,o){for(const u of s)Array.isArray(u)?Ey(u,o):u&&ye(u)?Ey(u.\u0275providers,o):o(u)}class _D{}class yE{}class vE{resolveComponentFactory(o){throw function yD(s){const o=Error(`No component factory found for ${ge(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let wu=(()=>{class s{}return s.NULL=new vE,s})();function mg(){return wc(Ur(),Pe())}function wc(s,o){return new Aa(Be(s,o))}let Aa=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=mg,s})();function wE(s){return s instanceof Aa?s.nativeElement:s}class EE{}let wD=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function ED(){const s=Pe(),u=rn(Ur().index,s);return(yi(u)?u:s)[qt]}(),s})(),ID=(()=>{class s{}return s.\u0275prov=Xe({token:s,providedIn:"root",factory:()=>null}),s})();class IE{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Iy=new IE("15.2.3"),Cy={},Ty="ngOriginalError";function by(s){return s[Ty]}class Bh{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&by(o);for(;u&&by(u);)u=by(u);return u||null}}function Lo(s){return s instanceof Function?s():s}function Dy(s,o,u){let l=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===l||s.charCodeAt(d+g)<=32)return d}u=d+1}}const _g="ng-template";function RD(s,o,u){let l=0;for(;l<s.length;){let d=s[l++];if(u&&"class"===d){if(d=s[l],-1!==Dy(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function Sy(s){return 4===s.type&&s.value!==_g}function Hl(s,o,u){return o===(4!==s.type||u?s.value:_g)}function Ay(s,o,u){let l=4;const d=s.attrs||[],g=function AE(s){for(let o=0;o<s.length;o++)if(bo(s[o]))return o;return s.length}(d);let v=!1;for(let I=0;I<o.length;I++){const T=o[I];if("number"!=typeof T){if(!v)if(4&l){if(l=2|1&l,""!==T&&!Hl(s,T,u)||""===T&&1===o.length){if(eo(l))return!1;v=!0}}else{const S=8&l?T:o[++I];if(8&l&&null!==s.attrs){if(!RD(s.attrs,S,u)){if(eo(l))return!1;v=!0}continue}const U=SE(8&l?"class":T,d,Sy(s),u);if(-1===U){if(eo(l))return!1;v=!0;continue}if(""!==S){let K;K=U>g?"":d[U+1].toLowerCase();const ee=8&l?K:null;if(ee&&-1!==Dy(ee,S,0)||2&l&&S!==K){if(eo(l))return!1;v=!0}}}}else{if(!v&&!eo(l)&&!eo(T))return!1;if(v&&eo(T))continue;v=!1,l=T|1&l}}return eo(l)||v}function eo(s){return 0==(1&s)}function SE(s,o,u,l){if(null===o)return-1;let d=0;if(l||!u){let g=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)g=!0;else{if(1===v||2===v){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=g?1:2}return-1}return function RE(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const l=s[u];if("number"==typeof l)return-1;if(l===o)return u;u++}return-1}(o,s)}function $h(s,o,u=!1){for(let l=0;l<o.length;l++)if(Ay(s,o[l],u))return!0;return!1}function xE(s,o){return s?":not("+o.trim()+")":o}function MD(s){let o=s[0],u=1,l=2,d="",g=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&l){const I=s[++u];d+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!eo(v)&&(o+=xE(g,d),d=""),l=v,g=g||!eo(l);u++}return""!==d&&(o+=xE(g,d)),o}const Wt={};function ME(s){NE(fn(),Pe(),wi()+s,!1)}function NE(s,o,u,l){if(!l)if(3==(3&o[Ht])){const g=s.preOrderCheckHooks;null!==g&&Gd(o,g,u)}else{const g=s.preOrderHooks;null!==g&&pa(o,g,0,u)}Co(u)}function OE(s,o=null,u=null,l){const d=Ry(s,o,u,l);return d.resolveInjectorInitializers(),d}function Ry(s,o=null,u=null,l,d=new Set){const g=[u||Te,Uh(s)];return l=l||("object"==typeof s?void 0:ge(s)),new pE(g,o||pg(),l||null,d)}let Gl=(()=>{class s{static create(u,l){if(Array.isArray(u))return OE({name:""},l,u,"");{const d=u.name??"";return OE({name:d},u.parent,u.providers,d)}}}return s.THROW_IF_NOT_FOUND=en,s.NULL=new cE,s.\u0275prov=Xe({token:s,providedIn:"any",factory:()=>He($l)}),s.__NG_ELEMENT_ID__=-1,s})();function ql(s,o=mt.Default){const u=Pe();return null===u?He(s,o):Bp(Ur(),u,Y(s),o)}function BE(){throw new Error("invalid")}function $E(s,o){const u=s.contentQueries;if(null!==u)for(let l=0;l<u.length;l+=2){const g=u[l+1];if(-1!==g){const v=s.data[g];Pp(u[l]),v.contentQueries(2,o[g],g)}}}function Ig(s,o,u,l,d,g,v,I,T,S,x){const U=o.blueprint.slice();return U[mi]=d,U[Ht]=76|l,(null!==x||s&&1024&s[Ht])&&(U[Ht]|=1024),da(U),U[On]=U[_o]=s,U[kn]=u,U[bs]=v||s&&s[bs],U[qt]=I||s&&s[qt],U[us]=T||s&&s[us]||null,U[na]=S||s&&s[na]||null,U[tr]=g,U[_i]=function Yp(){return Cl++}(),U[Uu]=x,U[Tr]=2==o.type?s[Tr]:U,U}function zh(s,o,u,l,d){let g=s.data[o];if(null===g)g=function HE(s,o,u,l,d){const g=R_(),v=ol(),T=s.data[o]=function JD(s,o,u,l,d,g){return{type:u,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,u,o,l,d);return null===s.firstChild&&(s.firstChild=T),null!==g&&(v?null==g.child&&null!==T.parent&&(g.child=T):null===g.next&&(g.next=T,T.prev=g)),T}(s,o,u,l,d),function xp(){return Ft.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=u,g.value=l,g.attrs=d;const v=function ha(){const s=Ft.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return qs(g,!0),g}function Cg(s,o,u,l){if(0===u)return-1;const d=o.length;for(let g=0;g<u;g++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function GE(s,o,u){Op(o);try{const l=s.viewQuery;null!==l&&Wr(1,l,u);const d=s.template;null!==d&&YD(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&$E(s,o),s.staticViewQueries&&Wr(2,s.viewQuery,u);const g=s.components;null!==g&&function jE(s,o){for(let u=0;u<o.length;u++)to(s,o[u])}(o,g)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[Ht]&=-5,kp()}}function Oy(s,o,u,l){const d=o[Ht];if(128!=(128&d)){Op(o);try{da(o),function x_(s){return Ft.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&YD(s,o,u,2,l);const v=3==(3&d);if(v){const S=s.preOrderCheckHooks;null!==S&&Gd(o,S,null)}else{const S=s.preOrderHooks;null!==S&&pa(o,S,0,null),qa(o,0)}if(function HN(s){for(let o=au(s);null!==o;o=wh(o)){if(!o[$a])continue;const u=o[ia];for(let l=0;l<u.length;l++){const d=u[l];512&d[Ht]||Ws(d[On],1),d[Ht]|=512}}}(o),function jN(s){for(let o=au(s);null!==o;o=wh(o))for(let u=Fr;u<o.length;u++){const l=o[u],d=l[ut];Gt(l)&&Oy(d,l,d.template,l[kn])}}(o),null!==s.contentQueries&&$E(s,o),v){const S=s.contentCheckHooks;null!==S&&Gd(o,S)}else{const S=s.contentHooks;null!==S&&pa(o,S,1),qa(o,1)}!function KD(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let l=0;l<u.length;l++){const d=u[l];if(d<0)Co(~d);else{const g=d,v=u[++l],I=u[++l];Np(v,g),I(2,o[g])}}}finally{Co(-1)}}(s,o);const I=s.components;null!==I&&function ZD(s,o){for(let u=0;u<o.length;u++)ve(s,o[u])}(o,I);const T=s.viewQuery;if(null!==T&&Wr(2,T,l),v){const S=s.viewCheckHooks;null!==S&&Gd(o,S)}else{const S=s.viewHooks;null!==S&&pa(o,S,2),qa(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[Ht]&=-41,512&o[Ht]&&(o[Ht]&=-513,Ws(o[On],-1))}finally{kp()}}}function YD(s,o,u,l,d){const g=wi(),v=2&l;try{Co(-1),v&&o.length>ln&&NE(s,o,ln,!1),ti(v?2:0,d),u(l,d)}finally{Co(g),ti(v?3:1,d)}}function zE(s,o,u){if(cs(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,u[g],g)}}}function WE(s,o,u){A_()&&(function qh(s,o,u,l){const d=u.directiveStart,g=u.directiveEnd;sa(u)&&function VN(s,o,u){const l=Be(o,s),d=KE(u),g=s[bs],v=ns(s,Ig(s,d,null,u.onPush?32:16,l,o,g,g.createRenderer(l,u),null,null,null));s[o.index]=v}(o,u,s.data[d+u.componentOffset]),s.firstCreatePass||ma(u,o),ni(l,o);const v=u.initialInputs;for(let I=d;I<g;I++){const T=s.data[I],S=_a(o,s,I,u);ni(S,o),null!==v&&BN(0,I-d,S,T,0,v),Gr(T)&&(rn(u.index,o)[kn]=_a(o,s,I,u))}}(s,o,u,Be(u,o)),64==(64&u.flags)&&tI(s,o,u))}function qE(s,o,u=Be){const l=o.localNames;if(null!==l){let d=o.index+1;for(let g=0;g<l.length;g+=2){const v=l[g+1],I=-1===v?u(o,s):s[v];s[d++]=I}}}function KE(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=ky(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function ky(s,o,u,l,d,g,v,I,T,S){const x=ln+l,U=x+d,K=function QD(s,o){const u=[];for(let l=0;l<o;l++)u.push(l<s?null:Wt);return u}(x,U),ee="function"==typeof S?S():S;return K[ut]={type:s,blueprint:K,template:u,queries:null,viewQuery:I,declTNode:o,data:K.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:T,consts:ee,incompleteFirstPass:!1}}function ZE(s,o,u,l){const d=Qh(o);null===u?d.push(l):(d.push(u),s.firstCreatePass&&Dg(s).push(l,d.length-1))}function YE(s,o,u,l){for(let d in s)if(s.hasOwnProperty(d)){u=null===u?{}:u;const g=s[d];null===l?nr(u,o,d,g):l.hasOwnProperty(d)&&nr(u,o,l[d],g)}return u}function nr(s,o,u,l){s.hasOwnProperty(u)?s[u].push(o,l):s[u]=[o,l]}function QE(s,o){const u=rn(o,s);16&u[Ht]||(u[Ht]|=32)}function Tg(s,o,u,l){if(A_()){const d=null===l?null:{"":-1},g=function eS(s,o){const u=s.directiveRegistry;let l=null,d=null;if(u)for(let g=0;g<u.length;g++){const v=u[g];if($h(o,v.selectors,!1))if(l||(l=[]),Gr(v))if(null!==v.findHostDirectiveDefs){const I=[];d=d||new Map,v.findHostDirectiveDefs(v,I,d),l.unshift(...I,v),Kh(s,o,I.length)}else l.unshift(v),Kh(s,o,0);else d=d||new Map,v.findHostDirectiveDefs?.(v,l,d),l.push(v)}return null===l?null:[l,d]}(s,u);let v,I;null===g?v=I=null:[v,I]=g,null!==v&&bg(s,o,u,v,d,I),d&&function FN(s,o,u){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=u[o[d+1]];if(null==g)throw new pe(-301,!1);l.push(o[d],g)}}}(u,l,d)}u.mergedAttrs=Ys(u.mergedAttrs,u.attrs)}function bg(s,o,u,l,d,g){for(let S=0;S<l.length;S++)Yd(ma(u,o),s,l[S].type);!function tS(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}(u,s.data.length,l.length);for(let S=0;S<l.length;S++){const x=l[S];x.providersResolver&&x.providersResolver(x)}let v=!1,I=!1,T=Cg(s,o,l.length,null);for(let S=0;S<l.length;S++){const x=l[S];u.mergedAttrs=Ys(u.mergedAttrs,x.hostAttrs),nS(s,u,o,T,x),UN(T,x,d),null!==x.contentQueries&&(u.flags|=4),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(u.flags|=64);const U=x.type.prototype;!v&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),v=!0),!I&&(U.ngOnChanges||U.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),I=!0),T++}!function Ly(s,o,u){const d=o.directiveEnd,g=s.data,v=o.attrs,I=[];let T=null,S=null;for(let x=o.directiveStart;x<d;x++){const U=g[x],K=u?u.get(U):null,Ie=K?K.outputs:null;T=YE(U.inputs,x,T,K?K.inputs:null),S=YE(U.outputs,x,S,Ie);const We=null===T||null===v||Sy(o)?null:$N(T,x,v);I.push(We)}null!==T&&(T.hasOwnProperty("class")&&(o.flags|=8),T.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=I,o.inputs=T,o.outputs=S}(s,u,g)}function tI(s,o,u){const l=u.directiveStart,d=u.directiveEnd,g=u.index,v=function M_(){return Ft.lFrame.currentDirectiveIndex}();try{Co(g);for(let I=l;I<d;I++){const T=s.data[I],S=o[I];Ks(I),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&LN(T,S)}}finally{Co(-1),Ks(v)}}function LN(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Kh(s,o,u){o.componentOffset=u,(s.components||(s.components=[])).push(o.index)}function UN(s,o,u){if(u){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)u[o.exportAs[l]]=s;Gr(o)&&(u[""]=s)}}function nS(s,o,u,l,d){s.data[l]=d;const g=d.factory||(d.factory=Rs(d.type)),v=new cl(g,Gr(d),ql);s.blueprint[l]=v,u[l]=v,function an(s,o,u,l,d){const g=d.hostBindings;if(g){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const I=~o.index;(function eI(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(v)!=I&&v.push(I),v.push(u,l,g)}}(s,o,l,Cg(s,u,d.hostVars,Wt),d)}function Ra(s,o,u,l,d,g){const v=Be(s,o);!function nI(s,o,u,l,d,g,v){if(null==g)s.removeAttribute(o,d,u);else{const I=null==v?Ne(g):v(g,l||"",d);s.setAttribute(o,d,I,u)}}(o[qt],v,g,s.value,u,l,d)}function BN(s,o,u,l,d,g){const v=g[o];if(null!==v){const I=l.setInput;for(let T=0;T<v.length;){const S=v[T++],x=v[T++],U=v[T++];null!==I?l.setInput(u,U,S,x):u[x]=U}}}function $N(s,o,u){let l=null,d=0;for(;d<u.length;){const g=u[d];if(0!==g)if(5!==g){if("number"==typeof g)break;if(s.hasOwnProperty(g)){null===l&&(l=[]);const v=s[g];for(let I=0;I<v.length;I+=2)if(v[I]===o){l.push(g,v[I+1],u[d+1]);break}}d+=2}else d+=2;else d+=4}return l}function rS(s,o,u,l){return[s,!0,!1,o,null,0,l,u,null,null]}function ve(s,o){const u=rn(o,s);if(Gt(u)){const l=u[ut];48&u[Ht]?Oy(l,u,l.template,u[kn]):u[ki]>0&&pi(u)}}function pi(s){for(let l=au(s);null!==l;l=wh(l))for(let d=Fr;d<l.length;d++){const g=l[d];if(Gt(g))if(512&g[Ht]){const v=g[ut];Oy(v,g,v.template,g[kn])}else g[ki]>0&&pi(g)}const u=s[ut].components;if(null!==u)for(let l=0;l<u.length;l++){const d=rn(u[l],s);Gt(d)&&d[ki]>0&&pi(d)}}function to(s,o){const u=rn(o,s),l=u[ut];(function N(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(l,u),GE(l,u,u[kn])}function ns(s,o){return s[zs]?s[mo][Jr]=o:s[zs]=o,s[mo]=o,o}function Zh(s){for(;s;){s[Ht]|=32;const o=Po(s);if(Sp(s)&&!o)return s;s=o}return null}function Yh(s,o,u,l=!0){const d=o[bs];d.begin&&d.begin();try{Oy(s,o,s.template,u)}catch(v){throw l&&iI(o,v),v}finally{d.end&&d.end()}}function Wr(s,o,u){Pp(0),o(s,u)}function Qh(s){return s[Gs]||(s[Gs]=[])}function Dg(s){return s.cleanup||(s.cleanup=[])}function iI(s,o){const u=s[na],l=u?u.get(Bh,null):null;l&&l.handleError(o)}function Fy(s,o,u,l,d){for(let g=0;g<u.length;){const v=u[g++],I=u[g++],T=o[v],S=s.data[v];null!==S.setInput?S.setInput(T,d,l,I):T[I]=d}}function Sg(s,o,u){let l=u?s.styles:null,d=u?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const I=o[v];"number"==typeof I?g=I:1==g?d=ce(d,I):2==g&&(l=ce(l,I+": "+o[++v]+";"))}u?s.styles=l:s.stylesWithoutHost=l,u?s.classes=d:s.classesWithoutHost=d}function Ag(s,o,u,l,d=!1){for(;null!==u;){const g=o[u.index];if(null!==g&&l.push(z(g)),vi(g))for(let I=Fr;I<g.length;I++){const T=g[I],S=T[ut].firstChild;null!==S&&Ag(T[ut],T,S,l)}const v=u.type;if(8&v)Ag(s,o,u.child,l);else if(32&v){const I=ac(u,o);let T;for(;T=I();)l.push(T)}else if(16&v){const I=Rr(o,u);if(Array.isArray(I))l.push(...I);else{const T=Po(o[Tr]);Ag(T[ut],T,I,l,!0)}}u=d?u.projectionNext:u.next}return l}class Xh{get rootNodes(){const o=this._lView,u=o[ut];return Ag(u,o,u.firstChild,[])}constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[kn]}set context(o){this._lView[kn]=o}get destroyed(){return 128==(128&this._lView[Ht])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[On];if(vi(o)){const u=o[vo],l=u?u.indexOf(this):-1;l>-1&&(cc(o,l),ih(u,l))}this._attachedToViewContainer=!1}lc(this._lView[ut],this._lView)}onDestroy(o){ZE(this._lView[ut],this._lView,null,o)}markForCheck(){Zh(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ht]&=-65}reattach(){this._lView[Ht]|=64}detectChanges(){Yh(this._lView[ut],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new pe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ch(s,o){Oo(s,o,o[qt],2,null,null)}(this._lView[ut],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new pe(902,!1);this._appRef=o}}class iS extends Xh{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Yh(o[ut],o,o[kn],!1)}checkNoChanges(){}get context(){return null}}class Di extends wu{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=Ke(o);return new Eu(u,this.ngModule)}}function Jh(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class Uy{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,l){l=bt(l);const d=this.injector.get(o,Cy,l);return d!==Cy||u===Cy?d:this.parentInjector.get(o,u,l)}}class Eu extends yE{get inputs(){return Jh(this.componentDef.inputs)}get outputs(){return Jh(this.componentDef.outputs)}constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function ND(s){return s.map(MD).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}create(o,u,l,d){let g=(d=d||this.ngModule)instanceof vc?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new Uy(o,g):o,I=v.get(EE,null);if(null===I)throw new pe(407,!1);const T=v.get(ID,null),S=I.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",U=l?function XD(s,o,u){return s.selectRootElement(o,u===B.ShadowDom)}(S,l,this.componentDef.encapsulation):Ih(S,x,function sI(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(x)),K=this.componentDef.onPush?288:272,ee=ky(0,null,null,1,0,null,null,null,null,null),Ie=Ig(null,ee,null,K,null,null,I,S,T,v,null);let We,ze;Op(Ie);try{const pt=this.componentDef;let At,Ce=null;pt.findHostDirectiveDefs?(At=[],Ce=new Map,pt.findHostDirectiveDefs(pt,At,Ce),At.push(pt)):At=[pt];const $t=function sS(s,o){const u=s[ut],l=ln;return s[l]=o,zh(u,l,2,"#host",null)}(Ie,U),Wn=function oS(s,o,u,l,d,g,v,I){const T=d[ut];!function aS(s,o,u,l){for(const d of s)o.mergedAttrs=Ys(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(Sg(o,o.mergedAttrs,!0),null!==u&&pc(l,u,o))}(l,s,o,v);const S=g.createRenderer(o,u),x=Ig(d,KE(u),null,u.onPush?32:16,d[s.index],s,g,S,I||null,null,null);return T.firstCreatePass&&Kh(T,s,l.length-1),ns(d,x),d[s.index]=x}($t,U,pt,At,Ie,I,S);ze=Vn(ee,ln),U&&function cS(s,o,u,l){if(l)ll(s,u,["ng-version",Iy.full]);else{const{attrs:d,classes:g}=function PD(s){const o=[],u=[];let l=1,d=2;for(;l<s.length;){let g=s[l];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++l]):8===d&&u.push(g);else{if(!eo(d))break;d=g}l++}return{attrs:o,classes:u}}(o.selectors[0]);d&&ll(s,u,d),g&&g.length>0&&fu(s,u,g.join(" "))}}(S,pt,U,l),void 0!==u&&function ef(s,o,u){const l=s.projection=[];for(let d=0;d<o.length;d++){const g=u[d];l.push(null!=g?Array.from(g):null)}}(ze,this.ngContentSelectors,u),We=function uS(s,o,u,l,d,g){const v=Ur(),I=d[ut],T=Be(v,d);bg(I,d,v,u,null,l);for(let x=0;x<u.length;x++)ni(_a(d,I,v.directiveStart+x,v),d);tI(I,d,v),T&&ni(T,d);const S=_a(d,I,v.directiveStart+v.componentOffset,v);if(s[kn]=d[kn]=S,null!==g)for(const x of g)x(S,o);return zE(I,v,s),S}(Wn,pt,At,Ce,Ie,[aI]),GE(ee,Ie,null)}finally{kp()}return new Vy(this.componentType,We,wc(ze,Ie),Ie,ze)}}class Vy extends _D{constructor(o,u,l,d,g){super(),this.location=l,this._rootLView=d,this._tNode=g,this.instance=u,this.hostView=this.changeDetectorRef=new iS(d),this.componentType=o}setInput(o,u){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){const g=this._rootLView;Fy(g[ut],g,d,o,u),QE(g,this._tNode.index)}}get injector(){return new Ya(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function aI(){const s=Ur();Hu(Pe()[ut],s)}function nf(s){return!!Wy(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function Wy(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ri(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function qy(s,o,u,l){const d=Pe();return ri(d,fa(),o)&&(fn(),Ra(Rn(),d,s,o,u,l)),qy}function Yy(s,o,u,l,d,g,v,I){const T=Pe(),S=fn(),x=s+ln,U=S.firstCreatePass?function EI(s,o,u,l,d,g,v,I,T){const S=o.consts,x=zh(o,s,4,v||null,br(S,I));Tg(o,u,x,br(S,T)),Hu(o,x);const U=x.tView=ky(2,x,l,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,x),U.queries=o.queries.embeddedTView(x)),x}(x,S,T,o,u,l,d,g,v):S.data[x];qs(U,!1);const K=T[qt].createComment("");cu(S,T,K,U),ni(K,T),ns(T,T[x]=rS(K,T,K,U)),ja(U)&&WE(S,T,U),null!=v&&qE(T,U,I)}function xg(s,o,u){const l=Pe();return ri(l,fa(),o)&&function _s(s,o,u,l,d,g,v,I){const T=Be(o,u);let x,S=o.inputs;!I&&null!=S&&(x=S[l])?(Fy(s,u,x,l,d),sa(o)&&QE(u,o.index)):3&o.type&&(l=function Wh(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=v?v(d,o.value||"",l):d,g.setProperty(T,l,d))}(fn(),Rn(),l,s,o,l[qt],u,!1),xg}function TI(s,o,u,l,d){const v=d?"class":"style";Fy(s,u,o.inputs[v],v,l)}function Qy(s,o,u,l){const d=Pe(),g=fn(),v=ln+s,I=d[qt],T=g.firstCreatePass?function gS(s,o,u,l,d,g){const v=o.consts,T=zh(o,s,2,l,br(v,d));return Tg(o,u,T,br(v,g)),null!==T.attrs&&Sg(T,T.attrs,!1),null!==T.mergedAttrs&&Sg(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(v,g,d,o,u,l):g.data[v],S=d[v]=Ih(I,o,function Q0(){return Ft.lFrame.currentNamespace}()),x=ja(T);return qs(T,!0),pc(I,S,T),32!=(32&T.flags)&&cu(g,d,S,T),0===function Wa(){return Ft.lFrame.elementDepthCount}()&&ni(S,d),function S_(){Ft.lFrame.elementDepthCount++}(),x&&(WE(g,d,T),zE(g,T,d)),null!==l&&qE(d,T),Qy}function Xy(){let s=Ur();ol()?function Rp(){Ft.lFrame.isParent=!1}():(s=s.parent,qs(s,!1));const o=s;!function $d(){Ft.lFrame.elementDepthCount--}();const u=fn();return u.firstCreatePass&&(Hu(u,s),cs(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function F_(s){return 0!=(8&s.flags)}(o)&&TI(u,o,Pe(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function To(s){return 0!=(16&s.flags)}(o)&&TI(u,o,Pe(),o.stylesWithoutHost,!1),Xy}function sf(s,o,u,l){return Qy(s,o,u,l),Xy(),sf}function af(s){return!!s&&"function"==typeof s.then}function nd(s){return!!s&&"function"==typeof s.subscribe}const mS=nd;function uf(s,o,u,l){const d=Pe(),g=fn(),v=Ur();return function vS(s,o,u,l,d,g,v){const I=ja(l),S=s.firstCreatePass&&Dg(s),x=o[kn],U=Qh(o);let K=!0;if(3&l.type||v){const We=Be(l,o),ze=v?v(We):We,pt=U.length,At=v?$t=>v(z($t[l.index])):l.index;let Ce=null;if(!v&&I&&(Ce=function yS(s,o,u,l){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const v=d[g];if(v===u&&d[g+1]===l){const I=o[Gs],T=d[g+2];return I.length>T?I[T]:null}"string"==typeof v&&(g+=2)}return null}(s,o,d,l.index)),null!==Ce)(Ce.__ngLastListenerFn__||Ce).__ngNextListenerFn__=g,Ce.__ngLastListenerFn__=g,K=!1;else{g=AI(l,o,x,g,!1);const $t=u.listen(ze,d,g);U.push(g,$t),S&&S.push(d,At,pt,pt+1)}}else g=AI(l,o,x,g,!1);const ee=l.outputs;let Ie;if(K&&null!==ee&&(Ie=ee[d])){const We=Ie.length;if(We)for(let ze=0;ze<We;ze+=2){const Wn=o[Ie[ze]][Ie[ze+1]].subscribe(g),wr=U.length;U.push(g,Wn),S&&S.push(d,l.index,wr,-(wr+1))}}}(g,d,d[qt],v,s,o,l),uf}function SI(s,o,u,l){try{return ti(6,o,u),!1!==u(l)}catch(d){return iI(s,d),!1}finally{ti(7,o,u)}}function AI(s,o,u,l,d){return function g(v){if(v===Function)return l;Zh(s.componentOffset>-1?rn(s.index,o):o);let T=SI(o,u,l,v),S=g.__ngNextListenerFn__;for(;S;)T=SI(o,u,S,v)&&T,S=S.__ngNextListenerFn__;return d&&!1===T&&(v.preventDefault(),v.returnValue=!1),T}}function jI(s,o=""){const u=Pe(),l=fn(),d=s+ln,g=l.firstCreatePass?zh(l,d,1,o,null):l.data[d],v=u[d]=function Ml(s,o){return s.createText(o)}(u[qt],o);cu(l,u,v,g),qs(g,!1)}const Ac=void 0;var id=["en",[["a","p"],["AM","PM"],Ac],[["AM","PM"],Ac,Ac],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ac,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ac,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ac,"{1} 'at' {0}",Ac],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function GS(s){const u=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===l?1:5}];let jo={};function hv(s){const o=function sC(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=iC(o);if(u)return u;const l=o.split("-")[0];if(u=iC(l),u)return u;if("en"===l)return id;throw new pe(701,!1)}function rC(s){return hv(s)[Ut.PluralCase]}function iC(s){return s in jo||(jo[s]=Rt.ng&&Rt.ng.common&&Rt.ng.common.locales&&Rt.ng.common.locales[s]),jo[s]}var Ut=(()=>((Ut=Ut||{})[Ut.LocaleId=0]="LocaleId",Ut[Ut.DayPeriodsFormat=1]="DayPeriodsFormat",Ut[Ut.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ut[Ut.DaysFormat=3]="DaysFormat",Ut[Ut.DaysStandalone=4]="DaysStandalone",Ut[Ut.MonthsFormat=5]="MonthsFormat",Ut[Ut.MonthsStandalone=6]="MonthsStandalone",Ut[Ut.Eras=7]="Eras",Ut[Ut.FirstDayOfWeek=8]="FirstDayOfWeek",Ut[Ut.WeekendRange=9]="WeekendRange",Ut[Ut.DateFormat=10]="DateFormat",Ut[Ut.TimeFormat=11]="TimeFormat",Ut[Ut.DateTimeFormat=12]="DateTimeFormat",Ut[Ut.NumberSymbols=13]="NumberSymbols",Ut[Ut.NumberFormats=14]="NumberFormats",Ut[Ut.CurrencyCode=15]="CurrencyCode",Ut[Ut.CurrencySymbol=16]="CurrencySymbol",Ut[Ut.CurrencyName=17]="CurrencyName",Ut[Ut.Currencies=18]="Currencies",Ut[Ut.Directionality=19]="Directionality",Ut[Ut.PluralCase=20]="PluralCase",Ut[Ut.ExtraData=21]="ExtraData",Ut))();const Tu="en-US";let Si=Tu;class ad{}class MC{}function Ai(s,o){return new ii(s,o??null)}class ii extends ad{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Di(this);const l=hn(o);this._bootstrapComponents=Lo(l.bootstrap),this._r3Injector=Ry(o,u,[{provide:ad,useValue:this},{provide:wu,useValue:this.componentFactoryResolver}],ge(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Ho extends MC{constructor(o){super(),this.moduleType=o}create(o){return new ii(this.moduleType,o)}}class IA extends ad{constructor(o,u,l){super(),this.componentFactoryResolver=new Di(this),this.instance=null;const d=new pE([...o,{provide:ad,useValue:this},{provide:wu,useValue:this.componentFactoryResolver}],u||pg(),l,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function nm(s,o,u=null){return new IA(s,o,u).injector}let Tv=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const l=lE(0,u.type),d=l.length>0?nm([l],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,d)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Xe({token:s,providedIn:"environment",factory:()=>new s(He(vc))}),s})();function bv(s){s.getStandaloneInjector=o=>o.get(Tv).getOrCreateStandaloneInjector(s)}function am(s){return o=>{setTimeout(s,void 0,o)}}const uo=class AA extends _.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,l){let d=o,g=u||(()=>null),v=l;if(o&&"object"==typeof o){const T=o;d=T.next?.bind(T),g=T.error?.bind(T),v=T.complete?.bind(T)}this.__isAsync&&(g=am(g),d&&(d=am(d)),v&&(v=am(v)));const I=super.subscribe({next:d,error:g,complete:v});return o instanceof X.w0&&o.add(I),I}};function Bv(){return this._results[Symbol.iterator]()}class um{get changes(){return this._changes||(this._changes=new uo)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=um.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=Bv)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const l=this;l.dirty=!1;const d=function Li(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function tE(s,o,u){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],g=o[l];if(u&&(d=u(d),g=u(g)),g!==d)return!1}return!0}(l._results,d,u))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Tf=(()=>{class s{}return s.__NG_ELEMENT_ID__=Hv,s})();const $v=Tf,jv=class extends $v{constructor(o,u,l){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=l}createEmbeddedView(o,u){const l=this._declarationTContainer.tView,d=Ig(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null,u||null);d[Ds]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[ei];return null!==v&&(d[ei]=v.createEmbeddedView(l)),GE(l,d,o),new Xh(d)}};function Hv(){return Mr(Ur(),Pe())}function Mr(s,o){return 4&s.type?new jv(o,s,wc(s,o)):null}let $r=(()=>{class s{}return s.__NG_ELEMENT_ID__=cm,s})();function cm(){return GC(Ur(),Pe())}const Gv=$r,jC=class extends Gv{constructor(o,u,l){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=l}get element(){return wc(this._hostTNode,this._hostLView)}get injector(){return new Ya(this._hostTNode,this._hostLView)}get parentInjector(){const o=Zu(this._hostTNode,this._hostLView);if(qd(o)){const u=ga(o,this._hostLView),l=zu(o);return new Ya(u[ut].data[l+8],u)}return new Ya(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=HC(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-Fr}createEmbeddedView(o,u,l){let d,g;"number"==typeof l?d=l:null!=l&&(d=l.index,g=l.injector);const v=o.createEmbeddedView(u||{},g);return this.insert(v,d),v}createComponent(o,u,l,d,g){const v=o&&!function ec(s){return"function"==typeof s}(o);let I;if(v)I=u;else{const U=u||{};I=U.index,l=U.injector,d=U.projectableNodes,g=U.environmentInjector||U.ngModuleRef}const T=v?o:new Eu(Ke(o)),S=l||this.parentInjector;if(!g&&null==T.ngModule){const K=(v?S:this.parentInjector).get(vc,null);K&&(g=K)}const x=T.create(S,d,void 0,g);return this.insert(x.hostView,I),x}insert(o,u){const l=o._lView,d=l[ut];if(function Io(s){return vi(s[On])}(l)){const x=this.indexOf(o);if(-1!==x)this.detach(x);else{const U=l[On],K=new jC(U,U[tr],U[On]);K.detach(K.indexOf(o))}}const g=this._adjustIndex(u),v=this._lContainer;!function iy(s,o,u,l){const d=Fr+l,g=u.length;l>0&&(u[d-1][Jr]=o),l<g-Fr?(o[Jr]=u[d],W_(u,Fr+l,o)):(u.push(o),o[Jr]=null),o[On]=u;const v=o[Ds];null!==v&&u!==v&&function Pl(s,o){const u=s[ia];o[Tr]!==o[On][On][Tr]&&(s[$a]=!0),null===u?s[ia]=[o]:u.push(o)}(v,o);const I=o[ei];null!==I&&I.insertView(s),o[Ht]|=64}(d,l,v,g);const I=Da(g,v),T=l[qt],S=fc(T,v[yo]);return null!==S&&function uu(s,o,u,l,d,g){l[mi]=d,l[tr]=o,Oo(s,l,u,1,d,g)}(d,v[tr],T,l,S,I),o.attachToViewContainerRef(),W_(lm(v),g,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=HC(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),l=cc(this._lContainer,u);l&&(ih(lm(this._lContainer),u),lc(l[ut],l))}detach(o){const u=this._adjustIndex(o,-1),l=cc(this._lContainer,u);return l&&null!=ih(lm(this._lContainer),u)?new Xh(l):null}_adjustIndex(o,u=0){return o??this.length+u}};function HC(s){return s[vo]}function lm(s){return s[vo]||(s[vo]=[])}function GC(s,o){let u;const l=o[s.index];if(vi(l))u=l;else{let d;if(8&s.type)d=z(l);else{const g=o[qt];d=g.createComment("");const v=Be(s,o);es(g,fc(g,v),d,function tg(s,o){return s.nextSibling(o)}(g,v),!1)}o[s.index]=u=rS(l,o,d,s),ns(o,u)}return new jC(u,s,o)}class zv{constructor(o){this.queryList=o,this.matches=null}clone(){return new zv(this.queryList)}setDirty(){this.queryList.setDirty()}}class dm{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const l=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let g=0;g<l;g++){const v=u.getByIndex(g);d.push(this.queries[v.indexInDeclarationView].clone())}return new dm(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Mc(o,u).matches&&this.queries[u].setDirty()}}class hm{constructor(o,u,l=null){this.predicate=o,this.flags=u,this.read=l}}class Wv{constructor(o=[]){this.queries=o}elementStart(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let l=0;l<this.length;l++){const d=null!==u?u.length:0,g=this.getByIndex(l).embeddedTView(o,d);g&&(g.indexInDeclarationView=l,null!==u?u.push(g):u=[g])}return null!==u?new Wv(u):null}template(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class bf{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new bf(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==u;)l=l.parent;return u===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const g=l[d];this.matchTNodeWithReadOption(o,u,zC(u,g)),this.matchTNodeWithReadOption(o,u,pl(u,o,g,!1,!1))}else l===Tf?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,pl(u,o,l,!1,!1))}matchTNodeWithReadOption(o,u,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===Aa||d===$r||d===Tf&&4&u.type)this.addMatch(u.index,-2);else{const g=pl(u,o,d,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,l)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function zC(s,o){const u=s.localNames;if(null!==u)for(let l=0;l<u.length;l+=2)if(u[l]===o)return u[l+1];return null}function fm(s,o,u,l){return-1===u?function RA(s,o){return 11&s.type?wc(s,o):4&s.type?Mr(s,o):null}(o,s):-2===u?function qv(s,o,u){return u===Aa?wc(o,s):u===Tf?Mr(o,s):u===$r?GC(o,s):void 0}(s,o,l):_a(s,s[ut],u,o)}function pm(s,o,u,l){const d=o[ei].queries[l];if(null===d.matches){const g=s.data,v=u.matches,I=[];for(let T=0;T<v.length;T+=2){const S=v[T];I.push(S<0?null:fm(o,g[S],v[T+1],u.metadata.read))}d.matches=I}return d.matches}function gm(s,o,u,l){const d=s.queries.getByIndex(u),g=d.matches;if(null!==g){const v=pm(s,o,d,u);for(let I=0;I<g.length;I+=2){const T=g[I];if(T>0)l.push(v[I/2]);else{const S=g[I+1],x=o[-T];for(let U=Fr;U<x.length;U++){const K=x[U];K[Ds]===K[On]&&gm(K[ut],K,S,l)}if(null!==x[ia]){const U=x[ia];for(let K=0;K<U.length;K++){const ee=U[K];gm(ee[ut],ee,S,l)}}}}}return l}function WC(s){const o=Pe(),u=fn(),l=N_();Pp(l+1);const d=Mc(u,l);if(s.dirty&&function An(s){return 4==(4&s[Ht])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?gm(u,o,l,[]):pm(u,o,d,l);s.reset(g,wE),s.notifyOnChanges()}return!0}return!1}function Kv(s,o,u,l){const d=fn();if(d.firstCreatePass){const g=Ur();(function KC(s,o,u){null===s.queries&&(s.queries=new Wv),s.queries.track(new bf(o,u))})(d,new hm(o,u,l),g.index),function xA(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function Sf(s,o,u){const l=new um(4==(4&u));ZE(s,o,l,l.destroy),null===o[ei]&&(o[ei]=new dm),o[ei].queries.push(new zv(l))}(d,Pe(),u)}function Zv(){return function qC(s,o){return s[ei].queries[o].queryList}(Pe(),N_())}function Mc(s,o){return s.queries.getByIndex(o)}function gi(s){return!!hn(s)}function Uf(...s){}const nT=new xn("Application Initializer");let Dm=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Uf,this.reject=Uf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(af(g))u.push(g);else if(mS(g)){const v=new Promise((I,T)=>{g.subscribe({complete:I,error:T})});u.push(v)}}Promise.all(u).then(()=>{l()}).catch(d=>{this.reject(d)}),0===u.length&&l(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(He(nT,8))},s.\u0275prov=Xe({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const rw=new xn("AppId",{providedIn:"root",factory:function rT(){return`${Sm()}${Sm()}${Sm()}`}});function Sm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Am=new xn("Platform Initializer"),iw=new xn("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let sw=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Xe({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Rm=new xn("LocaleId",{providedIn:"root",factory:()=>ot(Rm,mt.Optional|mt.SkipSelf)||function jA(){return typeof $localize<"u"&&$localize.locale||Tu}()}),HA=new xn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class uw{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let iT=(()=>{class s{compileModuleSync(u){return new Ho(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const l=this.compileModuleSync(u),g=Lo(hn(u).declarations).reduce((v,I)=>{const T=Ke(I);return T&&v.push(new Eu(T)),v},[]);return new uw(l,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Xe({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const zA=(()=>Promise.resolve(0))();function Nm(s){typeof Zone>"u"?zA.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class $i{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new uo(!1),this.onMicrotaskEmpty=new uo(!1),this.onStable=new uo(!1),this.onError=new uo(!1),typeof Zone>"u")throw new pe(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&u,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function sT(){let s=Rt.requestAnimationFrame,o=Rt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function uT(s){const o=()=>{!function aT(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Rt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,$f(s),s.isCheckStableRunning=!0,lo(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),$f(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,l,d,g,v,I)=>{try{return dd(s),u.invokeTask(d,g,v,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),lw(s)}},onInvoke:(u,l,d,g,v,I,T)=>{try{return dd(s),u.invoke(d,g,v,I,T)}finally{s.shouldCoalesceRunChangeDetection&&o(),lw(s)}},onHasTask:(u,l,d,g)=>{u.hasTask(d,g),l===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,$f(s),lo(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,l,d,g)=>(u.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!$i.isInAngularZone())throw new pe(909,!1)}static assertNotInAngularZone(){if($i.isInAngularZone())throw new pe(909,!1)}run(o,u,l){return this._inner.run(o,u,l)}runTask(o,u,l,d){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+d,o,oT,Uf,Uf);try{return g.runTask(v,u,l)}finally{g.cancelTask(v)}}runGuarded(o,u,l){return this._inner.runGuarded(o,u,l)}runOutsideAngular(o){return this._outer.run(o)}}const oT={};function lo(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function $f(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function dd(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function lw(s){s._nesting--,lo(s)}class dw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new uo,this.onMicrotaskEmpty=new uo,this.onStable=new uo,this.onError=new uo}run(o,u,l){return o.apply(u,l)}runGuarded(o,u,l){return o.apply(u,l)}runOutsideAngular(o){return o()}runTask(o,u,l,d){return o.apply(u,l)}}const jf=new xn(""),hw=new xn("");let Fc,Pm=(()=>{class s{constructor(u,l,d){this._ngZone=u,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Fc||(function lT(s){Fc=s}(d),d.addToWindow(l)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{$i.assertNotInAngularZone(),Nm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Nm(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(u)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,l,d){let g=-1;l&&l>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),u(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:d})}whenStable(u,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,l,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(He($i),He(cT),He(hw))},s.\u0275prov=Xe({token:s,factory:s.\u0275fac}),s})(),cT=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,l){this._applications.set(u,l)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,l=!0){return Fc?.findTestabilityInTree(this,u,l)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Xe({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Wo=!1;let La=null;const Om=new xn("AllowMultipleToken"),Hf=new xn("PlatformDestroyListeners"),fw=new xn("appBootstrapListener");class Uc{constructor(o,u){this.name=o,this.token=u}}function Gf(s,o,u=[]){const l=`Platform: ${o}`,d=new xn(l);return(g=[])=>{let v=Du();if(!v||v.injector.get(Om,!1)){const I=[...u,...g,{provide:d,useValue:!0}];s?s(I):function hT(s){if(La&&!La.get(Om,!1))throw new pe(400,!1);La=s;const o=s.get(pT);(function pw(s){const o=s.get(Am,null);o&&o.forEach(u=>u())})(s)}(function gw(s=[],o){return Gl.create({name:o,providers:[{provide:_y,useValue:"platform"},{provide:Hf,useValue:new Set([()=>La=null])},...s]})}(I,l))}return function vs(s){const o=Du();if(!o)throw new pe(401,!1);return o}()}}function Du(){return La?.get(pT)??null}let pT=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,l){const d=function Lm(s,o){let u;return u="noop"===s?new dw:("zone.js"===s?void 0:s)||new $i(o),u}(l?.ngZone,function gT(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(l)),g=[{provide:$i,useValue:d}];return d.run(()=>{const v=Gl.create({providers:g,parent:this.injector,name:u.moduleType.name}),I=u.create(v),T=I.injector.get(Bh,null);if(!T)throw new pe(402,!1);return d.runOutsideAngular(()=>{const S=d.onError.subscribe({next:x=>{T.handleError(x)}});I.onDestroy(()=>{Fm(this._modules,I),S.unsubscribe()})}),function mT(s,o,u){try{const l=u();return af(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(T,d,()=>{const S=I.injector.get(Dm);return S.runInitializers(),S.donePromise.then(()=>(function Kg(s){et(s,"Expected localeId to be defined"),"string"==typeof s&&(Si=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(Rm,Tu)||Tu),this._moduleDoBootstrap(I),I))})})}bootstrapModule(u,l=[]){const d=_T({},l);return function km(s,o,u){const l=new Ho(u);return Promise.resolve(l)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(u){const l=u.injector.get(zf);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new pe(-403,!1);u.instance.ngDoBootstrap(l)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new pe(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const u=this._injector.get(Hf,null);u&&(u.forEach(l=>l()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(He(Gl))},s.\u0275prov=Xe({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function _T(s,o){return Array.isArray(o)?o.reduce(_T,s):{...s,...o}}let zf=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,l,d){this._zone=u,this._injector=l,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new V.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new V.y(I=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{$i.assertNotInAngularZone(),Nm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{$i.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{T.unsubscribe(),S.unsubscribe()}});this.isStable=(0,te.T)(g,v.pipe((0,ue.B)()))}bootstrap(u,l){const d=u instanceof yE;if(!this._injector.get(Dm).done){!d&&Zn(u);throw new pe(405,Wo)}let v;v=d?u:this._injector.get(wu).resolveComponentFactory(u),this.componentTypes.push(v.componentType);const I=function dT(s){return s.isBoundToModule}(v)?void 0:this._injector.get(ad),S=v.create(Gl.NULL,[],l||v.selector,I),x=S.location.nativeElement,U=S.injector.get(jf,null);return U?.registerApplication(x),S.onDestroy(()=>{this.detachView(S.hostView),Fm(this.components,S),U?.unregisterApplication(x)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new pe(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const l=u;this._views.push(l),l.attachToAppRef(this)}detachView(u){const l=u;Fm(this._views,l),l.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const l=this._injector.get(fw,[]);l.push(...this._bootstrapListeners),l.forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Fm(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new pe(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(He($i),He(vc),He(Bh))},s.\u0275prov=Xe({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Fm(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}function yT(){return!1}function oi(){}let QA=(()=>{class s{}return s.__NG_ELEMENT_ID__=$e,s})();function $e(s){return function Nr(s,o,u){if(sa(s)&&!u){const l=rn(s.index,o);return new Xh(l,l)}return 47&s.type?new Xh(o[Tr],o):null}(Ur(),Pe(),16==(16&s))}class Ew{constructor(){}supports(o){return nf(o)}create(o){return new Mt(o)}}const ir=(s,o)=>o;class Mt{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||ir}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,l=this._removalsHead,d=0,g=null;for(;u||l;){const v=!l||u&&u.currentIndex<hr(l,d,g)?u:l,I=hr(v,d,g),T=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(u=u._next,null==v.previousIndex)d++;else{g||(g=[]);const S=I-d,x=T-d;if(S!=x){for(let K=0;K<S;K++){const ee=K<g.length?g[K]:g[K]=0,Ie=ee+K;x<=Ie&&Ie<S&&(g[K]=ee+1)}g[v.previousIndex]=x-S}}I!==T&&o(v,I,T)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!nf(o))throw new pe(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,v,u=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)g=o[I],v=this._trackByFn(I,g),null!==u&&Object.is(u.trackById,v)?(l&&(u=this._verifyReinsertion(u,g,v,I)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,v,I),l=!0),u=u._next}else d=0,function zy(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Symbol.iterator]();let l;for(;!(l=u.next()).done;)o(l.value)}}(o,I=>{v=this._trackByFn(d,I),null!==u&&Object.is(u.trackById,v)?(l&&(u=this._verifyReinsertion(u,I,v,d)),Object.is(u.item,I)||this._addIdentityChange(u,I)):(u=this._mismatch(u,I,v,d),l=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,l,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,g,d)):o=this._addAfter(new Zf(u,l),g,d),o}_verifyReinsertion(o,u,l,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,u,l),this._addToMoves(o,l),o}_moveAfter(o,u,l){return this._unlink(o),this._insertAfter(o,u,l),this._addToMoves(o,l),o}_addAfter(o,u,l){return this._insertAfter(o,u,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,l){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new ET),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,l=o._next;return null===u?this._itHead=l:u._next=l,null===l?this._itTail=u:l._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ET),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Zf{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class vn{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===u||u<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const u=o._prevDup,l=o._nextDup;return null===u?this._head=l:u._nextDup=l,null===l?this._tail=u:l._prevDup=u,null===this._head}}class ET{constructor(){this.map=new Map}put(o){const u=o.trackById;let l=this.map.get(u);l||(l=new vn,this.map.set(u,l)),l.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function hr(s,o,u){const l=s.previousIndex;if(null===l)return l;let d=0;return u&&l<u.length&&(d=u[l]),l+o+d}class tt{constructor(){}supports(o){return o instanceof Map||Wy(o)}create(){return new Bm}}class Bm{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Wy(o)))throw new pe(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,l),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(d,l);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let l=u;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const l=o._prev;return u._next=o,u._prev=l,o._prev=u,l&&(l._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const g=d._prev,v=d._next;return g&&(g._next=v),v&&(v._prev=g),d._next=null,d._prev=null,d}const l=new Iw(o);return this._records.set(o,l),l.currentValue=u,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(l=>u(o[l],l))}}class Iw{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Su(){return new Cw([new Ew])}let Cw=(()=>{class s{constructor(u){this.factories=u}static create(u,l){if(null!=l){const d=l.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||Su()),deps:[[s,new tc,new Xi]]}}find(u){const l=this.factories.find(d=>d.supports(u));if(null!=l)return l;throw new pe(901,!1)}}return s.\u0275prov=Xe({token:s,providedIn:"root",factory:Su}),s})();function IT(){return new $c([new tt])}let $c=(()=>{class s{constructor(u){this.factories=u}static create(u,l){if(l){const d=l.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||IT()),deps:[[s,new tc,new Xi]]}}find(u){const l=this.factories.find(d=>d.supports(u));if(l)return l;throw new pe(901,!1)}}return s.\u0275prov=Xe({token:s,providedIn:"root",factory:IT}),s})();const DT=Gf(null,"core",[]);let ST=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(He(zf))},s.\u0275mod=go({type:s}),s.\u0275inj=Nn({}),s})();function Au(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},579:(gt,Se,P)=>{P.d(Se,{EI:()=>De,Gb:()=>kr,Iv:()=>ci,Kz:()=>bt,Xd:()=>$n,lT:()=>mr,xP:()=>He});var _=P(5861),X=P(9681),V=P(1877),te=P(2090),ue=P(4859);P(2833);const de="analytics",ge="firebase_id",ce="origin",G=6e4,W="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Y="https://www.googletagmanager.com/gtag/js",Oe=new V.Yd("@firebase/analytics");function ye(A){return Promise.all(A.map(L=>L.catch(q=>q)))}function be(){return(be=(0,_.Z)(function*(A,L,q,B,le,Te){const ct=B[le];try{if(ct)yield L[ct];else{const Ot=(yield ye(q)).find(tn=>tn.measurementId===le);Ot&&(yield L[Ot.appId])}}catch(Pt){Oe.error(Pt)}A("config",le,Te)})).apply(this,arguments)}function Ue(){return(Ue=(0,_.Z)(function*(A,L,q,B,le){try{let Te=[];if(le&&le.send_to){let ct=le.send_to;Array.isArray(ct)||(ct=[ct]);const Pt=yield ye(q);for(const Ot of ct){const tn=Pt.find(Sn=>Sn.measurementId===Ot),Ct=tn&&L[tn.appId];if(!Ct){Te=[];break}Te.push(Ct)}}0===Te.length&&(Te=Object.values(L)),yield Promise.all(Te),A("event",B,le||{})}catch(Te){Oe.error(Te)}})).apply(this,arguments)}const Ae=new te.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),$=30,Qe=new class qe{constructor(L={},q=1e3){this.throttleMetadata=L,this.intervalMillis=q}getThrottleMetadata(L){return this.throttleMetadata[L]}setThrottleMetadata(L,q){this.throttleMetadata[L]=q}deleteThrottleMetadata(L){delete this.throttleMetadata[L]}};function ft(A){return new Headers({Accept:"application/json","x-goog-api-key":A})}function re(){return(re=(0,_.Z)(function*(A){var L;const{appId:q,apiKey:B}=A,le={method:"GET",headers:ft(B)},Te=W.replace("{app-id}",q),ct=yield fetch(Te,le);if(200!==ct.status&&304!==ct.status){let Pt="";try{const Ot=yield ct.json();null!==(L=Ot.error)&&void 0!==L&&L.message&&(Pt=Ot.error.message)}catch{}throw Ae.create("config-fetch-failed",{httpStatus:ct.status,responseMessage:Pt})}return ct.json()})).apply(this,arguments)}function me(){return(me=(0,_.Z)(function*(A,L=Qe,q){const{appId:B,apiKey:le,measurementId:Te}=A.options;if(!B)throw Ae.create("no-app-id");if(!le){if(Te)return{measurementId:Te,appId:B};throw Ae.create("no-api-key")}const ct=L.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Pt=new it;return setTimeout((0,_.Z)(function*(){Pt.abort()}),void 0!==q?q:G),Me({appId:B,apiKey:le,measurementId:Te},ct,Pt,L)})).apply(this,arguments)}function Me(A,L,q){return Fe.apply(this,arguments)}function Fe(){return Fe=(0,_.Z)(function*(A,{throttleEndTimeMillis:L,backoffCount:q},B,le=Qe){var Te;const{appId:ct,measurementId:Pt}=A;try{yield function je(A,L){return new Promise((q,B)=>{const le=Math.max(L-Date.now(),0),Te=setTimeout(q,le);A.addEventListener(()=>{clearTimeout(Te),B(Ae.create("fetch-throttle",{throttleEndTimeMillis:L}))})})}(B,L)}catch(Ot){if(Pt)return Oe.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Pt} provided in the "measurementId" field in the local Firebase config. [${Ot?.message}]`),{appId:ct,measurementId:Pt};throw Ot}try{const Ot=yield function Je(A){return re.apply(this,arguments)}(A);return le.deleteThrottleMetadata(ct),Ot}catch(Ot){const tn=Ot;if(!function et(A){if(!(A instanceof te.ZR&&A.customData))return!1;const L=Number(A.customData.httpStatus);return 429===L||500===L||503===L||504===L}(tn)){if(le.deleteThrottleMetadata(ct),Pt)return Oe.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Pt} provided in the "measurementId" field in the local Firebase config. [${tn?.message}]`),{appId:ct,measurementId:Pt};throw Ot}const Ct=503===Number(null===(Te=tn?.customData)||void 0===Te?void 0:Te.httpStatus)?(0,te.$s)(q,le.intervalMillis,$):(0,te.$s)(q,le.intervalMillis),Sn={throttleEndTimeMillis:Date.now()+Ct,backoffCount:q+1};return le.setThrottleMetadata(ct,Sn),Oe.debug(`Calling attemptFetch again in ${Ct} millis`),Me(A,Sn,B,le)}}),Fe.apply(this,arguments)}class it{constructor(){this.listeners=[]}addEventListener(L){this.listeners.push(L)}abort(){this.listeners.forEach(L=>L())}}let yn,Yr;function nn(){return(nn=(0,_.Z)(function*(A,L,q,B,le){if(le&&le.global)A("event",q,B);else{const Te=yield L;A("event",q,Object.assign(Object.assign({},B),{send_to:Te}))}})).apply(this,arguments)}function vt(){return(vt=(0,_.Z)(function*(A,L,q,B){if(B&&B.global)return A("set",{screen_name:q}),Promise.resolve();A("config",yield L,{update:!0,screen_name:q})})).apply(this,arguments)}function bn(){return(bn=(0,_.Z)(function*(A,L,q,B){if(B&&B.global)return A("set",{user_id:q}),Promise.resolve();A("config",yield L,{update:!0,user_id:q})})).apply(this,arguments)}function dn(){return(dn=(0,_.Z)(function*(A,L,q,B){if(B&&B.global){const le={};for(const Te of Object.keys(q))le[`user_properties.${Te}`]=q[Te];return A("set",le),Promise.resolve()}A("config",yield L,{update:!0,user_properties:q})})).apply(this,arguments)}function Or(){return(Or=(0,_.Z)(function*(A,L){const q=yield A;window[`ga-disable-${q}`]=!L})).apply(this,arguments)}function Pn(){return(Pn=(0,_.Z)(function*(){if(!(0,te.hl)())return Oe.warn(Ae.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,te.eu)()}catch(A){return Oe.warn(Ae.create("indexeddb-unavailable",{errorInfo:A?.toString()}).message),!1}return!0})).apply(this,arguments)}function Qr(){return Qr=(0,_.Z)(function*(A,L,q,B,le,Te,ct){var Pt;const Ot=function he(A){return me.apply(this,arguments)}(A);Ot.then(cr=>{q[cr.measurementId]=cr.appId,A.options.measurementId&&cr.measurementId!==A.options.measurementId&&Oe.warn(`The measurement ID in the local Firebase config (${A.options.measurementId}) does not match the measurement ID fetched from the server (${cr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(cr=>Oe.error(cr)),L.push(Ot);const tn=function In(){return Pn.apply(this,arguments)}().then(cr=>{if(cr)return B.getId()}),[Ct,Sn]=yield Promise.all([Ot,tn]);(function xe(A){const L=window.document.getElementsByTagName("script");for(const q of Object.values(L))if(q.src&&q.src.includes(Y)&&q.src.includes(A))return q;return null})(Te)||function Ye(A,L){const q=document.createElement("script");q.src=`${Y}?l=${A}&id=${L}`,q.async=!0,document.head.appendChild(q)}(Te,Ct.measurementId),Yr&&(le("consent","default",Yr),function Kn(A){Yr=A}(void 0)),le("js",new Date);const Cr=null!==(Pt=ct?.config)&&void 0!==Pt?Pt:{};return Cr[ce]="firebase",Cr.update=!0,null!=Sn&&(Cr[ge]=Sn),le("config",Ct.measurementId,Cr),yn&&(le("set",yn),function ui(A){yn=A}(void 0)),Ct.measurementId}),Qr.apply(this,arguments)}class Xr{constructor(L){this.app=L}_delete(){return delete mn[this.app.options.appId],Promise.resolve()}}let mn={},ur=[];const Oi={};let St,Un,Rt="dataLayer",_t="gtag",en=!1;function $n(A){if(en)throw Ae.create("already-initialized");A.dataLayerName&&(Rt=A.dataLayerName),A.gtagName&&(_t=A.gtagName)}function er(A,L,q){!function Jn(){const A=[];if((0,te.ru)()&&A.push("This is a browser extension environment."),(0,te.zI)()||A.push("Cookies are not available."),A.length>0){const L=A.map((B,le)=>`(${le+1}) ${B}`).join(" "),q=Ae.create("invalid-analytics-context",{errorInfo:L});Oe.warn(q.message)}}();const B=A.options.appId;if(!B)throw Ae.create("no-app-id");if(!A.options.apiKey){if(!A.options.measurementId)throw Ae.create("no-api-key");Oe.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${A.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=mn[B])throw Ae.create("already-exists",{id:B});if(!en){!function nt(A){let L=[];Array.isArray(window[A])?L=window[A]:window[A]=L}(Rt);const{wrappedGtag:Te,gtagCore:ct}=function Ee(A,L,q,B,le){let Te=function(...ct){window[B].push(arguments)};return window[le]&&"function"==typeof window[le]&&(Te=window[le]),window[le]=function Re(A,L,q,B){function Te(){return Te=(0,_.Z)(function*(ct,Pt,Ot){try{"event"===ct?yield function Ne(A,L,q,B,le){return Ue.apply(this,arguments)}(A,L,q,Pt,Ot):"config"===ct?yield function pe(A,L,q,B,le,Te){return be.apply(this,arguments)}(A,L,q,B,Pt,Ot):"consent"===ct?A("consent","update",Ot):A("set",Pt)}catch(tn){Oe.error(tn)}}),Te.apply(this,arguments)}return function le(ct,Pt,Ot){return Te.apply(this,arguments)}}(Te,A,L,q),{gtagCore:Te,wrappedGtag:window[le]}}(mn,ur,Oi,Rt,_t);Un=Te,St=ct,en=!0}return mn[B]=function mt(A,L,q,B,le,Te,ct){return Qr.apply(this,arguments)}(A,ur,Oi,L,St,Rt,q),new Xr(A)}function kr(){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,_.Z)(function*(){if((0,te.ru)()||!(0,te.zI)()||!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch{return!1}})).apply(this,arguments)}function mr(A,L,q){A=(0,te.m9)(A),function Xe(A,L,q,B){return vt.apply(this,arguments)}(Un,mn[A.app.options.appId],L,q).catch(B=>Oe.error(B))}function ci(A,L,q){A=(0,te.m9)(A),function Nn(A,L,q,B){return bn.apply(this,arguments)}(Un,mn[A.app.options.appId],L,q).catch(B=>Oe.error(B))}function He(A,L,q){A=(0,te.m9)(A),function Dn(A,L,q,B){return dn.apply(this,arguments)}(Un,mn[A.app.options.appId],L,q).catch(B=>Oe.error(B))}function De(A,L){A=(0,te.m9)(A),function ar(A,L){return Or.apply(this,arguments)}(mn[A.app.options.appId],L).catch(q=>Oe.error(q))}function bt(A,L,q,B){A=(0,te.m9)(A),function It(A,L,q,B,le){return nn.apply(this,arguments)}(Un,mn[A.app.options.appId],L,q,B).catch(le=>Oe.error(le))}const Bt="@firebase/analytics";!function H(){(0,X._registerComponent)(new ue.wA(de,(L,{options:q})=>er(L.getProvider("app").getImmediate(),L.getProvider("installations-internal").getImmediate(),q),"PUBLIC")),(0,X._registerComponent)(new ue.wA("analytics-internal",function A(L){try{const q=L.getProvider(de).getImmediate();return{logEvent:(B,le,Te)=>bt(q,B,le,Te)}}catch(q){throw Ae.create("interop-component-reg-failed",{reason:q})}},"PRIVATE")),(0,X.registerVersion)(Bt,"0.9.4"),(0,X.registerVersion)(Bt,"0.9.4","esm2017")}()},3942:(gt,Se,P)=>{P.d(Se,{Z:()=>Ye});var _=P(2090),X=P(4859),V=P(9681),te=P(1877);class ue{constructor(pe,be){this._delegate=pe,this.firebase=be,(0,V._addComponent)(pe,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,V.deleteApp)(this._delegate)))}_getService(pe,be=V._DEFAULT_ENTRY_NAME){var Ne;this._delegate.checkDestroyed();const Ue=this._delegate.container.getProvider(pe);return!Ue.isInitialized()&&"EXPLICIT"===(null===(Ne=Ue.getComponent())||void 0===Ne?void 0:Ne.instantiationMode)&&Ue.initialize(),Ue.getImmediate({identifier:be})}_removeServiceInstance(pe,be=V._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(be)}_addComponent(pe){(0,V._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,V._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function ce(){const nt=function ge(nt){const pe={},be={__esModule:!0,initializeApp:function Re(Ae,$={}){const we=V.initializeApp(Ae,$);if((0,_.r3)(pe,we.name))return pe[we.name];const qe=new nt(we,be);return pe[we.name]=qe,qe},app:Ue,registerVersion:V.registerVersion,setLogLevel:V.setLogLevel,onLog:V.onLog,apps:null,SDK_VERSION:V.SDK_VERSION,INTERNAL:{registerComponent:function xe(Ae){const $=Ae.name,we=$.replace("-compat","");if(V._registerComponent(Ae)&&"PUBLIC"===Ae.type){const qe=(Qe=Ue())=>{if("function"!=typeof Qe[we])throw de.create("invalid-app-argument",{appName:$});return Qe[we]()};void 0!==Ae.serviceProps&&(0,_.ZB)(qe,Ae.serviceProps),be[we]=qe,nt.prototype[we]=function(...Qe){return this._getService.bind(this,$).apply(this,Ae.multipleInstances?Qe:[])}}return"PUBLIC"===Ae.type?be[we]:null},removeApp:function Ne(Ae){delete pe[Ae]},useAsService:function Ge(Ae,$){return"serverAuth"===$?null:$},modularAPIs:V}};function Ue(Ae){if(!(0,_.r3)(pe,Ae=Ae||V._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:Ae});return pe[Ae]}return be.default=be,Object.defineProperty(be,"apps",{get:function Ee(){return Object.keys(pe).map(Ae=>pe[Ae])}}),Ue.App=nt,be}(ue);return nt.INTERNAL=Object.assign(Object.assign({},nt.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function pe(be){(0,_.ZB)(nt,be)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),nt}(),W=new te.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){W.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const nt=self.firebase.SDK_VERSION;nt&&nt.indexOf("LITE")>=0&&W.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ye=G;!function ye(nt){(0,V.registerVersion)("@firebase/app-compat","0.2.5",nt)}()},9681:(gt,Se,P)=>{P.r(Se),P.d(Se,{FirebaseError:()=>te.ZR,SDK_VERSION:()=>ar,_DEFAULT_ENTRY_NAME:()=>Fe,_addComponent:()=>yn,_addOrOverwriteComponent:()=>It,_apps:()=>et,_clearComponents:()=>Nn,_components:()=>it,_getProvider:()=>Xe,_registerComponent:()=>nn,_removeServiceInstance:()=>vt,deleteApp:()=>ui,getApp:()=>Yr,getApps:()=>Kn,initializeApp:()=>Or,onLog:()=>mt,registerVersion:()=>Pn,setLogLevel:()=>Qr});var _=P(5861),X=P(4859),V=P(1877),te=P(2090),ue=P(8766);class ne{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map(ot=>{if(function de(He){return"VERSION"===He.getComponent()?.type}(ot)){const bt=ot.getImmediate();return`${bt.library}/${bt.version}`}return null}).filter(ot=>ot).join(" ")}}const ge="@firebase/app",G=new V.Yd("@firebase/app"),Fe="[DEFAULT]",je={[ge]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},et=new Map,it=new Map;function yn(He,De){try{He.container.addComponent(De)}catch(ot){G.debug(`Component ${De.name} failed to register with FirebaseApp ${He.name}`,ot)}}function It(He,De){He.container.addOrOverwriteComponent(De)}function nn(He){const De=He.name;if(it.has(De))return G.debug(`There were multiple attempts to register component ${De}.`),!1;it.set(De,He);for(const ot of et.values())yn(ot,He);return!0}function Xe(He,De){const ot=He.container.getProvider("heartbeat").getImmediate({optional:!0});return ot&&ot.triggerHeartbeat(),He.container.getProvider(De)}function vt(He,De,ot=Fe){Xe(He,De).clearInstance(ot)}function Nn(){it.clear()}const Dn=new te.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class dn{constructor(De,ot,bt){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},ot),this._name=ot.name,this._automaticDataCollectionEnabled=ot.automaticDataCollectionEnabled,this._container=bt,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw Dn.create("app-deleted",{appName:this._name})}}const ar="9.18.0";function Or(He,De={}){let ot=He;"object"!=typeof De&&(De={name:De});const bt=Object.assign({name:Fe,automaticDataCollectionEnabled:!1},De),Lt=bt.name;if("string"!=typeof Lt||!Lt)throw Dn.create("bad-app-name",{appName:String(Lt)});if(ot||(ot=(0,te.aH)()),!ot)throw Dn.create("no-options");const Bt=et.get(Lt);if(Bt){if((0,te.vZ)(ot,Bt.options)&&(0,te.vZ)(bt,Bt.config))return Bt;throw Dn.create("duplicate-app",{appName:Lt})}const jn=new X.H0(Lt);for(const A of it.values())jn.addComponent(A);const H=new dn(ot,bt,jn);return et.set(Lt,H),H}function Yr(He=Fe){const De=et.get(He);if(!De&&He===Fe)return Or();if(!De)throw Dn.create("no-app",{appName:He});return De}function Kn(){return Array.from(et.values())}function ui(He){return In.apply(this,arguments)}function In(){return(In=(0,_.Z)(function*(He){const De=He.name;et.has(De)&&(et.delete(De),yield Promise.all(He.container.getProviders().map(ot=>ot.delete())),He.isDeleted=!0)})).apply(this,arguments)}function Pn(He,De,ot){var bt;let Lt=null!==(bt=je[He])&&void 0!==bt?bt:He;ot&&(Lt+=`-${ot}`);const Bt=Lt.match(/\s|\//),jn=De.match(/\s|\//);if(Bt||jn){const H=[`Unable to register library "${Lt}" with version "${De}":`];return Bt&&H.push(`library name "${Lt}" contains illegal characters (whitespace or "/")`),Bt&&jn&&H.push("and"),jn&&H.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void G.warn(H.join(" "))}nn(new X.wA(`${Lt}-version`,()=>({library:Lt,version:De}),"VERSION"))}function mt(He,De){if(null!==He&&"function"!=typeof He)throw Dn.create("invalid-log-argument");(0,V.Am)(He,De)}function Qr(He){(0,V.Ub)(He)}const Xr="firebase-heartbeat-database",mn=1,ur="firebase-heartbeat-store";let Oi=null;function Rt(){return Oi||(Oi=(0,ue.X3)(Xr,mn,{upgrade:(He,De)=>{0===De&&He.createObjectStore(ur)}}).catch(He=>{throw Dn.create("idb-open",{originalErrorMessage:He.message})})),Oi}function St(){return(St=(0,_.Z)(function*(He){try{return(yield Rt()).transaction(ur).objectStore(ur).get($n(He))}catch(De){if(De instanceof te.ZR)G.warn(De.message);else{const ot=Dn.create("idb-get",{originalErrorMessage:De?.message});G.warn(ot.message)}}})).apply(this,arguments)}function Un(He,De){return en.apply(this,arguments)}function en(){return(en=(0,_.Z)(function*(He,De){try{const bt=(yield Rt()).transaction(ur,"readwrite");return yield bt.objectStore(ur).put(De,$n(He)),bt.done}catch(ot){if(ot instanceof te.ZR)G.warn(ot.message);else{const bt=Dn.create("idb-set",{originalErrorMessage:ot?.message});G.warn(bt.message)}}})).apply(this,arguments)}function $n(He){return`${He.name}!${He.options.appId}`}class zi{constructor(De){this.container=De,this._heartbeatsCache=null;const ot=this.container.getProvider("app").getImmediate();this._storage=new Yt(ot),this._heartbeatsCachePromise=this._storage.read().then(bt=>(this._heartbeatsCache=bt,bt))}triggerHeartbeat(){var De=this;return(0,_.Z)(function*(){const bt=De.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Lt=cn();if(null===De._heartbeatsCache&&(De._heartbeatsCache=yield De._heartbeatsCachePromise),De._heartbeatsCache.lastSentHeartbeatDate!==Lt&&!De._heartbeatsCache.heartbeats.some(Bt=>Bt.date===Lt))return De._heartbeatsCache.heartbeats.push({date:Lt,agent:bt}),De._heartbeatsCache.heartbeats=De._heartbeatsCache.heartbeats.filter(Bt=>{const jn=new Date(Bt.date).valueOf();return Date.now()-jn<=2592e6}),De._storage.overwrite(De._heartbeatsCache)})()}getHeartbeatsHeader(){var De=this;return(0,_.Z)(function*(){if(null===De._heartbeatsCache&&(yield De._heartbeatsCachePromise),null===De._heartbeatsCache||0===De._heartbeatsCache.heartbeats.length)return"";const ot=cn(),{heartbeatsToSend:bt,unsentEntries:Lt}=function kr(He,De=1024){const ot=[];let bt=He.slice();for(const Lt of He){const Bt=ot.find(jn=>jn.agent===Lt.agent);if(Bt){if(Bt.dates.push(Lt.date),mr(ot)>De){Bt.dates.pop();break}}else if(ot.push({agent:Lt.agent,dates:[Lt.date]}),mr(ot)>De){ot.pop();break}bt=bt.slice(1)}return{heartbeatsToSend:ot,unsentEntries:bt}}(De._heartbeatsCache.heartbeats),Bt=(0,te.L)(JSON.stringify({version:2,heartbeats:bt}));return De._heartbeatsCache.lastSentHeartbeatDate=ot,Lt.length>0?(De._heartbeatsCache.heartbeats=Lt,yield De._storage.overwrite(De._heartbeatsCache)):(De._heartbeatsCache.heartbeats=[],De._storage.overwrite(De._heartbeatsCache)),Bt})()}}function cn(){return(new Date).toISOString().substring(0,10)}class Yt{constructor(De){this.app=De,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.Z)(function*(){return!!(0,te.hl)()&&(0,te.eu)().then(()=>!0).catch(()=>!1)})()}read(){var De=this;return(0,_.Z)(function*(){return(yield De._canUseIndexedDBPromise)&&(yield function _t(He){return St.apply(this,arguments)}(De.app))||{heartbeats:[]}})()}overwrite(De){var ot=this;return(0,_.Z)(function*(){var bt;if(yield ot._canUseIndexedDBPromise){const Bt=yield ot.read();return Un(ot.app,{lastSentHeartbeatDate:null!==(bt=De.lastSentHeartbeatDate)&&void 0!==bt?bt:Bt.lastSentHeartbeatDate,heartbeats:De.heartbeats})}})()}add(De){var ot=this;return(0,_.Z)(function*(){var bt;if(yield ot._canUseIndexedDBPromise){const Bt=yield ot.read();return Un(ot.app,{lastSentHeartbeatDate:null!==(bt=De.lastSentHeartbeatDate)&&void 0!==bt?bt:Bt.lastSentHeartbeatDate,heartbeats:[...Bt.heartbeats,...De.heartbeats]})}})()}}function mr(He){return(0,te.L)(JSON.stringify({version:2,heartbeats:He})).length}!function ci(He){nn(new X.wA("platform-logger",De=>new ne(De),"PRIVATE")),nn(new X.wA("heartbeat",De=>new zi(De),"PRIVATE")),Pn(ge,"0.9.5",He),Pn(ge,"0.9.5","esm2017"),Pn("fire-js","")}("")},4859:(gt,Se,P)=>{P.d(Se,{H0:()=>ge,wA:()=>V,zt:()=>ue});var _=P(5861),X=P(2090);class V{constructor(G,W,Y){this.name=G,this.instanceFactory=W,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const te="[DEFAULT]";class ue{constructor(G,W){this.name=G,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const W=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(W)){const Y=new X.BH;if(this.instancesDeferred.set(W,Y),this.isInitialized(W)||this.shouldAutoInitialize())try{const Oe=this.getOrInitializeService({instanceIdentifier:W});Oe&&Y.resolve(Oe)}catch{}}return this.instancesDeferred.get(W).promise}getImmediate(G){var W;const Y=this.normalizeInstanceIdentifier(G?.identifier),Oe=null!==(W=G?.optional)&&void 0!==W&&W;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(Oe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(ye){if(Oe)return null;throw ye}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function de(ce){return"EAGER"===ce.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:te})}catch{}for(const[W,Y]of this.instancesDeferred.entries()){const Oe=this.normalizeInstanceIdentifier(W);try{const ye=this.getOrInitializeService({instanceIdentifier:Oe});Y.resolve(ye)}catch{}}}}clearInstance(G=te){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,_.Z)(function*(){const W=Array.from(G.instances.values());yield Promise.all([...W.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...W.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=te){return this.instances.has(G)}getOptions(G=te){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:W={}}=G,Y=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Oe=this.getOrInitializeService({instanceIdentifier:Y,options:W});for(const[ye,Ye]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(ye)&&Ye.resolve(Oe);return Oe}onInit(G,W){var Y;const Oe=this.normalizeInstanceIdentifier(W),ye=null!==(Y=this.onInitCallbacks.get(Oe))&&void 0!==Y?Y:new Set;ye.add(G),this.onInitCallbacks.set(Oe,ye);const Ye=this.instances.get(Oe);return Ye&&G(Ye,Oe),()=>{ye.delete(G)}}invokeOnInitCallbacks(G,W){const Y=this.onInitCallbacks.get(W);if(Y)for(const Oe of Y)try{Oe(G,W)}catch{}}getOrInitializeService({instanceIdentifier:G,options:W={}}){let Y=this.instances.get(G);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=G,ce===te?void 0:ce),options:W}),this.instances.set(G,Y),this.instancesOptions.set(G,W),this.invokeOnInitCallbacks(Y,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,Y)}catch{}var ce;return Y||null}normalizeInstanceIdentifier(G=te){return this.component?this.component.multipleInstances?G:te:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ge{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const W=this.getProvider(G.name);if(W.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);W.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const W=new ue(G,this);return this.providers.set(G,W),W}getProviders(){return Array.from(this.providers.values())}}},2833:(gt,Se,P)=>{var _=P(5861),X=P(9681),V=P(4859),te=P(2090),ue=P(8766);const ne="@firebase/installations",de="0.6.4",ge=1e4,ce=`w:${de}`,G="FIS_v2",W="https://firebaseinstallations.googleapis.com/v1",Y=36e5,nt=new te.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function pe(Z){return Z instanceof te.ZR&&Z.code.includes("request-failed")}function be({projectId:Z}){return`${W}/projects/${Z}/installations`}function Ne(Z){return{token:Z.token,requestStatus:2,expiresIn:$(Z.expiresIn),creationTime:Date.now()}}function Ue(Z,_e){return Re.apply(this,arguments)}function Re(){return(Re=(0,_.Z)(function*(Z,_e){const Ke=(yield _e.json()).error;return nt.create("request-failed",{requestName:Z,serverCode:Ke.code,serverMessage:Ke.message,serverStatus:Ke.status})})).apply(this,arguments)}function Ee({apiKey:Z}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":Z})}function Ge(Z){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,_.Z)(function*(Z){const _e=yield Z();return _e.status>=500&&_e.status<600?Z():_e})).apply(this,arguments)}function $(Z){return Number(Z.replace("s","000"))}function Qe(){return(Qe=(0,_.Z)(function*({appConfig:Z,heartbeatServiceProvider:_e},{fid:Ve}){const Ke=be(Z),Qt=Ee(Z),jt=_e.getImmediate({optional:!0});if(jt){const Lr=yield jt.getHeartbeatsHeader();Lr&&Qt.append("x-firebase-client",Lr)}const hn={method:"POST",headers:Qt,body:JSON.stringify({fid:Ve,authVersion:G,appId:Z.appId,sdkVersion:ce})},Wi=yield Ge(()=>fetch(Ke,hn));if(Wi.ok){const Lr=yield Wi.json();return{fid:Lr.fid||Ve,registrationStatus:2,refreshToken:Lr.refreshToken,authToken:Ne(Lr.authToken)}}throw yield Ue("Create Installation",Wi)})).apply(this,arguments)}function ft(Z){return new Promise(_e=>{setTimeout(_e,Z)})}const re=/^[cdef][\w-]{21}$/,he="";function me(){try{const Z=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(Z),Z[0]=112+Z[0]%16;const Ve=function Me(Z){return function Je(Z){return btoa(String.fromCharCode(...Z)).replace(/\+/g,"-").replace(/\//g,"_")}(Z).substr(0,22)}(Z);return re.test(Ve)?Ve:he}catch{return he}}function Fe(Z){return`${Z.appName}!${Z.appId}`}const je=new Map;function et(Z,_e){const Ve=Fe(Z);It(Ve,_e),function nn(Z,_e){const Ve=function vt(){return!Xe&&"BroadcastChannel"in self&&(Xe=new BroadcastChannel("[Firebase] FID Change"),Xe.onmessage=Z=>{It(Z.data.key,Z.data.fid)}),Xe}();Ve&&Ve.postMessage({key:Z,fid:_e}),function Nn(){0===je.size&&Xe&&(Xe.close(),Xe=null)}()}(Ve,_e)}function It(Z,_e){const Ve=je.get(Z);if(Ve)for(const Ke of Ve)Ke(_e)}let Xe=null;const bn="firebase-installations-database",Dn=1,dn="firebase-installations-store";let ar=null;function Or(){return ar||(ar=(0,ue.X3)(bn,Dn,{upgrade:(Z,_e)=>{0===_e&&Z.createObjectStore(dn)}})),ar}function Yr(Z,_e){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,_.Z)(function*(Z,_e){const Ve=Fe(Z),Qt=(yield Or()).transaction(dn,"readwrite"),jt=Qt.objectStore(dn),Zn=yield jt.get(Ve);return yield jt.put(_e,Ve),yield Qt.done,(!Zn||Zn.fid!==_e.fid)&&et(Z,_e.fid),_e})).apply(this,arguments)}function ui(Z){return In.apply(this,arguments)}function In(){return(In=(0,_.Z)(function*(Z){const _e=Fe(Z),Ke=(yield Or()).transaction(dn,"readwrite");yield Ke.objectStore(dn).delete(_e),yield Ke.done})).apply(this,arguments)}function Pn(Z,_e){return mt.apply(this,arguments)}function mt(){return(mt=(0,_.Z)(function*(Z,_e){const Ve=Fe(Z),Qt=(yield Or()).transaction(dn,"readwrite"),jt=Qt.objectStore(dn),Zn=yield jt.get(Ve),hn=_e(Zn);return void 0===hn?yield jt.delete(Ve):yield jt.put(hn,Ve),yield Qt.done,hn&&(!Zn||Zn.fid!==hn.fid)&&et(Z,hn.fid),hn})).apply(this,arguments)}function Qr(Z){return Xr.apply(this,arguments)}function Xr(){return Xr=(0,_.Z)(function*(Z){let _e;const Ve=yield Pn(Z.appConfig,Ke=>{const Qt=function mn(Z){return en(Z||{fid:me(),registrationStatus:0})}(Ke),jt=function ur(Z,_e){if(0===_e.registrationStatus){if(!navigator.onLine)return{installationEntry:_e,registrationPromise:Promise.reject(nt.create("app-offline"))};const Ve={fid:_e.fid,registrationStatus:1,registrationTime:Date.now()},Ke=function Oi(Z,_e){return Rt.apply(this,arguments)}(Z,Ve);return{installationEntry:Ve,registrationPromise:Ke}}return 1===_e.registrationStatus?{installationEntry:_e,registrationPromise:_t(Z)}:{installationEntry:_e}}(Z,Qt);return _e=jt.registrationPromise,jt.installationEntry});return Ve.fid===he?{installationEntry:yield _e}:{installationEntry:Ve,registrationPromise:_e}}),Xr.apply(this,arguments)}function Rt(){return Rt=(0,_.Z)(function*(Z,_e){try{const Ve=yield function qe(Z,_e){return Qe.apply(this,arguments)}(Z,_e);return Yr(Z.appConfig,Ve)}catch(Ve){throw pe(Ve)&&409===Ve.customData.serverCode?yield ui(Z.appConfig):yield Yr(Z.appConfig,{fid:_e.fid,registrationStatus:0}),Ve}}),Rt.apply(this,arguments)}function _t(Z){return St.apply(this,arguments)}function St(){return(St=(0,_.Z)(function*(Z){let _e=yield Un(Z.appConfig);for(;1===_e.registrationStatus;)yield ft(100),_e=yield Un(Z.appConfig);if(0===_e.registrationStatus){const{installationEntry:Ve,registrationPromise:Ke}=yield Qr(Z);return Ke||Ve}return _e})).apply(this,arguments)}function Un(Z){return Pn(Z,_e=>{if(!_e)throw nt.create("installation-not-found");return en(_e)})}function en(Z){return function $n(Z){return 1===Z.registrationStatus&&Z.registrationTime+ge<Date.now()}(Z)?{fid:Z.fid,registrationStatus:0}:Z}function er(){return(er=(0,_.Z)(function*({appConfig:Z,heartbeatServiceProvider:_e},Ve){const Ke=function zi(Z,{fid:_e}){return`${be(Z)}/${_e}/authTokens:generate`}(Z,Ve),Qt=function xe(Z,{refreshToken:_e}){const Ve=Ee(Z);return Ve.append("Authorization",function we(Z){return`${G} ${Z}`}(_e)),Ve}(Z,Ve),jt=_e.getImmediate({optional:!0});if(jt){const Lr=yield jt.getHeartbeatsHeader();Lr&&Qt.append("x-firebase-client",Lr)}const hn={method:"POST",headers:Qt,body:JSON.stringify({installation:{sdkVersion:ce,appId:Z.appId}})},Wi=yield Ge(()=>fetch(Ke,hn));if(Wi.ok)return Ne(yield Wi.json());throw yield Ue("Generate Auth Token",Wi)})).apply(this,arguments)}function cn(Z){return kr.apply(this,arguments)}function kr(){return kr=(0,_.Z)(function*(Z,_e=!1){let Ve;const Ke=yield Pn(Z.appConfig,jt=>{if(!ot(jt))throw nt.create("not-registered");const Zn=jt.authToken;if(!_e&&function bt(Z){return 2===Z.requestStatus&&!function Lt(Z){const _e=Date.now();return _e<Z.creationTime||Z.creationTime+Z.expiresIn<_e+Y}(Z)}(Zn))return jt;if(1===Zn.requestStatus)return Ve=function Yt(Z,_e){return mr.apply(this,arguments)}(Z,_e),jt;{if(!navigator.onLine)throw nt.create("app-offline");const hn=function Bt(Z){const _e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},Z),{authToken:_e})}(jt);return Ve=function He(Z,_e){return De.apply(this,arguments)}(Z,hn),hn}});return Ve?yield Ve:Ke.authToken}),kr.apply(this,arguments)}function mr(){return(mr=(0,_.Z)(function*(Z,_e){let Ve=yield ci(Z.appConfig);for(;1===Ve.authToken.requestStatus;)yield ft(100),Ve=yield ci(Z.appConfig);const Ke=Ve.authToken;return 0===Ke.requestStatus?cn(Z,_e):Ke})).apply(this,arguments)}function ci(Z){return Pn(Z,_e=>{if(!ot(_e))throw nt.create("not-registered");return function jn(Z){return 1===Z.requestStatus&&Z.requestTime+ge<Date.now()}(_e.authToken)?Object.assign(Object.assign({},_e),{authToken:{requestStatus:0}}):_e})}function De(){return De=(0,_.Z)(function*(Z,_e){try{const Ve=yield function Jn(Z,_e){return er.apply(this,arguments)}(Z,_e),Ke=Object.assign(Object.assign({},_e),{authToken:Ve});return yield Yr(Z.appConfig,Ke),Ve}catch(Ve){if(!pe(Ve)||401!==Ve.customData.serverCode&&404!==Ve.customData.serverCode){const Ke=Object.assign(Object.assign({},_e),{authToken:{requestStatus:0}});yield Yr(Z.appConfig,Ke)}else yield ui(Z.appConfig);throw Ve}}),De.apply(this,arguments)}function ot(Z){return void 0!==Z&&2===Z.registrationStatus}function A(){return(A=(0,_.Z)(function*(Z){const _e=Z,{installationEntry:Ve,registrationPromise:Ke}=yield Qr(_e);return Ke?Ke.catch(console.error):cn(_e).catch(console.error),Ve.fid})).apply(this,arguments)}function q(){return q=(0,_.Z)(function*(Z,_e=!1){const Ve=Z;return yield function B(Z){return le.apply(this,arguments)}(Ve),(yield cn(Ve,_e)).token}),q.apply(this,arguments)}function le(){return(le=(0,_.Z)(function*(Z){const{registrationPromise:_e}=yield Qr(Z);_e&&(yield _e)})).apply(this,arguments)}function cr(Z){return nt.create("missing-app-config-values",{valueName:Z})}const Jo="installations",po=Z=>{const _e=Z.getProvider("app").getImmediate(),Ve=function Cr(Z){if(!Z||!Z.options)throw cr("App Configuration");if(!Z.name)throw cr("App Name");const _e=["projectId","apiKey","appId"];for(const Ve of _e)if(!Z.options[Ve])throw cr(Ve);return{appName:Z.name,projectId:Z.options.projectId,apiKey:Z.options.apiKey,appId:Z.options.appId}}(_e);return{app:_e,appConfig:Ve,heartbeatServiceProvider:(0,X._getProvider)(_e,"heartbeat"),_delete:()=>Promise.resolve()}},go=Z=>{const _e=Z.getProvider("app").getImmediate(),Ve=(0,X._getProvider)(_e,Jo).getImmediate();return{getId:()=>function H(Z){return A.apply(this,arguments)}(Ve),getToken:Qt=>function L(Z){return q.apply(this,arguments)}(Ve,Qt)}};(function ta(){(0,X._registerComponent)(new V.wA(Jo,po,"PUBLIC")),(0,X._registerComponent)(new V.wA("installations-internal",go,"PRIVATE"))})(),(0,X.registerVersion)(ne,de),(0,X.registerVersion)(ne,de,"esm2017")},1877:(gt,Se,P)=>{P.d(Se,{Am:()=>ce,Ub:()=>ge,Yd:()=>de,in:()=>X});const _=[];var X=(()=>{return(G=X||(X={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",X;var G})();const V={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},te=X.INFO,ue={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},ne=(G,W,...Y)=>{if(W<G.logLevel)return;const Oe=(new Date).toISOString(),ye=ue[W];if(!ye)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[ye](`[${Oe}]  ${G.name}:`,...Y)};class de{constructor(W){this.name=W,this._logLevel=te,this._logHandler=ne,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in X))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?V[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...W),this._logHandler(this,X.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...W),this._logHandler(this,X.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,X.INFO,...W),this._logHandler(this,X.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,X.WARN,...W),this._logHandler(this,X.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...W),this._logHandler(this,X.ERROR,...W)}}function ge(G){_.forEach(W=>{W.setLogLevel(G)})}function ce(G,W){for(const Y of _){let Oe=null;W&&W.level&&(Oe=V[W.level]),Y.userLogHandler=null===G?null:(ye,Ye,...nt)=>{const pe=nt.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch{return null}}).filter(be=>be).join(" ");Ye>=(Oe??ye.logLevel)&&G({level:X[Ye].toLowerCase(),message:pe,args:nt,type:ye.name})}}}},5132:(gt,Se,P)=>{P.d(Se,{Gb:()=>_.Gb});var _=P(579)},259:(gt,Se,P)=>{P.d(Se,{C6:()=>_.getApps,Mq:()=>_.getApp});var _=P(9681);(0,_.registerVersion)("firebase","9.18.0","app")},9260:(gt,Se,P)=>{P.d(Se,{Z:()=>_.Z});var _=P(3942);_.Z.registerVersion("firebase","9.18.0","app-compat")},8971:(gt,Se,P)=>{P.r(Se);var _=P(5861),X=P(3942),V=P(2090),te=P(9681),ue=P(1877),ne=P(655),de=P(4859);const ce={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Y_EMAIL_SIGNIN="EMAIL_SIGNIN",Y_PASSWORD_RESET="PASSWORD_RESET",Y_RECOVER_EMAIL="RECOVER_EMAIL",Y_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",Y_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",Y_VERIFY_EMAIL="VERIFY_EMAIL";const Ye=function Oe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},nt=function ye(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pe=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ne=new ue.Yd("@firebase/auth");function Ue(y,...f){Ne.logLevel<=ue.in.ERROR&&Ne.error(`Auth (${te.SDK_VERSION}): ${y}`,...f)}function Re(y,...f){throw Ae(y,...f)}function Ee(y,...f){return Ae(y,...f)}function xe(y,f,p){const E=Object.assign(Object.assign({},nt()),{[f]:p});return new V.LL("auth","Firebase",E).create(f,{appName:y.name})}function Ge(y,f,p){if(!(f instanceof p))throw p.name!==f.constructor.name&&Re(y,"argument-error"),xe(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ae(y,...f){if("string"!=typeof y){const p=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(p,...E)}return pe.create(y,...f)}function $(y,f,...p){if(!y)throw Ae(f,...p)}function we(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Ue(f),new Error(f)}function qe(y,f){y||we(f)}const Qe=new Map;function ft(y){qe(y instanceof Function,"Expected a class definition");let f=Qe.get(y);return f?(qe(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,Qe.set(y,f),f)}function he(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function me(){return"http:"===Me()||"https:"===Me()}function Me(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class et{constructor(f,p){this.shortDelay=f,this.longDelay=p,qe(p>f,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function Fe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(me()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function it(y,f){qe(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return f?`${p}${f.startsWith("/")?f.slice(1):f}`:p}class yn{static initialize(f,p,E){this.fetchImpl=f,p&&(this.headersImpl=p),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void we("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void we("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void we("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const It={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},nn=new et(3e4,6e4);function Xe(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function vt(y,f,p,E){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,_.Z)(function*(y,f,p,E,b={}){return bn(y,b,(0,_.Z)(function*(){let M={},Q={};E&&("GET"===f?Q=E:M={body:JSON.stringify(E)});const fe=(0,V.xO)(Object.assign({key:y.config.apiKey},Q)).slice(1),Ze=yield y._getAdditionalHeaders();return Ze["Content-Type"]="application/json",y.languageCode&&(Ze["X-Firebase-Locale"]=y.languageCode),yn.fetch()(Or(y,y.config.apiHost,p,fe),Object.assign({method:f,headers:Ze,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function bn(y,f,p){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,_.Z)(function*(y,f,p){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},It),f);try{const b=new Yr(y),M=yield Promise.race([p(),b.promise]);b.clearNetworkTimeout();const Q=yield M.json();if("needConfirmation"in Q)throw Kn(y,"account-exists-with-different-credential",Q);if(M.ok&&!("errorMessage"in Q))return Q;{const fe=M.ok?Q.errorMessage:Q.error.message,[Ze,at]=fe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ze)throw Kn(y,"credential-already-in-use",Q);if("EMAIL_EXISTS"===Ze)throw Kn(y,"email-already-in-use",Q);if("USER_DISABLED"===Ze)throw Kn(y,"user-disabled",Q);const kt=E[Ze]||Ze.toLowerCase().replace(/[_\s]+/g,"-");if(at)throw xe(y,kt,at);Re(y,kt)}}catch(b){if(b instanceof V.ZR)throw b;Re(y,"internal-error",{message:String(b)})}})).apply(this,arguments)}function dn(y,f,p,E){return ar.apply(this,arguments)}function ar(){return(ar=(0,_.Z)(function*(y,f,p,E,b={}){const M=yield vt(y,f,p,E,b);return"mfaPendingCredential"in M&&Re(y,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function Or(y,f,p,E){const b=`${f}${p}?${E}`;return y.config.emulator?it(y.config,b):`${y.config.apiScheme}://${b}`}class Yr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((p,E)=>{this.timer=setTimeout(()=>E(Ee(this.auth,"network-request-failed")),nn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kn(y,f,p){const E={appName:y.name};p.email&&(E.email=p.email),p.phoneNumber&&(E.phoneNumber=p.phoneNumber);const b=Ee(y,f,E);return b.customData._tokenResponse=p,b}function In(){return(In=(0,_.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function mt(){return(mt=(0,_.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Xr(){return(Xr=(0,_.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function mn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function Rt(){return(Rt=(0,_.Z)(function*(y,f=!1){const p=(0,V.m9)(y),E=yield p.getIdToken(f),b=St(E);$(b&&b.exp&&b.auth_time&&b.iat,p.auth,"internal-error");const M="object"==typeof b.firebase?b.firebase:void 0,Q=M?.sign_in_provider;return{claims:b,token:E,authTime:mn(_t(b.auth_time)),issuedAtTime:mn(_t(b.iat)),expirationTime:mn(_t(b.exp)),signInProvider:Q||null,signInSecondFactor:M?.sign_in_second_factor||null}})).apply(this,arguments)}function _t(y){return 1e3*Number(y)}function St(y){const[f,p,E]=y.split(".");if(void 0===f||void 0===p||void 0===E)return Ue("JWT malformed, contained fewer than 3 sections"),null;try{const b=(0,V.tV)(p);return b?JSON.parse(b):(Ue("Failed to decode base64 JWT payload"),null)}catch(b){return Ue("Caught error parsing JWT payload as JSON",b?.toString()),null}}function en(y,f){return $n.apply(this,arguments)}function $n(){return($n=(0,_.Z)(function*(y,f,p=!1){if(p)return f;try{return yield f}catch(E){throw E instanceof V.ZR&&function Jn({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}class er{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var p;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const b=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,b)}}schedule(f=!1){var p=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,_.Z)(function*(){yield p.iteration()}),E)}iteration(){var f=this;return(0,_.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&f.schedule(!0))}f.schedule()})()}}class zi{constructor(f,p){this.createdAt=f,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=mn(this.lastLoginAt),this.creationTime=mn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function cn(y){return kr.apply(this,arguments)}function kr(){return kr=(0,_.Z)(function*(y){var f;const p=y.auth,E=yield y.getIdToken(),b=yield en(y,function Qr(y,f){return Xr.apply(this,arguments)}(p,{idToken:E}));$(b?.users.length,p,"internal-error");const M=b.users[0];y._notifyReloadListener(M);const Q=null!==(f=M.providerUserInfo)&&void 0!==f&&f.length?function He(y){return y.map(f=>{var{providerId:p}=f,E=(0,ne._T)(f,["providerId"]);return{providerId:p,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(M.providerUserInfo):[],fe=function ci(y,f){return[...y.filter(E=>!f.some(b=>b.providerId===E.providerId)),...f]}(y.providerData,Q),kt=!!y.isAnonymous&&!(y.email&&M.passwordHash||fe?.length),Nt={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:fe,metadata:new zi(M.createdAt,M.lastLoginAt),isAnonymous:kt};Object.assign(y,Nt)}),kr.apply(this,arguments)}function mr(){return(mr=(0,_.Z)(function*(y){const f=(0,V.m9)(y);yield cn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function ot(){return(ot=(0,_.Z)(function*(y,f){const p=yield bn(y,{},(0,_.Z)(function*(){const E=(0,V.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:b,apiKey:M}=y.config,Q=Or(y,b,"/v1/token",`key=${M}`),fe=yield y._getAdditionalHeaders();return fe["Content-Type"]="application/x-www-form-urlencoded",yn.fetch()(Q,{method:"POST",headers:fe,body:E})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class bt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){$(f.idToken,"internal-error"),$(typeof f.idToken<"u","internal-error"),$(typeof f.refreshToken<"u","internal-error");const p="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function Un(y){const f=St(y);return $(f,"internal-error"),$(typeof f.exp<"u","internal-error"),$(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,p)}getToken(f,p=!1){var E=this;return(0,_.Z)(function*(){return $(!E.accessToken||E.refreshToken,f,"user-token-expired"),p||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,p){var E=this;return(0,_.Z)(function*(){const{accessToken:b,refreshToken:M,expiresIn:Q}=yield function De(y,f){return ot.apply(this,arguments)}(f,p);E.updateTokensAndExpiration(b,M,Number(Q))})()}updateTokensAndExpiration(f,p,E){this.refreshToken=p||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,p){const{refreshToken:E,accessToken:b,expirationTime:M}=p,Q=new bt;return E&&($("string"==typeof E,"internal-error",{appName:f}),Q.refreshToken=E),b&&($("string"==typeof b,"internal-error",{appName:f}),Q.accessToken=b),M&&($("number"==typeof M,"internal-error",{appName:f}),Q.expirationTime=M),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new bt,this.toJSON())}_performRefresh(){return we("not implemented")}}function Lt(y,f){$("string"==typeof y||typeof y>"u","internal-error",{appName:f})}class Bt{constructor(f){var{uid:p,auth:E,stsTokenManager:b}=f,M=(0,ne._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new er(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=E,this.stsTokenManager=b,this.accessToken=b.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new zi(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(f){var p=this;return(0,_.Z)(function*(){const E=yield en(p,p.stsTokenManager.getToken(p.auth,f));return $(E,p.auth,"internal-error"),p.accessToken!==E&&(p.accessToken=E,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),E})()}getIdTokenResult(f){return function Oi(y){return Rt.apply(this,arguments)}(this,f)}reload(){return function Yt(y){return mr.apply(this,arguments)}(this)}_assign(f){this!==f&&($(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(p=>Object.assign({},p)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const p=new Bt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(f){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,p=!1){var E=this;return(0,_.Z)(function*(){let b=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),b=!0),p&&(yield cn(E)),yield E.auth._persistUserIfCurrent(E),b&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,_.Z)(function*(){const p=yield f.getIdToken();return yield en(f,function ui(y,f){return In.apply(this,arguments)}(f.auth,{idToken:p})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,p){var E,b,M,Q,fe,Ze,at,kt;const Nt=null!==(E=p.displayName)&&void 0!==E?E:void 0,Yn=null!==(b=p.email)&&void 0!==b?b:void 0,ts=null!==(M=p.phoneNumber)&&void 0!==M?M:void 0,gu=null!==(Q=p.photoURL)&&void 0!==Q?Q:void 0,Nh=null!==(fe=p.tenantId)&&void 0!==fe?fe:void 0,yc=null!==(Ze=p._redirectEventId)&&void 0!==Ze?Ze:void 0,mu=null!==(at=p.createdAt)&&void 0!==at?at:void 0,Os=null!==(kt=p.lastLoginAt)&&void 0!==kt?kt:void 0,{uid:gs,emailVerified:Ph,isAnonymous:Oh,providerData:_u,stsTokenManager:og}=p;$(gs&&og,f,"internal-error");const uy=bt.fromJSON(this.name,og);$("string"==typeof gs,f,"internal-error"),Lt(Nt,f.name),Lt(Yn,f.name),$("boolean"==typeof Ph,f,"internal-error"),$("boolean"==typeof Oh,f,"internal-error"),Lt(ts,f.name),Lt(gu,f.name),Lt(Nh,f.name),Lt(yc,f.name),Lt(mu,f.name),Lt(Os,f.name);const kh=new Bt({uid:gs,auth:f,email:Yn,emailVerified:Ph,displayName:Nt,isAnonymous:Oh,photoURL:gu,phoneNumber:ts,tenantId:Nh,stsTokenManager:uy,createdAt:mu,lastLoginAt:Os});return _u&&Array.isArray(_u)&&(kh.providerData=_u.map(Bl=>Object.assign({},Bl))),yc&&(kh._redirectEventId=yc),kh}static _fromIdTokenResponse(f,p,E=!1){return(0,_.Z)(function*(){const b=new bt;b.updateFromServerResponse(p);const M=new Bt({uid:p.localId,auth:f,stsTokenManager:b,isAnonymous:E});return yield cn(M),M})()}}const H=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(p,E){var b=this;return(0,_.Z)(function*(){b.storage[p]=E})()}_get(p){var E=this;return(0,_.Z)(function*(){const b=E.storage[p];return void 0===b?null:b})()}_remove(p){var E=this;return(0,_.Z)(function*(){delete E.storage[p]})()}_addListener(p,E){}_removeListener(p,E){}}return y.type="NONE",y})();function A(y,f,p){return`firebase:${y}:${f}:${p}`}class L{constructor(f,p,E){this.persistence=f,this.auth=p,this.userKey=E;const{config:b,name:M}=this.auth;this.fullUserKey=A(this.userKey,b.apiKey,M),this.fullPersistenceKey=A("persistence",b.apiKey,M),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,_.Z)(function*(){const p=yield f.persistence._get(f.fullUserKey);return p?Bt._fromJSON(f.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var p=this;return(0,_.Z)(function*(){if(p.persistence===f)return;const E=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=f,E?p.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,p,E="authUser"){return(0,_.Z)(function*(){if(!p.length)return new L(ft(H),f,E);const b=(yield Promise.all(p.map(function(){var at=(0,_.Z)(function*(kt){if(yield kt._isAvailable())return kt});return function(kt){return at.apply(this,arguments)}}()))).filter(at=>at);let M=b[0]||ft(H);const Q=A(E,f.config.apiKey,f.name);let fe=null;for(const at of p)try{const kt=yield at._get(Q);if(kt){const Nt=Bt._fromJSON(f,kt);at!==M&&(fe=Nt),M=at;break}}catch{}const Ze=b.filter(at=>at._shouldAllowMigration);return M._shouldAllowMigration&&Ze.length?(M=Ze[0],fe&&(yield M._set(Q,fe.toJSON())),yield Promise.all(p.map(function(){var at=(0,_.Z)(function*(kt){if(kt!==M)try{yield kt._remove(Q)}catch{}});return function(kt){return at.apply(this,arguments)}}())),new L(M,f,E)):new L(M,f,E)})()}}function q(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(ct(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(B(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Ot(f))return"Blackberry";if(tn(f))return"Webos";if(le(f))return"Safari";if((f.includes("chrome/")||Te(f))&&!f.includes("edge/"))return"Chrome";if(Pt(f))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function B(y=(0,V.z$)()){return/firefox\//i.test(y)}function le(y=(0,V.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Te(y=(0,V.z$)()){return/crios\//i.test(y)}function ct(y=(0,V.z$)()){return/iemobile/i.test(y)}function Pt(y=(0,V.z$)()){return/android/i.test(y)}function Ot(y=(0,V.z$)()){return/blackberry/i.test(y)}function tn(y=(0,V.z$)()){return/webos/i.test(y)}function Ct(y=(0,V.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Jo(y=(0,V.z$)()){return Ct(y)||Pt(y)||tn(y)||Ot(y)||/windows phone/i.test(y)||ct(y)}function po(y,f=[]){let p;switch(y){case"Browser":p=q((0,V.z$)());break;case"Worker":p=`${q((0,V.z$)())}-${y}`;break;default:p=y}const E=f.length?f.join(","):"FirebaseCore-web";return`${p}/JsCore/${te.SDK_VERSION}/${E}`}class go{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,p){const E=M=>new Promise((Q,fe)=>{try{Q(f(M))}catch(Ze){fe(Ze)}});E.onAbort=p,this.queue.push(E);const b=this.queue.length-1;return()=>{this.queue[b]=()=>Promise.resolve()}}runMiddleware(f){var p=this;return(0,_.Z)(function*(){if(p.auth.currentUser===f)return;const E=[];try{for(const b of p.queue)yield b(f),b.onAbort&&E.push(b.onAbort)}catch(b){E.reverse();for(const M of E)try{M()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:b?.message})}})()}}class ta{constructor(f,p,E){this.app=f,this.heartbeatServiceProvider=p,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _e(this),this.idTokenSubscription=new _e(this),this.beforeStateQueue=new go(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(f,p){var E=this;return p&&(this._popupRedirectResolver=ft(p)),this._initializationPromise=this.queue((0,_.Z)(function*(){var b,M;if(!E._deleted&&(E.persistenceManager=yield L.create(E,f),!E._deleted)){if(null!==(b=E._popupRedirectResolver)&&void 0!==b&&b._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(p),E.lastNotifiedUid=(null===(M=E.currentUser)||void 0===M?void 0:M.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,_.Z)(function*(){if(f._deleted)return;const p=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||p){if(f.currentUser&&p&&f.currentUser.uid===p.uid)return f._currentUser._assign(p),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(p,!0)}})()}initializeCurrentUser(f){var p=this;return(0,_.Z)(function*(){var E;const b=yield p.assertedPersistence.getCurrentUser();let M=b,Q=!1;if(f&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const fe=null===(E=p.redirectUser)||void 0===E?void 0:E._redirectEventId,Ze=M?._redirectEventId,at=yield p.tryRedirectSignIn(f);(!fe||fe===Ze)&&at?.user&&(M=at.user,Q=!0)}if(!M)return p.directlySetCurrentUser(null);if(!M._redirectEventId){if(Q)try{yield p.beforeStateQueue.runMiddleware(M)}catch(fe){M=b,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(fe))}return M?p.reloadAndSetCurrentUserOrClear(M):p.directlySetCurrentUser(null)}return $(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===M._redirectEventId?p.directlySetCurrentUser(M):p.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(f){var p=this;return(0,_.Z)(function*(){let E=null;try{E=yield p._popupRedirectResolver._completeRedirectFn(p,f,!0)}catch{yield p._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var p=this;return(0,_.Z)(function*(){try{yield cn(f)}catch(E){if("auth/network-request-failed"!==E?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function je(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,_.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var p=this;return(0,_.Z)(function*(){const E=f?(0,V.m9)(f):null;return E&&$(E.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(E&&E._clone(p))})()}_updateCurrentUser(f,p=!1){var E=this;return(0,_.Z)(function*(){if(!E._deleted)return f&&$(E.tenantId===f.tenantId,E,"tenant-id-mismatch"),p||(yield E.beforeStateQueue.runMiddleware(f)),E.queue((0,_.Z)(function*(){yield E.directlySetCurrentUser(f),E.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,_.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var p=this;return this.queue((0,_.Z)(function*(){yield p.assertedPersistence.setPersistence(ft(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new V.LL("auth","Firebase",f())}onAuthStateChanged(f,p,E){return this.registerStateListener(this.authStateSubscription,f,p,E)}beforeAuthStateChanged(f,p){return this.beforeStateQueue.pushCallback(f,p)}onIdTokenChanged(f,p,E){return this.registerStateListener(this.idTokenSubscription,f,p,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,p){var E=this;return(0,_.Z)(function*(){const b=yield E.getOrInitRedirectPersistenceManager(p);return null===f?b.removeCurrentUser():b.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var p=this;return(0,_.Z)(function*(){if(!p.redirectPersistenceManager){const E=f&&ft(f)||p._popupRedirectResolver;$(E,p,"argument-error"),p.redirectPersistenceManager=yield L.create(p,[ft(E._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(f){var p=this;return(0,_.Z)(function*(){var E,b;return p._isInitialized&&(yield p.queue((0,_.Z)(function*(){}))),(null===(E=p._currentUser)||void 0===E?void 0:E._redirectEventId)===f?p._currentUser:(null===(b=p.redirectUser)||void 0===b?void 0:b._redirectEventId)===f?p.redirectUser:null})()}_persistUserIfCurrent(f){var p=this;return(0,_.Z)(function*(){if(f===p.currentUser)return p.queue((0,_.Z)(function*(){return p.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(p=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,p,E,b){if(this._deleted)return()=>{};const M="function"==typeof p?p:p.next.bind(p),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return $(Q,this,"internal-error"),Q.then(()=>M(this.currentUser)),"function"==typeof p?f.addObserver(p,E,b):f.addObserver(p)}directlySetCurrentUser(f){var p=this;return(0,_.Z)(function*(){p.currentUser&&p.currentUser!==f&&p._currentUser._stopProactiveRefresh(),f&&p.isProactiveRefreshEnabled&&f._startProactiveRefresh(),p.currentUser=f,f?yield p.assertedPersistence.setCurrentUser(f):yield p.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=po(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,_.Z)(function*(){var p;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const b=yield null===(p=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return b&&(E["X-Firebase-Client"]=b),E})()}}function Z(y){return(0,V.m9)(y)}class _e{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,V.ne)(p=>this.observer=p)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ke(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function jt(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class hn{constructor(f,p){this.providerId=f,this.signInMethod=p}toJSON(){return we("not implemented")}_getIdTokenResponse(f){return we("not implemented")}_linkToIdToken(f,p){return we("not implemented")}_getReauthenticationResolver(f){return we("not implemented")}}function Wi(y,f){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,_.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:resetPassword",Xe(y,f))})).apply(this,arguments)}function as(y,f){return mi.apply(this,arguments)}function mi(){return(mi=(0,_.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ht(){return(Ht=(0,_.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:update",Xe(y,f))})).apply(this,arguments)}function Jr(){return(Jr=(0,_.Z)(function*(y,f){return dn(y,"POST","/v1/accounts:signInWithPassword",Xe(y,f))})).apply(this,arguments)}function ki(y,f){return tr.apply(this,arguments)}function tr(){return(tr=(0,_.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:sendOobCode",Xe(y,f))})).apply(this,arguments)}function kn(){return(kn=(0,_.Z)(function*(y,f){return ki(y,f)})).apply(this,arguments)}function bs(){return(bs=(0,_.Z)(function*(y,f){return ki(y,f)})).apply(this,arguments)}function us(){return(us=(0,_.Z)(function*(y,f){return ki(y,f)})).apply(this,arguments)}function mo(){return(mo=(0,_.Z)(function*(y,f){return ki(y,f)})).apply(this,arguments)}function Tr(){return(Tr=(0,_.Z)(function*(y,f){return dn(y,"POST","/v1/accounts:signInWithEmailLink",Xe(y,f))})).apply(this,arguments)}function Ss(){return(Ss=(0,_.Z)(function*(y,f){return dn(y,"POST","/v1/accounts:signInWithEmailLink",Xe(y,f))})).apply(this,arguments)}class ei extends hn{constructor(f,p,E,b=null){super("password",E),this._email=f,this._password=p,this._tenantId=b}static _fromEmailAndPassword(f,p){return new ei(f,p,"password")}static _fromEmailAndCode(f,p,E=null){return new ei(f,p,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(f){var p=this;return(0,_.Z)(function*(){switch(p.signInMethod){case"password":return function On(y,f){return Jr.apply(this,arguments)}(f,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function _o(y,f){return Tr.apply(this,arguments)}(f,{email:p._email,oobCode:p._password});default:Re(f,"internal-error")}})()}_linkToIdToken(f,p){var E=this;return(0,_.Z)(function*(){switch(E.signInMethod){case"password":return as(f,{idToken:p,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Ds(y,f){return Ss.apply(this,arguments)}(f,{idToken:p,email:E._email,oobCode:E._password});default:Re(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function _i(y,f){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,_.Z)(function*(y,f){return dn(y,"POST","/v1/accounts:signInWithIdp",Xe(y,f))})).apply(this,arguments)}class qi extends hn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const p=new qi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(p.idToken=f.idToken),f.accessToken&&(p.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(p.nonce=f.nonce),f.pendingToken&&(p.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(p.accessToken=f.oauthToken,p.secret=f.oauthTokenSecret):Re("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:b}=p,M=(0,ne._T)(p,["providerId","signInMethod"]);if(!E||!b)return null;const Q=new qi(E,b);return Q.idToken=M.idToken||void 0,Q.accessToken=M.accessToken||void 0,Q.secret=M.secret,Q.nonce=M.nonce,Q.pendingToken=M.pendingToken||null,Q}_getIdTokenResponse(f){return _i(f,this.buildRequest())}_linkToIdToken(f,p){const E=this.buildRequest();return E.idToken=p,_i(f,E)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,_i(f,p)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),f.postBody=(0,V.xO)(p)}return f}}function $a(){return($a=(0,_.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:sendVerificationCode",Xe(y,f))})).apply(this,arguments)}function vo(){return(vo=(0,_.Z)(function*(y,f){return dn(y,"POST","/v1/accounts:signInWithPhoneNumber",Xe(y,f))})).apply(this,arguments)}function Fr(){return(Fr=(0,_.Z)(function*(y,f){const p=yield dn(y,"POST","/v1/accounts:signInWithPhoneNumber",Xe(y,f));if(p.temporaryProof)throw Kn(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Qc={USER_NOT_FOUND:"user-not-found"};function vi(){return(vi=(0,_.Z)(function*(y,f){return dn(y,"POST","/v1/accounts:signInWithPhoneNumber",Xe(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Qc)})).apply(this,arguments)}class cs extends hn{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,p){return new cs({verificationId:f,verificationCode:p})}static _fromTokenResponse(f,p){return new cs({phoneNumber:f,temporaryProof:p})}_getIdTokenResponse(f){return function yo(y,f){return vo.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,p){return function ia(y,f){return Fr.apply(this,arguments)}(f,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function yi(y,f){return vi.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:p,verificationId:E,verificationCode:b}=this.params;return f&&p?{temporaryProof:f,phoneNumber:p}:{sessionInfo:E,code:b}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:p,verificationCode:E,phoneNumber:b,temporaryProof:M}=f;return E||p||b||M?new cs({verificationId:p,verificationCode:E,phoneNumber:b,temporaryProof:M}):null}}class Gr{constructor(f){var p,E,b,M,Q,fe;const Ze=(0,V.zd)((0,V.pd)(f)),at=null!==(p=Ze.apiKey)&&void 0!==p?p:null,kt=null!==(E=Ze.oobCode)&&void 0!==E?E:null,Nt=function sa(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(b=Ze.mode)&&void 0!==b?b:null);$(at&&kt&&Nt,"argument-error"),this.apiKey=at,this.operation=Nt,this.code=kt,this.continueUrl=null!==(M=Ze.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(Q=Ze.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(fe=Ze.tenantId)&&void 0!==fe?fe:null}static parseLink(f){const p=function ja(y){const f=(0,V.zd)((0,V.pd)(y)).link,p=f?(0,V.zd)((0,V.pd)(f)).deep_link_id:null,E=(0,V.zd)((0,V.pd)(y)).deep_link_id;return(E?(0,V.zd)((0,V.pd)(E)).link:null)||E||p||f||y}(f);try{return new Gr(p)}catch{return null}}}let Xc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,E){return ei._fromEmailAndPassword(p,E)}static credentialWithLink(p,E){const b=Gr.parseLink(E);return $(b,"argument-error"),ei._fromEmailAndCode(p,b.code,b.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class As{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class wo extends As{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class oa extends wo{static credentialFromJSON(f){const p="string"==typeof f?JSON.parse(f):f;return $("providerId"in p&&"signInMethod"in p,"argument-error"),qi._fromParams(p)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return $(f.idToken||f.accessToken,"argument-error"),qi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return oa.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return oa.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:p,oauthAccessToken:E,oauthTokenSecret:b,pendingToken:M,nonce:Q,providerId:fe}=f;if(!E&&!b&&!p&&!M||!fe)return null;try{return new oa(fe)._credential({idToken:p,accessToken:E,nonce:Q,pendingToken:M})}catch{return null}}}let Vu=(()=>{class y extends wo{constructor(){super("facebook.com")}static credential(p){return qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Vd=(()=>{class y extends wo{constructor(){super("google.com"),this.addScope("profile")}static credential(p,E){return qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:E})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:E,oauthAccessToken:b}=p;if(!E&&!b)return null;try{return y.credential(E,b)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Bd=(()=>{class y extends wo{constructor(){super("github.com")}static credential(p){return qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class ls extends hn{constructor(f,p){super(f,f),this.pendingToken=p}_getIdTokenResponse(f){return _i(f,this.buildRequest())}_linkToIdToken(f,p){const E=this.buildRequest();return E.idToken=p,_i(f,E)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,_i(f,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:b,pendingToken:M}=p;return E&&b&&M&&E===b?new ls(E,M):null}static _create(f,p){return new ls(f,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ga extends As{constructor(f){$(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Ga.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Ga.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const p=ls.fromJSON(f);return $(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:p,providerId:E}=f;if(!p||!E)return null;try{return ls._create(E,p)}catch{return null}}}let el=(()=>{class y extends wo{constructor(){super("twitter.com")}static credential(p,E){return qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:E})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:E,oauthTokenSecret:b}=p;if(!E||!b)return null;try{return y.credential(E,b)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Bu(y,f){return aa.apply(this,arguments)}function aa(){return(aa=(0,_.Z)(function*(y,f){return dn(y,"POST","/v1/accounts:signUp",Xe(y,f))})).apply(this,arguments)}class Ki{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,p,E,b=!1){return(0,_.Z)(function*(){const M=yield Bt._fromIdTokenResponse(f,E,b),Q=tl(E);return new Ki({user:M,providerId:Q,_tokenResponse:E,operationType:p})})()}static _forOperation(f,p,E){return(0,_.Z)(function*(){yield f._updateTokensIfNecessary(E,!0);const b=tl(E);return new Ki({user:f,providerId:b,_tokenResponse:E,operationType:p})})()}}function tl(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function rl(){return(rl=(0,_.Z)(function*(y){var f;const p=Z(y);if(yield p._initializationPromise,null!==(f=p.currentUser)&&void 0!==f&&f.isAnonymous)return new Ki({user:p.currentUser,providerId:null,operationType:"signIn"});const E=yield Bu(p,{returnSecureToken:!0}),b=yield Ki._fromIdTokenResponse(p,"signIn",E,!0);return yield p._updateCurrentUser(b.user),b})).apply(this,arguments)}class ua extends V.ZR{constructor(f,p,E,b){var M;super(p.code,p.message),this.operationType=E,this.user=b,Object.setPrototypeOf(this,ua.prototype),this.customData={appName:f.name,tenantId:null!==(M=f.tenantId)&&void 0!==M?M:void 0,_serverResponse:p.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,p,E,b){return new ua(f,p,E,b)}}function ca(y,f,p,E){return("reauthenticate"===f?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?ua._fromErrorAndOperation(y,M,f,E):M})}function Rs(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function la(){return la=(0,_.Z)(function*(y,f){const p=(0,V.m9)(y);yield Yi(!0,p,f);const{providerUserInfo:E}=yield function Pn(y,f){return mt.apply(this,arguments)}(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[f]}),b=Rs(E||[]);return p.providerData=p.providerData.filter(M=>b.has(M.providerId)),b.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p}),la.apply(this,arguments)}function Zi(y,f){return za.apply(this,arguments)}function za(){return(za=(0,_.Z)(function*(y,f,p=!1){const E=yield en(y,f._linkToIdToken(y.auth,yield y.getIdToken()),p);return Ki._forOperation(y,"link",E)})).apply(this,arguments)}function Yi(y,f,p){return $u.apply(this,arguments)}function $u(){return($u=(0,_.Z)(function*(y,f,p){yield cn(f);const b=!1===y?"provider-already-linked":"no-such-provider";$(Rs(f.providerData).has(p)===y,f.auth,b)})).apply(this,arguments)}function il(y,f){return ju.apply(this,arguments)}function ju(){return(ju=(0,_.Z)(function*(y,f,p=!1){const{auth:E}=y,b="reauthenticate";try{const M=yield en(y,ca(E,b,f,y),p);$(M.idToken,E,"internal-error");const Q=St(M.idToken);$(Q,E,"internal-error");const{sub:fe}=Q;return $(y.uid===fe,E,"user-mismatch"),Ki._forOperation(y,b,M)}catch(M){throw"auth/user-not-found"===M?.code&&Re(E,"user-mismatch"),M}})).apply(this,arguments)}function Eo(y,f){return sl.apply(this,arguments)}function sl(){return(sl=(0,_.Z)(function*(y,f,p=!1){const E="signIn",b=yield ca(y,E,f),M=yield Ki._fromIdTokenResponse(y,E,b);return p||(yield y._updateCurrentUser(M.user)),M})).apply(this,arguments)}function ti(y,f){return k.apply(this,arguments)}function k(){return(k=(0,_.Z)(function*(y,f){return Eo(Z(y),f)})).apply(this,arguments)}function O(y,f){return z.apply(this,arguments)}function z(){return(z=(0,_.Z)(function*(y,f){const p=(0,V.m9)(y);return yield Yi(!1,p,f.providerId),Zi(p,f)})).apply(this,arguments)}function oe(y,f){return ke.apply(this,arguments)}function ke(){return(ke=(0,_.Z)(function*(y,f){return il((0,V.m9)(y),f)})).apply(this,arguments)}function xt(){return(xt=(0,_.Z)(function*(y,f){return dn(y,"POST","/v1/accounts:signInWithCustomToken",Xe(y,f))})).apply(this,arguments)}function Tn(){return Tn=(0,_.Z)(function*(y,f){const p=Z(y),E=yield function Be(y,f){return xt.apply(this,arguments)}(p,{token:f,returnSecureToken:!0}),b=yield Ki._fromIdTokenResponse(p,"signIn",E);return yield p._updateCurrentUser(b.user),b}),Tn.apply(this,arguments)}class rn{constructor(f,p){this.factorId=f,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(f,p){return"phoneInfo"in p?An._fromServerResponse(f,p):Re(f,"internal-error")}}class An extends rn{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,p){return new An(p)}}function Gt(y,f,p){var E;$((null===(E=p.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),$(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=p.url,f.dynamicLinkDomain=p.dynamicLinkDomain,f.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&($(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=p.iOS.bundleId),p.android&&($(p.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=p.android.installApp,f.androidMinimumVersionCode=p.android.minimumVersion,f.androidPackageName=p.android.packageName)}function br(){return br=(0,_.Z)(function*(y,f,p){const E=(0,V.m9)(y),b={requestType:"PASSWORD_RESET",email:f};p&&Gt(E,b,p),yield function na(y,f){return bs.apply(this,arguments)}(E,b)}),br.apply(this,arguments)}function Ws(){return(Ws=(0,_.Z)(function*(y,f,p){yield Wi((0,V.m9)(y),{oobCode:f,newPassword:p})})).apply(this,arguments)}function li(){return li=(0,_.Z)(function*(y,f){yield function ut(y,f){return Ht.apply(this,arguments)}((0,V.m9)(y),{oobCode:f})}),li.apply(this,arguments)}function xs(y,f){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,_.Z)(function*(y,f){const p=(0,V.m9)(y),E=yield Wi(p,{oobCode:f}),b=E.requestType;switch($(b,p,"internal-error"),b){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":$(E.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":$(E.mfaInfo,p,"internal-error");default:$(E.email,p,"internal-error")}let M=null;return E.mfaInfo&&(M=rn._fromServerResponse(Z(p),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:M},operation:b}})).apply(this,arguments)}function $d(){return($d=(0,_.Z)(function*(y,f){const{data:p}=yield xs((0,V.m9)(y),f);return p.email})).apply(this,arguments)}function jd(){return(jd=(0,_.Z)(function*(y,f,p){const E=Z(y),b=yield Bu(E,{returnSecureToken:!0,email:f,password:p}),M=yield Ki._fromIdTokenResponse(E,"signIn",b);return yield E._updateCurrentUser(M.user),M})).apply(this,arguments)}function fn(){return fn=(0,_.Z)(function*(y,f,p){const E=(0,V.m9)(y),b={requestType:"EMAIL_SIGNIN",email:f};$(p.handleCodeInApp,E,"argument-error"),p&&Gt(E,b,p),yield function qt(y,f){return us.apply(this,arguments)}(E,b)}),fn.apply(this,arguments)}function Ur(){return(Ur=(0,_.Z)(function*(y,f,p){const E=(0,V.m9)(y),b=Xc.credentialWithLink(f,p||he());return $(b._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),ti(E,b)})).apply(this,arguments)}function ha(){return(ha=(0,_.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:createAuthUri",Xe(y,f))})).apply(this,arguments)}function ol(){return ol=(0,_.Z)(function*(y,f){const E={identifier:f,continueUri:me()?he():"http://localhost"},{signinMethods:b}=yield function R_(y,f){return ha.apply(this,arguments)}((0,V.m9)(y),E);return b||[]}),ol.apply(this,arguments)}function al(){return al=(0,_.Z)(function*(y,f){const p=(0,V.m9)(y),b={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&Gt(p.auth,b,f);const{email:M}=yield function Gs(y,f){return kn.apply(this,arguments)}(p.auth,b);M!==y.email&&(yield y.reload())}),al.apply(this,arguments)}function ul(){return ul=(0,_.Z)(function*(y,f,p){const E=(0,V.m9)(y),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};p&&Gt(E.auth,M,p);const{email:Q}=yield function zs(y,f){return mo.apply(this,arguments)}(E.auth,M);Q!==y.email&&(yield y.reload())}),ul.apply(this,arguments)}function di(){return(di=(0,_.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function fa(){return fa=(0,_.Z)(function*(y,{displayName:f,photoURL:p}){if(void 0===f&&void 0===p)return;const E=(0,V.m9)(y),M={idToken:yield E.getIdToken(),displayName:f,photoUrl:p,returnSecureToken:!0},Q=yield en(E,function zr(y,f){return di.apply(this,arguments)}(E.auth,M));E.displayName=Q.displayName||null,E.photoURL=Q.photoUrl||null;const fe=E.providerData.find(({providerId:Ze})=>"password"===Ze);fe&&(fe.displayName=E.displayName,fe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Q)}),fa.apply(this,arguments)}function Mp(y,f,p){return Np.apply(this,arguments)}function Np(){return(Np=(0,_.Z)(function*(y,f,p){const{auth:E}=y,M={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(M.email=f),p&&(M.password=p);const Q=yield en(y,as(E,M));yield y._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class Ks{constructor(f,p,E={}){this.isNewUser=f,this.providerId=p,this.profile=E}}class Hd extends Ks{constructor(f,p,E,b){super(f,p,E),this.username=b}}class N_ extends Ks{constructor(f,p){super(f,"facebook.com",p)}}class Pp extends Hd{constructor(f,p){super(f,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class G0 extends Ks{constructor(f,p){super(f,"google.com",p)}}class P_ extends Hd{constructor(f,p,E){super(f,"twitter.com",p,E)}}function Op(y){const{user:f,_tokenResponse:p}=y;return f.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function M_(y){var f,p;if(!y)return null;const{providerId:E}=y,b=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},M=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&y?.idToken){const Q=null===(p=null===(f=St(y.idToken))||void 0===f?void 0:f.firebase)||void 0===p?void 0:p.sign_in_provider;if(Q)return new Ks(M,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!E)return null;switch(E){case"facebook.com":return new N_(M,b);case"github.com":return new Pp(M,b);case"google.com":return new G0(M,b);case"twitter.com":return new P_(M,b,y.screenName||null);case"custom":case"anonymous":return new Ks(M,null);default:return new Ks(M,E,b)}}(p)}class Rn{constructor(f,p,E){this.type=f,this.credential=p,this.auth=E}static _fromIdtoken(f,p){return new Rn("enroll",f,p)}static _fromMfaPendingCredential(f){return new Rn("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var p,E;if(f?.multiFactorSession){if(null!==(p=f.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Rn._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(E=f.multiFactorSession)&&void 0!==E&&E.idToken)return Rn._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Lp{constructor(f,p,E){this.session=f,this.hints=p,this.signInResolver=E}static _fromError(f,p){const E=Z(f),b=p.customData._serverResponse,M=(b.mfaInfo||[]).map(fe=>rn._fromServerResponse(E,fe));$(b.mfaPendingCredential,E,"internal-error");const Q=Rn._fromMfaPendingCredential(b.mfaPendingCredential);return new Lp(Q,M,function(){var fe=(0,_.Z)(function*(Ze){const at=yield Ze._process(E,Q);delete b.mfaInfo,delete b.mfaPendingCredential;const kt=Object.assign(Object.assign({},b),{idToken:at.idToken,refreshToken:at.refreshToken});switch(p.operationType){case"signIn":const Nt=yield Ki._fromIdTokenResponse(E,p.operationType,kt);return yield E._updateCurrentUser(Nt.user),Nt;case"reauthenticate":return $(p.user,E,"internal-error"),Ki._forOperation(p.user,p.operationType,kt);default:Re(E,"internal-error")}});return function(Ze){return fe.apply(this,arguments)}}())}resolveSignIn(f){var p=this;return(0,_.Z)(function*(){return p.signInResolver(f)})()}}class Fp{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(E=>rn._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new Fp(f)}getSession(){var f=this;return(0,_.Z)(function*(){return Rn._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,p){var E=this;return(0,_.Z)(function*(){const b=f,M=yield E.getSession(),Q=yield en(E.user,b._process(E.user.auth,M,p));return yield E.user._updateTokensIfNecessary(Q),E.user.reload()})()}unenroll(f){var p=this;return(0,_.Z)(function*(){const E="string"==typeof f?f:f.uid,b=yield p.user.getIdToken();try{const M=yield en(p.user,function Q0(y,f){return vt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Xe(y,f))}(p.user.auth,{idToken:b,mfaEnrollmentId:E}));p.enrolledFactors=p.enrolledFactors.filter(({uid:Q})=>Q!==E),yield p.user._updateTokensIfNecessary(M),yield p.user.reload()}catch(M){throw M}})()}}const Hu=new WeakMap,pa="__sak";class qa{constructor(f,p){this.storageRetriever=f,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(pa,"1"),this.storage.removeItem(pa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,p){return this.storage.setItem(f,JSON.stringify(p)),Promise.resolve()}_get(f){const p=this.storage.getItem(f);return Promise.resolve(p?JSON.parse(p):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Gu=(()=>{class y extends qa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,E)=>this.onStorageEvent(p,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ka(){const y=(0,V.z$)();return le(y)||Ct(y)}()&&function ea(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Jo(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const E of Object.keys(this.listeners)){const b=this.storage.getItem(E),M=this.localCache[E];b!==M&&p(E,M,b)}}onStorageEvent(p,E=!1){if(!p.key)return void this.forAllChangedKeys((fe,Ze,at)=>{this.notifyListeners(fe,at)});const b=p.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const fe=this.storage.getItem(b);if(p.newValue!==fe)null!==p.newValue?this.storage.setItem(b,p.newValue):this.storage.removeItem(b);else if(this.localCache[b]===p.newValue&&!E)return}const M=()=>{const fe=this.storage.getItem(b);!E&&this.localCache[b]===fe||this.notifyListeners(b,fe)},Q=this.storage.getItem(b);!function cr(){return(0,V.w1)()&&10===document.documentMode}()||Q===p.newValue||p.newValue===p.oldValue?M():setTimeout(M,10)}notifyListeners(p,E){this.localCache[p]=E;const b=this.listeners[p];if(b)for(const M of Array.from(b))M(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,E,b)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:E,newValue:b}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,E){var b=()=>super._set,M=this;return(0,_.Z)(function*(){yield b().call(M,p,E),M.localCache[p]=JSON.stringify(E)})()}_get(p){var E=()=>super._get,b=this;return(0,_.Z)(function*(){const M=yield E().call(b,p);return b.localCache[p]=JSON.stringify(M),M})()}_remove(p){var E=()=>super._remove,b=this;return(0,_.Z)(function*(){yield E().call(b,p),delete b.localCache[p]})()}}return y.type="LOCAL",y})(),Ns=(()=>{class y extends qa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,E){}_removeListener(p,E){}}return y.type="SESSION",y})();let F_=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const E=this.receivers.find(M=>M.isListeningto(p));if(E)return E;const b=new y(p);return this.receivers.push(b),b}isListeningto(p){return this.eventTarget===p}handleEvent(p){var E=this;return(0,_.Z)(function*(){const b=p,{eventId:M,eventType:Q,data:fe}=b.data,Ze=E.handlersMap[Q];if(!Ze?.size)return;b.ports[0].postMessage({status:"ack",eventId:M,eventType:Q});const at=Array.from(Ze).map(function(){var Nt=(0,_.Z)(function*(Yn){return Yn(b.origin,fe)});return function(Yn){return Nt.apply(this,arguments)}}()),kt=yield function X0(y){return Promise.all(y.map(function(){var f=(0,_.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(E){return{fulfilled:!1,reason:E}}});return function(p){return f.apply(this,arguments)}}()))}(at);b.ports[0].postMessage({status:"done",eventId:M,eventType:Q,response:kt})})()}_subscribe(p,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(E)}_unsubscribe(p,E){this.handlersMap[p]&&E&&this.handlersMap[p].delete(E),(!E||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function To(y="",f=10){let p="";for(let E=0;E<f;E++)p+=Math.floor(10*Math.random());return y+p}class zd{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,p,E=50){var b=this;return(0,_.Z)(function*(){const M=typeof MessageChannel<"u"?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let Q,fe;return new Promise((Ze,at)=>{const kt=To("",20);M.port1.start();const Nt=setTimeout(()=>{at(new Error("unsupported_event"))},E);fe={messageChannel:M,onMessage(Yn){const ts=Yn;if(ts.data.eventId===kt)switch(ts.data.status){case"ack":clearTimeout(Nt),Q=setTimeout(()=>{at(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),Ze(ts.data.response);break;default:clearTimeout(Nt),clearTimeout(Q),at(new Error("invalid_response"))}}},b.handlers.add(fe),M.port1.addEventListener("message",fe.onMessage),b.target.postMessage({eventType:f,eventId:kt,data:p},[M.port2])}).finally(()=>{fe&&b.removeMessageHandler(fe)})})()}}function Dr(){return window}function bo(){return typeof Dr().WorkerGlobalScope<"u"&&"function"==typeof Dr().importScripts}function Ys(){return(Ys=(0,_.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const zu="firebaseLocalStorageDb",U_=1,ga="firebaseLocalStorage",Wu="fbase_key";class Do{constructor(f){this.request=f}toPromise(){return new Promise((f,p)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Kd(y,f){return y.transaction([ga],f?"readwrite":"readonly").objectStore(ga)}function qu(){const y=indexedDB.open(zu,U_);return new Promise((f,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore(ga,{keyPath:Wu})}catch(b){p(b)}}),y.addEventListener("success",(0,_.Z)(function*(){const E=y.result;E.objectStoreNames.contains(ga)?f(E):(E.close(),yield function Zd(){const y=indexedDB.deleteDatabase(zu);return new Do(y).toPromise()}(),f(yield qu()))}))})}function hl(y,f,p){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,_.Z)(function*(y,f,p){const E=Kd(y,!0).put({[Wu]:f,value:p});return new Do(E).toPromise()})).apply(this,arguments)}function ma(){return(ma=(0,_.Z)(function*(y,f){const p=Kd(y,!1).get(f),E=yield new Do(p).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Ku(y,f){const p=Kd(y,!0).delete(f);return new Do(p).toPromise()}const Za=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,_.Z)(function*(){return p.db||(p.db=yield qu()),p.db})()}_withRetries(p){var E=this;return(0,_.Z)(function*(){let b=0;for(;;)try{const M=yield E._openDb();return yield p(M)}catch(M){if(b++>3)throw M;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,_.Z)(function*(){return bo()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,_.Z)(function*(){p.receiver=F_._getInstance(function qd(){return bo()?self:null}()),p.receiver._subscribe("keyChanged",function(){var E=(0,_.Z)(function*(b,M){return{keyProcessed:(yield p._poll()).includes(M.key)}});return function(b,M){return E.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var E=(0,_.Z)(function*(b,M){return["keyChanged"]});return function(b,M){return E.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,_.Z)(function*(){var E,b;if(p.activeServiceWorker=yield function dl(){return Ys.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new zd(p.activeServiceWorker);const M=yield p.sender._send("ping",{},800);M&&null!==(E=M[0])&&void 0!==E&&E.fulfilled&&null!==(b=M[0])&&void 0!==b&&b.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var E=this;return(0,_.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Wd(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:p},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const p=yield qu();return yield hl(p,pa,"1"),yield Ku(p,pa),!0}catch{}return!1})()}_withPendingWrite(p){var E=this;return(0,_.Z)(function*(){E.pendingWrites++;try{yield p()}finally{E.pendingWrites--}})()}_set(p,E){var b=this;return(0,_.Z)(function*(){return b._withPendingWrite((0,_.Z)(function*(){return yield b._withRetries(M=>hl(M,p,E)),b.localCache[p]=E,b.notifyServiceWorker(p)}))})()}_get(p){var E=this;return(0,_.Z)(function*(){const b=yield E._withRetries(M=>function V_(y,f){return ma.apply(this,arguments)}(M,p));return E.localCache[p]=b,b})()}_remove(p){var E=this;return(0,_.Z)(function*(){return E._withPendingWrite((0,_.Z)(function*(){return yield E._withRetries(b=>Ku(b,p)),delete E.localCache[p],E.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,_.Z)(function*(){const E=yield p._withRetries(Q=>{const fe=Kd(Q,!1).getAll();return new Do(fe).toPromise()});if(!E)return[];if(0!==p.pendingWrites)return[];const b=[],M=new Set;for(const{fbase_key:Q,value:fe}of E)M.add(Q),JSON.stringify(p.localCache[Q])!==JSON.stringify(fe)&&(p.notifyListeners(Q,fe),b.push(Q));for(const Q of Object.keys(p.localCache))p.localCache[Q]&&!M.has(Q)&&(p.notifyListeners(Q,null),b.push(Q));return b})()}notifyListeners(p,E){this.localCache[p]=E;const b=this.listeners[p];if(b)for(const M of Array.from(b))M(E)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function fl(){return(fl=(0,_.Z)(function*(y){return(yield vt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function pl(y){return new Promise((f,p)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=f,E.onerror=b=>{const M=Ee("internal-error");M.customData=b,p(M)},E.type="text/javascript",E.charset="UTF-8",function Xd(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(E)})}function _a(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Yu=1e12;class Ya{constructor(f){this.auth=f,this.counter=Yu,this._widgets=new Map}render(f,p){const E=this.counter;return this._widgets.set(E,new $_(f,this.auth.name,p||{})),this.counter++,E}reset(f){var p;const E=f||Yu;null===(p=this._widgets.get(E))||void 0===p||p.delete(),this._widgets.delete(E)}getResponse(f){var p;return(null===(p=this._widgets.get(f||Yu))||void 0===p?void 0:p.getResponse())||""}execute(f){var p=this;return(0,_.Z)(function*(){var E;return null===(E=p._widgets.get(f||Yu))||void 0===E||E.execute(),""})()}}class $_{constructor(f,p,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const b="string"==typeof f?document.getElementById(f):f;$(b,"argument-error",{appName:p}),this.container=b,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Jd(y){const f=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)f.push(p.charAt(Math.floor(Math.random()*p.length)));return f.join("")}(50);const{callback:f,"expired-callback":p}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Qu=_a("rcb"),jp=new et(3e4,6e4);class gl{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=Dr().grecaptcha)||void 0===f||!f.render)}load(f,p=""){return $(function Qa(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),f,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Dr().grecaptcha):new Promise((E,b)=>{const M=Dr().setTimeout(()=>{b(Ee(f,"network-request-failed"))},jp.get());Dr()[Qu]=()=>{Dr().clearTimeout(M),delete Dr()[Qu];const fe=Dr().grecaptcha;if(!fe)return void b(Ee(f,"internal-error"));const Ze=fe.render;fe.render=(at,kt)=>{const Nt=Ze(at,kt);return this.counter++,Nt},this.hostLanguage=p,E(fe)},pl(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:Qu,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(M),b(Ee(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var p;return!(null===(p=Dr().grecaptcha)||void 0===p||!p.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Xu{load(f){return(0,_.Z)(function*(){return new Ya(f)})()}clearedOneInstance(){}}const ya="recaptcha",j_={theme:"light",type:"image"};class th{constructor(f,p=Object.assign({},j_),E){this.parameters=p,this.type=ya,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Z(E),this.isInvisible="invisible"===this.parameters.size,$(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const b="string"==typeof f?document.getElementById(f):f;$(b,this.auth,"argument-error"),this.container=b,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Xu:new gl,this.validateStartingState()}verify(){var f=this;return(0,_.Z)(function*(){f.assertNotDestroyed();const p=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(p)||new Promise(M=>{const Q=fe=>{fe&&(f.tokenChangeListeners.delete(Q),M(fe))};f.tokenChangeListeners.add(Q),f.isInvisible&&E.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){$(!this.parameters.sitekey,this.auth,"argument-error"),$(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),$(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return p=>{if(this.tokenChangeListeners.forEach(E=>E(p)),"function"==typeof f)f(p);else if("string"==typeof f){const E=Dr()[f];"function"==typeof E&&E(p)}}}assertNotDestroyed(){$(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,_.Z)(function*(){if(yield f.init(),!f.widgetId){let p=f.container;if(!f.isInvisible){const E=document.createElement("div");p.appendChild(E),p=E}f.widgetId=f.getAssertedRecaptcha().render(p,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,_.Z)(function*(){$(me()&&!bo(),f.auth,"internal-error"),yield function So(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const p=yield function Bp(y){return fl.apply(this,arguments)}(f.auth);$(p,f.auth,"internal-error"),f.parameters.sitekey=p})()}getAssertedRecaptcha(){return $(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class nh{constructor(f,p){this.verificationId=f,this.onConfirmation=p}confirm(f){const p=cs._fromVerification(this.verificationId,f);return this.onConfirmation(p)}}function xn(){return(xn=(0,_.Z)(function*(y,f,p){const E=Z(y),b=yield Hp(E,f,(0,V.m9)(p));return new nh(b,M=>ti(E,M))})).apply(this,arguments)}function ml(){return(ml=(0,_.Z)(function*(y,f,p){const E=(0,V.m9)(y);yield Yi(!1,E,"phone");const b=yield Hp(E.auth,f,(0,V.m9)(p));return new nh(b,M=>O(E,M))})).apply(this,arguments)}function G_(){return(G_=(0,_.Z)(function*(y,f,p){const E=(0,V.m9)(y),b=yield Hp(E.auth,f,(0,V.m9)(p));return new nh(b,M=>oe(E,M))})).apply(this,arguments)}function Hp(y,f,p){return z_.apply(this,arguments)}function z_(){return z_=(0,_.Z)(function*(y,f,p){var E;const b=yield p.verify();try{let M;if($("string"==typeof b,y,"argument-error"),$(p.type===ya,y,"argument-error"),M="string"==typeof f?{phoneNumber:f}:f,"session"in M){const Q=M.session;if("phoneNumber"in M)return $("enroll"===Q.type,y,"internal-error"),(yield function Z0(y,f){return vt(y,"POST","/v2/accounts/mfaEnrollment:start",Xe(y,f))}(y,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:b}})).phoneSessionInfo.sessionInfo;{$("signin"===Q.type,y,"internal-error");const fe=(null===(E=M.multiFactorHint)||void 0===E?void 0:E.uid)||M.multiFactorUid;return $(fe,y,"missing-multi-factor-info"),(yield function Qd(y,f){return vt(y,"POST","/v2/accounts/mfaSignIn:start",Xe(y,f))}(y,{mfaPendingCredential:Q.credential,mfaEnrollmentId:fe,phoneSignInInfo:{recaptchaToken:b}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield function ra(y,f){return $a.apply(this,arguments)}(y,{phoneNumber:M.phoneNumber,recaptchaToken:b});return Q}}finally{p._reset()}}),z_.apply(this,arguments)}function Xa(){return(Xa=(0,_.Z)(function*(y,f){yield Zi((0,V.m9)(y),f)})).apply(this,arguments)}let rh=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=Z(p)}verifyPhoneNumber(p,E){return Hp(this.auth,p,(0,V.m9)(E))}static credential(p,E){return cs._fromVerification(p,E)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:E,temporaryProof:b}=p;return E&&b?cs._fromTokenResponse(E,b):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Ju(y,f){return f?ft(f):($(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class _r extends hn{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return _i(f,this._buildIdpRequest())}_linkToIdToken(f,p){return _i(f,this._buildIdpRequest(p))}_getReauthenticationResolver(f){return _i(f,this._buildIdpRequest())}_buildIdpRequest(f){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(p.idToken=f),p}}function Gp(y){return Eo(y.auth,new _r(y),y.bypassAuthState)}function ec(y){const{auth:f,user:p}=y;return $(p,f,"internal-error"),il(p,new _r(y),y.bypassAuthState)}function tE(y){return Li.apply(this,arguments)}function Li(){return(Li=(0,_.Z)(function*(y){const{auth:f,user:p}=y;return $(p,f,"internal-error"),Zi(p,new _r(y),y.bypassAuthState)})).apply(this,arguments)}class va{constructor(f,p,E,b,M=!1){this.auth=f,this.resolver=E,this.user=b,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var f=this;return new Promise(function(){var p=(0,_.Z)(function*(E,b){f.pendingPromise={resolve:E,reject:b};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(M){f.reject(M)}});return function(E,b){return p.apply(this,arguments)}}())}onAuthEvent(f){var p=this;return(0,_.Z)(function*(){const{urlResponse:E,sessionId:b,postBody:M,tenantId:Q,error:fe,type:Ze}=f;if(fe)return void p.reject(fe);const at={auth:p.auth,requestUri:E,sessionId:b,tenantId:Q||void 0,postBody:M||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Ze)(at))}catch(kt){p.reject(kt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Gp;case"linkViaPopup":case"linkViaRedirect":return tE;case"reauthViaPopup":case"reauthViaRedirect":return ec;default:Re(this.auth,"internal-error")}}resolve(f){qe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){qe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const W_=new et(2e3,1e4);function Ja(){return(Ja=(0,_.Z)(function*(y,f,p){const E=Z(y);Ge(y,f,As);const b=Ju(E,p);return new Xt(E,"signInViaPopup",f,b).executeNotNull()})).apply(this,arguments)}function q_(){return(q_=(0,_.Z)(function*(y,f,p){const E=(0,V.m9)(y);Ge(E.auth,f,As);const b=Ju(E.auth,p);return new Xt(E.auth,"reauthViaPopup",f,b,E).executeNotNull()})).apply(this,arguments)}function Z_(){return(Z_=(0,_.Z)(function*(y,f,p){const E=(0,V.m9)(y);Ge(E.auth,f,As);const b=Ju(E.auth,p);return new Xt(E.auth,"linkViaPopup",f,b,E).executeNotNull()})).apply(this,arguments)}let Xt=(()=>{class y extends va{constructor(p,E,b,M,Q){super(p,E,M,Q),this.provider=b,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,_.Z)(function*(){const E=yield p.execute();return $(E,p.auth,"internal-error"),E})()}onExecution(){var p=this;return(0,_.Z)(function*(){qe(1===p.filter.length,"Popup operations only handle one event");const E=To();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],E),p.authWindow.associatedEvent=E,p.resolver._originValidation(p.auth).catch(b=>{p.reject(b)}),p.resolver._isIframeWebStorageSupported(p.auth,b=>{b||p.reject(Ee(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var E,b;this.pollId=null!==(b=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==b&&b.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,W_.get())};p()}}return y.currentPopupAction=null,y})();const Ro="pendingRedirect",st=new Map;class xo extends va{constructor(f,p,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,p=this;return(0,_.Z)(function*(){let E=st.get(p.auth._key());if(!E){try{const M=(yield function Qi(y,f){return sh.apply(this,arguments)}(p.resolver,p.auth))?yield f().call(p):null;E=()=>Promise.resolve(M)}catch(b){E=()=>Promise.reject(b)}st.set(p.auth._key(),E)}return p.bypassAuthState||st.set(p.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var p=()=>super.onAuthEvent,E=this;return(0,_.Z)(function*(){if("signInViaRedirect"===f.type)return p().call(E,f);if("unknown"!==f.type){if(f.eventId){const b=yield E.auth._redirectUserForId(f.eventId);if(b)return E.user=b,p().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function sh(){return(sh=(0,_.Z)(function*(y,f){const p=_l(f),E=zp(y);if(!(yield E._isAvailable()))return!1;const b="true"===(yield E._get(p));return yield E._remove(p),b})).apply(this,arguments)}function eu(y,f){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,_.Z)(function*(y,f){return zp(y)._set(_l(f),"true")})).apply(this,arguments)}function oh(y,f){st.set(y._key(),f)}function zp(y){return ft(y._redirectPersistence)}function _l(y){return A(Ro,y.config.apiKey,y.name)}function yl(y,f,p){return function ah(y,f,p){return Xi.apply(this,arguments)}(y,f,p)}function Xi(){return(Xi=(0,_.Z)(function*(y,f,p){const E=Z(y);Ge(y,f,As),yield E._initializationPromise;const b=Ju(E,p);return yield eu(b,E),b._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function Tt(y,f,p){return function tc(y,f,p){return uh.apply(this,arguments)}(y,f,p)}function uh(){return(uh=(0,_.Z)(function*(y,f,p){const E=(0,V.m9)(y);Ge(E.auth,f,As),yield E.auth._initializationPromise;const b=Ju(E.auth,p);yield eu(b,E.auth);const M=yield Ps(E);return b._openRedirect(E.auth,f,"reauthViaRedirect",M)})).apply(this,arguments)}function Wp(y,f,p){return function nc(y,f,p){return Ln.apply(this,arguments)}(y,f,p)}function Ln(){return(Ln=(0,_.Z)(function*(y,f,p){const E=(0,V.m9)(y);Ge(E.auth,f,As),yield E.auth._initializationPromise;const b=Ju(E.auth,p);yield Yi(!1,E,f.providerId),yield eu(b,E.auth);const M=yield Ps(E);return b._openRedirect(E.auth,f,"linkViaRedirect",M)})).apply(this,arguments)}function vl(){return(vl=(0,_.Z)(function*(y,f){return yield Z(y)._initializationPromise,wl(y,f,!1)})).apply(this,arguments)}function wl(y,f){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,_.Z)(function*(y,f,p=!1){const E=Z(y),b=Ju(E,f),Q=yield new xo(E,b,p).execute();return Q&&!p&&(delete Q.user._redirectEventId,yield E._persistUserIfCurrent(Q.user),yield E._setRedirectUser(null,f)),Q})).apply(this,arguments)}function Ps(y){return ch.apply(this,arguments)}function ch(){return(ch=(0,_.Z)(function*(y){const f=To(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class wa{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let p=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(p=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function dh(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Q_(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=f,p=!0)),p}sendToConsumer(f,p){var E;if(f.error&&!Q_(f)){const b=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";p.onError(Ee(this.auth,b))}else p.onAuthEvent(f)}isEventForConsumer(f,p){const E=null===p.eventId||!!f.eventId&&f.eventId===p.eventId;return p.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(lh(f))}saveEventToCache(f){this.cachedEventUids.add(lh(f)),this.lastProcessedEventTime=Date.now()}}function lh(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Q_({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===f?.code}function tu(y){return ds.apply(this,arguments)}function ds(){return(ds=(0,_.Z)(function*(y,f={}){return vt(y,"GET","/v1/projects",f)})).apply(this,arguments)}const rc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yr=/^https?/;function ic(){return(ic=(0,_.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield tu(y);for(const p of f)try{if(Hn(p))return}catch{}Re(y,"unauthorized-domain")})).apply(this,arguments)}function Hn(y){const f=he(),{protocol:p,hostname:E}=new URL(f);if(y.startsWith("chrome-extension://")){const Q=new URL(y);return""===Q.hostname&&""===E?"chrome-extension:"===p&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===p&&Q.hostname===E}if(!yr.test(p))return!1;if(rc.test(y))return E===y;const b=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+b+"|"+b+")$","i").test(E)}const nu=new et(3e4,6e4);function sc(){const y=Dr().___jsl;if(y?.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let Sr=null;const X_=new et(5e3,15e3),rE="__/auth/iframe",hs="emulator/auth/iframe",iu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ea(y){const f=y.config;$(f.authDomain,y,"auth-domain-config-required");const p=f.emulator?it(f,hs):`https://${y.config.authDomain}/${rE}`,E={apiKey:f.apiKey,appName:y.name,v:te.SDK_VERSION},b=hi.get(y.config.apiHost);b&&(E.eid=b);const M=y._getFrameworks();return M.length&&(E.fw=M.join(",")),`${p}?${(0,V.xO)(E).slice(1)}`}function Mo(){return Mo=(0,_.Z)(function*(y){const f=yield function ru(y){return Sr=Sr||function Ui(y){return new Promise((f,p)=>{var E,b,M;function Q(){sc(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{sc(),p(Ee(y,"network-request-failed"))},timeout:nu.get()})}if(null!==(b=null===(E=Dr().gapi)||void 0===E?void 0:E.iframes)&&void 0!==b&&b.Iframe)f(gapi.iframes.getContext());else{if(null===(M=Dr().gapi)||void 0===M||!M.load){const fe=_a("iframefcb");return Dr()[fe]=()=>{gapi.load?Q():p(Ee(y,"network-request-failed"))},pl(`https://apis.google.com/js/api.js?onload=${fe}`).catch(Ze=>p(Ze))}Q()}}).catch(f=>{throw Sr=null,f})}(y),Sr}(y),p=Dr().gapi;return $(p,y,"internal-error"),f.open({where:document.body,url:Ea(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iu,dontclear:!0},E=>new Promise(function(){var b=(0,_.Z)(function*(M,Q){yield E.restyle({setHideOnLeave:!1});const fe=Ee(y,"network-request-failed"),Ze=Dr().setTimeout(()=>{Q(fe)},X_.get());function at(){Dr().clearTimeout(Ze),M(E)}E.ping(at).then(at,()=>{Q(fe)})});return function(M,Q){return b.apply(this,arguments)}}()))}),Mo.apply(this,arguments)}const fh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ph=500,gh=600,Zp="_blank",El="http://localhost";class zt{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const su="__/auth/handler",ey="emulator/auth/handler";function Il(y,f,p,E,b,M){$(y.config.authDomain,y,"auth-domain-config-required"),$(y.config.apiKey,y,"invalid-api-key");const Q={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:E,v:te.SDK_VERSION,eventId:b};if(f instanceof As){f.setDefaultLanguage(y.languageCode),Q.providerId=f.providerId||"",(0,V.xb)(f.getCustomParameters())||(Q.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Ze,at]of Object.entries(M||{}))Q[Ze]=at}if(f instanceof wo){const Ze=f.getScopes().filter(at=>""!==at);Ze.length>0&&(Q.scopes=Ze.join(","))}y.tenantId&&(Q.tid=y.tenantId);const fe=Q;for(const Ze of Object.keys(fe))void 0===fe[Ze]&&delete fe[Ze];return`${function Ji({config:y}){return y.emulator?it(y,ey):`https://${y.authDomain}/${su}`}(y)}?${(0,V.xO)(fe).slice(1)}`}const Cl="webStorageSupport",mh=class Yp{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ns,this._completeRedirectFn=wl,this._overrideRedirectResult=oh}_openPopup(f,p,E,b){var M=this;return(0,_.Z)(function*(){var Q;qe(null===(Q=M.eventManagers[f._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const fe=Il(f,p,E,he(),b);return function Ii(y,f,p,E=ph,b=gh){const M=Math.max((window.screen.availHeight-b)/2,0).toString(),Q=Math.max((window.screen.availWidth-E)/2,0).toString();let fe="";const Ze=Object.assign(Object.assign({},fh),{width:E.toString(),height:b.toString(),top:M,left:Q}),at=(0,V.z$)().toLowerCase();p&&(fe=Te(at)?Zp:p),B(at)&&(f=f||El,Ze.scrollbars="yes");const kt=Object.entries(Ze).reduce((Yn,[ts,gu])=>`${Yn}${ts}=${gu},`,"");if(function Cr(y=(0,V.z$)()){var f;return Ct(y)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(at)&&"_self"!==fe)return function J_(y,f){const p=document.createElement("a");p.href=y,p.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(E)}(f||"",fe),new zt(null);const Nt=window.open(f||"",fe,kt);$(Nt,y,"popup-blocked");try{Nt.focus()}catch{}return new zt(Nt)}(f,fe,To())})()}_openRedirect(f,p,E,b){var M=this;return(0,_.Z)(function*(){return yield M._originValidation(f),function ll(y){Dr().location.href=y}(Il(f,p,E,he(),b)),new Promise(()=>{})})()}_initialize(f){const p=f._key();if(this.eventManagers[p]){const{manager:b,promise:M}=this.eventManagers[p];return b?Promise.resolve(b):(qe(M,"If manager is not set, promise should be"),M)}const E=this.initAndGetManager(f);return this.eventManagers[p]={promise:E},E.catch(()=>{delete this.eventManagers[p]}),E}initAndGetManager(f){var p=this;return(0,_.Z)(function*(){const E=yield function iE(y){return Mo.apply(this,arguments)}(f),b=new wa(f);return E.register("authEvent",M=>($(M?.authEvent,f,"invalid-auth-event"),{status:b.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[f._key()]={manager:b},p.iframes[f._key()]=E,b})()}_isIframeWebStorageSupported(f,p){this.iframes[f._key()].send(Cl,{type:Cl},b=>{var M;const Q=null===(M=b?.[0])||void 0===M?void 0:M[Cl];void 0!==Q&&p(!!Q),Re(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function hh(y){return ic.apply(this,arguments)}(f)),this.originValidationPromises[p]}get _shouldInitProactively(){return Jo()||le()||Ct()}};class ty{constructor(f){this.factorId=f}_process(f,p,E){switch(p.type){case"enroll":return this._finalizeEnroll(f,p.credential,E);case"signin":return this._finalizeSignIn(f,p.credential);default:return we("unexpected MultiFactorSessionType")}}}class Ar extends ty{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Ar(f)}_finalizeEnroll(f,p,E){return function Y0(y,f){return vt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Xe(y,f))}(f,{idToken:p,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,p){return function Vp(y,f){return vt(y,"POST","/v2/accounts/mfaSignIn:finalize",Xe(y,f))}(f,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let No=(()=>{class y{constructor(){}static assertion(p){return Ar._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var Vr="@firebase/auth";class _h{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var p=this;return(0,_.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const p=this.auth.onIdTokenChanged(E=>{f(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,p),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const p=this.internalListeners.get(f);p&&(this.internalListeners.delete(f),p(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ci(){return window}(0,V.Pz)("authIdTokenMaxAge"),function ni(y){(0,te._registerComponent)(new de.wA("auth",(f,{options:p})=>{const E=f.getProvider("app").getImmediate(),b=f.getProvider("heartbeat"),{apiKey:M,authDomain:Q}=E.options;return((fe,Ze)=>{$(M&&!M.includes(":"),"invalid-api-key",{appName:fe.name}),$(!Q?.includes(":"),"argument-error",{appName:fe.name});const at={apiKey:M,authDomain:Q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:po(y)},kt=new ta(fe,Ze,at);return function re(y,f){const p=f?.persistence||[],E=(Array.isArray(p)?p:[p]).map(ft);f?.errorMap&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(E,f?.popupRedirectResolver)}(kt,p),kt})(E,b)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,p,E)=>{f.getProvider("auth-internal").initialize()})),(0,te._registerComponent)(new de.wA("auth-internal",f=>{const p=Z(f.getProvider("auth").getImmediate());return new _h(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,te.registerVersion)(Vr,"0.21.5",function bl(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,te.registerVersion)(Vr,"0.21.5","esm2017")}("Browser");const sn=2e3;function Al(){return Al=(0,_.Z)(function*(y,f,p){var E;const{BuildInfo:b}=Ci();qe(f.sessionId,"AuthEvent did not contain a session ID");const M=yield function uc(y){return Rl.apply(this,arguments)}(f.sessionId),Q={};return Ct()?Q.ibi=b.packageName:Pt()?Q.apn=b.packageName:Re(y,"operation-not-supported-in-this-environment"),b.displayName&&(Q.appDisplayName=b.displayName),Q.sessionId=M,Il(y,p,f.type,void 0,null!==(E=f.eventId)&&void 0!==E?E:void 0,Q)}),Al.apply(this,arguments)}function yh(){return(yh=(0,_.Z)(function*(y){const{BuildInfo:f}=Ci(),p={};Ct()?p.iosBundleId=f.packageName:Pt()?p.androidPackageName=f.packageName:Re(y,"operation-not-supported-in-this-environment"),yield tu(y,p)})).apply(this,arguments)}function vh(){return(vh=(0,_.Z)(function*(y,f,p){const{cordova:E}=Ci();let b=()=>{};try{yield new Promise((M,Q)=>{let fe=null;function Ze(){var Nt;M();const Yn=null===(Nt=E.plugins.browsertab)||void 0===Nt?void 0:Nt.close;"function"==typeof Yn&&Yn(),"function"==typeof p?.close&&p.close()}function at(){fe||(fe=window.setTimeout(()=>{Q(Ee(y,"redirect-cancelled-by-user"))},sn))}function kt(){"visible"===document?.visibilityState&&at()}f.addPassiveListener(Ze),document.addEventListener("resume",at,!1),Pt()&&document.addEventListener("visibilitychange",kt,!1),b=()=>{f.removePassiveListener(Ze),document.removeEventListener("resume",at,!1),document.removeEventListener("visibilitychange",kt,!1),fe&&window.clearTimeout(fe)}})}finally{b()}})).apply(this,arguments)}function Rl(){return(Rl=(0,_.Z)(function*(y){const f=function au(y){if(qe(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),p=new Uint8Array(f);for(let E=0;E<y.length;E++)p[E]=y.charCodeAt(E);return p}(y),p=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(p)).map(b=>b.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const wh=20;class xl extends wa{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(f)),super.onEvent(f)}initialized(){var f=this;return(0,_.Z)(function*(){yield f.initPromise})()}}function Nl(y){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,_.Z)(function*(y){const f=yield uu()._get(Ch(y));return f&&(yield uu()._remove(Ch(y))),f})).apply(this,arguments)}function ny(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<wh;p++){const E=Math.floor(Math.random()*f.length);y.push(f.charAt(E))}return y.join("")}function uu(){return ft(Gu)}function Ch(y){return A("authEvent",y.config.apiKey,y.name)}function Pl(y){if(!y?.includes("?"))return{};const[f,...p]=y.split("?");return(0,V.zd)(p.join("?"))}const lc=class cc{constructor(){this._redirectPersistence=Ns,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=wl,this._overrideRedirectResult=oh}_initialize(f){var p=this;return(0,_.Z)(function*(){const E=f._key();let b=p.eventManagers.get(E);return b||(b=new xl(f),p.eventManagers.set(E,b),p.attachCallbackListeners(f,b)),b})()}_openPopup(f){Re(f,"operation-not-supported-in-this-environment")}_openRedirect(f,p,E,b){var M=this;return(0,_.Z)(function*(){!function Po(y){var f,p,E,b,M,Q,fe,Ze,at,kt;const Nt=Ci();$("function"==typeof(null===(f=Nt?.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),$(typeof(null===(p=Nt?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),$("function"==typeof(null===(M=null===(b=null===(E=Nt?.cordova)||void 0===E?void 0:E.plugins)||void 0===b?void 0:b.browsertab)||void 0===M?void 0:M.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(Ze=null===(fe=null===(Q=Nt?.cordova)||void 0===Q?void 0:Q.plugins)||void 0===fe?void 0:fe.browsertab)||void 0===Ze?void 0:Ze.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(kt=null===(at=Nt?.cordova)||void 0===at?void 0:at.InAppBrowser)||void 0===kt?void 0:kt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const Q=yield M._initialize(f);yield Q.initialized(),Q.resetRedirect(),function Y_(){st.clear()}(),yield M._originValidation(f);const fe=function Xs(y,f,p=null){return{type:f,eventId:p,urlResponse:null,sessionId:ny(),postBody:null,tenantId:y.tenantId,error:Ee(y,"no-auth-event")}}(f,E,b);yield function Ml(y,f){return uu()._set(Ch(y),f)}(f,fe);const Ze=yield function oc(y,f,p){return Al.apply(this,arguments)}(f,fe,p),at=yield function Ca(y){const{cordova:f}=Ci();return new Promise(p=>{f.plugins.browsertab.isAvailable(E=>{let b=null;E?f.plugins.browsertab.openUrl(y):b=f.InAppBrowser.open(y,function Sn(y=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(b)})})}(Ze);return function ac(y,f,p){return vh.apply(this,arguments)}(f,Q,at)})()}_isIframeWebStorageSupported(f,p){throw new Error("Method not implemented.")}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Ia(y){return yh.apply(this,arguments)}(f)),this.originValidationPromises[p]}attachCallbackListeners(f,p){const{universalLinks:E,handleOpenURL:b,BuildInfo:M}=Ci(),Q=setTimeout((0,_.Z)(function*(){yield Nl(f),p.onEvent(Ol())}),500),fe=function(){var kt=(0,_.Z)(function*(Nt){clearTimeout(Q);const Yn=yield Nl(f);let ts=null;Yn&&Nt?.url&&(ts=function Ih(y,f){var p,E;const b=function iy(y){const f=Pl(y),p=f.link?decodeURIComponent(f.link):void 0,E=Pl(p).link,b=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Pl(b).link||b||E||p||y}(f);if(b.includes("/__/auth/callback")){const M=Pl(b),Q=M.firebaseError?function ry(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(M.firebaseError)):null,fe=null===(E=null===(p=Q?.code)||void 0===p?void 0:p.split("auth/"))||void 0===E?void 0:E[1],Ze=fe?Ee(fe):null;return Ze?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ze,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:b,postBody:null}}return null}(Yn,Nt.url)),p.onEvent(ts||Ol())});return function(Yn){return kt.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,fe);const Ze=b,at=`${M.packageName.toLowerCase()}://`;Ci().handleOpenURL=function(){var kt=(0,_.Z)(function*(Nt){if(Nt.toLowerCase().startsWith(at)&&fe({url:Nt}),"function"==typeof Ze)try{Ze(Nt)}catch(Yn){console.error(Yn)}});return function(Nt){return kt.apply(this,arguments)}}()}};function Ol(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ee("no-auth-event")}}const bh=1e3;function es(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function ba(y=(0,V.z$)()){return!("file:"!==es()&&"ionic:"!==es()&&"capacitor:"!==es()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function kl(){try{const y=self.localStorage,f=To();if(y)return y.setItem(f,"1"),y.removeItem(f),!function tg(y=(0,V.z$)()){return function hc(){return(0,V.w1)()&&11===document?.documentMode}()||function fc(y=(0,V.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,V.hl)()}catch{return Js()&&(0,V.hl)()}return!1}function Js(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ll(){return(function eg(){return"http:"===es()||"https:"===es()}()||(0,V.ru)()||ba())&&!function dc(){return(0,V.b$)()||(0,V.UG)()}()&&kl()&&!Js()}function Fl(){return ba()&&typeof document<"u"}function cu(){return(cu=(0,_.Z)(function*(){return!!Fl()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},bh);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Rr={LOCAL:"local",NONE:"none",SESSION:"session"},Da=$,du="persistence";function Oo(y){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,_.Z)(function*(y){yield y._initializationPromise;const f=fs(),p=A(du,y.config.apiKey,y.name);f&&f.setItem(p,y._getPersistence())})).apply(this,arguments)}function fs(){var y;try{return(null===(y=function lu(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Ah=$;class fi{constructor(){this.browserResolver=ft(mh),this.cordovaResolver=ft(lc),this.underlyingResolver=null,this._redirectPersistence=Ns,this._completeRedirectFn=wl,this._overrideRedirectResult=oh}_initialize(f){var p=this;return(0,_.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,p,E,b){var M=this;return(0,_.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(f,p,E,b)})()}_openRedirect(f,p,E,b){var M=this;return(0,_.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(f,p,E,b)})()}_isIframeWebStorageSupported(f,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,p)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Fl()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ah(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,_.Z)(function*(){if(f.underlyingResolver)return;const p=yield function Dh(){return cu.apply(this,arguments)}();f.underlyingResolver=p?f.cordovaResolver:f.browserResolver})()}}function fu(y){return y.unwrap()}function pu(y){return Sa(y)}function Sa(y){const{_tokenResponse:f}=y instanceof V.ZR?y.customData:y;if(!f)return null;if(!(y instanceof V.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return rh.credentialFromResult(y);const p=f.providerId;if(!p||p===ce.PASSWORD)return null;let E;switch(p){case ce.GOOGLE:E=Vd;break;case ce.FACEBOOK:E=Vu;break;case ce.GITHUB:E=Bd;break;case ce.TWITTER:E=el;break;default:const{oauthIdToken:b,oauthAccessToken:M,oauthTokenSecret:Q,pendingToken:fe,nonce:Ze}=f;return M||Q||b||fe?fe?p.startsWith("saml.")?ls._create(p,fe):qi._fromParams({providerId:p,signInMethod:p,pendingToken:fe,idToken:b,accessToken:M}):new oa(p).credential({idToken:b,accessToken:M,rawNonce:Ze}):null}return y instanceof V.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function Ti(y,f){return f.catch(p=>{throw p instanceof V.ZR&&function Rh(y,f){var p;const E=null===(p=f.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===f?.code)f.resolver=new oy(y,function K0(y,f){var p;const E=(0,V.m9)(y),b=f;return $(f.customData.operationType,E,"argument-error"),$(null===(p=b.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,E,"argument-error"),Lp._fromError(E,b)}(y,f));else if(E){const b=Sa(f),M=f;b&&(M.credential=b,M.tenantId=E.tenantId||void 0,M.email=E.email||void 0,M.phoneNumber=E.phoneNumber||void 0)}}(y,p),p}).then(p=>{const b=p.user;return{operationType:p.operationType,credential:pu(p),additionalUserInfo:Op(p),user:ps.getOrCreate(b)}})}function xh(y,f){return ng.apply(this,arguments)}function ng(){return(ng=(0,_.Z)(function*(y,f){const p=yield f;return{verificationId:p.verificationId,confirm:E=>Ti(y,p.confirm(E))}})).apply(this,arguments)}class oy{constructor(f,p){this.resolver=p,this.auth=function pc(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Ti(fu(this.auth),this.resolver.resolveSignIn(f))}}class ps{constructor(f){this._delegate=f,this.multiFactor=function Gd(y){const f=(0,V.m9)(y);return Hu.has(f)||Hu.set(f,Fp._fromUser(f)),Hu.get(f)}(f)}static getOrCreate(f){return ps.USER_MAP.has(f)||ps.USER_MAP.set(f,new ps(f)),ps.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var p=this;return(0,_.Z)(function*(){return Ti(p.auth,O(p._delegate,f))})()}linkWithPhoneNumber(f,p){var E=this;return(0,_.Z)(function*(){return xh(E.auth,function J0(y,f,p){return ml.apply(this,arguments)}(E._delegate,f,p))})()}linkWithPopup(f){var p=this;return(0,_.Z)(function*(){return Ti(p.auth,function K_(y,f,p){return Z_.apply(this,arguments)}(p._delegate,f,fi))})()}linkWithRedirect(f){var p=this;return(0,_.Z)(function*(){return yield Oo(Z(p.auth)),Wp(p._delegate,f,fi)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var p=this;return(0,_.Z)(function*(){return Ti(p.auth,oe(p._delegate,f))})()}reauthenticateWithPhoneNumber(f,p){return xh(this.auth,function H_(y,f,p){return G_.apply(this,arguments)}(this._delegate,f,p))}reauthenticateWithPopup(f){return Ti(this.auth,function nE(y,f,p){return q_.apply(this,arguments)}(this._delegate,f,fi))}reauthenticateWithRedirect(f){var p=this;return(0,_.Z)(function*(){return yield Oo(Z(p.auth)),Tt(p._delegate,f,fi)})()}sendEmailVerification(f){return function Rp(y,f){return al.apply(this,arguments)}(this._delegate,f)}unlink(f){var p=this;return(0,_.Z)(function*(){return yield function Ap(y,f){return la.apply(this,arguments)}(p._delegate,f),p})()}updateEmail(f){return function Ms(y,f){return Mp((0,V.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function xp(y,f){return Mp((0,V.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function eE(y,f){return Xa.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function x_(y,f){return fa.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,p){return function H0(y,f,p){return ul.apply(this,arguments)}(this._delegate,f,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ps.USER_MAP=new WeakMap;const gc=$;let Mh=(()=>{class y{constructor(p,E){if(this.app=p,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:b}=p.options;gc(b,"invalid-api-key",{appName:p.name}),gc(b,"invalid-api-key",{appName:p.name});const M=typeof window<"u"?fi:void 0;this._delegate=E.initialize({options:{persistence:Vl(b,p.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(Ye),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ps.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,E){!function Ve(y,f,p){const E=Z(y);$(E._canInitEmulator,E,"emulator-config-failed"),$(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const b=!!p?.disableWarnings,M=Ke(f),{host:Q,port:fe}=function Qt(y){const f=Ke(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!p)return{host:"",port:null};const E=p[2].split("@").pop()||"",b=/^(\[[^\]]+\])(:|$)/.exec(E);if(b){const M=b[1];return{host:M,port:jt(E.substr(M.length+1))}}{const[M,Q]=E.split(":");return{host:M,port:jt(Q)}}}(f);E.config.emulator={url:`${M}//${Q}${null===fe?"":`:${fe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Q,port:fe,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:b})}),b||function Zn(){function y(){const f=document.createElement("p"),p=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,E)}applyActionCode(p){return function Ft(y,f){return li.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return xs(this._delegate,p)}confirmPasswordReset(p,E){return function da(y,f,p){return Ws.apply(this,arguments)}(this._delegate,p,E)}createUserWithEmailAndPassword(p,E){var b=this;return(0,_.Z)(function*(){return Ti(b._delegate,function A_(y,f,p){return jd.apply(this,arguments)}(b._delegate,p,E))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function qs(y,f){return ol.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function $0(y,f){return"EMAIL_SIGNIN"===Gr.parseLink(f)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,_.Z)(function*(){gc(Ll(),p._delegate,"operation-not-supported-in-this-environment");const E=yield function qp(y,f){return vl.apply(this,arguments)}(p._delegate,fi);return E?Ti(p._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Ta(y,f){Z(y)._logFramework(f)}(this._delegate,p)}onAuthStateChanged(p,E,b){const{next:M,error:Q,complete:fe}=mc(p,E,b);return this._delegate.onAuthStateChanged(M,Q,fe)}onIdTokenChanged(p,E,b){const{next:M,error:Q,complete:fe}=mc(p,E,b);return this._delegate.onIdTokenChanged(M,Q,fe)}sendSignInLinkToEmail(p,E){return function Pe(y,f,p){return fn.apply(this,arguments)}(this._delegate,p,E)}sendPasswordResetEmail(p,E){return function Io(y,f,p){return br.apply(this,arguments)}(this._delegate,p,E||void 0)}setPersistence(p){var E=this;return(0,_.Z)(function*(){let b;switch(function Sh(y,f){Da(Object.values(Rr).includes(f),y,"invalid-persistence-type"),(0,V.b$)()?Da(f!==Rr.SESSION,y,"unsupported-persistence-type"):(0,V.UG)()?Da(f===Rr.NONE,y,"unsupported-persistence-type"):Js()?Da(f===Rr.NONE||f===Rr.LOCAL&&(0,V.hl)(),y,"unsupported-persistence-type"):Da(f===Rr.NONE||kl(),y,"unsupported-persistence-type")}(E._delegate,p),p){case Rr.SESSION:b=Ns;break;case Rr.LOCAL:b=(yield ft(Za)._isAvailable())?Za:Gu;break;case Rr.NONE:b=H;break;default:return Re("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(b)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Ti(this._delegate,function nl(y){return rl.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Ti(this._delegate,ti(this._delegate,p))}signInWithCustomToken(p){return Ti(this._delegate,function Vn(y,f){return Tn.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,E){return Ti(this._delegate,function lr(y,f,p){return ti((0,V.m9)(y),Xc.credential(f,p))}(this._delegate,p,E))}signInWithEmailLink(p,E){return Ti(this._delegate,function j0(y,f,p){return Ur.apply(this,arguments)}(this._delegate,p,E))}signInWithPhoneNumber(p,E){return xh(this._delegate,function Ao(y,f,p){return xn.apply(this,arguments)}(this._delegate,p,E))}signInWithPopup(p){var E=this;return(0,_.Z)(function*(){return gc(Ll(),E._delegate,"operation-not-supported-in-this-environment"),Ti(E._delegate,function ih(y,f,p){return Ja.apply(this,arguments)}(E._delegate,p,fi))})()}signInWithRedirect(p){var E=this;return(0,_.Z)(function*(){return gc(Ll(),E._delegate,"operation-not-supported-in-this-environment"),yield Oo(E._delegate),yl(E._delegate,p,fi)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function S_(y,f){return $d.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Rr,y})();function mc(y,f,p){let E=y;"function"!=typeof y&&({next:E,error:f,complete:p}=y);const b=E;return{next:Q=>b(Q&&ps.getOrCreate(Q)),error:f,complete:p}}function Vl(y,f){const p=function hu(y,f){const p=fs();if(!p)return[];const E=A(du,y,f);switch(p.getItem(E)){case Rr.NONE:return[H];case Rr.LOCAL:return[Za,Ns];case Rr.SESSION:return[Ns];default:return[]}}(y,f);if(typeof self<"u"&&!p.includes(Za)&&p.push(Za),typeof window<"u")for(const E of[Gu,Ns])p.includes(E)||p.push(E);return p.includes(H)||p.push(H),p}class _c{constructor(){this.providerId="phone",this._delegate=new rh(fu(X.Z.auth()))}static credential(f,p){return rh.credential(f,p)}verifyPhoneNumber(f,p){return this._delegate.verifyPhoneNumber(f,p)}unwrap(){return this._delegate}}_c.PHONE_SIGN_IN_METHOD=rh.PHONE_SIGN_IN_METHOD,_c.PROVIDER_ID=rh.PROVIDER_ID;const rg=$;class ig{constructor(f,p,E=X.Z.app()){var b;rg(null===(b=E.options)||void 0===b?void 0:b.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new th(f,p,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ay(y){y.INTERNAL.registerComponent(new de.wA("auth-compat",f=>{const p=f.getProvider("app-compat").getImmediate(),E=f.getProvider("auth");return new Mh(p,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Y_EMAIL_SIGNIN,PASSWORD_RESET:Y_PASSWORD_RESET,RECOVER_EMAIL:Y_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Y_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Y_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Y_VERIFY_EMAIL}},EmailAuthProvider:Xc,FacebookAuthProvider:Vu,GithubAuthProvider:Bd,GoogleAuthProvider:Vd,OAuthProvider:oa,SAMLAuthProvider:Ga,PhoneAuthProvider:_c,PhoneMultiFactorGenerator:No,RecaptchaVerifier:ig,TwitterAuthProvider:el,Auth:Mh,AuthCredential:hn,Error:V.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.3.5")}(X.Z)},8766:(gt,Se,P)=>{P.d(Se,{Lj:()=>Re,X3:()=>Ue});var _=P(5861);const X=($,we)=>we.some(qe=>$ instanceof qe);let V,te;const de=new WeakMap,ge=new WeakMap,ce=new WeakMap,G=new WeakMap,W=new WeakMap;let ye={get($,we,qe){if($ instanceof IDBTransaction){if("done"===we)return ge.get($);if("objectStoreNames"===we)return $.objectStoreNames||ce.get($);if("store"===we)return qe.objectStoreNames[1]?void 0:qe.objectStore(qe.objectStoreNames[0])}return be($[we])},set:($,we,qe)=>($[we]=qe,!0),has:($,we)=>$ instanceof IDBTransaction&&("done"===we||"store"===we)||we in $};function pe($){return"function"==typeof $?function nt($){return $!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ne(){return te||(te=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes($)?function(...we){return $.apply(Ne(this),we),be(de.get(this))}:function(...we){return be($.apply(Ne(this),we))}:function(we,...qe){const Qe=$.call(Ne(this),we,...qe);return ce.set(Qe,we.sort?we.sort():[we]),be(Qe)}}($):($ instanceof IDBTransaction&&function Oe($){if(ge.has($))return;const we=new Promise((qe,Qe)=>{const ft=()=>{$.removeEventListener("complete",Je),$.removeEventListener("error",re),$.removeEventListener("abort",re)},Je=()=>{qe(),ft()},re=()=>{Qe($.error||new DOMException("AbortError","AbortError")),ft()};$.addEventListener("complete",Je),$.addEventListener("error",re),$.addEventListener("abort",re)});ge.set($,we)}($),X($,function ue(){return V||(V=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy($,ye):$)}function be($){if($ instanceof IDBRequest)return function Y($){const we=new Promise((qe,Qe)=>{const ft=()=>{$.removeEventListener("success",Je),$.removeEventListener("error",re)},Je=()=>{qe(be($.result)),ft()},re=()=>{Qe($.error),ft()};$.addEventListener("success",Je),$.addEventListener("error",re)});return we.then(qe=>{qe instanceof IDBCursor&&de.set(qe,$)}).catch(()=>{}),W.set(we,$),we}($);if(G.has($))return G.get($);const we=pe($);return we!==$&&(G.set($,we),W.set(we,$)),we}const Ne=$=>W.get($);function Ue($,we,{blocked:qe,upgrade:Qe,blocking:ft,terminated:Je}={}){const re=indexedDB.open($,we),he=be(re);return Qe&&re.addEventListener("upgradeneeded",me=>{Qe(be(re.result),me.oldVersion,me.newVersion,be(re.transaction))}),qe&&re.addEventListener("blocked",()=>qe()),he.then(me=>{Je&&me.addEventListener("close",()=>Je()),ft&&me.addEventListener("versionchange",()=>ft())}).catch(()=>{}),he}function Re($,{blocked:we}={}){const qe=indexedDB.deleteDatabase($);return we&&qe.addEventListener("blocked",()=>we()),be(qe).then(()=>{})}const Ee=["get","getKey","getAll","getAllKeys","count"],xe=["put","add","delete","clear"],Ge=new Map;function Ae($,we){if(!($ instanceof IDBDatabase)||we in $||"string"!=typeof we)return;if(Ge.get(we))return Ge.get(we);const qe=we.replace(/FromIndex$/,""),Qe=we!==qe,ft=xe.includes(qe);if(!(qe in(Qe?IDBIndex:IDBObjectStore).prototype)||!ft&&!Ee.includes(qe))return;const Je=function(){var re=(0,_.Z)(function*(he,...me){const Me=this.transaction(he,ft?"readwrite":"readonly");let Fe=Me.store;return Qe&&(Fe=Fe.index(me.shift())),(yield Promise.all([Fe[qe](...me),ft&&Me.done]))[0]});return function(me){return re.apply(this,arguments)}}();return Ge.set(we,Je),Je}!function Ye($){ye=$(ye)}($=>({...$,get:(we,qe,Qe)=>Ae(we,qe)||$.get(we,qe,Qe),has:(we,qe)=>!!Ae(we,qe)||$.has(we,qe)}))},5861:(gt,Se,P)=>{function _(V,te,ue,ne,de,ge,ce){try{var G=V[ge](ce),W=G.value}catch(Y){return void ue(Y)}G.done?te(W):Promise.resolve(W).then(ne,de)}function X(V){return function(){var te=this,ue=arguments;return new Promise(function(ne,de){var ge=V.apply(te,ue);function ce(W){_(ge,ne,de,ce,G,"next",W)}function G(W){_(ge,ne,de,ce,G,"throw",W)}ce(void 0)})}}P.d(Se,{Z:()=>X})}},gt=>{gt(gt.s=9202)}]);