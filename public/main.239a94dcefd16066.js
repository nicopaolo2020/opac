"use strict";(self.webpackChunkopac=self.webpackChunkopac||[]).push([[179],{2011:(gt,De,P)=>{P.d(De,{Dh:()=>ge,GT:()=>ne,Ot:()=>de,cc:()=>we,hO:()=>Pe,on:()=>G,pX:()=>ae,xv:()=>ue});var p=P(4650),J=P(9260),V=P(462);gt=P.hmd(gt);const te=["ngOnDestroy"],ae=(Te,Me,Ue,Ae={})=>new Proxy(Te,{get:(Ie,Re)=>Ue.runOutsideAngular(()=>{var Ge;if(Te[Re])return!(null===(Ge=Ae?.spy)||void 0===Ge)&&Ge.get&&Ae.spy.get(Re,Te[Re]),Te[Re];if(te.indexOf(Re)>-1)return()=>{};const Se=Me.toPromise().then(j=>{const Ee=j&&j[Re];return"function"==typeof Ee?Ee.bind(j):Ee&&Ee.then?Ee.then(We=>Ue.run(()=>We)):Ue.run(()=>Ee)});return new Proxy(()=>{},{get:(j,Ee)=>Se[Ee],apply:(j,Ee,We)=>Se.then(Ye=>{var pt;const Xe=Ye&&Ye(...We);return!(null===(pt=Ae?.spy)||void 0===pt)&&pt.apply&&Ae.spy.apply(Re,We,Xe),Xe})})})}),ne=(Te,Me)=>{Me.forEach(Ue=>{Object.getOwnPropertyNames(Ue.prototype||Ue).forEach(Ae=>{Object.defineProperty(Te.prototype,Ae,Object.getOwnPropertyDescriptor(Ue.prototype||Ue,Ae))})})};class de{constructor(Me){return Me}}const ge=new p.OlP("angularfire2.app.options"),ue=new p.OlP("angularfire2.app.name");function G(Te,Me,Ue){const Ie="object"==typeof Ue&&Ue||{};Ie.name=Ie.name||"string"==typeof Ue&&Ue||"[DEFAULT]";const Ge=J.Z.apps.filter(Se=>Se&&Se.name===Ie.name)[0]||Me.runOutsideAngular(()=>J.Z.initializeApp(Te,Ie));try{JSON.stringify(Te)!==JSON.stringify(Ge.options)&&W("error",`${Ge.name} Firebase App already initialized with different options${gt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new de(Ge)}const W=(Te,...Me)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Te](...Me)},Y={provide:de,useFactory:G,deps:[ge,p.R0b,[new p.FiY,ue]]};let Pe=(()=>{class Te{constructor(Ue){J.Z.registerVersion("angularfire",V.q4.full,"core"),J.Z.registerVersion("angularfire",V.q4.full,"app-compat"),J.Z.registerVersion("angular",p.q4F.full,Ue.toString())}static initializeApp(Ue,Ae){return{ngModule:Te,providers:[{provide:ge,useValue:Ue},{provide:ue,useValue:Ae}]}}}return Te.\u0275fac=function(Ue){return new(Ue||Te)(p.LFG(p.Lbi))},Te.\u0275mod=p.oAB({type:Te}),Te.\u0275inj=p.cJS({providers:[Y]}),Te})();function we(Te,Me,Ue,Ae,Ie){const[,Re,Ge]=globalThis.\u0275AngularfireInstanceCache.find(Se=>Se[0]===Te)||[];if(Re)return function Ze(Te,Me){try{return Te.toString()===Me.toString()}catch{return Te===Me}}(Ie,Ge)||(pe("error",`${Me} was already initialized on the ${Ue} Firebase App with different settings.${nt?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:Ie,was:Ge})),Re;{const Se=Ae();return globalThis.\u0275AngularfireInstanceCache.push([Te,Se,Ie]),Se}}const nt=!!gt.hot,pe=(Te,...Me)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Te](...Me)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},462:(gt,De,P)=>{P.d(De,{q4:()=>Wd,iC:()=>Gu,fc:()=>Hu,HU:()=>oa,vb:()=>ia,JM:()=>tl,nk:()=>el});var p=P(4650),J=P(259),V=P(5861),te=P(9681),ae=P(2090),ne=P(4859),de=P(1877);P(2833);const ue="@firebase/remote-config",G="0.4.4",we=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class _e{constructor(k,z,oe,ke){this.client=k,this.storage=z,this.storageCache=oe,this.logger=ke}isCachedDataFresh(k,z){if(!z)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const oe=Date.now()-z,ke=oe<=k;return this.logger.debug(`Config fetch cache check. Cache age millis: ${oe}. Cache max age millis (minimumFetchIntervalMillis setting): ${k}. Is cache hit: ${ke}.`),ke}fetch(k){var z=this;return(0,V.Z)(function*(){const[oe,ke]=yield Promise.all([z.storage.getLastSuccessfulFetchTimestampMillis(),z.storage.getLastSuccessfulFetchResponse()]);if(ke&&z.isCachedDataFresh(k.cacheMaxAgeMillis,oe))return ke;k.eTag=ke&&ke.eTag;const Be=yield z.client.fetch(k),xt=[z.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Be.status&&xt.push(z.storage.setLastSuccessfulFetchResponse(Be)),yield Promise.all(xt),Be})()}}function xe(O=navigator){return O.languages&&O.languages[0]||O.language}class Fe{constructor(k,z,oe,ke,Be,xt){this.firebaseInstallations=k,this.sdkVersion=z,this.namespace=oe,this.projectId=ke,this.apiKey=Be,this.appId=xt}fetch(k){var z=this;return(0,V.Z)(function*(){const[oe,ke]=yield Promise.all([z.firebaseInstallations.getId(),z.firebaseInstallations.getToken()]),xt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${z.projectId}/namespaces/${z.namespace}:fetch?key=${z.apiKey}`,jn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":k.eTag||"*"},Cn={sdk_version:z.sdkVersion,app_instance_id:oe,app_instance_id_token:ke,app_id:z.appId,language_code:xe()},sn={method:"POST",headers:jn,body:JSON.stringify(Cn)},Rn=fetch(xt,sn),zt=new Promise((ui,Rs)=>{k.signal.addEventListener(()=>{const za=new Error("The operation was aborted.");za.name="AbortError",Rs(za)})});let Io;try{yield Promise.race([Rn,zt]),Io=yield Rn}catch(ui){let Rs="fetch-client-network";throw"AbortError"===ui?.name&&(Rs="fetch-timeout"),we.create(Rs,{originalErrorMessage:ui?.message})}let br=Io.status;const aa=Io.headers.get("ETag")||void 0;let Qs,Ft;if(200===Io.status){let ui;try{ui=yield Io.json()}catch(Rs){throw we.create("fetch-client-parse",{originalErrorMessage:Rs?.message})}Qs=ui.entries,Ft=ui.state}if("INSTANCE_STATE_UNSPECIFIED"===Ft?br=500:"NO_CHANGE"===Ft?br=304:("NO_TEMPLATE"===Ft||"EMPTY_CONFIG"===Ft)&&(Qs={}),304!==br&&200!==br)throw we.create("fetch-status",{httpStatus:br});return{status:br,eTag:aa,config:Qs}})()}}class it{constructor(k,z){this.client=k,this.storage=z}fetch(k){var z=this;return(0,V.Z)(function*(){const oe=(yield z.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return z.attemptFetch(k,oe)})()}attemptFetch(k,{throttleEndTimeMillis:z,backoffCount:oe}){var ke=this;return(0,V.Z)(function*(){yield function $e(O,k){return new Promise((z,oe)=>{const ke=Math.max(k-Date.now(),0),Be=setTimeout(z,ke);O.addEventListener(()=>{clearTimeout(Be),oe(we.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}(k.signal,z);try{const Be=yield ke.client.fetch(k);return yield ke.storage.deleteThrottleMetadata(),Be}catch(Be){if(!function Je(O){if(!(O instanceof ae.ZR&&O.customData))return!1;const k=Number(O.customData.httpStatus);return 429===k||500===k||503===k||504===k}(Be))throw Be;const xt={throttleEndTimeMillis:Date.now()+(0,ae.$s)(oe),backoffCount:oe+1};return yield ke.storage.setThrottleMetadata(xt),ke.attemptFetch(k,xt)}})()}}class rn{constructor(k,z,oe,ke,Be){this.app=k,this._client=z,this._storageCache=oe,this._storage=ke,this._logger=Be,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Qe(O,k){const z=O.target.error||void 0;return we.create(k,{originalErrorMessage:z&&z?.message})}const vt="app_namespace_store";class dn{constructor(k,z,oe,ke=function Sn(){return new Promise((O,k)=>{try{const z=indexedDB.open("firebase_remote_config",1);z.onerror=oe=>{k(Qe(oe,"storage-open"))},z.onsuccess=oe=>{O(oe.target.result)},z.onupgradeneeded=oe=>{0===oe.oldVersion&&oe.target.result.createObjectStore(vt,{keyPath:"compositeKey"})}}catch(z){k(we.create("storage-open",{originalErrorMessage:z?.message}))}})}()){this.appId=k,this.appName=z,this.namespace=oe,this.openDbPromise=ke}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(k){return this.set("last_fetch_status",k)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(k){return this.set("last_successful_fetch_timestamp_millis",k)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(k){return this.set("last_successful_fetch_response",k)}getActiveConfig(){return this.get("active_config")}setActiveConfig(k){return this.set("active_config",k)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(k){return this.set("active_config_etag",k)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(k){return this.set("throttle_metadata",k)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(k){var z=this;return(0,V.Z)(function*(){const oe=yield z.openDbPromise;return new Promise((ke,Be)=>{const jn=oe.transaction([vt],"readonly").objectStore(vt),Cn=z.createCompositeKey(k);try{const sn=jn.get(Cn);sn.onerror=Rn=>{Be(Qe(Rn,"storage-get"))},sn.onsuccess=Rn=>{const zt=Rn.target.result;ke(zt?zt.value:void 0)}}catch(sn){Be(we.create("storage-get",{originalErrorMessage:sn?.message}))}})})()}set(k,z){var oe=this;return(0,V.Z)(function*(){const ke=yield oe.openDbPromise;return new Promise((Be,xt)=>{const Cn=ke.transaction([vt],"readwrite").objectStore(vt),sn=oe.createCompositeKey(k);try{const Rn=Cn.put({compositeKey:sn,value:z});Rn.onerror=zt=>{xt(Qe(zt,"storage-set"))},Rn.onsuccess=()=>{Be()}}catch(Rn){xt(we.create("storage-set",{originalErrorMessage:Rn?.message}))}})})()}delete(k){var z=this;return(0,V.Z)(function*(){const oe=yield z.openDbPromise;return new Promise((ke,Be)=>{const jn=oe.transaction([vt],"readwrite").objectStore(vt),Cn=z.createCompositeKey(k);try{const sn=jn.delete(Cn);sn.onerror=Rn=>{Be(Qe(Rn,"storage-delete"))},sn.onsuccess=()=>{ke()}}catch(sn){Be(we.create("storage-delete",{originalErrorMessage:sn?.message}))}})})()}createCompositeKey(k){return[this.appId,this.appName,this.namespace,k].join()}}class or{constructor(k){this.storage=k}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var k=this;return(0,V.Z)(function*(){const z=k.storage.getLastFetchStatus(),oe=k.storage.getLastSuccessfulFetchTimestampMillis(),ke=k.storage.getActiveConfig(),Be=yield z;Be&&(k.lastFetchStatus=Be);const xt=yield oe;xt&&(k.lastSuccessfulFetchTimestampMillis=xt);const jn=yield ke;jn&&(k.activeConfig=jn)})()}setLastFetchStatus(k){return this.lastFetchStatus=k,this.storage.setLastFetchStatus(k)}setLastSuccessfulFetchTimestampMillis(k){return this.lastSuccessfulFetchTimestampMillis=k,this.storage.setLastSuccessfulFetchTimestampMillis(k)}setActiveConfig(k){return this.activeConfig=k,this.storage.setActiveConfig(k)}}function oi(){return En.apply(this,arguments)}function En(){return(En=(0,V.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}!function Mr(){(0,te._registerComponent)(new ne.wA("remote-config",function O(k,{instanceIdentifier:z}){const oe=k.getProvider("app").getImmediate(),ke=k.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw we.create("registration-window");if(!(0,ae.hl)())throw we.create("indexed-db-unavailable");const{projectId:Be,apiKey:xt,appId:jn}=oe.options;if(!Be)throw we.create("registration-project-id");if(!xt)throw we.create("registration-api-key");if(!jn)throw we.create("registration-app-id");const Cn=new dn(jn,oe.name,z=z||"firebase"),sn=new or(Cn),Rn=new de.Yd(ue);Rn.logLevel=de.in.ERROR;const zt=new Fe(ke,te.SDK_VERSION,z,Be,xt,jn),Io=new it(zt,Cn),br=new _e(Io,Cn,sn,Rn),aa=new rn(oe,br,sn,Cn,Rn);return function Ge(O){const k=(0,ae.m9)(O);k._initializePromise||(k._initializePromise=k._storageCache.loadFromStorage().then(()=>{k._isInitializationComplete=!0}))}(aa),aa},"PUBLIC").setMultipleInstances(!0)),(0,te.registerVersion)(ue,G),(0,te.registerVersion)(ue,G,"esm2017")}();var kn=P(8766);const mt="/firebase-messaging-sw.js",Qr="/firebase-cloud-messaging-push-scope",Xr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",mn="https://fcmregistrations.googleapis.com/v1",ar="google.c.a.c_id",Oi="google.c.a.c_l",Rt="google.c.a.ts",_t="google.c.a.e";var Bn=(()=>{return(O=Bn||(Bn={})).PUSH_RECEIVED="push-received",O.NOTIFICATION_CLICKED="notification-clicked",Bn;var O})();function tn(O){const k=new Uint8Array(O);return btoa(String.fromCharCode(...k)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Gn(O){const z=(O+"=".repeat((4-O.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),oe=atob(z),ke=new Uint8Array(oe.length);for(let Be=0;Be<oe.length;++Be)ke[Be]=oe.charCodeAt(Be);return ke}const er="fcm_token_details_db",tr=5,qi="fcm_token_object_Store";function Nr(){return Nr=(0,V.Z)(function*(O){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Be=>Be.name).includes(er))return null;let k=null;return(yield(0,kn.X3)(er,tr,{upgrade:(oe=(0,V.Z)(function*(ke,Be,xt,jn){var Cn;if(Be<2||!ke.objectStoreNames.contains(qi))return;const sn=jn.objectStore(qi),Rn=yield sn.index("fcmSenderId").get(O);if(yield sn.clear(),Rn)if(2===Be){const zt=Rn;if(!zt.auth||!zt.p256dh||!zt.endpoint)return;k={token:zt.fcmToken,createTime:null!==(Cn=zt.createTime)&&void 0!==Cn?Cn:Date.now(),subscriptionOptions:{auth:zt.auth,p256dh:zt.p256dh,endpoint:zt.endpoint,swScope:zt.swScope,vapidKey:"string"==typeof zt.vapidKey?zt.vapidKey:tn(zt.vapidKey)}}}else if(3===Be){const zt=Rn;k={token:zt.fcmToken,createTime:zt.createTime,subscriptionOptions:{auth:tn(zt.auth),p256dh:tn(zt.p256dh),endpoint:zt.endpoint,swScope:zt.swScope,vapidKey:tn(zt.vapidKey)}}}else if(4===Be){const zt=Rn;k={token:zt.fcmToken,createTime:zt.createTime,subscriptionOptions:{auth:tn(zt.auth),p256dh:tn(zt.p256dh),endpoint:zt.endpoint,swScope:zt.swScope,vapidKey:tn(zt.vapidKey)}}}}),function(Be,xt,jn,Cn){return oe.apply(this,arguments)})})).close(),yield(0,kn.Lj)(er),yield(0,kn.Lj)("fcm_vapid_details_db"),yield(0,kn.Lj)("undefined"),function Xt(O){if(!O||!O.subscriptionOptions)return!1;const{subscriptionOptions:k}=O;return"number"==typeof O.createTime&&O.createTime>0&&"string"==typeof O.token&&O.token.length>0&&"string"==typeof k.auth&&k.auth.length>0&&"string"==typeof k.p256dh&&k.p256dh.length>0&&"string"==typeof k.endpoint&&k.endpoint.length>0&&"string"==typeof k.swScope&&k.swScope.length>0&&"string"==typeof k.vapidKey&&k.vapidKey.length>0}(k)?k:null;var oe}),Nr.apply(this,arguments)}const mr="firebase-messaging-database",ai=1,He="firebase-messaging-store";let Ce=null;function ot(){return Ce||(Ce=(0,kn.X3)(mr,ai,{upgrade:(O,k)=>{0===k&&O.createObjectStore(He)}})),Ce}function Dt(O){return Lt.apply(this,arguments)}function Lt(){return Lt=(0,V.Z)(function*(O){const k=L(O),oe=yield(yield ot()).transaction(He).objectStore(He).get(k);if(oe)return oe;{const ke=yield function cn(O){return Nr.apply(this,arguments)}(O.appConfig.senderId);if(ke)return yield jt(O,ke),ke}}),Lt.apply(this,arguments)}function jt(O,k){return zn.apply(this,arguments)}function zn(){return(zn=(0,V.Z)(function*(O,k){const z=L(O),ke=(yield ot()).transaction(He,"readwrite");return yield ke.objectStore(He).put(k,z),yield ke.done,k})).apply(this,arguments)}function R(){return(R=(0,V.Z)(function*(O){const k=L(O),oe=(yield ot()).transaction(He,"readwrite");yield oe.objectStore(He).delete(k),yield oe.done})).apply(this,arguments)}function L({appConfig:O}){return O.appId}const B=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ce(O,k){return be.apply(this,arguments)}function be(){return(be=(0,V.Z)(function*(O,k){const z=yield An(O),oe=ur(k),ke={method:"POST",headers:z,body:JSON.stringify(oe)};let Be;try{Be=yield(yield fetch(It(O.appConfig),ke)).json()}catch(xt){throw B.create("token-subscribe-failed",{errorInfo:xt?.toString()})}if(Be.error)throw B.create("token-subscribe-failed",{errorInfo:Be.error.message});if(!Be.token)throw B.create("token-subscribe-no-token");return Be.token})).apply(this,arguments)}function Pt(){return(Pt=(0,V.Z)(function*(O,k){const z=yield An(O),oe=ur(k.subscriptionOptions),ke={method:"PATCH",headers:z,body:JSON.stringify(oe)};let Be;try{Be=yield(yield fetch(`${It(O.appConfig)}/${k.token}`,ke)).json()}catch(xt){throw B.create("token-update-failed",{errorInfo:xt?.toString()})}if(Be.error)throw B.create("token-update-failed",{errorInfo:Be.error.message});if(!Be.token)throw B.create("token-update-no-token");return Be.token})).apply(this,arguments)}function kt(O,k){return nn.apply(this,arguments)}function nn(){return(nn=(0,V.Z)(function*(O,k){const oe={method:"DELETE",headers:yield An(O)};try{const Be=yield(yield fetch(`${It(O.appConfig)}/${k}`,oe)).json();if(Be.error)throw B.create("token-unsubscribe-failed",{errorInfo:Be.error.message})}catch(ke){throw B.create("token-unsubscribe-failed",{errorInfo:ke?.toString()})}})).apply(this,arguments)}function It({projectId:O}){return`${mn}/projects/${O}/registrations`}function An(O){return Er.apply(this,arguments)}function Er(){return(Er=(0,V.Z)(function*({appConfig:O,installations:k}){const z=yield k.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":O.apiKey,"x-goog-firebase-installations-auth":`FIS ${z}`})})).apply(this,arguments)}function ur({p256dh:O,auth:k,endpoint:z,vapidKey:oe}){const ke={web:{endpoint:z,auth:k,p256dh:O}};return oe!==Xr&&(ke.web.applicationPubKey=oe),ke}const Yo=6048e5;function mo(){return mo=(0,V.Z)(function*(O){const k=yield function Jt(O,k){return Ht.apply(this,arguments)}(O.swRegistration,O.vapidKey),z={vapidKey:O.vapidKey,swScope:O.swRegistration.scope,endpoint:k.endpoint,auth:tn(k.getKey("auth")),p256dh:tn(k.getKey("p256dh"))},oe=yield Dt(O.firebaseDependencies);if(oe){if(function Zn(O,k){return k.vapidKey===O.vapidKey&&k.endpoint===O.endpoint&&k.auth===O.auth&&k.p256dh===O.p256dh}(oe.subscriptionOptions,z))return Date.now()>=oe.createTime+Yo?function Z(O,k){return ye.apply(this,arguments)}(O,{token:oe.token,createTime:Date.now(),subscriptionOptions:z}):oe.token;try{yield kt(O.firebaseDependencies,oe.token)}catch(ke){console.warn(ke)}return Ve(O.firebaseDependencies,z)}return Ve(O.firebaseDependencies,z)}),mo.apply(this,arguments)}function Xo(){return Xo=(0,V.Z)(function*(O){const k=yield Dt(O.firebaseDependencies);k&&(yield kt(O.firebaseDependencies,k.token),yield function H(O){return R.apply(this,arguments)}(O.firebaseDependencies));const z=yield O.swRegistration.pushManager.getSubscription();return!z||z.unsubscribe()}),Xo.apply(this,arguments)}function ye(){return ye=(0,V.Z)(function*(O,k){try{const z=yield function ct(O,k){return Pt.apply(this,arguments)}(O.firebaseDependencies,k),oe=Object.assign(Object.assign({},k),{token:z,createTime:Date.now()});return yield jt(O.firebaseDependencies,oe),z}catch(z){throw yield function _o(O){return Xo.apply(this,arguments)}(O),z}}),ye.apply(this,arguments)}function Ve(O,k){return qe.apply(this,arguments)}function qe(){return(qe=(0,V.Z)(function*(O,k){const oe={token:yield ce(O,k),createTime:Date.now(),subscriptionOptions:k};return yield jt(O,oe),oe.token})).apply(this,arguments)}function Ht(){return(Ht=(0,V.Z)(function*(O,k){return(yield O.pushManager.getSubscription())||O.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Gn(k)})})).apply(this,arguments)}function hn(O){const k={from:O.from,collapseKey:O.collapse_key,messageId:O.fcmMessageId};return function Ki(O,k){if(!k.notification)return;O.notification={};const z=k.notification.title;z&&(O.notification.title=z);const oe=k.notification.body;oe&&(O.notification.body=oe);const ke=k.notification.image;ke&&(O.notification.image=ke);const Be=k.notification.icon;Be&&(O.notification.icon=Be)}(k,O),function Pr(O,k){k.data&&(O.data=k.data)}(k,O),function as(O,k){var z,oe,ke,Be,xt;if(!(k.fcmOptions||null!==(z=k.notification)&&void 0!==z&&z.click_action))return;O.fcmOptions={};const jn=null!==(ke=null===(oe=k.fcmOptions)||void 0===oe?void 0:oe.link)&&void 0!==ke?ke:null===(Be=k.notification)||void 0===Be?void 0:Be.click_action;jn&&(O.fcmOptions.link=jn);const Cn=null===(xt=k.fcmOptions)||void 0===xt?void 0:xt.analytics_label;Cn&&(O.fcmOptions.analyticsLabel=Cn)}(k,O),k}function ut(O,k){const z=[];for(let oe=0;oe<O.length;oe++)z.push(O.charAt(oe)),oe<k.length&&z.push(k.charAt(oe));return z.join("")}function On(O){return B.create("missing-app-config-values",{valueName:O})}ut("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ut("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Jr{constructor(k,z,oe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ke=function Gt(O){if(!O||!O.options)throw On("App Configuration Object");if(!O.name)throw On("App Name");const k=["projectId","apiKey","appId","messagingSenderId"],{options:z}=O;for(const oe of k)if(!z[oe])throw On(oe);return{appName:O.name,projectId:z.projectId,apiKey:z.apiKey,appId:z.appId,senderId:z.messagingSenderId}}(k);this.firebaseDependencies={app:k,appConfig:ke,installations:z,analyticsProvider:oe}}_delete(){return Promise.resolve()}}function Li(O){return nr.apply(this,arguments)}function nr(){return(nr=(0,V.Z)(function*(O){try{O.swRegistration=yield navigator.serviceWorker.register(mt,{scope:Qr}),O.swRegistration.update().catch(()=>{})}catch(k){throw B.create("failed-service-worker-registration",{browserErrorMessage:k?.message})}})).apply(this,arguments)}function Ln(){return(Ln=(0,V.Z)(function*(O,k){if(!k&&!O.swRegistration&&(yield Li(O)),k||!O.swRegistration){if(!(k instanceof ServiceWorkerRegistration))throw B.create("invalid-sw-registration");O.swRegistration=k}})).apply(this,arguments)}function bs(){return(bs=(0,V.Z)(function*(O,k){k?O.vapidKey=k:O.vapidKey||(O.vapidKey=Xr)})).apply(this,arguments)}function us(){return us=(0,V.Z)(function*(O,k){if(!navigator)throw B.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw B.create("permission-blocked");return yield function Va(O,k){return bs.apply(this,arguments)}(O,k?.vapidKey),yield function Ks(O,k){return Ln.apply(this,arguments)}(O,k?.serviceWorkerRegistration),function Qo(O){return mo.apply(this,arguments)}(O)}),us.apply(this,arguments)}function Zs(){return(Zs=(0,V.Z)(function*(O,k,z){const oe=function Ys(O){switch(O){case Bn.NOTIFICATION_CLICKED:return"notification_open";case Bn.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(k);(yield O.firebaseDependencies.analyticsProvider.get()).logEvent(oe,{message_id:z[ar],message_name:z[Oi],message_time:z[Rt],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Cs(){return Cs=(0,V.Z)(function*(O,k){const z=k.data;if(!z.isFirebaseMessaging)return;O.onMessageHandler&&z.messageType===Bn.PUSH_RECEIVED&&("function"==typeof O.onMessageHandler?O.onMessageHandler(hn(z)):O.onMessageHandler.next(hn(z)));const oe=z.data;(function mi(O){return"object"==typeof O&&!!O&&ar in O})(oe)&&"1"===oe[_t]&&(yield function Ts(O,k,z){return Zs.apply(this,arguments)}(O,z.messageType,oe))}),Cs.apply(this,arguments)}const Ds="@firebase/messaging",_i=O=>{const k=new Jr(O.getProvider("app").getImmediate(),O.getProvider("installations-internal").getImmediate(),O.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",z=>function Ir(O,k){return Cs.apply(this,arguments)}(k,z)),k},Bu=O=>{const k=O.getProvider("messaging").getImmediate();return{getToken:oe=>function Kt(O,k){return us.apply(this,arguments)}(k,oe)}};function Zi(){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,V.Z)(function*(){try{yield(0,ae.eu)()}catch{return!1}return typeof window<"u"&&(0,ae.hl)()&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ln(){(0,te._registerComponent)(new ne.wA("messaging",_i,"PUBLIC")),(0,te._registerComponent)(new ne.wA("messaging-internal",Bu,"PRIVATE")),(0,te.registerVersion)(Ds,"0.12.4"),(0,te.registerVersion)(Ds,"0.12.4","esm2017")}();var cs=P(5132),ta=P(4408),Hr=P(7565);const Yc=new class Rp extends Hr.v{}(class ja extends ta.o{constructor(k,z){super(k,z),this.scheduler=k,this.work=z}schedule(k,z=0){return z>0?super.schedule(k,z):(this.delay=z,this.state=k,this.scheduler.flush(this),this)}execute(k,z){return z>0||this.closed?super.execute(k,z):this._execute(k,z)}requestAsyncId(k,z,oe=0){return null!=oe&&oe>0||null==oe&&this.delay>0?super.requestAsyncId(k,z,oe):(k.flush(this),0)}});var wo=P(4986),na=P(8505),ju=P(5363),zd=P(9468);const Wd=new p.GfV("7.5.0"),Qc="__angularfire_symbol__analyticsIsSupportedValue",ls="__angularfire_symbol__analyticsIsSupported",$a="__angularfire_symbol__remoteConfigIsSupportedValue",Ha="__angularfire_symbol__remoteConfigIsSupported",Xc="__angularfire_symbol__messagingIsSupportedValue",$u="__angularfire_symbol__messagingIsSupported";globalThis[ls]||(globalThis[ls]=(0,cs.Gb)().then(O=>globalThis[Qc]=O).catch(()=>globalThis[Qc]=!1)),globalThis[$u]||(globalThis[$u]=Zi().then(O=>globalThis[Xc]=O).catch(()=>globalThis[Xc]=!1)),globalThis[Ha]||(globalThis[Ha]=oi().then(O=>globalThis[$a]=O).catch(()=>globalThis[$a]=!1));const el={async:()=>globalThis[ls],sync:()=>{const O=globalThis[Qc];if(void 0===O)throw new Error((O=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${O} in the constructor, first ensure that ${O} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${O})\`.`)("Analytics"));return O}};function tl(O,k,z){if(k){if(1===k.length)return k[0];const Be=k.filter(xt=>xt.app===z);if(1===Be.length)return Be[0]}return z.container.getProvider(O).getImmediate({optional:!0})}const ia=(O,k)=>{const z=k?[k]:(0,J.C6)(),oe=[];return z.forEach(ke=>{ke.container.getProvider(O).instances.forEach(xt=>{oe.includes(xt)||oe.push(xt)})}),oe};function sa(){}class As{constructor(k,z=Yc){this.zone=k,this.delegate=z}now(){return this.delegate.now()}schedule(k,z,oe){const ke=this.zone;return this.delegate.schedule(function(xt){ke.runGuarded(()=>{k.apply(this,[xt])})},z,oe)}}class xp{constructor(k){this.zone=k,this.task=null}call(k,z){const oe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",sa,{},sa,sa)),z.pipe((0,na.b)({next:oe,complete:oe,error:oe})).subscribe(k).add(oe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let oa=(()=>{class O{constructor(z){this.ngZone=z,this.outsideAngular=z.runOutsideAngular(()=>new As(Zone.current)),this.insideAngular=z.run(()=>new As(Zone.current,wo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return O.\u0275fac=function(z){return new(z||O)(p.LFG(p.R0b))},O.\u0275prov=p.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();function Qi(){const O=globalThis.\u0275AngularFireScheduler;if(!O)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return O}function Hu(O){return O.pipe((0,ju.Q)(Qi().outsideAngular))}function Gu(O){return Qi(),function Eo(O){return function(z){return(z=z.lift(new xp(O.ngZone))).pipe((0,zd.R)(O.outsideAngular),(0,ju.Q)(O.insideAngular))}}(Qi())(O)}},2090:(gt,De,P)=>{P.d(De,{$s:()=>Dt,BH:()=>Re,DV:()=>Kn,Dv:()=>Gn,G6:()=>xe,GJ:()=>Mr,L:()=>ue,LL:()=>Et,Pz:()=>Ie,Sg:()=>Ge,UG:()=>Ee,UI:()=>En,US:()=>ne,Wj:()=>qi,Wl:()=>Pn,Yr:()=>_e,ZB:()=>Y,ZR:()=>yn,aH:()=>Ae,b$:()=>pt,cI:()=>vt,dS:()=>Nr,eu:()=>$e,g5:()=>V,gK:()=>er,gQ:()=>Oi,h$:()=>ge,hl:()=>Fe,hu:()=>J,jU:()=>We,lb:()=>cn,m9:()=>zn,ne:()=>Rt,p$:()=>W,pd:()=>ar,r3:()=>Yr,ru:()=>Ye,tV:()=>G,uI:()=>j,ug:()=>Xt,vZ:()=>kn,w1:()=>re,w9:()=>or,xO:()=>Xr,xb:()=>oi,z$:()=>Se,zI:()=>Je,zd:()=>mn});const p={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},J=function(H,R){if(!H)throw V(R)},V=function(H){return new Error("Firebase Database ("+p.SDK_VERSION+") INTERNAL ASSERT FAILED: "+H)},te=function(H){const R=[];let L=0;for(let q=0;q<H.length;q++){let B=H.charCodeAt(q);B<128?R[L++]=B:B<2048?(R[L++]=B>>6|192,R[L++]=63&B|128):55296==(64512&B)&&q+1<H.length&&56320==(64512&H.charCodeAt(q+1))?(B=65536+((1023&B)<<10)+(1023&H.charCodeAt(++q)),R[L++]=B>>18|240,R[L++]=B>>12&63|128,R[L++]=B>>6&63|128,R[L++]=63&B|128):(R[L++]=B>>12|224,R[L++]=B>>6&63|128,R[L++]=63&B|128)}return R},ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,R){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const L=R?this.byteToCharMapWebSafe_:this.byteToCharMap_,q=[];for(let B=0;B<H.length;B+=3){const ce=H[B],be=B+1<H.length,ct=be?H[B+1]:0,Pt=B+2<H.length,kt=Pt?H[B+2]:0;let An=(15&ct)<<2|kt>>6,Er=63&kt;Pt||(Er=64,be||(An=64)),q.push(L[ce>>2],L[(3&ce)<<4|ct>>4],L[An],L[Er])}return q.join("")},encodeString(H,R){return this.HAS_NATIVE_SUPPORT&&!R?btoa(H):this.encodeByteArray(te(H),R)},decodeString(H,R){return this.HAS_NATIVE_SUPPORT&&!R?atob(H):function(H){const R=[];let L=0,q=0;for(;L<H.length;){const B=H[L++];if(B<128)R[q++]=String.fromCharCode(B);else if(B>191&&B<224){const ce=H[L++];R[q++]=String.fromCharCode((31&B)<<6|63&ce)}else if(B>239&&B<365){const Pt=((7&B)<<18|(63&H[L++])<<12|(63&H[L++])<<6|63&H[L++])-65536;R[q++]=String.fromCharCode(55296+(Pt>>10)),R[q++]=String.fromCharCode(56320+(1023&Pt))}else{const ce=H[L++],be=H[L++];R[q++]=String.fromCharCode((15&B)<<12|(63&ce)<<6|63&be)}}return R.join("")}(this.decodeStringToByteArray(H,R))},decodeStringToByteArray(H,R){this.init_();const L=R?this.charToByteMapWebSafe_:this.charToByteMap_,q=[];for(let B=0;B<H.length;){const ce=L[H.charAt(B++)],ct=B<H.length?L[H.charAt(B)]:0;++B;const kt=B<H.length?L[H.charAt(B)]:64;++B;const It=B<H.length?L[H.charAt(B)]:64;if(++B,null==ce||null==ct||null==kt||null==It)throw new de;q.push(ce<<2|ct>>4),64!==kt&&(q.push(ct<<4&240|kt>>2),64!==It&&q.push(kt<<6&192|It))}return q},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}};class de extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ge=function(H){const R=te(H);return ne.encodeByteArray(R,!0)},ue=function(H){return ge(H).replace(/\./g,"")},G=function(H){try{return ne.decodeString(H,!0)}catch(R){console.error("base64Decode failed: ",R)}return null};function W(H){return Y(void 0,H)}function Y(H,R){if(!(R instanceof Object))return R;switch(R.constructor){case Date:return new Date(R.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return R}for(const L in R)!R.hasOwnProperty(L)||!Pe(L)||(H[L]=Y(H[L],R[L]));return H}function Pe(H){return"__proto__"!==H}const Te=()=>{try{return function we(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const R=H&&G(H[1]);return R&&JSON.parse(R)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},Ae=()=>{var H;return null===(H=Te())||void 0===H?void 0:H.config},Ie=H=>{var R;return null===(R=Te())||void 0===R?void 0:R[`_${H}`]};class Re{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((R,L)=>{this.resolve=R,this.reject=L})}wrapCallback(R){return(L,q)=>{L?this.reject(L):this.resolve(q),"function"==typeof R&&(this.promise.catch(()=>{}),1===R.length?R(L):R(L,q))}}}function Ge(H,R){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const q=R||"demo-project",B=H.iat||0,ce=H.sub||H.user_id;if(!ce)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const be=Object.assign({iss:`https://securetoken.google.com/${q}`,aud:q,iat:B,exp:B+3600,auth_time:B,sub:ce,user_id:ce,firebase:{sign_in_provider:"custom",identities:{}}},H);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(be)),""].join(".")}function Se(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function j(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Se())}function Ee(){var H;const R=null===(H=Te())||void 0===H?void 0:H.forceEnvironment;if("node"===R)return!0;if("browser"===R)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function We(){return"object"==typeof self&&self.self===self}function Ye(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function pt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function re(){const H=Se();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function _e(){return!0===p.NODE_CLIENT||!0===p.NODE_ADMIN}function xe(){return!Ee()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Fe(){try{return"object"==typeof indexedDB}catch{return!1}}function $e(){return new Promise((H,R)=>{try{let L=!0;const q="validate-browser-context-for-indexeddb-analytics-module",B=self.indexedDB.open(q);B.onsuccess=()=>{B.result.close(),L||self.indexedDB.deleteDatabase(q),H(!0)},B.onupgradeneeded=()=>{L=!1},B.onerror=()=>{var ce;R((null===(ce=B.error)||void 0===ce?void 0:ce.message)||"")}}catch(L){R(L)}})}function Je(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class yn extends Error{constructor(R,L,q){super(L),this.code=R,this.customData=q,this.name="FirebaseError",Object.setPrototypeOf(this,yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Et.prototype.create)}}class Et{constructor(R,L,q){this.service=R,this.serviceName=L,this.errors=q}create(R,...L){const q=L[0]||{},B=`${this.service}/${R}`,ce=this.errors[R],be=ce?function rn(H,R){return H.replace(Qe,(L,q)=>{const B=R[q];return null!=B?String(B):`<${q}?>`})}(ce,q):"Error";return new yn(B,`${this.serviceName}: ${be} (${B}).`,q)}}const Qe=/\{\$([^}]+)}/g;function vt(H){return JSON.parse(H)}function Pn(H){return JSON.stringify(H)}const Dn=function(H){let R={},L={},q={},B="";try{const ce=H.split(".");R=vt(G(ce[0])||""),L=vt(G(ce[1])||""),B=ce[2],q=L.d||{},delete L.d}catch{}return{header:R,claims:L,data:q,signature:B}},or=function(H){const L=Dn(H).claims;return!!L&&"object"==typeof L&&L.hasOwnProperty("iat")},Mr=function(H){const R=Dn(H).claims;return"object"==typeof R&&!0===R.admin};function Yr(H,R){return Object.prototype.hasOwnProperty.call(H,R)}function Kn(H,R){if(Object.prototype.hasOwnProperty.call(H,R))return H[R]}function oi(H){for(const R in H)if(Object.prototype.hasOwnProperty.call(H,R))return!1;return!0}function En(H,R,L){const q={};for(const B in H)Object.prototype.hasOwnProperty.call(H,B)&&(q[B]=R.call(L,H[B],B,H));return q}function kn(H,R){if(H===R)return!0;const L=Object.keys(H),q=Object.keys(R);for(const B of L){if(!q.includes(B))return!1;const ce=H[B],be=R[B];if(mt(ce)&&mt(be)){if(!kn(ce,be))return!1}else if(ce!==be)return!1}for(const B of q)if(!L.includes(B))return!1;return!0}function mt(H){return null!==H&&"object"==typeof H}function Xr(H){const R=[];for(const[L,q]of Object.entries(H))Array.isArray(q)?q.forEach(B=>{R.push(encodeURIComponent(L)+"="+encodeURIComponent(B))}):R.push(encodeURIComponent(L)+"="+encodeURIComponent(q));return R.length?"&"+R.join("&"):""}function mn(H){const R={};return H.replace(/^\?/,"").split("&").forEach(q=>{if(q){const[B,ce]=q.split("=");R[decodeURIComponent(B)]=decodeURIComponent(ce)}}),R}function ar(H){const R=H.indexOf("?");if(!R)return"";const L=H.indexOf("#",R);return H.substring(R,L>0?L:void 0)}class Oi{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let R=1;R<this.blockSize;++R)this.pad_[R]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(R,L){L||(L=0);const q=this.W_;if("string"==typeof R)for(let It=0;It<16;It++)q[It]=R.charCodeAt(L)<<24|R.charCodeAt(L+1)<<16|R.charCodeAt(L+2)<<8|R.charCodeAt(L+3),L+=4;else for(let It=0;It<16;It++)q[It]=R[L]<<24|R[L+1]<<16|R[L+2]<<8|R[L+3],L+=4;for(let It=16;It<80;It++){const An=q[It-3]^q[It-8]^q[It-14]^q[It-16];q[It]=4294967295&(An<<1|An>>>31)}let kt,nn,B=this.chain_[0],ce=this.chain_[1],be=this.chain_[2],ct=this.chain_[3],Pt=this.chain_[4];for(let It=0;It<80;It++){It<40?It<20?(kt=ct^ce&(be^ct),nn=1518500249):(kt=ce^be^ct,nn=1859775393):It<60?(kt=ce&be|ct&(ce|be),nn=2400959708):(kt=ce^be^ct,nn=3395469782);const An=(B<<5|B>>>27)+kt+Pt+nn+q[It]&4294967295;Pt=ct,ct=be,be=4294967295&(ce<<30|ce>>>2),ce=B,B=An}this.chain_[0]=this.chain_[0]+B&4294967295,this.chain_[1]=this.chain_[1]+ce&4294967295,this.chain_[2]=this.chain_[2]+be&4294967295,this.chain_[3]=this.chain_[3]+ct&4294967295,this.chain_[4]=this.chain_[4]+Pt&4294967295}update(R,L){if(null==R)return;void 0===L&&(L=R.length);const q=L-this.blockSize;let B=0;const ce=this.buf_;let be=this.inbuf_;for(;B<L;){if(0===be)for(;B<=q;)this.compress_(R,B),B+=this.blockSize;if("string"==typeof R){for(;B<L;)if(ce[be]=R.charCodeAt(B),++be,++B,be===this.blockSize){this.compress_(ce),be=0;break}}else for(;B<L;)if(ce[be]=R[B],++be,++B,be===this.blockSize){this.compress_(ce),be=0;break}}this.inbuf_=be,this.total_+=L}digest(){const R=[];let L=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let B=this.blockSize-1;B>=56;B--)this.buf_[B]=255&L,L/=256;this.compress_(this.buf_);let q=0;for(let B=0;B<5;B++)for(let ce=24;ce>=0;ce-=8)R[q]=this.chain_[B]>>ce&255,++q;return R}}function Rt(H,R){const L=new _t(H,R);return L.subscribe.bind(L)}class _t{constructor(R,L){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=L,this.task.then(()=>{R(this)}).catch(q=>{this.error(q)})}next(R){this.forEachObserver(L=>{L.next(R)})}error(R){this.forEachObserver(L=>{L.error(R)}),this.close(R)}complete(){this.forEachObserver(R=>{R.complete()}),this.close()}subscribe(R,L,q){let B;if(void 0===R&&void 0===L&&void 0===q)throw new Error("Missing Observer.");B=function Bn(H,R){if("object"!=typeof H||null===H)return!1;for(const L of R)if(L in H&&"function"==typeof H[L])return!0;return!1}(R,["next","error","complete"])?R:{next:R,error:L,complete:q},void 0===B.next&&(B.next=tn),void 0===B.error&&(B.error=tn),void 0===B.complete&&(B.complete=tn);const ce=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?B.error(this.finalError):B.complete()}catch{}}),this.observers.push(B),ce}unsubscribeOne(R){void 0===this.observers||void 0===this.observers[R]||(delete this.observers[R],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(R){if(!this.finalized)for(let L=0;L<this.observers.length;L++)this.sendOne(L,R)}sendOne(R,L){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[R])try{L(this.observers[R])}catch(q){typeof console<"u"&&console.error&&console.error(q)}})}close(R){this.finalized||(this.finalized=!0,void 0!==R&&(this.finalError=R),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tn(){}const Gn=function(H,R,L,q){let B;if(q<R?B="at least "+R:q>L&&(B=0===L?"none":"no more than "+L),B)throw new Error(H+" failed: Was called with "+q+(1===q?" argument.":" arguments.")+" Expects "+B+".")};function er(H,R){return`${H} failed: ${R} argument `}function qi(H,R,L,q){if((!q||L)&&"function"!=typeof L)throw new Error(er(H,R)+"must be a valid function.")}function cn(H,R,L,q){if((!q||L)&&("object"!=typeof L||null===L))throw new Error(er(H,R)+"must be a valid context object.")}const Nr=function(H){const R=[];let L=0;for(let q=0;q<H.length;q++){let B=H.charCodeAt(q);if(B>=55296&&B<=56319){const ce=B-55296;q++,J(q<H.length,"Surrogate pair missing trail surrogate."),B=65536+(ce<<10)+(H.charCodeAt(q)-56320)}B<128?R[L++]=B:B<2048?(R[L++]=B>>6|192,R[L++]=63&B|128):B<65536?(R[L++]=B>>12|224,R[L++]=B>>6&63|128,R[L++]=63&B|128):(R[L++]=B>>18|240,R[L++]=B>>12&63|128,R[L++]=B>>6&63|128,R[L++]=63&B|128)}return R},Xt=function(H){let R=0;for(let L=0;L<H.length;L++){const q=H.charCodeAt(L);q<128?R++:q<2048?R+=2:q>=55296&&q<=56319?(R+=4,L++):R+=3}return R},ai=1e3,He=2,Ce=144e5,ot=.5;function Dt(H,R=ai,L=He){const q=R*Math.pow(L,H),B=Math.round(ot*q*(Math.random()-.5)*2);return Math.min(Ce,q+B)}function zn(H){return H&&H._delegate?H._delegate:H}},2119:(gt,De,P)=>{var p=P(4650);let J=null;function V(){return J}class ae{}const ne=new p.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function ge(){return(0,p.LFG)(G)}()},providedIn:"platform"}),n})();const ue=new p.OlP("Location Initialized");let G=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return V().getBaseHref(this._doc)}onPopState(t){const r=V().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=V().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){W()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){W()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ne))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Y(){return new G((0,p.LFG)(ne))}()},providedIn:"platform"}),n})();function W(){return!!window.history.pushState}function Pe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ze(n){return n&&"?"!==n[0]?"?"+n:n}let nt=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(Te)},providedIn:"root"}),n})();const pe=new p.OlP("appBaseHref");let Te=(()=>{class n extends nt{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(ne).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Pe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ze(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+Ze(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+Ze(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(de),p.LFG(pe,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Me=(()=>{class n extends nt{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Pe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let c=this.prepareExternalUrl(i+Ze(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){let c=this.prepareExternalUrl(i+Ze(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(de),p.LFG(pe,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Ue=(()=>{class n{constructor(t){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Ge(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(we(Re(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ze(r))}normalize(t){return n.stripTrailingSlash(function Ie(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Re(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ze(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ze(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ze,n.joinWithSlash=Pe,n.stripTrailingSlash=we,n.\u0275fac=function(t){return new(t||n)(p.LFG(nt))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Ae(){return new Ue((0,p.LFG)(nt))}()},providedIn:"root"}),n})();function Re(n){return n.replace(/\/index.html$/,"")}class us{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Ts=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(const r of this._defaultViews)r.enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),Zs=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new us(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(Ts,9))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),Ys=(()=>{class n{constructor(t,r,i){i._addDefault(new us(t,r))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(Ts,9))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngSwitchDefault",""]],standalone:!0}),n})(),$u=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();const ra="browser",Yi="server";function ia(n){return n===Yi}let oa=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new Qi((0,p.LFG)(ne),window)}),n})();class Qi{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Xi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const c=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ga(this.window.history)||Ga(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ga(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class la extends ae{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Wa extends la{static makeCurrent(){!function te(n){J||(J=n)}(new Wa)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function $_(){return qa=qa||document.querySelector("base"),qa?qa.getAttribute("href"):null}();return null==t?null:function al(n){eo=eo||document.createElement("a"),eo.setAttribute("href",n);const e=eo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){qa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Pr(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let eo,qa=null;const Wu=new p.OlP("TRANSITION_ID"),Ms=[{provide:p.ip1,useFactory:function KC(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=V(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Wu,ne,p.zs3],multi:!0}];let H_=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const To=new p.OlP("EventManagerPlugins");let Xd=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const c=i[a];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(To),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Tr{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=V().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ul=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let a=i.get(t)??0;return a+=r,a>0?i.set(t,a):i.delete(t),a}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Co=(()=>{class n extends ul{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(a=>a.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const a=this.styleRef.get(r);a?a.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ne))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const cl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},to=/%COMP%/g,Ku=new p.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function nh(n,e){return e.flat(100).map(t=>t.replace(to,n))}function Zu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ll=(()=>{class n{constructor(t,r,i,a){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=a,this.rendererByCompId=new Map,this.defaultRenderer=new Ei(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof rh?i.applyToHost(t):i instanceof Qu&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const c=this.eventManager,h=this.sharedStylesHost,_=this.removeStylesOnCompDestory;switch(r.encapsulation){case p.ifc.Emulated:a=new rh(c,h,r,this.appId,_);break;case p.ifc.ShadowDom:return new Vp(c,h,t,r);default:a=new Qu(c,h,r,_)}a.onDestroy=()=>i.delete(r.id),i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Xd),p.LFG(Co),p.LFG(p.AFp),p.LFG(Ku))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Ei{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(cl[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Yu(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Yu(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=cl[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=cl[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,i&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Zu(r)):this.eventManager.addEventListener(e,t,Zu(r))}}function Yu(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Vp extends Ei{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=nh(i.id,i.styles);for(const c of a){const h=document.createElement("style");h.textContent=c,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Qu extends Ei{constructor(e,t,r,i,a=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=nh(a,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class rh extends Qu{constructor(e,t,r,i,a){const c=i+"-"+r.id;super(e,t,r,a,c),this.contentAttr=function Do(n){return"_ngcontent-%COMP%".replace(to,n)}(c),this.hostAttr=function th(n){return"_nghost-%COMP%".replace(to,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Ka=(()=>{class n extends Tr{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ne))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const ih=["alt","control","meta","shift"],Bp={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jp={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let dl=(()=>{class n extends Tr{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>V().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),c="code."),ih.forEach(w=>{const b=r.indexOf(w);b>-1&&(r.splice(b,1),c+=w+".")}),c+=a,0!=r.length||0===a.length)return null;const _={};return _.domEventName=i,_.fullKey=c,_}static matchEventFullKeyCode(t,r){let i=Bp[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ih.forEach(c=>{c!==i&&(0,jp[c])(t)&&(a+=c+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ne))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Ju=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:ra},{provide:p.g9A,useValue:function Xu(){Wa.makeCurrent()},multi:!0},{provide:ne,useFactory:function q_(){return(0,p.RDi)(document),document},deps:[]}]),Hp=new p.OlP(""),ah=[{provide:p.rWj,useClass:class aE{addToWindow(e){p.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const i=p.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const h=function(_){c=c||_,a--,0==a&&r(c)};i.forEach(function(_){_.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?V().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],fl=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function Za(){return new p.qLn},deps:[]},{provide:To,useClass:Ka,multi:!0,deps:[ne,p.R0b,p.Lbi]},{provide:To,useClass:dl,multi:!0,deps:[ne]},{provide:ll,useClass:ll,deps:[Xd,Co,p.AFp,Ku]},{provide:p.FYo,useExisting:ll},{provide:ul,useExisting:Co},{provide:Co,useClass:Co,deps:[ne]},{provide:Xd,useClass:Xd,deps:[To,p.R0b]},{provide:class nl{},useClass:H_,deps:[]},[]];let Ya=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:Wu,useExisting:p.AFp},Ms]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Hp,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[...fl,...ah],imports:[$u,p.hGG]}),n})(),So=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ne))},n.\u0275prov=p.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function uh(){return new So((0,p.LFG)(ne))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var en=P(8996),Ro=P(7669);function st(...n){const e=(0,Ro.yG)(n);return(0,en.D)(n,e)}var xo=P(7579);class Ji extends xo.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Ja=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ui=P(9751);const{isArray:ny}=Array,{getPrototypeOf:fh,prototype:Wp,keys:gl}=Object;var es=P(4671),bt=P(4004);const{isArray:rc}=Array;var Fn=P(5403),Kp=P(9672);function _l(...n){const e=(0,Ro.yG)(n),t=(0,Ro.jO)(n),{args:r,keys:i}=function ml(n){if(1===n.length){const e=n[0];if(ny(e))return{args:e,keys:null};if(function ph(n){return n&&"object"==typeof n&&fh(n)===Wp}(e)){const t=gl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,en.D)([],e);const a=new Ui.y(function yl(n,e,t=es.y){return r=>{no(e,()=>{const{length:i}=n,a=new Array(i);let c=i,h=i;for(let _=0;_<i;_++)no(e,()=>{const w=(0,en.D)(n[_],e);let b=!1;w.subscribe((0,Fn.x)(r,D=>{a[_]=D,b||(b=!0,h--),h||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>function ic(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,c):es.y));return t?a.pipe(function qp(n){return(0,bt.U)(e=>function gh(n,e){return rc(e)?n(...e):n(e)}(n,e))}(t)):a}function no(n,e,t){n?(0,Kp.f)(t,n,e):e()}var Ns=P(8189);function Zp(...n){return function mh(){return(0,Ns.J)(1)}()((0,en.D)(n,(0,Ro.yG)(n)))}var ma=P(8421);function _h(n){return new Ui.y(e=>{(0,ma.Xf)(n()).subscribe(e)})}var ry=P(9635),yh=P(576);function eu(n,e){const t=(0,yh.m)(n)?n:()=>n,r=i=>i.error(t());return new Ui.y(e?i=>e.schedule(r,0,i):r)}var ds=P(515),sc=P(727),yr=P(4482);function vh(){return(0,yr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Fn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class oc extends Ui.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,yr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new sc.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Fn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=sc.w0.EMPTY)}return e}refCount(){return vh()(this)}}function Wn(n,e){return(0,yr.e)((t,r)=>{let i=null,a=0,c=!1;const h=()=>c&&!i&&r.complete();t.subscribe((0,Fn.x)(r,_=>{i?.unsubscribe();let w=0;const b=a++;(0,ma.Xf)(n(_,b)).subscribe(i=(0,Fn.x)(r,D=>r.next(e?e(_,D,b,w++):D),()=>{i=null,h()}))},()=>{c=!0,h()}))})}function tu(n){return n<=0?()=>ds.E:(0,yr.e)((e,t)=>{let r=0;e.subscribe((0,Fn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ac(...n){const e=(0,Ro.yG)(n);return(0,yr.e)((t,r)=>{(e?Zp(n,t,e):Zp(n,t)).subscribe(r)})}function Vi(n,e){return(0,yr.e)((t,r)=>{let i=0;t.subscribe((0,Fn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Cr=P(5577);function nu(n){return(0,yr.e)((e,t)=>{let r=!1;e.subscribe((0,Fn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function iy(n=hE){return(0,yr.e)((e,t)=>{let r=!1;e.subscribe((0,Fn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function hE(){return new Ja}function hs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Vi((i,a)=>n(i,a,r)):es.y,tu(1),t?nu(e):iy(()=>new Ja))}function ru(n,e){return(0,yh.m)(e)?(0,Cr.z)(n,e,1):(0,Cr.z)(n,1)}var li=P(8505);function _a(n){return(0,yr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Fn.x)(t,void 0,void 0,c=>{a=(0,ma.Xf)(n(c,_a(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function Mo(n,e){return(0,yr.e)(function fE(n,e,t,r,i){return(a,c)=>{let h=t,_=e,w=0;a.subscribe((0,Fn.x)(c,b=>{const D=w++;_=h?n(_,b,D):(h=!0,b),r&&c.next(_)},i&&(()=>{h&&c.next(_),c.complete()})))}}(n,e,arguments.length>=2,!0))}function wh(n){return n<=0?()=>ds.E:(0,yr.e)((e,t)=>{let r=[];e.subscribe((0,Fn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Eh(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Vi((i,a)=>n(i,a,r)):es.y,wh(1),t?nu(e):iy(()=>new Ja))}function vl(n){return(0,yr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Wt="primary",Ii=Symbol("RouteTitle");class sy{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function iu(n){return new sy(n)}function oy(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],h=n[a];if(c.startsWith(":"))i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ts(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!El(n[i],e[i]))return!1;return!0}function El(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Qp(n){return Array.prototype.concat.apply([],n)}function bh(n){return n.length>0?n[n.length-1]:null}function Dr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function No(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,en.D)(Promise.resolve(n)):st(n)}const Lr=!1,Il={exact:function su(n,e,t){if(!ya(n.segments,e.segments)||!Cl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!su(n.children[r],e.children[r],t))return!1;return!0},subset:Tl},Th={exact:function ni(n,e){return ts(n,e)},subset:function Xp(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>El(n[t],e[t]))},ignored:()=>!0};function bl(n,e,t){return Il[t.paths](n.root,e.root,t.matrixParams)&&Th[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Tl(n,e,t){return Jp(n,e,e.segments,t)}function Jp(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ya(i,t)||e.hasChildren()||!Cl(i,t,r))}if(n.segments.length===t.length){if(!ya(n.segments,t)||!Cl(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Tl(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(ya(n.segments,i)&&Cl(n.segments,i,r)&&n.children[Wt])&&Jp(n.children[Wt],e,a,r)}}function Cl(n,e,t){return e.every((r,i)=>Th[t](n[i].parameters,r.parameters))}class bi{constructor(e=new on([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=iu(this.queryParams)),this._queryParamMap}toString(){return Dh.serialize(this)}}class on{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Dr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Po(this)}}class uc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=iu(this.parameters)),this._parameterMap}toString(){return xl(this)}}function ya(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let va=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return new cc},providedIn:"root"}),n})();class cc{parse(e){const t=new eg(e);return new bi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${lc(e.root,!0)}`,r=function Rh(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ou(t)}=${ou(i)}`).join("&"):`${ou(t)}=${ou(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Sh(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Dh=new cc;function Po(n){return n.segments.map(e=>xl(e)).join("/")}function lc(n,e){if(!n.hasChildren())return Po(n);if(e){const t=n.children[Wt]?lc(n.children[Wt],!1):"",r=[];return Dr(n.children,(i,a)=>{a!==Wt&&r.push(`${a}:${lc(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ch(n,e){let t=[];return Dr(n.children,(r,i)=>{i===Wt&&(t=t.concat(e(r,i)))}),Dr(n.children,(r,i)=>{i!==Wt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Wt?[lc(n.children[Wt],!1)]:[`${i}:${lc(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Wt]?`${Po(n)}/${t[0]}`:`${Po(n)}/(${t.join("//")})`}}function Sl(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ou(n){return Sl(n).replace(/%3B/gi,";")}function Al(n){return Sl(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ro(n){return decodeURIComponent(n)}function Rl(n){return ro(n.replace(/\+/g,"%20"))}function xl(n){return`${Al(n.path)}${function Ah(n){return Object.keys(n).map(e=>`;${Al(e)}=${Al(n[e])}`).join("")}(n.parameters)}`}const uy=/^[^\/()?;=#]+/;function au(n){const e=n.match(uy);return e?e[0]:""}const xh=/^[^=?&#]+/,ly=/^[^&#]+/;class eg{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new on([],{}):new on([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Wt]=new on(e,t)),r}parseSegment(){const e=au(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new p.vHH(4009,Lr);return this.capture(e),new uc(ro(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=au(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=au(this.remaining);i&&(r=i,this.capture(r))}e[ro(t)]=ro(r)}parseQueryParam(e){const t=function cy(n){const e=n.match(xh);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Ml(n){const e=n.match(ly);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Rl(t),a=Rl(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=au(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new p.vHH(4010,Lr);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Wt);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[Wt]:new on([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new p.vHH(4011,Lr)}}function dc(n){return n.segments.length>0?new on([],{[Wt]:n}):n}function hc(n){const e={};for(const r of Object.keys(n.children)){const a=hc(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function Nl(n){if(1===n.numberOfChildren&&n.children[Wt]){const e=n.children[Wt];return new on(n.segments.concat(e.segments),e.children)}return n}(new on(n.segments,e))}function wa(n){return n instanceof bi}const Mh=!1;function tg(n,e,t,r,i){if(0===t.length)return pc(e.root,e.root,e.root,r,i);const a=function Pl(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ng(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return Dr(a.outlets,(_,w)=>{h[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((h,_)=>{0==_&&"."===h||(0==_&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new ng(t,e,r)}(t);return a.toRoot()?pc(e.root,e.root,new on([],{}),r,i):function c(_){const w=function Ol(n,e,t,r){if(n.isAbsolute)return new io(e.root,!0,0);if(-1===r)return new io(t,t===e.root,0);return function Ph(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new p.vHH(4005,Mh&&"Invalid number of '../'");i=r.segments.length}return new io(r,!1,i-a)}(t,r+(Ea(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,_),b=w.processChildren?Sr(w.segmentGroup,w.index,a.commands):cu(w.segmentGroup,w.index,a.commands);return pc(e.root,w.segmentGroup,b,r,i)}(n.snapshot?._lastPathIndex)}function Ea(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function fc(n){return"object"==typeof n&&null!=n&&n.outlets}function pc(n,e,t,r,i){let c,a={};r&&Dr(r,(_,w)=>{a[w]=Array.isArray(_)?_.map(b=>`${b}`):`${_}`}),c=n===e?t:gc(n,e,t);const h=dc(hc(c));return new bi(h,a,i)}function gc(n,e,t){const r={};return Dr(n.children,(i,a)=>{r[a]=i===e?t:gc(i,e,t)}),new on(n.segments,r)}class ng{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ea(r[0]))throw new p.vHH(4003,Mh&&"Root segment cannot have matrix parameters");const i=r.find(fc);if(i&&i!==bh(r))throw new p.vHH(4004,Mh&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class io{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function cu(n,e,t){if(n||(n=new on([],{})),0===n.segments.length&&n.hasChildren())return Sr(n,e,t);const r=function Ia(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],h=t[r];if(fc(h))break;const _=`${h}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!Ll(_,w,c))return a;r+=2}else{if(!Ll(_,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new on(n.segments.slice(0,r.pathIndex),{});return a.children[Wt]=new on(n.segments.slice(r.pathIndex),n.children),Sr(a,0,i)}return r.match&&0===i.length?new on(n.segments,{}):r.match&&!n.hasChildren()?lu(n,e,t):r.match?Sr(n,0,i):lu(n,e,t)}function Sr(n,e,t){if(0===t.length)return new on(n.segments,{});{const r=function uu(n){return fc(n[0])?n[0].outlets:{[Wt]:n}}(t),i={};return!r[Wt]&&n.children[Wt]&&1===n.numberOfChildren&&0===n.children[Wt].segments.length?Sr(n.children[Wt],e,t):(Dr(r,(a,c)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[c]=cu(n.children[c],e,a))}),Dr(n.children,(a,c)=>{void 0===r[c]&&(i[c]=a)}),new on(n.segments,i))}}function lu(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(fc(a)){const _=kh(a.outlets);return new on(r,_)}if(0===i&&Ea(t[0])){r.push(new uc(n.segments[e].path,ko(t[0]))),i++;continue}const c=fc(a)?a.outlets[Wt]:`${a}`,h=i<t.length-1?t[i+1]:null;c&&h&&Ea(h)?(r.push(new uc(c,ko(h))),i+=2):(r.push(new uc(c,{})),i++)}return new on(r,{})}function kh(n){const e={};return Dr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=lu(new on([],{}),0,t))}),e}function ko(n){const e={};return Dr(n,(t,r)=>e[r]=`${t}`),e}function Ll(n,e,t){return n==t.path&&ts(e,t.parameters)}const du="imperative";class fs{constructor(e,t){this.id=e,this.url=t}}class Oh extends fs{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ti extends fs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class hu extends fs{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class mc extends fs{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class fu extends fs{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Lh extends fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ba extends fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ci extends fs{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Fh extends fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rg extends fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hy{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ps{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class _c{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uh{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yc{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fl{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vc{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let og=(()=>{class n{createUrlTree(t,r,i,a,c,h){return tg(t||r.root,i,a,c,h)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(e){return og.\u0275fac(e)},providedIn:"root"}),n})();class f{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=g(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=g(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=E(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return E(e,this._root).map(t=>t.value)}}function g(n,e){if(n===e.value)return e;for(const t of e.children){const r=g(n,t);if(r)return r}return null}function E(n,e){if(n===e.value)return[e];for(const t of e.children){const r=E(n,t);if(r.length)return r.unshift(e),r}return[]}class C{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function M(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Q extends f{constructor(e,t){super(e),this.snapshot=t,pu(this,e)}toString(){return this.snapshot.toString()}}function fe(n,e){const t=function Ke(n,e){const c=new Yn([],{},{},"",{},Wt,e,null,n.root,-1,{});return new rs("",new C(c,[]))}(n,e),r=new Ji([new uc("",{})]),i=new Ji({}),a=new Ji({}),c=new Ji({}),h=new Ji(""),_=new at(r,i,c,h,a,Wt,e,t.root);return _.snapshot=t.root,new Q(new C(_,[]),t)}class at{constructor(e,t,r,i,a,c,h,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=h,this.title=this.data?.pipe((0,bt.U)(w=>w[Ii]))??st(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,bt.U)(e=>iu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,bt.U)(e=>iu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ot(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function Mt(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Yn{get title(){return this.data?.[Ii]}constructor(e,t,r,i,a,c,h,_,w,b,D){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=h,this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=b,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=iu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=iu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class rs extends f{constructor(e,t){super(t),this.url=e,pu(this,t)}toString(){return Vh(this._root)}}function pu(n,e){e.value._routerState=n,e.children.forEach(t=>pu(n,t))}function Vh(n){const e=n.children.length>0?` { ${n.children.map(Vh).join(", ")} } `:"";return`${n.value}${e}`}function wc(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ts(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ts(e.params,t.params)||n.params.next(t.params),function wl(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ts(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ts(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function gu(n,e){const t=ts(n.params,e.params)&&function Dl(n,e){return ya(n,e)&&n.every((t,r)=>ts(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||gu(n.parent,e.parent))}function gs(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Bh(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return gs(n,r,i);return gs(n,r)})}(n,e,t);return new C(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(h=>gs(n,h)),c}}const r=function jh(n){return new at(new Ji(n.url),new Ji(n.params),new Ji(n.queryParams),new Ji(n.fragment),new Ji(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>gs(n,a));return new C(r,i)}}const mu="ngNavigationCancelingError";function ag(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=wa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=py(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function py(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[mu]=!0,r.cancellationCode=e,t&&(r.url=t),r}function $h(n){return Ul(n)&&wa(n.url)}function Ul(n){return n&&n[mu]}class gy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ug,this.attachRef=null}}let ug=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new gy,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const my=!1;let cg=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Wt,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.parentContexts=(0,p.f3M)(ug),this.location=(0,p.f3M)(p.s_b),this.changeDetector=(0,p.f3M)(p.sBO),this.environmentInjector=(0,p.f3M)(p.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,my);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,my);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,my);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new p.vHH(4013,my);this._activatedRoute=t;const i=this.location,c=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,_=new ZC(t,h,i.injector);if(r&&function YC(n){return!!n.resolveComponentFactory}(r)){const w=r.resolveComponentFactory(c);this.activated=i.createComponent(w,i.length,_)}else this.activated=i.createComponent(c,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[p.TTD]}),n})();class ZC{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===at?this.route:e===ug?this.childContexts:this.parent.get(e,t)}}let lg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},dependencies:[cg],encapsulation:2}),n})();function pE(n,e){return n.providers&&!n._injector&&(n._injector=(0,p.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function dg(n){const e=n.children&&n.children.map(dg),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Wt&&(t.component=lg),t}function ms(n){return n.outlet||Wt}function mE(n,e){const t=n.filter(r=>ms(r)===e);return t.push(...n.filter(r=>ms(r)!==e)),t}function Hh(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class tD{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),wc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=M(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),Dr(i,(a,c)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=M(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=M(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=M(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Fl(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Uh(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(wc(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),wc(h.route.value),this.activateChildRoutes(e,null,c.children)}else{const h=Hh(i.snapshot),_=h?.get(p._Vd)??null;c.attachRef=null,c.route=i,c.resolver=_,c.injector=h,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class vy{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class wy{constructor(e,t){this.component=e,this.route=t}}function fM(n,e,t){const r=n._root;return Vl(r,e?e._root:null,t,[r.value])}function _u(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,p.Z0I)(n)?e.get(n):n:r}function Vl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=M(e);return n.children.forEach(c=>{(function _E(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const _=function yE(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ya(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ya(n.url,e.url)||!ts(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!gu(n,e)||!ts(n.queryParams,e.queryParams);default:return!gu(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new vy(r)):(a.data=c.data,a._resolvedData=c._resolvedData),Vl(n,e,a.component?h?h.children:null:t,r,i),_&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new wy(h.outlet.component,c))}else c&&hg(e,h,i),i.canActivateChecks.push(new vy(r)),Vl(n,null,a.component?h?h.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),Dr(a,(c,h)=>hg(c,t.getContext(h),i)),i}function hg(n,e,t){const r=M(n),i=n.value;Dr(r,(a,c)=>{hg(a,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new wy(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function zh(n){return"function"==typeof n}function fg(n){return n instanceof Ja||"EmptyError"===n?.name}const Oo=Symbol("INITIAL_VALUE");function Bl(){return Wn(n=>_l(n.map(e=>e.pipe(tu(1),ac(Oo)))).pipe((0,bt.U)(e=>{for(const t of e)if(!0!==t){if(t===Oo)return Oo;if(!1===t||t instanceof bi)return t}return!0}),Vi(e=>e!==Oo),tu(1)))}function TE(n){return(0,ry.z)((0,li.b)(e=>{if(wa(e))throw ag(0,e)}),(0,bt.U)(e=>!0===e))}const yu={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function DE(n,e,t,r,i){const a=Dy(n,e,t);return a.matched?function CE(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?st(i.map(c=>{const h=_u(c,n);return No(function nD(n){return n&&zh(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(Bl(),TE()):st(!0)}(r=pE(e,r),e,t).pipe((0,bt.U)(c=>!0===c?a:{...yu})):st(a)}function Dy(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...yu}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||oy)(t,n,e);if(!i)return{...yu};const a={};Dr(i.posParams,(h,_)=>{a[_]=h.path});const c=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function mg(n,e,t,r){if(t.length>0&&function SE(n,e,t){return t.some(r=>Wh(n,e,r)&&ms(r)!==Wt)}(n,t,r)){const a=new on(e,function sD(n,e,t,r){const i={};i[Wt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&ms(a)!==Wt){const c=new on([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[ms(a)]=c}return i}(n,e,r,new on(t,n.children)));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===t.length&&function oD(n,e,t){return t.some(r=>Wh(n,e,r))}(n,t,r)){const a=new on(n.segments,function Sy(n,e,t,r,i){const a={};for(const c of r)if(Wh(n,t,c)&&!i[ms(c)]){const h=new on([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,a[ms(c)]=h}return{...i,...a}}(n,e,t,r,n.children));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}const i=new on(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function Wh(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function aD(n,e,t,r){return!!(ms(n)===r||r!==Wt&&Wh(e,t,n))&&("**"===n.path||Dy(e,n,t).matched)}function AE(n,e,t){return 0===e.length&&!n.children[t]}const vu=!1;class _g{constructor(e){this.segmentGroup=e||null}}class Ic{constructor(e){this.urlTree=e}}function Ta(n){return eu(new _g(n))}function RE(n){return eu(new Ic(n))}class lD{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=mg(this.urlTree.root,[],[],this.config).segmentGroup,t=new on(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Wt).pipe((0,bt.U)(a=>this.createUrlTree(hc(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(_a(a=>{if(a instanceof Ic)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof _g?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Wt).pipe((0,bt.U)(i=>this.createUrlTree(hc(i),e.queryParams,e.fragment))).pipe(_a(i=>{throw i instanceof _g?this.noMatchError(i):i}))}noMatchError(e){return new p.vHH(4002,vu)}createUrlTree(e,t,r){const i=dc(e);return new bi(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,bt.U)(a=>new on([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,en.D)(i).pipe(ru(a=>{const c=r.children[a],h=mE(t,a);return this.expandSegmentGroup(e,h,c,a).pipe((0,bt.U)(_=>({segment:_,outlet:a})))}),Mo((a,c)=>(a[c.outlet]=c.segment,a),{}),Eh())}expandSegment(e,t,r,i,a,c){return(0,en.D)(r).pipe(ru(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,c).pipe(_a(w=>{if(w instanceof _g)return st(null);throw w}))),hs(h=>!!h),_a((h,_)=>{if(fg(h))return AE(t,i,a)?st(new on([],{})):Ta(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,c,h){return aD(i,t,a,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,c):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c):Ta(t):Ta(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?RE(a):this.lineralizeSegments(r,a).pipe((0,Cr.z)(c=>{const h=new on(c,{});return this.expandSegment(e,h,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:h,consumedSegments:_,remainingSegments:w,positionalParamSegments:b}=Dy(t,i,a);if(!h)return Ta(t);const D=this.applyRedirectCommands(_,i.redirectTo,b);return i.redirectTo.startsWith("/")?RE(D):this.lineralizeSegments(i,D).pipe((0,Cr.z)(x=>this.expandSegment(e,t,r,x.concat(w),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=pE(r,e),r.loadChildren?(r._loadedRoutes?st({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,bt.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new on(i,{})))):st(new on(i,{}))):DE(t,r,i,e).pipe(Wn(({matched:c,consumedSegments:h,remainingSegments:_})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Cr.z)(b=>{const D=b.injector??e,x=b.routes,{segmentGroup:F,slicedSegments:$}=mg(t,h,_,x),ee=new on(F.segments,F.children);if(0===$.length&&ee.hasChildren())return this.expandChildren(D,x,ee).pipe((0,bt.U)(lt=>new on(h,lt)));if(0===x.length&&0===$.length)return st(new on(h,{}));const se=ms(r)===a;return this.expandSegment(D,ee,x,$,se?Wt:a,!0).pipe((0,bt.U)(yt=>new on(h.concat(yt.segments),yt.children)))})):Ta(t)))}getChildConfig(e,t,r){return t.children?st({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?st({routes:t._loadedRoutes,injector:t._loadedInjector}):function iD(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?st(!0):st(i.map(c=>{const h=_u(c,n);return No(function wE(n){return n&&zh(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(Bl(),TE())}(e,t,r).pipe((0,Cr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,li.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function uD(n){return eu(py(vu,3))}())):st({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return st(r);if(i.numberOfChildren>1||!i.children[Wt])return e.redirectTo,eu(new p.vHH(4e3,vu));i=i.children[Wt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new bi(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Dr(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return Dr(t.children,(h,_)=>{c[_]=this.createSegmentGroup(e,h,r,i)}),new on(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new p.vHH(4001,vu);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class Ry{}class My{constructor(e,t,r,i,a,c,h){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=c,this.urlSerializer=h}recognize(){const e=mg(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Wt).pipe((0,bt.U)(t=>{if(null===t)return null;const r=new Yn([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Wt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new C(r,t),a=new rs(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=Ot(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,en.D)(Object.keys(r.children)).pipe(ru(i=>{const a=r.children[i],c=mE(t,i);return this.processSegmentGroup(e,c,a,i)}),Mo((i,a)=>i&&a?(i.push(...a),i):null),function Ih(n,e=!1){return(0,yr.e)((t,r)=>{let i=0;t.subscribe((0,Fn.x)(r,a=>{const c=n(a,i++);(c||e)&&r.next(a),!c&&r.complete()}))})}(i=>null!==i),nu(null),Eh(),(0,bt.U)(i=>{if(null===i)return null;const a=NE(i);return function qh(n){n.sort((e,t)=>e.value.outlet===Wt?-1:t.value.outlet===Wt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,en.D)(t).pipe(ru(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,a)),hs(c=>!!c),_a(c=>{if(fg(c))return AE(r,i,a)?st([]):st(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!aD(t,r,i,a))return st(null);let c;if("**"===t.path){const h=i.length>0?bh(i).parameters:{},_=kE(r)+i.length;c=st({snapshot:new Yn(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,bc(t),ms(t),t.component??t._loadedComponent??null,t,PE(r),_,Lo(t)),consumedSegments:[],remainingSegments:[]})}else c=DE(r,t,i,e).pipe((0,bt.U)(({matched:h,consumedSegments:_,remainingSegments:w,parameters:b})=>{if(!h)return null;const D=kE(r)+_.length;return{snapshot:new Yn(_,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,bc(t),ms(t),t.component??t._loadedComponent??null,t,PE(r),D,Lo(t)),consumedSegments:_,remainingSegments:w}}));return c.pipe(Wn(h=>{if(null===h)return st(null);const{snapshot:_,consumedSegments:w,remainingSegments:b}=h;e=t._injector??e;const D=t._loadedInjector??e,x=function hD(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:F,slicedSegments:$}=mg(r,w,b,x.filter(se=>void 0===se.redirectTo));if(0===$.length&&F.hasChildren())return this.processChildren(D,x,F).pipe((0,bt.U)(se=>null===se?null:[new C(_,se)]));if(0===x.length&&0===$.length)return st([new C(_,[])]);const ee=ms(t)===a;return this.processSegment(D,x,F,$,ee?Wt:a).pipe((0,bt.U)(se=>null===se?null:[new C(_,se)]))}))}}function fD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function NE(n){const e=[],t=new Set;for(const r of n){if(!fD(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=NE(r.children);e.push(new C(r.value,i))}return e.filter(r=>!t.has(r))}function PE(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function kE(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function bc(n){return n.data||{}}function Lo(n){return n.resolve||{}}function Ny(n){return"string"==typeof n.title||null===n.title}function yg(n){return Wn(e=>{const t=n(e);return t?(0,en.D)(t).pipe((0,bt.U)(()=>e)):st(e)})}const jl=new p.OlP("ROUTES");let ky=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return st(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=No(t.loadComponent()).pipe((0,bt.U)(LE),(0,li.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),vl(()=>{this.componentLoaders.delete(t)})),i=new oc(r,()=>new xo.x).pipe(vh());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return st({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,bt.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,w,b=!1;Array.isArray(h)?w=h:(_=h.create(t).injector,w=Qp(_.get(jl,[],p.XFs.Self|p.XFs.Optional)));return{routes:w.map(dg),injector:_}}),vl(()=>{this.childrenLoaders.delete(r)})),c=new oc(a,()=>new xo.x).pipe(vh());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return No(t()).pipe((0,bt.U)(LE),(0,Cr.z)(i=>i instanceof p.YKP||Array.isArray(i)?st(i):(0,en.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3),p.LFG(p.Sil))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function LE(n){return function so(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let vg=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new xo.x,this.configLoader=(0,p.f3M)(ky),this.environmentInjector=(0,p.f3M)(p.lqb),this.urlSerializer=(0,p.f3M)(va),this.rootContexts=(0,p.f3M)(ug),this.navigationId=0,this.afterPreactivation=()=>st(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new ps(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new hy(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Ji({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:du,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Vi(r=>0!==r.id),(0,bt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Wn(r=>{let i=!1,a=!1;return st(r).pipe((0,li.b)(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Wn(c=>{const h=t.browserUrlTree.toString(),_=!t.navigated||c.extractedUrl.toString()!==h||h!==t.currentUrlTree.toString();if(!_&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const b="";return this.events.next(new mc(c.id,t.serializeUrl(r.rawUrl),b,0)),t.rawUrlTree=c.rawUrl,c.resolve(null),ds.E}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return FE(c.source)&&(t.browserUrlTree=c.extractedUrl),st(c).pipe(Wn(b=>{const D=this.transitions?.getValue();return this.events.next(new Oh(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),D!==this.transitions?.getValue()?ds.E:Promise.resolve(b)}),function ME(n,e,t,r){return Wn(i=>function cD(n,e,t,r,i){return new lD(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,bt.U)(a=>({...i,urlAfterRedirects:a}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,li.b)(b=>{this.currentNavigation={...this.currentNavigation,finalUrl:b.urlAfterRedirects},r.urlAfterRedirects=b.urlAfterRedirects}),function gD(n,e,t,r,i){return(0,Cr.z)(a=>function dD(n,e,t,r,i,a,c="emptyOnly"){return new My(n,e,t,r,i,c,a).recognize().pipe(Wn(h=>null===h?function xy(n){return new Ui.y(e=>e.error(n))}(new Ry):st(h)))}(n,e,t,a.urlAfterRedirects,r.serialize(a.urlAfterRedirects),r,i).pipe((0,bt.U)(c=>({...a,targetSnapshot:c}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,li.b)(b=>{if(r.targetSnapshot=b.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!b.extras.skipLocationChange){const x=t.urlHandlingStrategy.merge(b.urlAfterRedirects,b.rawUrl);t.setBrowserUrl(x,b)}t.browserUrlTree=b.urlAfterRedirects}const D=new Lh(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(D)}));if(_&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:b,extractedUrl:D,source:x,restoredState:F,extras:$}=c,ee=new Oh(b,this.urlSerializer.serialize(D),x,F);this.events.next(ee);const se=fe(D,this.rootComponentType).snapshot;return st(r={...c,targetSnapshot:se,urlAfterRedirects:D,extras:{...$,skipLocationChange:!1,replaceUrl:!1}})}{const b="";return this.events.next(new mc(c.id,t.serializeUrl(r.extractedUrl),b,1)),t.rawUrlTree=c.rawUrl,c.resolve(null),ds.E}}),(0,li.b)(c=>{const h=new ba(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),(0,bt.U)(c=>r={...c,guards:fM(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),function by(n,e){return(0,Cr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?st({...t,guardsResult:!0}):function pg(n,e,t,r){return(0,en.D)(n).pipe((0,Cr.z)(i=>function Cy(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?st(a.map(h=>{const _=Hh(e)??i,w=_u(h,_);return No(function Iy(n){return n&&zh(n.canDeactivate)}(w)?w.canDeactivate(n,e,t,r):_.runInContext(()=>w(n,e,t,r))).pipe(hs())})).pipe(Bl()):st(!0)}(i.component,i.route,t,e,r)),hs(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Cr.z)(h=>h&&function vE(n){return"boolean"==typeof n}(h)?function rD(n,e,t,r){return(0,en.D)(e).pipe(ru(i=>Zp(function gg(n,e){return null!==n&&e&&e(new _c(n)),st(!0)}(i.route.parent,r),function Ty(n,e){return null!==n&&e&&e(new yc(n)),st(!0)}(i.route,r),function bE(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function Gh(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>_h(()=>st(c.guards.map(_=>{const w=Hh(c.node)??t,b=_u(_,w);return No(function pM(n){return n&&zh(n.canActivateChild)}(b)?b.canActivateChild(r,n):w.runInContext(()=>b(r,n))).pipe(hs())})).pipe(Bl())));return st(a).pipe(Bl())}(n,i.path,t),function Ec(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return st(!0);const i=r.map(a=>_h(()=>{const c=Hh(e)??t,h=_u(a,c);return No(function Ey(n){return n&&zh(n.canActivate)}(h)?h.canActivate(e,n):c.runInContext(()=>h(e,n))).pipe(hs())}));return st(i).pipe(Bl())}(n,i.route,t))),hs(i=>!0!==i,!0))}(r,a,n,e):st(h)),(0,bt.U)(h=>({...t,guardsResult:h})))})}(this.environmentInjector,c=>this.events.next(c)),(0,li.b)(c=>{if(r.guardsResult=c.guardsResult,wa(c.guardsResult))throw ag(0,c.guardsResult);const h=new Ci(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(h)}),Vi(c=>!!c.guardsResult||(t.restoreHistory(c),this.cancelNavigationTransition(c,"",3),!1)),yg(c=>{if(c.guards.canActivateChecks.length)return st(c).pipe((0,li.b)(h=>{const _=new Fh(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(_)}),Wn(h=>{let _=!1;return st(h).pipe(function mD(n,e){return(0,Cr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return st(t);let a=0;return(0,en.D)(i).pipe(ru(c=>function mM(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!Ny(i)&&(a[Ii]=i.title),function _M(n,e,t,r){const i=function OE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return st({});const a={};return(0,en.D)(i).pipe((0,Cr.z)(c=>function yM(n,e,t,r){const i=Hh(e)??r,a=_u(n,i);return No(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[c],e,t,r).pipe(hs(),(0,li.b)(h=>{a[c]=h}))),wh(1),function Yp(n){return(0,bt.U)(()=>n)}(a),_a(c=>fg(c)?ds.E:eu(c)))}(a,n,e,r).pipe((0,bt.U)(c=>(n._resolvedData=c,n.data=Ot(n,t).resolve,i&&Ny(i)&&(n.data[Ii]=i.title),null)))}(c.route,r,n,e)),(0,li.b)(()=>a++),wh(1),(0,Cr.z)(c=>a===i.length?st(t):ds.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,li.b)({next:()=>_=!0,complete:()=>{_||(t.restoreHistory(h),this.cancelNavigationTransition(h,"",2))}}))}),(0,li.b)(h=>{const _=new rg(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(_)}))}),yg(c=>{const h=_=>{const w=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,li.b)(b=>{_.component=b}),(0,bt.U)(()=>{})));for(const b of _.children)w.push(...h(b));return w};return _l(h(c.targetSnapshot.root)).pipe(nu(),tu(1))}),yg(()=>this.afterPreactivation()),(0,bt.U)(c=>{const h=function Ps(n,e,t){const r=gs(n,e._root,t?t._root:void 0);return new Q(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return r={...c,targetRouterState:h}}),(0,li.b)(c=>{t.currentUrlTree=c.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),t.routerState=c.targetRouterState,"deferred"===t.urlUpdateStrategy&&(c.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,c),t.browserUrlTree=c.urlAfterRedirects)}),((n,e,t)=>(0,bt.U)(r=>(new tD(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c)),(0,li.b)({next:c=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Ti(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{i=!0}}),vl(()=>{i||a||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),_a(c=>{if(a=!0,Ul(c)){$h(c)||(t.navigated=!0,t.restoreHistory(r,!0));const h=new hu(r.id,this.urlSerializer.serialize(r.extractedUrl),c.message,c.cancellationCode);if(this.events.next(h),$h(c)){const _=t.urlHandlingStrategy.merge(c.url,t.rawUrlTree),w={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||FE(r.source)};t.scheduleNavigation(_,du,null,w,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const h=new fu(r.id,this.urlSerializer.serialize(r.extractedUrl),c,r.targetSnapshot??void 0);this.events.next(h);try{r.resolve(t.errorHandler(c))}catch(_){r.reject(_)}}return ds.E}))}))}cancelNavigationTransition(t,r,i){const a=new hu(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function FE(n){return n!==du}let UE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Wt);return r}getResolvedTitleForRoute(t){return t.data[Ii]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(yD)},providedIn:"root"}),n})(),yD=(()=>{class n extends UE{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(So))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),VE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(wD)},providedIn:"root"}),n})();class vD{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let wD=(()=>{class n extends vD{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qt=new p.OlP("",{providedIn:"root",factory:()=>({})});let BE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(jE)},providedIn:"root"}),n})(),jE=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ID(n){throw n}function bD(n,e,t){return e.parse("/")}const $E={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},TD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Bi=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,p.f3M)(p.c2e),this.isNgZoneEnabled=!1,this.options=(0,p.f3M)(qt,{optional:!0})||{},this.errorHandler=this.options.errorHandler||ID,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||bD,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,p.f3M)(BE),this.routeReuseStrategy=(0,p.f3M)(VE),this.urlCreationStrategy=(0,p.f3M)(y),this.titleStrategy=(0,p.f3M)(UE),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Qp((0,p.f3M)(jl,{optional:!0})??[]),this.navigationTransitions=(0,p.f3M)(vg),this.urlSerializer=(0,p.f3M)(va),this.location=(0,p.f3M)(Ue),this.isNgZoneEnabled=(0,p.f3M)(p.R0b)instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new bi,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=fe(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),du,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},c=i?.navigationId?i:null;if(i){const _={...i};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(a.state=_)}const h=this.parseUrl(t);this.scheduleNavigation(h,r,c,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(dg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:h,preserveFragment:_}=r,w=_?this.currentUrlTree.fragment:c;let b=null;switch(h){case"merge":b={...this.currentUrlTree.queryParams,...a};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=a||null}return null!==b&&(b=this.removeEmptyProps(b)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,b,w??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=wa(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,du,null,r)}navigate(t,r={skipLocationChange:!1}){return function CD(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new p.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...$E}:!1===r?{...TD}:r,wa(t))return bl(this.currentUrlTree,t,i);const a=this.parseUrl(t);return bl(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,c){if(this.disposed)return Promise.resolve(!1);let h,_,w,b;return c?(h=c.resolve,_=c.reject,w=c.promise):w=new Promise((D,x)=>{h=D,_=x}),b="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:b,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:h,reject:_,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(D=>Promise.reject(D))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Ly{}let Fy=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Vi(t=>t instanceof Ti),ru(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,p.MMx)(a.providers,t,`Route: ${a.path}`));const c=a._injector??t,h=a._loadedInjector??c;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(c,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(h,a.children??a._loadedRoutes))}return(0,en.D)(i).pipe((0,Ns.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):st(null);const a=i.pipe((0,Cr.z)(c=>null===c?st(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,en.D)([a,c]).pipe((0,Ns.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Bi),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(Ly),p.LFG(ky))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Zh=new p.OlP("");let GE=(()=>{class n{constructor(t,r,i,a,c={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Oh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ti&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof vc&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new vc(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();var ks=(()=>((ks=ks||{})[ks.COMPLETE=0]="COMPLETE",ks[ks.FAILED=1]="FAILED",ks[ks.REDIRECTING=2]="REDIRECTING",ks))();const Yh=!1;function Tc(n,e){return{\u0275kind:n,\u0275providers:e}}const Vy=new p.OlP("",{providedIn:"root",factory:()=>!1});function Qh(){const n=(0,p.f3M)(p.zs3);return e=>{const t=n.get(p.z2F);if(e!==t.components[0])return;const r=n.get(Bi),i=n.get(zE);1===n.get(Eg)&&r.initialNavigation(),n.get(WE,null,p.XFs.Optional)?.setUpPreloading(),n.get(Zh,null,p.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const zE=new p.OlP(Yh?"bootstrap done indicator":"",{factory:()=>new xo.x}),Eg=new p.OlP(Yh?"initial navigation":"",{providedIn:"root",factory:()=>1});function RD(){let n=[];return n=Yh?[{provide:p.Xts,multi:!0,useFactory:()=>{const e=(0,p.f3M)(Bi);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function ig(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Tc(1,n)}const WE=new p.OlP(Yh?"router preloader":"");function xD(n){return Tc(0,[{provide:WE,useExisting:Fy},{provide:Ly,useExisting:n}])}const Gl=!1,PD=new p.OlP(Gl?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),By=[Ue,{provide:va,useClass:cc},Bi,ug,{provide:at,useFactory:function Uy(n){return n.routerState.root},deps:[Bi]},ky,Gl?{provide:Vy,useValue:!0}:[]];function kD(){return new p.PXZ("Router",Bi)}let OD=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[By,Gl&&r?.enableTracing?RD().\u0275providers:[],{provide:jl,multi:!0,useValue:t},{provide:PD,useFactory:ZE,deps:[[Bi,new p.FiY,new p.tp0]]},{provide:qt,useValue:r||{}},r?.useHash?{provide:nt,useClass:Me}:{provide:nt,useClass:Te},{provide:Zh,useFactory:()=>{const n=(0,p.f3M)(oa),e=(0,p.f3M)(p.R0b),t=(0,p.f3M)(qt),r=(0,p.f3M)(vg),i=(0,p.f3M)(va);return t.scrollOffset&&n.setOffset(t.scrollOffset),new GE(i,r,n,e,t)}},r?.preloadingStrategy?xD(r.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:kD},r?.initialNavigation?FD(r):[],[{provide:YE,useFactory:Qh},{provide:p.tb,multi:!0,useExisting:YE}]]}}static forChild(t){return{ngModule:n,providers:[{provide:jl,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(PD,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[lg]}),n})();function ZE(n){if(Gl&&n)throw new p.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function FD(n){return["disabled"===n.initialNavigation?Tc(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const e=(0,p.f3M)(Bi);return()=>{e.setUpLocationChangeListener()}}},{provide:Eg,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Tc(2,[{provide:Eg,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:e=>{const t=e.get(ue,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Bi),a=e.get(zE);(function EM(n,e){n.events.pipe(Vi(t=>t instanceof Ti||t instanceof hu||t instanceof fu||t instanceof mc),(0,bt.U)(t=>t instanceof Ti||t instanceof mc?ks.COMPLETE:t instanceof hu&&(0===t.code||1===t.code)?ks.REDIRECTING:ks.FAILED),Vi(t=>t!==ks.REDIRECTING),tu(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(vg).afterPreactivation=()=>(r(!0),a.closed?st(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const YE=new p.OlP(Gl?"Router Initializer":""),jy=[];let Jh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[OD.forRoot(jy),OD]}),n})();function $y(n,e){1&n&&(p.TgZ(0,"pre"),p._uU(1,"ng generate component xyz"),p.qZA())}function bg(n,e){1&n&&(p.TgZ(0,"pre"),p._uU(1,"ng add @angular/material"),p.qZA())}function QE(n,e){1&n&&(p.TgZ(0,"pre"),p._uU(1,"ng add @angular/pwa"),p.qZA())}function Hy(n,e){1&n&&(p.TgZ(0,"pre"),p._uU(1,"ng add _____"),p.qZA())}function Gy(n,e){1&n&&(p.TgZ(0,"pre"),p._uU(1,"ng test"),p.qZA())}function zy(n,e){1&n&&(p.TgZ(0,"pre"),p._uU(1,"ng build"),p.qZA())}let XE=(()=>{class n{constructor(){this.title="opac"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:157,vars:7,consts:[["role","banner",1,"toolbar"],["width","40","alt","Angular Logo","src","data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTAgMjUwIj4KICAgIDxwYXRoIGZpbGw9IiNERDAwMzEiIGQ9Ik0xMjUgMzBMMzEuOSA2My4ybDE0LjIgMTIzLjFMMTI1IDIzMGw3OC45LTQzLjcgMTQuMi0xMjMuMXoiIC8+CiAgICA8cGF0aCBmaWxsPSIjQzMwMDJGIiBkPSJNMTI1IDMwdjIyLjItLjFWMjMwbDc4LjktNDMuNyAxNC4yLTEyMy4xTDEyNSAzMHoiIC8+CiAgICA8cGF0aCAgZmlsbD0iI0ZGRkZGRiIgZD0iTTEyNSA1Mi4xTDY2LjggMTgyLjZoMjEuN2wxMS43LTI5LjJoNDkuNGwxMS43IDI5LjJIMTgzTDEyNSA1Mi4xem0xNyA4My4zaC0zNGwxNy00MC45IDE3IDQwLjl6IiAvPgogIDwvc3ZnPg=="],[1,"spacer"],["aria-label","Angular on twitter","target","_blank","rel","noopener","href","https://twitter.com/angular","title","Twitter"],["id","twitter-logo","height","24","data-name","Logo","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 400 400"],["width","400","height","400","fill","none"],["d","M153.62,301.59c94.34,0,145.94-78.16,145.94-145.94,0-2.22,0-4.43-.15-6.63A104.36,104.36,0,0,0,325,122.47a102.38,102.38,0,0,1-29.46,8.07,51.47,51.47,0,0,0,22.55-28.37,102.79,102.79,0,0,1-32.57,12.45,51.34,51.34,0,0,0-87.41,46.78A145.62,145.62,0,0,1,92.4,107.81a51.33,51.33,0,0,0,15.88,68.47A50.91,50.91,0,0,1,85,169.86c0,.21,0,.43,0,.65a51.31,51.31,0,0,0,41.15,50.28,51.21,51.21,0,0,1-23.16.88,51.35,51.35,0,0,0,47.92,35.62,102.92,102.92,0,0,1-63.7,22A104.41,104.41,0,0,1,75,278.55a145.21,145.21,0,0,0,78.62,23","fill","#fff"],["aria-label","Angular on YouTube","target","_blank","rel","noopener","href","https://youtube.com/angular","title","YouTube"],["id","youtube-logo","height","24","width","24","data-name","Logo","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","#fff"],["d","M0 0h24v24H0V0z","fill","none"],["d","M21.58 7.19c-.23-.86-.91-1.54-1.77-1.77C18.25 5 12 5 12 5s-6.25 0-7.81.42c-.86.23-1.54.91-1.77 1.77C2 8.75 2 12 2 12s0 3.25.42 4.81c.23.86.91 1.54 1.77 1.77C5.75 19 12 19 12 19s6.25 0 7.81-.42c.86-.23 1.54-.91 1.77-1.77C22 15.25 22 12 22 12s0-3.25-.42-4.81zM10 15V9l5.2 3-5.2 3z"],["role","main",1,"content"],[1,"card","highlight-card","card-small"],["id","rocket","xmlns","http://www.w3.org/2000/svg","width","101.678","height","101.678","viewBox","0 0 101.678 101.678"],["id","Group_83","data-name","Group 83","transform","translate(-141 -696)"],["id","Ellipse_8","data-name","Ellipse 8","cx","50.839","cy","50.839","r","50.839","transform","translate(141 696)","fill","#dd0031"],["id","Group_47","data-name","Group 47","transform","translate(165.185 720.185)"],["id","Path_33","data-name","Path 33","d","M3.4,42.615a3.084,3.084,0,0,0,3.553,3.553,21.419,21.419,0,0,0,12.215-6.107L9.511,30.4A21.419,21.419,0,0,0,3.4,42.615Z","transform","translate(0.371 3.363)","fill","#fff"],["id","Path_34","data-name","Path 34","d","M53.3,3.221A3.09,3.09,0,0,0,50.081,0,48.227,48.227,0,0,0,18.322,13.437c-6-1.666-14.991-1.221-18.322,7.218A33.892,33.892,0,0,1,9.439,25.1l-.333.666a3.013,3.013,0,0,0,.555,3.553L23.985,43.641a2.9,2.9,0,0,0,3.553.555l.666-.333A33.892,33.892,0,0,1,32.647,53.3c8.55-3.664,8.884-12.326,7.218-18.322A48.227,48.227,0,0,0,53.3,3.221ZM34.424,9.772a6.439,6.439,0,1,1,9.106,9.106,6.368,6.368,0,0,1-9.106,0A6.467,6.467,0,0,1,34.424,9.772Z","transform","translate(0 0.005)","fill","#fff"],["type","button","aria-label","Left Align",1,"btn","btn-default"],["aria-hidden","true",1,"glyphicon","glyphicon-align-left"],["type","button",1,"btn","btn-default","btn-lg"],["aria-hidden","true",1,"glyphicon","glyphicon-star"],["id","rocket-smoke","xmlns","http://www.w3.org/2000/svg","width","516.119","height","1083.632","viewBox","0 0 516.119 1083.632"],["id","Path_40","data-name","Path 40","d","M644.6,141S143.02,215.537,147.049,870.207s342.774,201.755,342.774,201.755S404.659,847.213,388.815,762.2c-27.116-145.51-11.551-384.124,271.9-609.1C671.15,139.365,644.6,141,644.6,141Z","transform","translate(-147.025 -140.939)","fill","#f5f5f5"],[1,"card-container"],["target","_blank","rel","noopener","href","https://angular.io/tutorial",1,"card"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24",1,"material-icons"],["d","M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3L1 9l11 6 9-4.91V17h2V9L12 3z"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["target","_blank","rel","noopener","href","https://angular.io/cli",1,"card"],["d","M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"],["target","_blank","rel","noopener","href","https://material.angular.io",1,"card"],["xmlns","http://www.w3.org/2000/svg","width","21.813","height","23.453","viewBox","0 0 179.2 192.7",2,"margin-right","8px"],["fill","#ffa726","d","M89.4 0 0 32l13.5 118.4 75.9 42.3 76-42.3L179.2 32 89.4 0z"],["fill","#fb8c00","d","M89.4 0v192.7l76-42.3L179.2 32 89.4 0z"],["fill","#ffe0b2","d","m102.9 146.3-63.3-30.5 36.3-22.4 63.7 30.6-36.7 22.3z"],["fill","#fff3e0","d","M102.9 122.8 39.6 92.2l36.3-22.3 63.7 30.6-36.7 22.3z"],["fill","#fff","d","M102.9 99.3 39.6 68.7l36.3-22.4 63.7 30.6-36.7 22.4z"],["target","_blank","rel","noopener","href","https://blog.angular.io/",1,"card"],["d","M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67zM11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29.59 2.65.59 4.04 0 2.65-2.15 4.8-4.8 4.8z"],["target","_blank","rel","noopener","href","https://angular.io/devtools/",1,"card"],["xmlns","http://www.w3.org/2000/svg","enable-background","new 0 0 24 24","height","24px","viewBox","0 0 24 24","width","24px","fill","#000000",1,"material-icons"],["fill","none","height","24","width","24"],["d","M14.73,13.31C15.52,12.24,16,10.93,16,9.5C16,5.91,13.09,3,9.5,3S3,5.91,3,9.5C3,13.09,5.91,16,9.5,16 c1.43,0,2.74-0.48,3.81-1.27L19.59,21L21,19.59L14.73,13.31z M9.5,14C7.01,14,5,11.99,5,9.5S7.01,5,9.5,5S14,7.01,14,9.5 S11.99,14,9.5,14z"],["points","10.29,8.44 9.5,6 8.71,8.44 6.25,8.44 8.26,10.03 7.49,12.5 9.5,10.97 11.51,12.5 10.74,10.03 12.75,8.44"],["type","hidden"],["selection",""],["tabindex","0",1,"card","card-small",3,"click"],["d","M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"],[1,"terminal",3,"ngSwitch"],[4,"ngSwitchDefault"],[4,"ngSwitchCase"],["title","Find a Local Meetup","href","https://www.meetup.com/find/?keywords=angular","target","_blank","rel","noopener",1,"circle-link"],["xmlns","http://www.w3.org/2000/svg","width","24.607","height","23.447","viewBox","0 0 24.607 23.447"],["id","logo--mSwarm","d","M21.221,14.95A4.393,4.393,0,0,1,17.6,19.281a4.452,4.452,0,0,1-.8.069c-.09,0-.125.035-.154.117a2.939,2.939,0,0,1-2.506,2.091,2.868,2.868,0,0,1-2.248-.624.168.168,0,0,0-.245-.005,3.926,3.926,0,0,1-2.589.741,4.015,4.015,0,0,1-3.7-3.347,2.7,2.7,0,0,1-.043-.38c0-.106-.042-.146-.143-.166a3.524,3.524,0,0,1-1.516-.69A3.623,3.623,0,0,1,2.23,14.557a3.66,3.66,0,0,1,1.077-3.085.138.138,0,0,0,.026-.2,3.348,3.348,0,0,1-.451-1.821,3.46,3.46,0,0,1,2.749-3.28.44.44,0,0,0,.355-.281,5.072,5.072,0,0,1,3.863-3,5.028,5.028,0,0,1,3.555.666.31.31,0,0,0,.271.03A4.5,4.5,0,0,1,18.3,4.7a4.4,4.4,0,0,1,1.334,2.751,3.658,3.658,0,0,1,.022.706.131.131,0,0,0,.1.157,2.432,2.432,0,0,1,1.574,1.645,2.464,2.464,0,0,1-.7,2.616c-.065.064-.051.1-.014.166A4.321,4.321,0,0,1,21.221,14.95ZM13.4,14.607a2.09,2.09,0,0,0,1.409,1.982,4.7,4.7,0,0,0,1.275.221,1.807,1.807,0,0,0,.9-.151.542.542,0,0,0,.321-.545.558.558,0,0,0-.359-.534,1.2,1.2,0,0,0-.254-.078c-.262-.047-.526-.086-.787-.138a.674.674,0,0,1-.617-.75,3.394,3.394,0,0,1,.218-1.109c.217-.658.509-1.286.79-1.918a15.609,15.609,0,0,0,.745-1.86,1.95,1.95,0,0,0,.06-1.073,1.286,1.286,0,0,0-1.051-1.033,1.977,1.977,0,0,0-1.521.2.339.339,0,0,1-.446-.042c-.1-.092-.2-.189-.307-.284a1.214,1.214,0,0,0-1.643-.061,7.563,7.563,0,0,1-.614.512A.588.588,0,0,1,10.883,8c-.215-.115-.437-.215-.659-.316a2.153,2.153,0,0,0-.695-.248A2.091,2.091,0,0,0,7.541,8.562a9.915,9.915,0,0,0-.405.986c-.559,1.545-1.015,3.123-1.487,4.7a1.528,1.528,0,0,0,.634,1.777,1.755,1.755,0,0,0,1.5.211,1.35,1.35,0,0,0,.824-.858c.543-1.281,1.032-2.584,1.55-3.875.142-.355.28-.712.432-1.064a.548.548,0,0,1,.851-.24.622.622,0,0,1,.185.539,2.161,2.161,0,0,1-.181.621c-.337.852-.68,1.7-1.018,2.552a2.564,2.564,0,0,0-.173.528.624.624,0,0,0,.333.71,1.073,1.073,0,0,0,.814.034,1.22,1.22,0,0,0,.657-.655q.758-1.488,1.511-2.978.35-.687.709-1.37a1.073,1.073,0,0,1,.357-.434.43.43,0,0,1,.463-.016.373.373,0,0,1,.153.387.7.7,0,0,1-.057.236c-.065.157-.127.316-.2.469-.42.883-.846,1.763-1.262,2.648A2.463,2.463,0,0,0,13.4,14.607Zm5.888,6.508a1.09,1.09,0,0,0-2.179.006,1.09,1.09,0,0,0,2.179-.006ZM1.028,12.139a1.038,1.038,0,1,0,.01-2.075,1.038,1.038,0,0,0-.01,2.075ZM13.782.528a1.027,1.027,0,1,0-.011,2.055A1.027,1.027,0,0,0,13.782.528ZM22.21,6.95a.882.882,0,0,0-1.763.011A.882.882,0,0,0,22.21,6.95ZM4.153,4.439a.785.785,0,1,0,.787-.78A.766.766,0,0,0,4.153,4.439Zm8.221,18.22a.676.676,0,1,0-.677.666A.671.671,0,0,0,12.374,22.658ZM22.872,12.2a.674.674,0,0,0-.665.665.656.656,0,0,0,.655.643.634.634,0,0,0,.655-.644A.654.654,0,0,0,22.872,12.2ZM7.171-.123A.546.546,0,0,0,6.613.43a.553.553,0,1,0,1.106,0A.539.539,0,0,0,7.171-.123ZM24.119,9.234a.507.507,0,0,0-.493.488.494.494,0,0,0,.494.494.48.48,0,0,0,.487-.483A.491.491,0,0,0,24.119,9.234Zm-19.454,9.7a.5.5,0,0,0-.488-.488.491.491,0,0,0-.487.5.483.483,0,0,0,.491.479A.49.49,0,0,0,4.665,18.936Z","transform","translate(0 0.123)","fill","#f64060"],["title","Join the Conversation on Discord","href","https://discord.gg/angular","target","_blank","rel","noopener",1,"circle-link"],["xmlns","http://www.w3.org/2000/svg","width","26","height","26","viewBox","0 0 245 240"],["d","M104.4 103.9c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1.1-6.1-4.5-11.1-10.2-11.1zM140.9 103.9c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1s-4.5-11.1-10.2-11.1z"],["d","M189.5 20h-134C44.2 20 35 29.2 35 40.6v135.2c0 11.4 9.2 20.6 20.5 20.6h113.4l-5.3-18.5 12.8 11.9 12.1 11.2 21.5 19V40.6c0-11.4-9.2-20.6-20.5-20.6zm-38.6 130.6s-3.6-4.3-6.6-8.1c13.1-3.7 18.1-11.9 18.1-11.9-4.1 2.7-8 4.6-11.5 5.9-5 2.1-9.8 3.5-14.5 4.3-9.6 1.8-18.4 1.3-25.9-.1-5.7-1.1-10.6-2.7-14.7-4.3-2.3-.9-4.8-2-7.3-3.4-.3-.2-.6-.3-.9-.5-.2-.1-.3-.2-.4-.3-1.8-1-2.8-1.7-2.8-1.7s4.8 8 17.5 11.8c-3 3.8-6.7 8.3-6.7 8.3-22.1-.7-30.5-15.2-30.5-15.2 0-32.2 14.4-58.3 14.4-58.3 14.4-10.8 28.1-10.5 28.1-10.5l1 1.2c-18 5.2-26.3 13.1-26.3 13.1s2.2-1.2 5.9-2.9c10.7-4.7 19.2-6 22.7-6.3.6-.1 1.1-.2 1.7-.2 6.1-.8 13-1 20.2-.2 9.5 1.1 19.7 3.9 30.1 9.6 0 0-7.9-7.5-24.9-12.7l1.4-1.6s13.7-.3 28.1 10.5c0 0 14.4 26.1 14.4 58.3 0 0-8.5 14.5-30.6 15.2z"],["href","https://github.com/angular/angular","target","_blank","rel","noopener"],[1,"github-star-badge"],["d","M0 0h24v24H0z","fill","none"],["d","M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z","fill","#1976d2"],["id","clouds","xmlns","http://www.w3.org/2000/svg","width","2611.084","height","485.677","viewBox","0 0 2611.084 485.677"],["id","Path_39","data-name","Path 39","d","M2379.709,863.793c10-93-77-171-168-149-52-114-225-105-264,15-75,3-140,59-152,133-30,2.83-66.725,9.829-93.5,26.25-26.771-16.421-63.5-23.42-93.5-26.25-12-74-77-130-152-133-39-120-212-129-264-15-54.084-13.075-106.753,9.173-138.488,48.9-31.734-39.726-84.4-61.974-138.487-48.9-52-114-225-105-264,15a162.027,162.027,0,0,0-103.147,43.044c-30.633-45.365-87.1-72.091-145.206-58.044-52-114-225-105-264,15-75,3-140,59-152,133-53,5-127,23-130,83-2,42,35,72,70,86,49,20,106,18,157,5a165.625,165.625,0,0,0,120,0c47,94,178,113,251,33,61.112,8.015,113.854-5.72,150.492-29.764a165.62,165.62,0,0,0,110.861-3.236c47,94,178,113,251,33,31.385,4.116,60.563,2.495,86.487-3.311,25.924,5.806,55.1,7.427,86.488,3.311,73,80,204,61,251-33a165.625,165.625,0,0,0,120,0c51,13,108,15,157-5a147.188,147.188,0,0,0,33.5-18.694,147.217,147.217,0,0,0,33.5,18.694c49,20,106,18,157,5a165.625,165.625,0,0,0,120,0c47,94,178,113,251,33C2446.709,1093.793,2554.709,922.793,2379.709,863.793Z","transform","translate(142.69 -634.312)","fill","#eee"]],template:function(t,r){if(1&t){const i=p.EpF();p.TgZ(0,"div",0),p._UZ(1,"img",1),p.TgZ(2,"span"),p._uU(3,"Welcome"),p.qZA(),p._UZ(4,"div",2),p.TgZ(5,"a",3),p.O4$(),p.TgZ(6,"svg",4),p._UZ(7,"rect",5)(8,"path",6),p.qZA()(),p.kcU(),p.TgZ(9,"a",7),p.O4$(),p.TgZ(10,"svg",8),p._UZ(11,"path",9)(12,"path",10),p.qZA()()(),p.kcU(),p.TgZ(13,"div",11)(14,"div",12),p.O4$(),p.TgZ(15,"svg",13)(16,"title"),p._uU(17,"Rocket Ship"),p.qZA(),p.TgZ(18,"g",14),p._UZ(19,"circle",15),p.TgZ(20,"g",16),p._UZ(21,"path",17)(22,"path",18),p.qZA()()(),p.kcU(),p.TgZ(23,"button",19),p._UZ(24,"span",20),p.qZA(),p.TgZ(25,"button",21),p._UZ(26,"span",22),p._uU(27," Star "),p.qZA(),p.TgZ(28,"span"),p._uU(29),p.qZA(),p.O4$(),p.TgZ(30,"svg",23)(31,"title"),p._uU(32,"Rocket Ship Smoke"),p.qZA(),p._UZ(33,"path",24),p.qZA()(),p.kcU(),p.TgZ(34,"h2"),p._uU(35,"Resources"),p.qZA(),p.TgZ(36,"p"),p._uU(37,"Here are some links to help you get started:"),p.qZA(),p.TgZ(38,"div",25)(39,"a",26),p.O4$(),p.TgZ(40,"svg",27),p._UZ(41,"path",28),p.qZA(),p.kcU(),p.TgZ(42,"span"),p._uU(43,"Learn Angular"),p.qZA(),p.O4$(),p.TgZ(44,"svg",27),p._UZ(45,"path",29),p.qZA()(),p.kcU(),p.TgZ(46,"a",30),p.O4$(),p.TgZ(47,"svg",27),p._UZ(48,"path",31),p.qZA(),p.kcU(),p.TgZ(49,"span"),p._uU(50,"CLI Documentation"),p.qZA(),p.O4$(),p.TgZ(51,"svg",27),p._UZ(52,"path",29),p.qZA()(),p.kcU(),p.TgZ(53,"a",32),p.O4$(),p.TgZ(54,"svg",33),p._UZ(55,"path",34)(56,"path",35)(57,"path",36)(58,"path",37)(59,"path",38),p.qZA(),p.kcU(),p.TgZ(60,"span"),p._uU(61,"Angular Material"),p.qZA(),p.O4$(),p.TgZ(62,"svg",27),p._UZ(63,"path",29),p.qZA()(),p.kcU(),p.TgZ(64,"a",39),p.O4$(),p.TgZ(65,"svg",27),p._UZ(66,"path",40),p.qZA(),p.kcU(),p.TgZ(67,"span"),p._uU(68,"Angular Blog"),p.qZA(),p.O4$(),p.TgZ(69,"svg",27),p._UZ(70,"path",29),p.qZA()(),p.kcU(),p.TgZ(71,"a",41),p.O4$(),p.TgZ(72,"svg",42)(73,"g"),p._UZ(74,"rect",43),p.qZA(),p.TgZ(75,"g")(76,"g"),p._UZ(77,"path",44)(78,"polygon",45),p.qZA()()(),p.kcU(),p.TgZ(79,"span"),p._uU(80,"Angular DevTools"),p.qZA(),p.O4$(),p.TgZ(81,"svg",27),p._UZ(82,"path",29),p.qZA()()(),p.kcU(),p.TgZ(83,"h2"),p._uU(84,"Next Steps"),p.qZA(),p.TgZ(85,"p"),p._uU(86,"What do you want to do next with your app?"),p.qZA(),p._UZ(87,"input",46,47),p.TgZ(89,"div",25)(90,"button",48),p.NdJ("click",function(){p.CHM(i);const c=p.MAs(88);return p.KtG(c.value="component")}),p.O4$(),p.TgZ(91,"svg",27),p._UZ(92,"path",49),p.qZA(),p.kcU(),p.TgZ(93,"span"),p._uU(94,"New Component"),p.qZA()(),p.TgZ(95,"button",48),p.NdJ("click",function(){p.CHM(i);const c=p.MAs(88);return p.KtG(c.value="material")}),p.O4$(),p.TgZ(96,"svg",27),p._UZ(97,"path",49),p.qZA(),p.kcU(),p.TgZ(98,"span"),p._uU(99,"Angular Material"),p.qZA()(),p.TgZ(100,"button",48),p.NdJ("click",function(){p.CHM(i);const c=p.MAs(88);return p.KtG(c.value="pwa")}),p.O4$(),p.TgZ(101,"svg",27),p._UZ(102,"path",49),p.qZA(),p.kcU(),p.TgZ(103,"span"),p._uU(104,"Add PWA Support"),p.qZA()(),p.TgZ(105,"button",48),p.NdJ("click",function(){p.CHM(i);const c=p.MAs(88);return p.KtG(c.value="dependency")}),p.O4$(),p.TgZ(106,"svg",27),p._UZ(107,"path",49),p.qZA(),p.kcU(),p.TgZ(108,"span"),p._uU(109,"Add Dependency"),p.qZA()(),p.TgZ(110,"button",48),p.NdJ("click",function(){p.CHM(i);const c=p.MAs(88);return p.KtG(c.value="test")}),p.O4$(),p.TgZ(111,"svg",27),p._UZ(112,"path",49),p.qZA(),p.kcU(),p.TgZ(113,"span"),p._uU(114,"Run and Watch Tests"),p.qZA()(),p.TgZ(115,"button",48),p.NdJ("click",function(){p.CHM(i);const c=p.MAs(88);return p.KtG(c.value="build")}),p.O4$(),p.TgZ(116,"svg",27),p._UZ(117,"path",49),p.qZA(),p.kcU(),p.TgZ(118,"span"),p._uU(119,"Build for Production"),p.qZA()()(),p.TgZ(120,"div",50),p.YNc(121,$y,2,0,"pre",51),p.YNc(122,bg,2,0,"pre",52),p.YNc(123,QE,2,0,"pre",52),p.YNc(124,Hy,2,0,"pre",52),p.YNc(125,Gy,2,0,"pre",52),p.YNc(126,zy,2,0,"pre",52),p.qZA(),p.TgZ(127,"div",25)(128,"a",53),p.O4$(),p.TgZ(129,"svg",54)(130,"title"),p._uU(131,"Meetup Logo"),p.qZA(),p._UZ(132,"path",55),p.qZA()(),p.kcU(),p.TgZ(133,"a",56),p.O4$(),p.TgZ(134,"svg",57)(135,"title"),p._uU(136,"Discord Logo"),p.qZA(),p._UZ(137,"path",58)(138,"path",59),p.qZA()()(),p.kcU(),p.TgZ(139,"footer"),p._uU(140," Love Angular?\xa0 "),p.TgZ(141,"a",60),p._uU(142," Give our repo a star. "),p.TgZ(143,"div",61),p.O4$(),p.TgZ(144,"svg",27),p._UZ(145,"path",62)(146,"path",63),p.qZA(),p._uU(147," Star "),p.qZA()(),p.kcU(),p.TgZ(148,"a",60),p.O4$(),p.TgZ(149,"svg",27),p._UZ(150,"path",64)(151,"path",62),p.qZA()()(),p.TgZ(152,"svg",65)(153,"title"),p._uU(154,"Gray Clouds Background"),p.qZA(),p._UZ(155,"path",66),p.qZA()(),p.kcU(),p._UZ(156,"router-outlet")}if(2&t){const i=p.MAs(88);p.xp6(29),p.hij("",r.title," app is running!"),p.xp6(91),p.Q6J("ngSwitch",i.value),p.xp6(2),p.Q6J("ngSwitchCase","material"),p.xp6(1),p.Q6J("ngSwitchCase","pwa"),p.xp6(1),p.Q6J("ngSwitchCase","dependency"),p.xp6(1),p.Q6J("ngSwitchCase","test"),p.xp6(1),p.Q6J("ngSwitchCase","build")}},dependencies:[Ts,Zs,Ys,cg],styles:['[_nghost-%COMP%] {\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    font-size: 14px;\n    color: #333;\n    box-sizing: border-box;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%] {\n    margin: 8px 0;\n  }\n\n  p[_ngcontent-%COMP%] {\n    margin: 0;\n  }\n\n  .spacer[_ngcontent-%COMP%] {\n    flex: 1;\n  }\n\n  .toolbar[_ngcontent-%COMP%] {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 60px;\n    display: flex;\n    align-items: center;\n    background-color: #1976d2;\n    color: white;\n    font-weight: 600;\n  }\n\n  .toolbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n    margin: 0 16px;\n  }\n\n  .toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%] {\n    height: 40px;\n    margin: 0 8px;\n  }\n\n  .toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%] {\n    height: 40px;\n    margin: 0 16px;\n  }\n\n  .toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]:hover, .toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%]:hover {\n    opacity: 0.8;\n  }\n\n  .content[_ngcontent-%COMP%] {\n    display: flex;\n    margin: 82px auto 32px;\n    padding: 0 16px;\n    max-width: 960px;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  svg.material-icons[_ngcontent-%COMP%] {\n    height: 24px;\n    width: auto;\n  }\n\n  svg.material-icons[_ngcontent-%COMP%]:not(:last-child) {\n    margin-right: 8px;\n  }\n\n  .card[_ngcontent-%COMP%]   svg.material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%] {\n    fill: #888;\n  }\n\n  .card-container[_ngcontent-%COMP%] {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    margin-top: 16px;\n  }\n\n  .card[_ngcontent-%COMP%] {\n    all: unset;\n    border-radius: 4px;\n    border: 1px solid #eee;\n    background-color: #fafafa;\n    height: 40px;\n    width: 200px;\n    margin: 0 8px 16px;\n    padding: 16px;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    transition: all 0.2s ease-in-out;\n    line-height: 24px;\n  }\n\n  .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(:last-child) {\n    margin-right: 0;\n  }\n\n  .card.card-small[_ngcontent-%COMP%] {\n    height: 16px;\n    width: 168px;\n  }\n\n  .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card) {\n    cursor: pointer;\n  }\n\n  .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover {\n    transform: translateY(-3px);\n    box-shadow: 0 4px 17px rgba(0, 0, 0, 0.35);\n  }\n\n  .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover   .material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%] {\n    fill: rgb(105, 103, 103);\n  }\n\n  .card.highlight-card[_ngcontent-%COMP%] {\n    background-color: #1976d2;\n    color: white;\n    font-weight: 600;\n    border: none;\n    width: auto;\n    min-width: 30%;\n    position: relative;\n  }\n\n  .card.card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n    margin-left: 60px;\n  }\n\n  svg#rocket[_ngcontent-%COMP%] {\n    width: 80px;\n    position: absolute;\n    left: -10px;\n    top: -24px;\n  }\n\n  svg#rocket-smoke[_ngcontent-%COMP%] {\n    height: calc(100vh - 95px);\n    position: absolute;\n    top: 10px;\n    right: 180px;\n    z-index: -10;\n  }\n\n  a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:visited, a[_ngcontent-%COMP%]:hover {\n    color: #1976d2;\n    text-decoration: none;\n  }\n\n  a[_ngcontent-%COMP%]:hover {\n    color: #125699;\n  }\n\n  .terminal[_ngcontent-%COMP%] {\n    position: relative;\n    width: 80%;\n    max-width: 600px;\n    border-radius: 6px;\n    padding-top: 45px;\n    margin-top: 8px;\n    overflow: hidden;\n    background-color: rgb(15, 15, 16);\n  }\n\n  .terminal[_ngcontent-%COMP%]::before {\n    content: "\\2022 \\2022 \\2022";\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 4px;\n    background: rgb(58, 58, 58);\n    color: #c2c3c4;\n    width: 100%;\n    font-size: 2rem;\n    line-height: 0;\n    padding: 14px 0;\n    text-indent: 4px;\n  }\n\n  .terminal[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%] {\n    font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;\n    color: white;\n    padding: 0 1rem 1rem;\n    margin: 0;\n  }\n\n  .circle-link[_ngcontent-%COMP%] {\n    height: 40px;\n    width: 40px;\n    border-radius: 40px;\n    margin: 8px;\n    background-color: white;\n    border: 1px solid #eeeeee;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n    transition: 1s ease-out;\n  }\n\n  .circle-link[_ngcontent-%COMP%]:hover {\n    transform: translateY(-0.25rem);\n    box-shadow: 0px 3px 15px rgba(0, 0, 0, 0.2);\n  }\n\n  footer[_ngcontent-%COMP%] {\n    margin-top: 8px;\n    display: flex;\n    align-items: center;\n    line-height: 20px;\n  }\n\n  footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\n    display: flex;\n    align-items: center;\n  }\n\n  .github-star-badge[_ngcontent-%COMP%] {\n    color: #24292e;\n    display: flex;\n    align-items: center;\n    font-size: 12px;\n    padding: 3px 10px;\n    border: 1px solid rgba(27,31,35,.2);\n    border-radius: 3px;\n    background-image: linear-gradient(-180deg,#fafbfc,#eff3f6 90%);\n    margin-left: 4px;\n    font-weight: 600;\n  }\n\n  .github-star-badge[_ngcontent-%COMP%]:hover {\n    background-image: linear-gradient(-180deg,#f0f3f6,#e6ebf1 90%);\n    border-color: rgba(27,31,35,.35);\n    background-position: -.5em;\n  }\n\n  .github-star-badge[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%] {\n    height: 16px;\n    width: 16px;\n    margin-right: 4px;\n  }\n\n  svg#clouds[_ngcontent-%COMP%] {\n    position: fixed;\n    bottom: -160px;\n    left: -230px;\n    z-index: -10;\n    width: 1920px;\n  }\n\n  \n  @media screen and (max-width: 767px) {\n    .card-container[_ngcontent-%COMP%]    > *[_ngcontent-%COMP%]:not(.circle-link), .terminal[_ngcontent-%COMP%] {\n      width: 100%;\n    }\n\n    .card[_ngcontent-%COMP%]:not(.highlight-card) {\n      height: 16px;\n      margin: 8px 0;\n    }\n\n    .card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n      margin-left: 72px;\n    }\n\n    svg#rocket-smoke[_ngcontent-%COMP%] {\n      right: 120px;\n      transform: rotate(-5deg);\n    }\n  }\n\n  @media screen and (max-width: 575px) {\n    svg#rocket-smoke[_ngcontent-%COMP%] {\n      display: none;\n      visibility: hidden;\n    }\n  }']}),n})();var Qn=P(2011),Wy=P(6451),ef=P(5363),JE=P(6063);class UD extends xo.x{constructor(e=1/0,t=1/0,r=JE.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let h=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)h=_;h&&r.splice(0,h+1)}}}var qy=P(3099);function Tg(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,qy.B)({connector:()=>new UD(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function eI(n,e){return(0,yh.m)(e)?Wn(()=>n,e):Wn(()=>n)}var Ky=P(9468),Ut=P(462);P(259);var me=P(5861),ji=P(9681),oo=P(4859),N=P(2090),ao=P(1877);const Qy=new Map,sI={activated:!1,tokenObservers:[]},Xy={initialized:!1,enabled:!1};function di(n){return Qy.get(n)||Object.assign({},sI)}function Cc(){return Xy}const nf="https://content-firebaseappcheck.googleapis.com/v1",Jy="exchangeDebugToken",jD={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class aI{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new N.BH,yield function uI(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new N.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const hi=new N.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ev(n,e){return Dg.apply(this,arguments)}function Dg(){return(Dg=(0,me.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const D=yield i.getHeartbeatsHeader();D&&(r["X-Firebase-Client"]=D)}const a={method:"POST",body:JSON.stringify(e),headers:r};let c,h;try{c=yield fetch(n,a)}catch(D){throw hi.create("fetch-network-error",{originalErrorMessage:D?.message})}if(200!==c.status)throw hi.create("fetch-status-error",{httpStatus:c.status});try{h=yield c.json()}catch(D){throw hi.create("fetch-parse-error",{originalErrorMessage:D?.message})}const _=h.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw hi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const w=1e3*Number(_[1]),b=Date.now();return{token:h.token,expireTimeMillis:b+w,issuedAtTimeMillis:b}})).apply(this,arguments)}const sf="firebase-app-check-database",GD=1,Sg="firebase-app-check-store";let Ag=null;function tv(n,e){return Rg.apply(this,arguments)}function Rg(){return(Rg=(0,me.Z)(function*(n,e){const r=(yield function hI(){return Ag||(Ag=new Promise((n,e)=>{try{const t=indexedDB.open(sf,GD);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(hi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Sg,{keyPath:"compositeKey"})}}catch(t){e(hi.create("storage-open",{originalErrorMessage:t?.message}))}}),Ag)}()).transaction(Sg,"readwrite"),a=r.objectStore(Sg).put({compositeKey:n,value:e});return new Promise((c,h)=>{a.onsuccess=_=>{c()},r.onerror=_=>{var w;h(hi.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const uf=new ao.Yd("@firebase/app-check");function rv(n,e){return(0,N.hl)()?function WD(n,e){return tv(function pI(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{uf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ov(){return av.apply(this,arguments)}function av(){return(av=(0,me.Z)(function*(){const n=Cc();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const gI={error:"UNKNOWN_ERROR"};function LM(n){return N.US.encodeString(JSON.stringify(n),!1)}function Dc(n){return uv.apply(this,arguments)}function uv(){return(uv=(0,me.Z)(function*(n,e=!1){const t=n.app;!function rf(n){if(!di(n).activated)throw hi.create("use-before-activation",{appName:n.name})}(t);const r=di(t);let a,i=r.token;if(i&&!Ar(i)&&(r.token=void 0,i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(Ar(_)?i=_:yield rv(t,void 0))}if(!e&&i&&Ar(i))return{token:i.token};let h,c=!1;if(function sv(){return Cc().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ev(function HD(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${nf}/projects/${t}/apps/${r}:${Jy}?key=${i}`,body:{debug_token:e}}}(t,yield ov()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const _=yield r.exchangeTokenPromise;return yield rv(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield di(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?uf.warn(_.message):uf.error(_),a=_}return i?a?h=Ar(i)?{token:i.token,internalError:a}:Eu(a):(h={token:i.token},r.token=i,yield rv(t,i)):h=Eu(a),c&&function ql(n,e){const t=di(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,h),h})).apply(this,arguments)}function cf(n,e){const t=di(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function mI(n){const{app:e}=n,t=di(e);let r=t.tokenRefresher;r||(r=function Fo(n){const{app:e}=n;return new aI((0,me.Z)(function*(){let r;if(r=di(e).token?yield Dc(n,!0):yield Dc(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=di(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},jD.RETRIAL_MIN_WAIT,jD.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Ar(n){return n.expireTimeMillis-Date.now()>0}function Eu(n){return{token:LM(gI),error:n}}class xg{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=di(this.app);for(const t of e)cf(this.app,t.next);return Promise.resolve()}}const EI="app-check-internal";!function Pg(){(0,ji._registerComponent)(new oo.wA("app-check",n=>function Ls(n,e){return new xg(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(EI).initialize()})),(0,ji._registerComponent)(new oo.wA(EI,n=>function lv(n){return{getToken:e=>Dc(n,e),addTokenListener:e=>function cv(n,e,t,r){const{app:i}=n,a=di(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&Ar(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),mI(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>mI(n))}(n,"INTERNAL",e),removeTokenListener:e=>cf(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ji.registerVersion)("@firebase/app-check","0.6.4")}();class hf{constructor(){return(0,Ut.vb)("app-check")}}typeof window<"u"&&window;var Rc=P(9260);const kg=new p.OlP("angularfire2.auth.use-emulator"),pf=new p.OlP("angularfire2.auth.settings"),Og=new p.OlP("angularfire2.auth.tenant-id"),Lg=new p.OlP("angularfire2.auth.langugage-code"),Fg=new p.OlP("angularfire2.auth.use-device-language"),Ug=new p.OlP("angularfire.auth.persistence"),Vg=(n,e,t,r,i,a,c,h)=>(0,Qn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),c)for(const[w,b]of Object.entries(c))_.settings[w]=b;return h&&_.setPersistence(h),_},[t,r,i,a,c,h]);let ed=(()=>{class n{constructor(t,r,i,a,c,h,_,w,b,D,x,F){const $=new xo.x,ee=st(void 0).pipe((0,ef.Q)(c.outsideAngular),Wn(()=>a.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,8971)))),(0,bt.U)(()=>(0,Qn.on)(t,a,r)),(0,bt.U)(se=>Vg(se,a,h,w,b,D,_,x)),Tg({bufferSize:1,refCount:!1}));if(ia(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=st(null);else{ee.pipe(hs()).subscribe();const ft=ee.pipe(Wn(wt=>wt.getRedirectResult().then(Bt=>Bt,()=>null)),Ut.iC,Tg({bufferSize:1,refCount:!1})),yt=ee.pipe(Wn(wt=>new Ui.y(Bt=>({unsubscribe:a.runOutsideAngular(()=>wt.onAuthStateChanged(Yt=>Bt.next(Yt),Yt=>Bt.error(Yt),()=>Bt.complete()))})))),lt=ee.pipe(Wn(wt=>new Ui.y(Bt=>({unsubscribe:a.runOutsideAngular(()=>wt.onIdTokenChanged(Yt=>Bt.next(Yt),Yt=>Bt.error(Yt),()=>Bt.complete()))}))));this.authState=ft.pipe(eI(yt),(0,Ky.R)(c.outsideAngular),(0,ef.Q)(c.insideAngular)),this.user=ft.pipe(eI(lt),(0,Ky.R)(c.outsideAngular),(0,ef.Q)(c.insideAngular)),this.idToken=this.user.pipe(Wn(wt=>wt?(0,en.D)(wt.getIdToken()):st(null))),this.idTokenResult=this.user.pipe(Wn(wt=>wt?(0,en.D)(wt.getIdTokenResult()):st(null))),this.credential=(0,Wy.T)(ft,$,this.authState.pipe(Vi(wt=>!wt))).pipe((0,bt.U)(wt=>wt?.user?wt:null),(0,Ky.R)(c.outsideAngular),(0,ef.Q)(c.insideAngular))}return(0,Qn.pX)(this,ee,a,{spy:{apply:(se,ft,yt)=>{(se.startsWith("signIn")||se.startsWith("createUser"))&&yt.then(lt=>$.next(lt))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Qn.Dh),p.LFG(Qn.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ut.HU),p.LFG(kg,8),p.LFG(pf,8),p.LFG(Og,8),p.LFG(Lg,8),p.LFG(Fg,8),p.LFG(Ug,8),p.LFG(hf,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),AI=(()=>{class n{constructor(){Rc.Z.registerVersion("angularfire",Ut.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[ed]}),n})();var Bg=P(4986),Uo=P(3942);const RI="firebasestorage.googleapis.com",xI="storageBucket";class lr extends N.ZR{constructor(e,t,r=0){super(MI(e),`Firebase Storage: ${t} (${MI(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,lr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return MI(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Un=(()=>{return(n=Un||(Un={})).UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Un;var n})();function MI(n){return"storage/"+n}function NI(){return new lr(Un.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function vv(){return new lr(Un.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function kI(){return new lr(Un.CANCELED,"User canceled the upload/download.")}function wv(){return new lr(Un.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function nd(n){return new lr(Un.INVALID_ARGUMENT,n)}function Ev(){return new lr(Un.APP_DELETED,"The Firebase app was deleted.")}function FI(n){return new lr(Un.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function rd(n,e){return new lr(Un.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function $g(n){throw new lr(Un.INTERNAL_ERROR,"Internal error: "+n)}class fi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=fi.makeFromUrl(e,t)}catch{return new fi(e,"")}if(""===r.path)return r;throw function OI(n){return new lr(Un.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(wt){wt.path_=decodeURIComponent(wt.path)}const D=t.replace(/[.]/g,"\\."),lt=[{regex:h,indices:{bucket:1,path:3},postModify:function a(wt){"/"===wt.path.charAt(wt.path.length-1)&&(wt.path_=wt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===RI?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let wt=0;wt<lt.length;wt++){const Bt=lt[wt],Yt=Bt.regex.exec(e);if(Yt){let qs=Yt[Bt.indices.path];qs||(qs=""),r=new fi(Yt[Bt.indices.bucket],qs),Bt.postModify(r);break}}if(null==r)throw function cS(n){return new lr(Un.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class UI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function is(n){return"string"==typeof n||n instanceof String}function Iv(n){return Hg()&&n instanceof Blob}function Hg(){return typeof Blob<"u"&&!(0,N.UG)()}function bv(n,e,t,r){if(r<e)throw nd(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw nd(`Invalid value for '${n}'. Expected ${t} or less.`)}function Sa(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function VI(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Iu=(()=>{return(n=Iu||(Iu={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Iu;var n})();function Gg(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class gf{constructor(e,t,r,i,a,c,h,_,w,b,D,x=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=_,this.timeout_=w,this.progressCallback_=b,this.connectionFactory_=D,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,$)=>{this.resolve_=F,this.reject_=$,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,c=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(h,h.getResponse());!function fS(n){return void 0!==n}(_)?a():a(_)}catch(_){c(_)}else if(null!==h){const _=NI();_.serverResponse=h.getErrorText(),c(this.errorCallback_?this.errorCallback_(h,_):_)}else c(i.canceled?this.appDelete_?Ev():kI():vv())};this.canceled_?t(0,new zg(!1,null,!0)):this.backoffId_=function Vo(n,e,t){let r=1,i=null,a=null,c=!1,h=0;function _(){return 2===h}let w=!1;function b(...se){w||(w=!0,e.apply(null,se))}function D(se){i=setTimeout(()=>{i=null,n(F,_())},se)}function x(){a&&clearTimeout(a)}function F(se,...ft){if(w)return void x();if(se)return x(),void b.call(null,se,...ft);if(_()||c)return x(),void b.call(null,se,...ft);let lt;r<64&&(r*=2),1===h?(h=2,lt=0):lt=1e3*(r+Math.random()),D(lt)}let $=!1;function ee(se){$||($=!0,x(),!w&&(null!==i?(se||(h=2),clearTimeout(i),D(0)):se||(h=1)))}return D(0),a=setTimeout(()=>{c=!0,ee(!0)},t),ee}((r,i)=>{if(i)return void r(!1,new zg(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const c=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const h=a.getErrorCode()===Iu.NO_ERROR,_=a.getStatus();if(!h||Gg(_,this.additionalRetryCodes_)&&this.retry){const b=a.getErrorCode()===Iu.ABORT;return void r(!1,new zg(!1,null,b))}const w=-1!==this.successCodes_.indexOf(_);r(!0,new zg(w,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function hS(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class zg{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function HI(...n){const e=function gS(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Hg())return new Blob(n);throw new lr(Un.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Di={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class qg{constructor(e,t){this.data=e,this.contentType=t||null}}function Kg(n,e){switch(n){case Di.RAW:return new qg(Tv(e));case Di.BASE64:case Di.BASE64URL:return new qg(Cv(n,e));case Di.DATA_URL:return new qg(function qI(n){const e=new Dv(n);return e.base64?Cv(Di.BASE64,e.rest):function WI(n){let e;try{e=decodeURIComponent(n)}catch{throw rd(Di.DATA_URL,"Malformed data URL.")}return Tv(e)}(e.rest)}(e),function KI(n){return new Dv(n).contentType}(e))}throw NI()}function Tv(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Cv(n,e){switch(n){case Di.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw rd(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Di.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw rd(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function zI(n){if(typeof atob>"u")throw function dS(n){return new lr(Un.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:rd(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Dv{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw rd(Di.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function mS(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class jo{constructor(e,t){let r=0,i="";Iv(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Iv(this.data_)){const i=function GI(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new jo(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new jo(r,!0)}}static getBlob(...e){if(Hg()){const t=e.map(r=>r instanceof jo?r.data_:r);return new jo(HI.apply(null,t))}{const t=e.map(c=>is(c)?Kg(Di.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(c=>{for(let h=0;h<c.length;h++)i[a++]=c[h]}),new jo(i,!0)}}uploadData(){return this.data_}}function Sv(n){let e;try{e=JSON.parse(n)}catch{return null}return function uo(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function ZI(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function vS(n,e){return e}class $i{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||vS}}let Zg=null;function mf(){if(Zg)return Zg;const n=[];n.push(new $i("bucket")),n.push(new $i("generation")),n.push(new $i("metageneration")),n.push(new $i("name","fullPath",!0));const t=new $i("name");t.xform=function e(a,c){return function wS(n){return!is(n)||n.length<2?n:ZI(n)}(c)},n.push(t);const i=new $i("size");return i.xform=function r(a,c){return void 0!==c?Number(c):c},n.push(i),n.push(new $i("timeCreated")),n.push(new $i("updated")),n.push(new $i("md5Hash",null,!0)),n.push(new $i("cacheControl",null,!0)),n.push(new $i("contentDisposition",null,!0)),n.push(new $i("contentEncoding",null,!0)),n.push(new $i("contentLanguage",null,!0)),n.push(new $i("contentType",null,!0)),n.push(new $i("metadata","customMetadata",!0)),Zg=n,Zg}function YI(n,e,t){const r=Sv(e);return null===r?null:function IS(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const c=t[a];r[c.local]=c.xform(r,e[c.server])}return function ES(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new fi(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function Av(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const QI="prefixes",XI="items";class co{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function lo(n){if(!n)throw NI()}function _f(n,e){return function t(r,i){const a=YI(n,i,e);return lo(null!==a),a}}function Mc(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function uS(){return new lr(Un.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function PI(){return new lr(Un.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function aS(n){return new lr(Un.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function zr(n){return new lr(Un.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function id(n){const e=Mc(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function oS(n){return new lr(Un.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function Rv(n,e,t){const i=Sa(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new co(i,"GET",_f(n,t),c);return h.errorHandler=id(e),h}function rb(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=Sa(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,b=new co(h,"GET",function tb(n,e){return function t(r,i){const a=function eb(n,e,t){const r=Sv(t);return null===r?null:function JI(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[QI])for(const i of t[QI]){const a=i.replace(/\/$/,""),c=n._makeStorageReference(new fi(e,a));r.prefixes.push(c)}if(t[XI])for(const i of t[XI]){const a=n._makeStorageReference(new fi(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return lo(null!==a),a}}(n,e.bucket),w);return b.urlParams=a,b.errorHandler=Mc(e),b}function Yg(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function jM(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class yf{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function Qg(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{lo(!1)}return lo(!!t&&-1!==(e||["active"]).indexOf(t)),t}const AS={STATE_CHANGED:"state_changed"},Ur={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function xv(n){switch(n){case"running":case"pausing":case"canceling":return Ur.RUNNING;case"paused":return Ur.PAUSED;case"success":return Ur.SUCCESS;case"canceled":return Ur.CANCELED;default:return Ur.ERROR}}class Xg{constructor(e,t,r){if(function Bo(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Aa(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let dr=null;class HM{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Iu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Iu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Iu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw $g("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw $g("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw $g("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw $g("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw $g("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class sb extends HM{initXhr(){this.xhr_.responseType="text"}}function Fs(){return dr?dr():new sb}class Mv{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=mf(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Un.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(Gg(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=vv()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Un.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function $M(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c=Yg(e,r,i),h={name:c.fullPath},_=Sa(a,n.host,n._protocol),b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},D=Av(c,t),$=new co(_,"POST",function F(ee){let se;Qg(ee);try{se=ee.getResponseHeader("X-Goog-Upload-URL")}catch{lo(!1)}return lo(is(se)),se},n.maxUploadRetryTime);return $.urlParams=h,$.headers=b,$.body=D,$.errorHandler=Mc(e),$}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Fs,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function Vt(n,e,t,r){const _=new co(t,"POST",function a(w){const b=Qg(w,["active","final"]);let D=null;try{D=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch{lo(!1)}D||lo(!1);const x=Number(D);return lo(!isNaN(x)),new yf(x,r.size(),"final"===b)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=Mc(e),_}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Fs,t,r);this._request=a,a.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new yf(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let c;try{c=function SS(n,e,t,r,i,a,c,h){const _=new yf(0,0);if(c?(_.current=c.current,_.total=c.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function LI(){return new lr(Un.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const w=_.total-_.current;let b=w;i>0&&(b=Math.min(b,i));const D=_.current;let F="";F=0===b?"finalize":w===b?"upload, finalize":"upload";const $={"X-Goog-Upload-Command":F,"X-Goog-Upload-Offset":`${_.current}`},ee=r.slice(D,D+b);if(null===ee)throw wv();const lt=new co(t,"POST",function se(wt,Bt){const Yt=Qg(wt,["active","final"]),$r=_.current+b,qs=r.size();let dM;return dM="final"===Yt?_f(e,a)(wt,Bt):null,new yf($r,qs,"final"===Yt,dM)},e.maxUploadRetryTime);return lt.headers=$,lt.body=ee.uploadData(),lt.progressCallback=h||null,lt.errorHandler=Mc(n),lt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const h=this._ref.storage._makeRequest(c,Fs,i,a,!1);this._request=h,h.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Rv(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Fs,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function DS(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},_=function h(){let lt="";for(let wt=0;wt<2;wt++)lt+=Math.random().toString().slice(2);return lt}();c["Content-Type"]="multipart/related; boundary="+_;const w=Yg(e,r,i),b=Av(w,t),F=jo.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+b+"\r\n--"+_+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===F)throw wv();const $={name:w.fullPath},ee=Sa(a,n.host,n._protocol),ft=n.maxUploadRetryTime,yt=new co(ee,"POST",_f(n,t),ft);return yt.urlParams=$,yt.headers=c,yt.body=F.uploadData(),yt.errorHandler=Mc(e),yt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Fs,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=kI(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=xv(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new Xg(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(xv(this._state)){case Ur.SUCCESS:Aa(this._resolve.bind(null,this.snapshot))();break;case Ur.CANCELED:case Ur.ERROR:Aa(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(xv(this._state)){case Ur.RUNNING:case Ur.PAUSED:e.next&&Aa(e.next.bind(e,this.snapshot))();break;case Ur.SUCCESS:e.complete&&Aa(e.complete.bind(e))();break;default:e.error&&Aa(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Nc{constructor(e,t){this._service=e,this._location=t instanceof fi?t:fi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Nc(e,t)}get root(){const e=new fi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ZI(this._location.path)}get storage(){return this._service}get parent(){const e=function _S(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new fi(this._location.bucket,e);return new Nc(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw FI(e)}}function vf(n,e,t){return Jg.apply(this,arguments)}function Jg(){return(Jg=(0,me.Z)(function*(n,e,t){const i=yield Nv(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield vf(n,e,i.nextPageToken))})).apply(this,arguments)}function Nv(n,e){null!=e&&"number"==typeof e.maxResults&&bv("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=rb(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Fs)}function wf(n){n._throwIfRoot("getDownloadURL");const e=function TS(n,e,t){const i=Sa(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new co(i,"GET",function nb(n,e){return function t(r,i){const a=YI(n,i,e);return lo(null!==a),function bS(n,e,t,r){const i=Sv(e);if(null===i||!is(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const c=encodeURIComponent;return a.split(",").map(w=>{const D=n.fullPath;return Sa("/b/"+c(n.bucket)+"/o/"+c(D),t,r)+VI({alt:"media",token:w})})[0]}(a,i,n.host,n._protocol)}}(n,t),c);return h.errorHandler=id(e),h}(n.storage,n._location,mf());return n.storage.makeRequestWithTokens(e,Fs).then(t=>{if(null===t)throw function td(){return new lr(Un.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function lb(n,e){const t=function yS(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new fi(n._location.bucket,t);return new Nc(n.storage,r)}function Pv(n,e){if(n instanceof em){const t=n;if(null==t._bucket)throw function lS(){return new lr(Un.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+xI+"' property when initializing the app?")}();const r=new Nc(t,t._bucket);return null!=e?Pv(r,e):r}return void 0!==e?lb(n,e):n}function db(n,e){if(e&&function LS(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof em)return function FS(n,e){return new Nc(n,e)}(n,e);throw nd("To use ref(service, url), the first argument must be a Storage instance.")}return Pv(n,e)}function kv(n,e){const t=e?.[xI];return null==t?null:fi.makeFromBucketSpec(t,n)}class em{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=RI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?fi.makeFromBucketSpec(i,this._host):kv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?fi.makeFromBucketSpec(this._url,e):kv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){bv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){bv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,me.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,me.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Nc(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new UI(Ev());{const c=function Wg(n,e,t,r,i,a,c=!0){const h=VI(n.urlParams),_=n.url+h,w=Object.assign({},n.headers);return function jI(n,e){e&&(n["X-Firebase-GMPID"]=e)}(w,e),function BI(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(w,t),function pS(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(w,a),function $I(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(w,r),new gf(_,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,me.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const hb="@firebase/storage";function mb(n,e){return db(n=(0,N.m9)(n),e)}function WS(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new em(t,r,i,e,ji.SDK_VERSION)}!function qS(){(0,ji._registerComponent)(new oo.wA("storage",WS,"PUBLIC").setMultipleInstances(!0)),(0,ji.registerVersion)(hb,"0.11.2",""),(0,ji.registerVersion)(hb,"0.11.2","esm2017")}();class Tu{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class _b{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Tu(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Tu(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?c=>t(new Tu(c,this,this._ref)):{next:t.next?c=>t.next(new Tu(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class Ov{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Ra(e,this._service))}get items(){return this._delegate.items.map(e=>new Ra(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ra{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function HS(n,e){return lb(n,e)}(this._delegate,e);return new Ra(t,this.storage)}get root(){return new Ra(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Ra(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new _b(function pb(n,e,t){return function NS(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Mv(n,new jo(e),t)}(n=(0,N.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Di.RAW,r){this._throwIfRoot("putString");const i=Kg(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new _b(new Mv(this._delegate,new jo(i.data,!0),a),this)}listAll(){return function gb(n){return function kS(n){const e={prefixes:[],items:[]};return vf(n,e).then(()=>e)}(n=(0,N.m9)(n))}(this._delegate).then(e=>new Ov(e,this.storage))}list(e){return function jS(n,e){return Nv(n=(0,N.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Ov(t,this.storage))}getMetadata(){return function tm(n){return function cb(n){n._throwIfRoot("getMetadata");const e=Rv(n.storage,n._location,mf());return n.storage.makeRequestWithTokens(e,Fs)}(n=(0,N.m9)(n))}(this._delegate)}updateMetadata(e){return function BS(n,e){return function OS(n,e){n._throwIfRoot("updateMetadata");const t=function CS(n,e,t,r){const a=Sa(e.fullServerUrl(),n.host,n._protocol),h=Av(t,r),w=n.maxOperationRetryTime,b=new co(a,"PATCH",_f(n,r),w);return b.headers={"Content-Type":"application/json; charset=utf-8"},b.body=h,b.errorHandler=id(e),b}(n.storage,n._location,e,mf());return n.storage.makeRequestWithTokens(t,Fs)}(n=(0,N.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function If(n){return wf(n=(0,N.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function $S(n){return function Ef(n){n._throwIfRoot("deleteObject");const e=function sd(n,e){const r=Sa(e.fullServerUrl(),n.host,n._protocol),h=new co(r,"DELETE",function c(_,w){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=id(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Fs)}(n=(0,N.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw FI(e)}}class Lv{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(yb(e))throw nd("ref() expected a child path but got a URL, use refFromURL instead.");return new Ra(mb(this._delegate,e),this)}refFromURL(e){if(!yb(e))throw nd("refFromURL() expected a full URL but got a child path, use ref() instead.");try{fi.makeFromUrl(e,this._delegate.host)}catch{throw nd("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ra(mb(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function GS(n,e,t,r={}){!function US(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,N.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function yb(n){return/^[A-Za-z]+:\/\//.test(n)}function ZS(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new Lv(t,r)}function Ib(n){const e=function Eb(n){return new Ui.y(e=>{const t=c=>e.next(c);t(n.snapshot);const a=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){a()}}).pipe(function jg(n,e=Bg.z){return(0,yr.e)((t,r)=>{let i=null,a=null,c=null;const h=()=>{if(i){i.unsubscribe(),i=null;const w=a;a=null,r.next(w)}};function _(){const w=c+n,b=e.now();if(b<w)return i=this.schedule(void 0,w-b),void r.add(i);h()}t.subscribe((0,Fn.x)(r,w=>{a=w,c=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,bt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function nm(n){return{getDownloadURL:()=>st(void 0).pipe(Ut.fc,Wn(()=>n.getDownloadURL()),Ut.iC),getMetadata:()=>st(void 0).pipe(Ut.fc,Wn(()=>n.getMetadata()),Ut.iC),delete:()=>(0,en.D)(n.delete()),child:e=>nm(n.child(e)),updateMetadata:e=>(0,en.D)(n.updateMetadata(e)),put:(e,t)=>Ib(n.put(e,t)),putString:(e,t,r)=>Ib(n.putString(e,t,r)),list:e=>(0,en.D)(n.list(e)),listAll:()=>(0,en.D)(n.listAll())}}!function wb(n){const e={TaskState:Ur,TaskEvent:AS,StringFormat:Di,Storage:Lv,Reference:Ra};n.INTERNAL.registerComponent(new oo.wA("storage-compat",ZS,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(Uo.Z);const YS=new p.OlP("angularfire2.storageBucket"),Uv=new p.OlP("angularfire2.storage.maxUploadRetryTime"),QS=new p.OlP("angularfire2.storage.maxOperationRetryTime"),bb=new p.OlP("angularfire2.storage.use-emulator");let XS=(()=>{class n{constructor(t,r,i,a,c,h,_,w,b,D){const x=(0,Qn.on)(t,c,r);this.storage=(0,Qn.cc)(`${x.name}.storage.${i}`,"AngularFireStorage",x.name,()=>{const F=c.runOutsideAngular(()=>x.storage(i||void 0)),$=b;return $&&F.useEmulator(...$),_&&F.setMaxUploadRetryTime(_),w&&F.setMaxOperationRetryTime(w),F},[_,w])}ref(t){return nm(this.storage.ref(t))}refFromURL(t){return nm(this.storage.refFromURL(t))}upload(t,r,i){return nm(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Qn.Dh),p.LFG(Qn.xv,8),p.LFG(YS,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ut.HU),p.LFG(Uv,8),p.LFG(QS,8),p.LFG(bb,8),p.LFG(hf,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),JS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),eA=(()=>{class n{constructor(){Rc.Z.registerVersion("angularfire",Ut.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[XS],imports:[JS]}),n})();function rm(){return(0,yr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Fn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function Vv(n,e=es.y){return n=n??tA,(0,yr.e)((t,r)=>{let i,a=!0;t.subscribe((0,Fn.x)(r,c=>{const h=e(c);(a||!n(i,h))&&(a=!1,i=h,r.next(c))}))})}function tA(n,e){return n===e}P(8971);var Tt,Tb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$o={},Bv=Bv||{},Zt=Tb||self;function im(){}function sm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function bf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Tf="closure_uid_"+(1e9*Math.random()>>>0),Cb=0;function $v(n,e,t){return n.call.apply(n.bind,arguments)}function nA(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Si(n,e,t){return(Si=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?$v:nA).apply(null,arguments)}function ad(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function pi(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[i].apply(r,c)}}function Cu(){this.s=this.s,this.o=this.o}Cu.prototype.s=!1,Cu.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function jv(n){Object.prototype.hasOwnProperty.call(n,Tf)&&n[Tf]||(n[Tf]=++Cb)}(this)},Cu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Hv=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Gv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function rA(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(sm(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let c=0;c<a;c++)n[i+c]=r[c]}else n.push(r)}}function gi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}gi.prototype.h=function(){this.defaultPrevented=!0};var zv=function(){if(!Zt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Zt.addEventListener("test",im,e),Zt.removeEventListener("test",im,e)}catch{}return n}();function om(n){return/^[\s\xa0]*$/.test(n)}var am=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Wv(n,e){return n<e?-1:n>e?1:0}function Cf(){var n=Zt.navigator;return n&&(n=n.userAgent)?n:""}function Us(n){return-1!=Cf().indexOf(n)}function um(n){return um[" "](n),n}um[" "]=im;var Zv,n,Sb=Us("Opera"),Pc=Us("Trident")||Us("MSIE"),Ab=Us("Edge"),qv=Ab||Pc,Rb=Us("Gecko")&&!(-1!=Cf().toLowerCase().indexOf("webkit")&&!Us("Edge"))&&!(Us("Trident")||Us("MSIE"))&&!Us("Edge"),iA=-1!=Cf().toLowerCase().indexOf("webkit")&&!Us("Edge");function Kv(){var n=Zt.document;return n?n.documentMode:void 0}e:{var cm="",Yv=(n=Cf(),Rb?/rv:([^\);]+)(\)|;)/.exec(n):Ab?/Edge\/([\d\.]+)/.exec(n):Pc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):iA?/WebKit\/(\S+)/.exec(n):Sb?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Yv&&(cm=Yv?Yv[1]:""),Pc){var Qv=Kv();if(null!=Qv&&Qv>parseFloat(cm)){Zv=String(Qv);break e}}Zv=cm}var KM={};var oA=Zt.document&&Pc&&(Kv()||parseInt(Zv,10))||void 0;function Df(n,e){if(gi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Rb){e:{try{um(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:aA[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Df.X.h.call(this)}}pi(Df,gi);var aA={2:"touch",3:"pen",4:"mouse"};Df.prototype.h=function(){Df.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Sf="closure_listenable_"+(1e6*Math.random()|0),uA=0;function cA(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++uA,this.ba=this.ea=!1}function lm(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Jv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Mb(n){const e={};for(const t in n)e[t]=n[t];return e}const cd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function e0(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<cd.length;a++)t=cd[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Af(n){this.src=n,this.g={},this.h=0}function dm(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=Hv(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(lm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function hm(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}Af.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=hm(n,e,r,i);return-1<c?(e=n[c],t||(e.ea=!1)):((e=new cA(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var fm="closure_lm_"+(1e6*Math.random()|0),t0={};function Nb(n,e,t,r,i){if(r&&r.once)return Pb(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)Nb(n,e[a],t,r,i);return null}return t=Vs(t),n&&n[Sf]?n.N(e,t,bf(r)?!!r.capture:!!r,i):lA(n,e,t,!1,r,i)}function lA(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=bf(i)?!!i.capture:!!i,h=r0(n);if(h||(n[fm]=h=new Af(n)),(t=h.add(e,t,r,c,a)).proxy)return t;if(r=function dA(){const e=Rf;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)zv||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Ob(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Pb(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Pb(n,e[a],t,r,i);return null}return t=Vs(t),n&&n[Sf]?n.O(e,t,bf(r)?!!r.capture:!!r,i):lA(n,e,t,!0,r,i)}function kb(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)kb(n,e[a],t,r,i);else r=bf(r)?!!r.capture:!!r,t=Vs(t),n&&n[Sf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=hm(a=n.g[e],t,r,i))&&(lm(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=r0(n))&&(e=n.g[e.toString()],n=-1,e&&(n=hm(e,t,r,i)),(t=-1<n?e[n]:null)&&n0(t))}function n0(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Sf])dm(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Ob(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=r0(e))?(dm(t,n),0==t.h&&(t.src=null,e[fm]=null)):lm(n)}}}function Ob(n){return n in t0?t0[n]:t0[n]="on"+n}function Rf(n,e){if(n.ba)n=!0;else{e=new Df(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&n0(n),n=t.call(r,e)}return n}function r0(n){return(n=n[fm])instanceof Af?n:null}var xf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vs(n){return"function"==typeof n?n:(n[xf]||(n[xf]=function(e){return n.handleEvent(e)}),n[xf])}function ri(){Cu.call(this),this.i=new Af(this),this.P=this,this.I=null}function Wr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new gi(e,n);else if(e instanceof gi)e.target=e.target||n;else{var i=e;e0(e=new gi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=Du(c,r,!0,e)&&i}if(i=Du(c=e.g=n,r,!0,e)&&i,i=Du(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Du(c=e.g=t[a],r,!1,e)&&i}function Du(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.ba&&c.capture==t){var h=c.listener,_=c.ha||c.src;c.ea&&dm(n.i,c),i=!1!==h.call(_,r)&&i}}return i&&!r.defaultPrevented}pi(ri,Cu),ri.prototype[Sf]=!0,ri.prototype.removeEventListener=function(n,e,t,r){kb(this,n,e,t,r)},ri.prototype.M=function(){if(ri.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)lm(t[r]);delete n.g[e],n.h--}}this.I=null},ri.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ri.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var s0=Zt.JSON.stringify;function hA(){var n=o0;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var gm,Mf=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new pm,n=>n.reset());class pm{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function pA(n){Zt.setTimeout(()=>{throw n},0)}function Lb(n,e){gm||function Fb(){var n=Zt.Promise.resolve(void 0);gm=function(){n.then(a0)}}(),Nf||(gm(),Nf=!0),o0.add(n,e)}var Nf=!1,o0=new class fA{constructor(){this.h=this.g=null}add(e,t){const r=Mf.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function a0(){for(var n;n=hA();){try{n.h.call(n.g)}catch(t){pA(t)}var e=Mf;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Nf=!1}function ld(n,e){ri.call(this),this.h=n||1,this.g=e||Zt,this.j=Si(this.lb,this),this.l=Date.now()}function mm(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Pf(n,e,t){if("function"==typeof n)t&&(n=Si(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Si(n.handleEvent,n)}return 2147483647<Number(e)?-1:Zt.setTimeout(n,e||0)}function _m(n){n.g=Pf(()=>{n.g=null,n.i&&(n.i=!1,_m(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}pi(ld,ri),(Tt=ld.prototype).ca=!1,Tt.R=null,Tt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Wr(this,"tick"),this.ca&&(mm(this),this.start()))}},Tt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Tt.M=function(){ld.X.M.call(this),mm(this),delete this.g};class gA extends Cu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:_m(this)}M(){super.M(),this.g&&(Zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kf(n){Cu.call(this),this.h=n,this.g={}}pi(kf,Cu);var Ub=[];function Vb(n,e,t,r){Array.isArray(t)||(t&&(Ub[0]=t.toString()),t=Ub);for(var i=0;i<t.length;i++){var a=Nb(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function u0(n){Jv(n.g,function(e,t){this.g.hasOwnProperty(t)&&n0(e)},n),n.g={}}function dd(){this.g=!0}function kc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function _A(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return s0(t)}catch{return e}}(n,t)+(r?" "+r:"")})}kf.prototype.M=function(){kf.X.M.call(this),u0(this)},kf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},dd.prototype.Aa=function(){this.g=!1},dd.prototype.info=function(){};var Su={},c0=null;function ym(){return c0=c0||new ri}function l0(n){gi.call(this,Su.Pa,n)}function Of(n){const e=ym();Wr(e,new l0(e))}function Ai(n,e){gi.call(this,Su.STAT_EVENT,n),this.stat=e}function Vr(n){const e=ym();Wr(e,new Ai(e,n))}function $b(n,e){gi.call(this,Su.Qa,n),this.size=e}function Lf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Zt.setTimeout(function(){n()},e)}Su.Pa="serverreachability",pi(l0,gi),Su.STAT_EVENT="statevent",pi(Ai,gi),Su.Qa="timingevent",pi($b,gi);var d0={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},yA={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function vm(){}function hd(){}vm.prototype.h=null;var Em,Ff={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Uf(){gi.call(this,"d")}function h0(){gi.call(this,"c")}function Im(){}function Vf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new kf(this),this.O=f0,this.T=new ld(n=qv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Hb}function Hb(){this.i=null,this.g="",this.h=!1}pi(Uf,gi),pi(h0,gi),pi(Im,vm),Im.prototype.g=function(){return new XMLHttpRequest},Im.prototype.i=function(){return{}},Em=new Im;var f0=45e3,bm={},Bf={};function fd(n,e,t){n.K=1,n.v=Sm(Ho(e)),n.s=t,n.P=!0,Tm(n,null)}function Tm(n,e){n.F=Date.now(),pd(n),n.A=Ho(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),SA(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Hb,n.g=oT(n.l,t?e:null,!n.s),0<n.N&&(n.L=new gA(Si(n.La,n,n.g),n.N)),Vb(n.S,n.g,"readystatechange",n.ib),e=n.H?Mb(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Of(),function Bb(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",h=a.split("&"),_=0;_<h.length;_++){var w=h[_].split("=");if(1<w.length){var b=w[0];w=w[1];var D=b.split("_");c=2<=D.length&&"type"==D[1]?c+(b+"=")+w+"&":c+(b+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function vA(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function p0(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=wA(n,t),i==Bf){4==e&&(n.o=4,Vr(14),r=!1),kc(n.j,n.m,null,"[Incomplete Response]");break}if(i==bm){n.o=4,Vr(15),kc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}kc(n.j,n.m,i,null),Gb(n,i)}vA(n)&&i!=Bf&&i!=bm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Vr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Om(e),e.K=!0,Vr(11))):(kc(n.j,n.m,t,"[Invalid Chunked Response]"),xa(n),gd(n))}function wA(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Bf:(t=Number(e.substring(t,r)),isNaN(t)?bm:(r+=1)+t>e.length?Bf:(e=e.substr(r,t),n.C=r+t,e))}function pd(n){n.V=Date.now()+n.O,Oc(n,n.O)}function Oc(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Lf(Si(n.gb,n),e)}function Cm(n){n.B&&(Zt.clearTimeout(n.B),n.B=null)}function gd(n){0==n.l.G||n.I||Go(n.l,n)}function xa(n){Cm(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,mm(n.T),u0(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Gb(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Rm(t.h,n)))if(!n.J&&Rm(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;vd(t),km(t)}A0(t),Vr(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Lf(Si(t.cb,t),6e3));if(1>=RA(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Ru(t,11)}else if((n.J||t.g==n)&&vd(t),!om(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.T=w[0],w=w[1],2==t.G)if("c"==w[0]){t.I=w[1],t.ka=w[2];const b=w[3];null!=b&&(t.ma=b,t.j.info("VER="+t.ma));const D=w[4];null!=D&&(t.Ca=D,t.j.info("SVER="+t.Ca));const x=w[5];null!=x&&"number"==typeof x&&0<x&&(t.J=r=1.5*x,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const F=n.g;if(F){const $=F.g?F.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($){var a=r.h;a.g||-1==$.indexOf("spdy")&&-1==$.indexOf("quic")&&-1==$.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(_d(a,a.h),a.h=null))}if(r.D){const ee=F.g?F.g.getResponseHeader("X-HTTP-Session-Id"):null;ee&&(r.za=ee,rr(r.F,r.D,ee))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var c=n;if((r=t).sa=R0(r,r.H?r.ka:null,r.V),c.J){_0(r.h,c);var h=c,_=r.J;_&&h.setTimeout(_),h.B&&(Cm(h),pd(h)),r.g=c}else S0(r);0<t.i.length&&yd(t)}else"stop"!=w[0]&&"close"!=w[0]||Ru(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Ru(t,7):qf(t):"noop"!=w[0]&&t.l&&t.l.wa(w),t.A=0)}Of()}catch{}}function zb(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(sm(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function ZM(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(sm(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function EA(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(sm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(Tt=Vf.prototype).setTimeout=function(n){this.O=n},Tt.ib=function(n){n=n.target;const e=this.L;e&&3==Na(n)?e.l():this.La(n)},Tt.La=function(n){try{if(n==this.g)e:{const b=Na(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>b)&&(3!=b||qv||this.g&&(this.h.h||this.g.fa()||Pm(this.g)))){this.I||4!=b||7==e||Of(),Cm(this);var t=this.g.aa();this.Y=t;t:if(vA(this)){var r=Pm(this.g);n="";var i=r.length,a=4==Na(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){xa(this),gd(this);var c="";break t}this.h.i=new Zt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==t,function mA(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.U,b,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var h,_=this.g;if((h=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!om(h)){var w=h;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,Vr(12),xa(this),gd(this);break e}kc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Gb(this,t)}this.P?(p0(this,b,c),qv&&this.i&&3==b&&(Vb(this.S,this.T,"tick",this.hb),this.T.start())):(kc(this.j,this.m,c,null),Gb(this,c)),4==b&&xa(this),this.i&&!this.I&&(4==b?Go(this.l,this):(this.i=!1,pd(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Vr(12)):(this.o=0,Vr(13)),xa(this),gd(this)}}}catch{}},Tt.hb=function(){if(this.g){var n=Na(this.g),e=this.g.fa();this.C<e.length&&(Cm(this),p0(this,n,e),this.i&&4!=n&&pd(this))}},Tt.cancel=function(){this.I=!0,xa(this)},Tt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function jb(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Of(),Vr(17)),xa(this),this.o=2,gd(this)):Oc(this,this.V-n)};var Wb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Au(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Au){this.h=void 0!==e?e:n.h,Dm(this,n.j),this.s=n.s,this.g=n.g,jf(this,n.m),this.l=n.l,e=n.i;var t=new Am;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),g0(this,t),this.o=n.o}else n&&(t=String(n).match(Wb))?(this.h=!!e,Dm(this,t[1]||"",!0),this.s=md(t[2]||""),this.g=md(t[3]||"",!0),jf(this,t[4]),this.l=md(t[5]||"",!0),g0(this,t[6]||"",!0),this.o=md(t[7]||"")):(this.h=!!e,this.i=new Am(null,this.h))}function Ho(n){return new Au(n)}function Dm(n,e,t){n.j=t?md(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function jf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function g0(n,e,t){e instanceof Am?(n.i=e,function YM(n,e){e&&!n.j&&(Ma(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(CA(this,r),SA(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=$f(e,bA)),n.i=new Am(e,n.h))}function rr(n,e,t){n.i.set(e,t)}function Sm(n){return rr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function md(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function $f(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,qb),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function qb(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Au.prototype.toString=function(){var n=[],e=this.j;e&&n.push($f(e,m0,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push($f(e,m0,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push($f(t,"/"==t.charAt(0)?Zb:Kb,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",$f(t,TA)),n.join("")};var m0=/[#\/\?@]/g,Kb=/[#\?:]/g,Zb=/[#\?]/g,bA=/[#\?@]/g,TA=/#/g;function Am(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ma(n){n.g||(n.g=new Map,n.h=0,n.i&&function IA(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function CA(n,e){Ma(n),e=Hf(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function DA(n,e){return Ma(n),e=Hf(n,e),n.g.has(e)}function SA(n,e,t){CA(n,e),0<t.length&&(n.i=null,n.g.set(Hf(n,e),Gv(t)),n.h+=t.length)}function Hf(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function AA(n){this.l=n||XM,n=Zt.PerformanceNavigationTiming?0<(n=Zt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Zt.g&&Zt.g.Ga&&Zt.g.Ga()&&Zt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Tt=Am.prototype).add=function(n,e){Ma(this),this.i=null,n=Hf(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Tt.forEach=function(n,e){Ma(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Tt.oa=function(){Ma(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},Tt.W=function(n){Ma(this);let e=[];if("string"==typeof n)DA(this,n)&&(e=e.concat(this.g.get(Hf(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Tt.set=function(n,e){return Ma(this),this.i=null,DA(this,n=Hf(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Tt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),c=this.W(r);for(r=0;r<c.length;r++){var i=a;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var XM=10;function Gf(n){return!!n.h||!!n.g&&n.g.size>=n.j}function RA(n){return n.h?1:n.g?n.g.size:0}function Rm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function _d(n,e){n.g?n.g.add(e):n.h=e}function _0(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function y0(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Gv(n.i)}function Yb(){}function v0(){this.g=new Yb}function Qb(n,e,t){const r=t||"";try{zb(n,function(i,a){let c=i;bf(i)&&(c=s0(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function w0(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function xm(n){this.l=n.ac||null,this.j=n.jb||!1}function Mm(n,e){ri.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=E0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}AA.prototype.cancel=function(){if(this.i=y0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Yb.prototype.stringify=function(n){return Zt.JSON.stringify(n,void 0)},Yb.prototype.parse=function(n){return Zt.JSON.parse(n,void 0)},pi(xm,vm),xm.prototype.g=function(){return new Mm(this.l,this.j)},xm.prototype.i=function(n){return function(){return n}}({}),pi(Mm,ri);var E0=0;function zf(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Wf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Nm(n)}function Nm(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Tt=Mm.prototype).open=function(n,e){if(this.readyState!=E0)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Nm(this)},Tt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Zt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Wf(this)),this.readyState=E0},Tt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Nm(this)),this.g&&(this.readyState=3,Nm(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Zt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;zf(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Tt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Wf(this):Nm(this),3==this.readyState&&zf(this)}},Tt.Va=function(n){this.g&&(this.response=this.responseText=n,Wf(this))},Tt.Ua=function(n){this.g&&(this.response=n,Wf(this))},Tt.ga=function(){this.g&&Wf(this)},Tt.setRequestHeader=function(n,e){this.v.append(n,e)},Tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Tt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Mm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var JM=Zt.JSON.parse;function Rr(n){ri.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Xb,this.K=this.L=!1}pi(Rr,ri);var Xb="",MA=/^https?$/i,NA=["POST","PUT"];function Jb(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,I0(n),T0(n)}function I0(n){n.D||(n.D=!0,Wr(n,"complete"),Wr(n,"error"))}function b0(n){if(n.h&&typeof Bv<"u"&&(!n.C[1]||4!=Na(n)||2!=n.aa()))if(n.v&&4==Na(n))Pf(n.Ha,0,n);else if(Wr(n,"readystatechange"),4==Na(n)){n.h=!1;try{const h=n.aa();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(Wb)[1]||null;if(!i&&Zt.self&&Zt.self.location){var a=Zt.self.location.protocol;i=a.substr(0,a.length-1)}r=!MA.test(i?i.toLowerCase():"")}t=r}if(t)Wr(n,"complete"),Wr(n,"success");else{n.m=6;try{var c=2<Na(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.aa()+"]",I0(n)}}finally{T0(n)}}}function T0(n,e){if(n.g){Bs(n);const t=n.g,r=n.C[0]?im:null;n.g=null,n.C=null,e||Wr(n,"ready");try{t.onreadystatechange=r}catch{}}}function Bs(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Zt.clearTimeout(n.A),n.A=null)}function Na(n){return n.g?n.g.readyState:0}function Pm(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Xb:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function eT(n){let e="";return Jv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function tT(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=eT(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):rr(n,e,t))}function Ri(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function nT(n){this.Ca=0,this.i=[],this.j=new dd,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Ri("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Ri("baseRetryDelayMs",5e3,n),this.bb=Ri("retryDelaySeedMs",1e4,n),this.$a=Ri("forwardChannelMaxRetries",2,n),this.ta=Ri("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new AA(n&&n.concurrentRequestLimit),this.Fa=new v0,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function qf(n){if(rT(n),3==n.G){var e=n.U++,t=Ho(n.F);rr(t,"SID",n.I),rr(t,"RID",e),rr(t,"TYPE","terminate"),Kf(n,t),(e=new Vf(n,n.j,e,void 0)).K=2,e.v=Sm(Ho(t)),t=!1,Zt.navigator&&Zt.navigator.sendBeacon&&(t=Zt.navigator.sendBeacon(e.v.toString(),"")),!t&&Zt.Image&&((new Image).src=e.v,t=!0),t||(e.g=oT(e.l,null),e.g.da(e.v)),e.F=Date.now(),pd(e)}Lm(n)}function km(n){n.g&&(Om(n),n.g.cancel(),n.g=null)}function rT(n){km(n),n.u&&(Zt.clearTimeout(n.u),n.u=null),vd(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Zt.clearTimeout(n.m),n.m=null)}function yd(n){Gf(n.h)||n.m||(n.m=!0,Lb(n.Ja,n),n.C=0)}function C0(n,e){var t;t=e?e.m:n.U++;const r=Ho(n.F);rr(r,"SID",n.I),rr(r,"RID",t),rr(r,"AID",n.T),Kf(n,r),n.o&&n.s&&tT(r,n.o,n.s),t=new Vf(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=D0(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),_d(n.h,t),fd(t,r,e)}function Kf(n,e){n.ia&&Jv(n.ia,function(t,r){rr(e,r,t)}),n.l&&zb({},function(t,r){rr(e,r,t)})}function D0(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Si(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].h,c.push("ofs="+a)):a=0:c.push("ofs="+a);let h=!0;for(let _=0;_<t;_++){let w=i[_].h;const b=i[_].g;if(w-=a,0>w)a=Math.max(0,i[_].h-100),h=!1;else try{Qb(b,c,"req"+w+"_")}catch{r&&r(b)}}if(h){r=c.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function S0(n){n.g||n.u||(n.Z=1,Lb(n.Ia,n),n.A=0)}function A0(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Lf(Si(n.Ia,n),Pa(n,n.A)),n.A++,0))}function Om(n){null!=n.B&&(Zt.clearTimeout(n.B),n.B=null)}function sT(n){n.g=new Vf(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Ho(n.sa);rr(e,"RID","rpc"),rr(e,"SID",n.I),rr(e,"CI",n.L?"0":"1"),rr(e,"AID",n.T),rr(e,"TYPE","xmlhttp"),Kf(n,e),n.o&&n.s&&tT(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Sm(Ho(e)),t.s=null,t.P=!0,Tm(t,n)}function vd(n){null!=n.v&&(Zt.clearTimeout(n.v),n.v=null)}function Go(n,e){var t=null;if(n.g==e){vd(n),Om(n),n.g=null;var r=2}else{if(!Rm(n.h,e))return;t=e.D,_0(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Wr(r=ym(),new $b(r,t)),yd(n)}else S0(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function iT(n,e){return!(RA(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Lf(Si(n.Ja,n,e),Pa(n,n.C)),n.C++,0)))}(n,e)||2==r&&A0(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Ru(n,5);break;case 4:Ru(n,10);break;case 3:Ru(n,6);break;default:Ru(n,2)}}function Pa(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Ru(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Si(n.kb,n);t||(t=new Au("//www.google.com/images/cleardot.gif"),Zt.location&&"http"==Zt.location.protocol||Dm(t,"https"),Sm(t)),function xA(n,e){const t=new dd;if(Zt.Image){const r=new Image;r.onload=ad(w0,t,r,"TestLoadImage: loaded",!0,e),r.onerror=ad(w0,t,r,"TestLoadImage: error",!1,e),r.onabort=ad(w0,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=ad(w0,t,r,"TestLoadImage: timeout",!1,e),Zt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Vr(2);n.G=0,n.l&&n.l.va(e),Lm(n),rT(n)}function Lm(n){if(n.G=0,n.la=[],n.l){const e=y0(n.h);(0!=e.length||0!=n.i.length)&&(rA(n.la,e),rA(n.la,n.i),n.h.i.length=0,Gv(n.i),n.i.length=0),n.l.ua()}}function R0(n,e,t){var r=t instanceof Au?Ho(t):new Au(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),jf(r,r.m);else{var i=Zt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new Au(null,void 0);r&&Dm(a,r),e&&(a.g=e),i&&jf(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&rr(r,t,e),rr(r,"VER",n.ma),Kf(n,r),r}function oT(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Rr(t&&n.Da&&!n.ra?new xm({jb:!0}):n.ra)).Ka(n.H),e}function PA(){}function Fm(){if(Pc&&!(10<=Number(oA)))throw Error("Environmental error: no available transport.")}function _s(n,e){ri.call(this),this.g=new nT(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!om(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!om(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Lc(this)}function aT(n){Uf.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function uT(){h0.call(this),this.status=1}function Lc(n){this.g=n}(Tt=Rr.prototype).Ka=function(n){this.L=n},Tt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Em.g(),this.C=function wm(n){return n.h||(n.h=n.i())}(this.u?this.u:Em),this.g.onreadystatechange=Si(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void Jb(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Zt.FormData&&n instanceof Zt.FormData,!(0<=Hv(NA,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,c]of t)this.g.setRequestHeader(a,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Bs(this),0<this.B&&((this.K=function eN(n){return Pc&&function sA(){return function Db(n){var e=KM;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=am(String(Zv)).split("."),t=am("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",a=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=Wv(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||Wv(0==i[2].length,0==a[2].length)||Wv(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Si(this.qa,this)):this.A=Pf(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){Jb(this,a)}},Tt.qa=function(){typeof Bv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Wr(this,"timeout"),this.abort(8))},Tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Wr(this,"complete"),Wr(this,"abort"),T0(this))},Tt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),T0(this,!0)),Rr.X.M.call(this)},Tt.Ha=function(){this.s||(this.F||this.v||this.l?b0(this):this.fb())},Tt.fb=function(){b0(this)},Tt.aa=function(){try{return 2<Na(this)?this.g.status:-1}catch{return-1}},Tt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Tt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),JM(e)}},Tt.Ea=function(){return this.m},Tt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Tt=nT.prototype).ma=8,Tt.G=1,Tt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Vf(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=Mb(a),e0(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=D0(this,i,e),rr(t=Ho(this.F),"RID",n),rr(t,"CVER",22),this.D&&rr(t,"X-HTTP-Session-Id",this.D),Kf(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(eT(a)))+"&"+e:this.o&&tT(t,this.o,a)),_d(this.h,i),this.Ya&&rr(t,"TYPE","init"),this.O?(rr(t,"$req",e),rr(t,"SID","null"),i.Z=!0,fd(i,t,null)):fd(i,t,e),this.G=2}}else 3==this.G&&(n?C0(this,n):0==this.i.length||Gf(this.h)||C0(this))},Tt.Ia=function(){if(this.u=null,sT(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Lf(Si(this.eb,this),n)}},Tt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Vr(10),km(this),sT(this))},Tt.cb=function(){null!=this.v&&(this.v=null,km(this),A0(this),Vr(19))},Tt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Vr(2)):(this.j.info("Failed to ping google.com"),Vr(1))},(Tt=PA.prototype).xa=function(){},Tt.wa=function(){},Tt.va=function(){},Tt.ua=function(){},Tt.Ra=function(){},Fm.prototype.g=function(n,e){return new _s(n,e)},pi(_s,ri),_s.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Vr(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=R0(n,null,n.V),yd(n)},_s.prototype.close=function(){qf(this.g)},_s.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=s0(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&yd(e)},_s.prototype.M=function(){this.g.l=null,delete this.j,qf(this.g),delete this.g,_s.X.M.call(this)},pi(aT,Uf),pi(uT,h0),pi(Lc,PA),Lc.prototype.xa=function(){Wr(this.g,"a")},Lc.prototype.wa=function(n){Wr(this.g,new aT(n))},Lc.prototype.va=function(n){Wr(this.g,new uT)},Lc.prototype.ua=function(){Wr(this.g,"b")},Fm.prototype.createWebChannel=Fm.prototype.g,_s.prototype.send=_s.prototype.u,_s.prototype.open=_s.prototype.m,_s.prototype.close=_s.prototype.close,d0.NO_ERROR=0,d0.TIMEOUT=8,d0.HTTP_ERROR=6,yA.COMPLETE="complete",hd.EventType=Ff,Ff.OPEN="a",Ff.CLOSE="b",Ff.ERROR="c",Ff.MESSAGE="d",ri.prototype.listen=ri.prototype.N,Rr.prototype.listenOnce=Rr.prototype.O,Rr.prototype.getLastError=Rr.prototype.Oa,Rr.prototype.getLastErrorCode=Rr.prototype.Ea,Rr.prototype.getStatus=Rr.prototype.aa,Rr.prototype.getResponseJson=Rr.prototype.Sa,Rr.prototype.getResponseText=Rr.prototype.fa,Rr.prototype.send=Rr.prototype.da,Rr.prototype.setWithCredentials=Rr.prototype.Ka;var tN=$o.createWebChannelTransport=function(){return new Fm},cT=$o.getStatEventTarget=function(){return ym()},x0=$o.ErrorCode=d0,lT=$o.EventType=yA,nN=$o.Event=Su,Um=$o.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},dT=$o.FetchXmlHttpFactory=xm,Zf=$o.WebChannel=hd,hT=$o.XhrIo=Rr;const M0="@firebase/firestore";class qr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qr.UNAUTHENTICATED=new qr(null),qr.GOOGLE_CREDENTIALS=new qr("google-credentials-uid"),qr.FIRST_PARTY=new qr("first-party-uid"),qr.MOCK_USER=new qr("mock-user");let ka="9.18.0";const ho=new ao.Yd("@firebase/firestore");function Vm(){return ho.logLevel}function je(n,...e){if(ho.logLevel<=ao.in.DEBUG){const t=e.map(fT);ho.debug(`Firestore (${ka}): ${n}`,...t)}}function Br(n,...e){if(ho.logLevel<=ao.in.ERROR){const t=e.map(fT);ho.error(`Firestore (${ka}): ${n}`,...t)}}function wd(n,...e){if(ho.logLevel<=ao.in.WARN){const t=e.map(fT);ho.warn(`Firestore (${ka}): ${n}`,...t)}}function fT(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function dt(n="Unexpected state"){const e=`FIRESTORE (${ka}) INTERNAL ASSERTION FAILED: `+n;throw Br(e),new Error(e)}function Ct(n,e){n||dt()}function rt(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends N.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ii{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class LA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(qr.UNAUTHENTICATED))}shutdown(){}}class FA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Bm{constructor(e){this.t=e,this.currentUser=qr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let c=new ii;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ii,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const w=c;e.enqueueRetryable((0,me.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},_=w=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ii)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct("string"==typeof r.accessToken),new LA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new qr(e)}}class UA{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=qr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ct(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class VA{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new UA(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(qr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class N0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Fc{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.A;return this.A=a.token,je("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct("string"==typeof t.token),this.A=t.token,new N0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function P0(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class jm{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=P0(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Qt(n,e){return n<e?-1:n>e?1:0}function xu(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function $m(n){return n+"\0"}class $n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Le(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Le(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Le(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Le(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $n.fromMillis(Date.now())}static fromDate(e){return $n.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new $n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qt(this.nanoseconds,e.nanoseconds):Qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Nt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Nt(e)}static min(){return new Nt(new $n(0,0))}static max(){return new Nt(new $n(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Hm{constructor(e,t,r){void 0===t?t=0:t>e.length&&dt(),void 0===r?r=e.length-t:r>e.length-t&&dt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Hm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Hm?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class In extends Hm{construct(e,t,r){return new In(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Le(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new In(t)}static emptyPath(){return new In([])}}const iN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hr extends Hm{construct(e,t,r){return new hr(e,t,r)}static isValidIdentifier(e){return iN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new hr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Le(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Le(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Le(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===h?(c=!c,i++):"."!==h||c?(r+=h,i++):(a(),i++)}if(a(),c)throw new Le(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hr(t)}static emptyPath(){return new hr([])}}class et{constructor(e){this.path=e}static fromPath(e){return new et(In.fromString(e))}static fromName(e){return new et(In.fromString(e).popFirst(5))}static empty(){return new et(In.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===In.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return In.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new et(new In(e.slice()))}}class Gm{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function k0(n){return n.fields.find(e=>2===e.kind)}function Uc(n){return n.fields.filter(e=>2!==e.kind)}Gm.UNKNOWN_ID=-1;class Yf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Qf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Qf(0,Hi.min())}}function mT(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Nt.fromTimestamp(1e9===r?new $n(t+1,0):new $n(t,r));return new Hi(i,et.empty(),e)}function O0(n){return new Hi(n.readTime,n.key,-1)}class Hi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Hi(Nt.min(),et.empty(),-1)}static max(){return new Hi(Nt.max(),et.empty(),-1)}}function _T(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=et.comparator(n.documentKey,e.documentKey),0!==t?t:Qt(n.largestBatchId,e.largestBatchId))}const L0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zm{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Mu(n){return F0.apply(this,arguments)}function F0(){return F0=(0,me.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==L0)throw n;je("LocalStore","Unexpectedly lost primary lease")}),F0.apply(this,arguments)}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,r)=>{t(e)})}static reject(e){return new ie((t,r)=>{r(e)})}static waitFor(e){return new ie((t,r)=>{let i=0,a=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++a,c&&a===i&&t()},_=>r(_))}),c=!0,a===i&&t()})}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next(i=>i?ie.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ie((r,i)=>{const a=e.length,c=new Array(a);let h=0;for(let _=0;_<a;_++){const w=_;t(e[w]).next(b=>{c[w]=b,++h,h===a&&r(c)},b=>i(b))}})}static doWhile(e,t){return new ie((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class U0{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new ii,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Xf(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=V0(r.target.error);this.P.reject(new Xf(e,i))}}static open(e,t,r,i){try{return new U0(t,e.transaction(i,r))}catch(a){throw new Xf(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(je("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new sN(t)}}class fo{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===fo.D((0,N.z$)())&&Br("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return je("SimpleDb","Removing database:",e),Ed(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,N.hl)())return!1;if(fo.N())return!0;const e=(0,N.z$)(),t=fo.D(e),r=0<t&&t<10,i=fo.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.$)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return(0,me.Z)(function*(){return t.db||(je("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new Xf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const h=c.target.error;i("VersionError"===h.name?new Le(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Le(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Xf(e,h))},a.onupgradeneeded=c=>{je("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.S.F(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{je("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,me.Z)(function*(){const c="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.O(e);const _=U0.open(a.db,e,c?"readonly":"readwrite",r),w=i(_).next(b=>(_.V(),b)).catch(b=>(_.abort(b),ie.reject(b))).toPromise();return w.catch(()=>{}),yield _.v,w}catch(_){const w=_,b="FirebaseError"!==w.name&&h<3;if(je("SimpleDb","Transaction failed with error:",w.message,"Retrying:",b),a.close(),!b)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class jA{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Ed(this.q.delete())}}class Xf extends Le{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Vc(n){return"IndexedDbTransactionError"===n.name}class sN{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(je("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(je("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ed(r)}add(e){return je("SimpleDb","ADD",this.store.name,e,e),Ed(this.store.add(e))}get(e){return Ed(this.store.get(e)).next(t=>(void 0===t&&(t=null),je("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return je("SimpleDb","DELETE",this.store.name,e),Ed(this.store.delete(e))}count(){return je("SimpleDb","COUNT",this.store.name),Ed(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(c,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ie((a,c)=>{i.onerror=h=>{c(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ie((i,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Y(e,t){je("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Z=!1;const i=this.cursor(r);return this.H(i,(a,c,h)=>h.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new ie((r,i)=>{t.onerror=a=>{const c=V0(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}H(e,t){const r=[];return new ie((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const _=new jA(h),w=t(h.primaryKey,h.value,_);if(w instanceof ie){const b=w.catch(D=>(_.done(),ie.reject(D)));r.push(b)}_.isDone?i():null===_.G?h.continue():h.continue(_.G)}}).next(()=>ie.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ed(n){return new ie((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=V0(r.target.error);t(i)}})}let $A=!1;function V0(n){const e=fo.D((0,N.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $A||($A=!0,setTimeout(()=>{throw r},0)),r}}return n}class oN{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;je("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,me.Z)(function*(){t.task=null;try{je("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Vc(r)?je("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Mu(r)}yield t.nt(6e4)}))}}class aN{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return ie.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return je("IndexBackiller",`Processing collection: ${c}`),this.rt(e,c,i).next(h=>{i-=h,r.add(c)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const c=a.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ot(i,a)).next(h=>(je("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>c.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const c=O0(a);_T(c,r)>0&&(r=c)}),new Hi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let js=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>r.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class s{constructor(e,t,r,i,a,c,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.useFetchStreams=_}}class o{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new o("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof o&&e.projectId===this.projectId&&e.database===this.database}}function u(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function l(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function d(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function m(n){return null==n}function v(n){return 0===n&&1/n==-1/0}function I(n){return"number"==typeof n&&Number.isInteger(n)&&!v(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class T extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class A{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw i instanceof DOMException?new T("Invalid base64 string: "+i):i}}(e);return new A(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new A(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}A.EMPTY_BYTE_STRING=new A("");const U=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function K(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=U.exec(n);if(Ct(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:X(n.seconds),nanos:X(n.nanos)}}function X(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ve(n){return"string"==typeof n?A.fromBase64String(n):A.fromUint8Array(n)}function ze(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function tt(n){const e=n.mapValue.fields.__previous_value__;return ze(e)?tt(e):e}function ht(n){const e=K(n.mapValue.fields.__local_write_time__.timestampValue);return new $n(e.seconds,e.nanos)}const At={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Oe={nullValue:"NULL_VALUE"};function $t(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ze(n)?4:fN(n)?9007199254740991:10:dt()}function bn(n,e){if(n===e)return!0;const t=$t(n);if(t!==$t(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ht(n).isEqual(ht(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=K(r.timestampValue),c=K(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,ve(n.bytesValue).isEqual(ve(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return X(r.geoPointValue.latitude)===X(i.geoPointValue.latitude)&&X(r.geoPointValue.longitude)===X(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return X(r.integerValue)===X(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=X(r.doubleValue),c=X(i.doubleValue);return a===c?v(a)===v(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return xu(n.arrayValue.values||[],e.arrayValue.values||[],bn);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(u(a)!==u(c))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===c[h]||!bn(a[h],c[h])))return!1;return!0}(n,e);default:return dt()}var i}function Xn(n,e){return void 0!==(n.values||[]).find(t=>bn(t,e))}function Bc(n,e){if(n===e)return 0;const t=$t(n),r=$t(e);if(t!==r)return Qt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=X(i.integerValue||i.doubleValue),h=X(a.integerValue||a.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return lN(n.timestampValue,e.timestampValue);case 4:return lN(ht(n),ht(e));case 5:return Qt(n.stringValue,e.stringValue);case 6:return function(i,a){const c=ve(i),h=ve(a);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),h=a.split("/");for(let _=0;_<c.length&&_<h.length;_++){const w=Qt(c[_],h[_]);if(0!==w)return w}return Qt(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=Qt(X(i.latitude),X(a.latitude));return 0!==c?c:Qt(X(i.longitude),X(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],h=a.values||[];for(let _=0;_<c.length&&_<h.length;++_){const w=Bc(c[_],h[_]);if(w)return w}return Qt(c.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===At.mapValue&&a===At.mapValue)return 0;if(i===At.mapValue)return 1;if(a===At.mapValue)return-1;const c=i.fields||{},h=Object.keys(c),_=a.fields||{},w=Object.keys(_);h.sort(),w.sort();for(let b=0;b<h.length&&b<w.length;++b){const D=Qt(h[b],w[b]);if(0!==D)return D;const x=Bc(c[h[b]],_[w[b]]);if(0!==x)return x}return Qt(h.length,w.length)}(n.mapValue,e.mapValue);default:throw dt()}}function lN(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Qt(n,e);const t=K(n),r=K(e),i=Qt(t.seconds,r.seconds);return 0!==i?i:Qt(t.nanos,r.nanos)}function Wm(n){return HA(n)}function HA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=K(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ve(n.bytesValue).toBase64():"referenceValue"in n?et.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=HA(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const h of i)c?c=!1:a+=",",a+=`${h}:${HA(r.fields[h])}`;return a+"}"}(n.mapValue):dt();var e}function Jf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function GA(n){return!!n&&"integerValue"in n}function B0(n){return!!n&&"arrayValue"in n}function dN(n){return!!n&&"nullValue"in n}function hN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vT(n){return!!n&&"mapValue"in n}function j0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return l(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=j0(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=j0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function fN(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function e2(n){return"nullValue"in n?Oe:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Jf(o.empty(),et.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:dt()}function t2(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Jf(o.empty(),et.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?At:dt()}function pN(n,e){const t=Bc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function gN(n,e){const t=Bc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Id{constructor(e,t){this.position=e,this.inclusive=t}}function mN(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?et.comparator(et.fromName(c.referenceValue),t.key):Bc(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function _N(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!bn(n.position[t],e.position[t]))return!1;return!0}class yN{}class vn extends yN{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new n2(e,t,r):"array-contains"===t?new o2(e,r):"in"===t?new TN(e,r):"not-in"===t?new a2(e,r):"array-contains-any"===t?new u2(e,r):new vn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new r2(e,r):new s2(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Bc(t,this.value)):null!==t&&$t(this.value)===$t(t)&&this.matchesComparison(Bc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return dt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Hn extends yN{constructor(e,t){super(),this.filters=e,this.op=t,this.ft=null}static create(e,t){return new Hn(e,t)}matches(e){return qm(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(t=>t.isInequality());return null!==e?e.field:null}dt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function qm(n){return"and"===n.op}function zA(n){return"or"===n.op}function WA(n){return vN(n)&&qm(n)}function vN(n){for(const e of n.filters)if(e instanceof Hn)return!1;return!0}function qA(n){if(n instanceof vn)return n.field.canonicalString()+n.op.toString()+Wm(n.value);if(WA(n))return n.filters.map(e=>qA(e)).join(",");{const e=n.filters.map(t=>qA(t)).join(",");return`${n.op}(${e})`}}function wN(n,e){return n instanceof vn?(t=n,(r=e)instanceof vn&&t.op===r.op&&t.field.isEqual(r.field)&&bn(t.value,r.value)):n instanceof Hn?function(t,r){return r instanceof Hn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,c)=>i&&wN(a,r.filters[c]),!0)}(n,e):void dt();var t,r}function EN(n,e){const t=n.filters.concat(e);return Hn.create(t,n.op)}function IN(n){return n instanceof vn?`${(e=n).field.canonicalString()} ${e.op} ${Wm(e.value)}`:n instanceof Hn?function(e){return e.op.toString()+" {"+e.getFilters().map(IN).join(" ,")+"}"}(n):"Filter";var e}class n2 extends vn{constructor(e,t,r){super(e,t,r),this.key=et.fromName(r.referenceValue)}matches(e){const t=et.comparator(e.key,this.key);return this.matchesComparison(t)}}class r2 extends vn{constructor(e,t){super(e,"in",t),this.keys=bN(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class s2 extends vn{constructor(e,t){super(e,"not-in",t),this.keys=bN(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function bN(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>et.fromName(r.referenceValue))}class o2 extends vn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return B0(t)&&Xn(t.arrayValue,this.value)}}class TN extends vn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Xn(this.value.arrayValue,t)}}class a2 extends vn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Xn(this.value.arrayValue,t)}}class u2 extends vn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!B0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Xn(this.value.arrayValue,r))}}class Km{constructor(e,t="asc"){this.field=e,this.dir=t}}function c2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class jr{constructor(e,t){this.comparator=e,this.root=t||Gi.EMPTY}insert(e,t){return new jr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gi.BLACK,null,null))}remove(e){return new jr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wT(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wT(this.root,e,this.comparator,!1)}getReverseIterator(){return new wT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wT(this.root,e,this.comparator,!0)}}class wT{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Gi.RED,this.left=i??Gi.EMPTY,this.right=a??Gi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Gi(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Gi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Gi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dt();const e=this.left.check();if(e!==this.right.check())throw dt();return e+(this.isRed()?0:1)}}Gi.EMPTY=null,Gi.RED=!0,Gi.BLACK=!1,Gi.EMPTY=new class{constructor(){this.size=0}get key(){throw dt()}get value(){throw dt()}get color(){throw dt()}get left(){throw dt()}get right(){throw dt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Gi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qn{constructor(e){this.comparator=e,this.data=new jr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new CN(this.data.getIterator())}getIteratorFrom(e){return new CN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof qn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new qn(this.comparator);return t.data=e,t}}class CN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zm(n){return n.hasNext()?n.getNext():void 0}class $s{constructor(e){this.fields=e,e.sort(hr.comparator)}static empty(){return new $s([])}unionWith(e){let t=new qn(hr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new $s(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class xi{constructor(e){this.value=e}static empty(){return new xi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!vT(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=j0(t)}setAll(e){let t=hr.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=j0(c):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());vT(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return bn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];vT(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){l(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new xi(j0(this.value))}}function DN(n){const e=[];return l(n.fields,(t,r)=>{const i=new hr([t]);if(vT(r)){const a=DN(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new $s(e)}class fr{constructor(e,t,r,i,a,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=h}static newInvalidDocument(e){return new fr(e,0,Nt.min(),Nt.min(),Nt.min(),xi.empty(),0)}static newFoundDocument(e,t,r,i){return new fr(e,1,t,Nt.min(),r,i,0)}static newNoDocument(e,t){return new fr(e,2,t,Nt.min(),Nt.min(),xi.empty(),0)}static newUnknownDocument(e,t){return new fr(e,3,t,Nt.min(),Nt.min(),xi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Nt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof fr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class l2{constructor(e,t=null,r=[],i=[],a=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=h,this._t=null}}function KA(n,e=null,t=[],r=[],i=null,a=null,c=null){return new l2(n,e,t,r,i,a,c)}function ep(n){const e=rt(n);if(null===e._t){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>qA(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),m(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Wm(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Wm(r)).join(",")),e._t=t}return e._t}function $0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!c2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!wN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_N(n.startAt,e.startAt)&&_N(n.endAt,e.endAt)}function ET(n){return et.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function IT(n,e){return n.filters.filter(t=>t instanceof vn&&t.field.isEqual(e))}function SN(n,e,t){let r=Oe,i=!0;for(const a of IT(n,e)){let c=Oe,h=!0;switch(a.op){case"<":case"<=":c=e2(a.value);break;case"==":case"in":case">=":c=a.value;break;case">":c=a.value,h=!1;break;case"!=":case"not-in":c=Oe}pN({value:r,inclusive:i},{value:c,inclusive:h})<0&&(r=c,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];pN({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function AN(n,e,t){let r=At,i=!0;for(const a of IT(n,e)){let c=At,h=!0;switch(a.op){case">=":case">":c=t2(a.value),h=!1;break;case"==":case"in":case"<=":c=a.value;break;case"<":c=a.value,h=!1;break;case"!=":case"not-in":c=At}gN({value:r,inclusive:i},{value:c,inclusive:h})>0&&(r=c,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];gN({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class jc{constructor(e,t=null,r=[],i=[],a=null,c="F",h=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=_,this.wt=null,this.gt=null}}function RN(n,e,t,r,i,a,c,h){return new jc(n,e,t,r,i,a,c,h)}function Ym(n){return new jc(n)}function xN(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function ZA(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function bT(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function YA(n){return null!==n.collectionGroup}function tp(n){const e=rt(n);if(null===e.wt){e.wt=[];const t=bT(e),r=ZA(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Km(t)),e.wt.push(new Km(hr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Km(hr.keyField(),a))}}}return e.wt}function ys(n){const e=rt(n);if(!e.gt)if("F"===e.limitType)e.gt=KA(e.path,e.collectionGroup,tp(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of tp(e))t.push(new Km(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Id(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Id(e.startAt.position,e.startAt.inclusive):null;e.gt=KA(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.gt}function QA(n,e){e.getFirstInequalityField(),bT(n);const t=n.filters.concat([e]);return new jc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function TT(n,e,t){return new jc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function H0(n,e){return $0(ys(n),ys(e))&&n.limitType===e.limitType}function MN(n){return`${ep(ys(n))}|lt:${n.limitType}`}function XA(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>IN(r)).join(", ")}]`),m(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Wm(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Wm(r)).join(",")),`Target(${t})`}(ys(n))}; limitType=${n.limitType})`}function G0(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):et.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of tp(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,c){const h=mN(i,a,c);return i.inclusive?h<=0:h<0}(t.startAt,tp(t),r)||t.endAt&&!function(i,a,c){const h=mN(i,a,c);return i.inclusive?h>=0:h>0}(t.endAt,tp(t),r)));var t,r}function NN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function PN(n){return(e,t)=>{let r=!1;for(const i of tp(n)){const a=d2(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function d2(n,e,t){const r=n.field.isKeyField()?et.comparator(e.key,t.key):function(i,a,c){const h=a.data.field(i),_=c.data.field(i);return null!==h&&null!==_?Bc(h,_):dt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return dt()}}function kN(n,e){if(n.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:v(e)?"-0":e}}function ON(n){return{integerValue:""+n}}function LN(n,e){return I(e)?ON(e):kN(n,e)}class CT{constructor(){this._=void 0}}function h2(n,e,t){return n instanceof Qm?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof np?UN(n,e):n instanceof rp?VN(n,e):function(r,i){const a=FN(r,i),c=BN(a)+BN(r.It);return GA(a)&&GA(r.It)?ON(c):kN(r.Tt,c)}(n,e)}function f2(n,e,t){return n instanceof np?UN(n,e):n instanceof rp?VN(n,e):t}function FN(n,e){return n instanceof Xm?GA(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Qm extends CT{}class np extends CT{constructor(e){super(),this.elements=e}}function UN(n,e){const t=jN(e);for(const r of n.elements)t.some(i=>bn(i,r))||t.push(r);return{arrayValue:{values:t}}}class rp extends CT{constructor(e){super(),this.elements=e}}function VN(n,e){let t=jN(e);for(const r of n.elements)t=t.filter(i=>!bn(i,r));return{arrayValue:{values:t}}}class Xm extends CT{constructor(e,t){super(),this.Tt=e,this.It=t}}function BN(n){return X(n.integerValue||n.doubleValue)}function jN(n){return B0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class z0{constructor(e,t){this.field=e,this.transform=t}}class g2{constructor(e,t){this.version=e,this.transformResults=t}}class vr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vr}static exists(e){return new vr(void 0,e)}static updateTime(e){return new vr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function DT(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class ST{}function $N(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new e_(n.key,vr.none()):new Jm(n.key,n.data,vr.none());{const t=n.data,r=xi.empty();let i=new qn(hr.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);null===c&&a.length>1&&(a=a.popLast(),c=t.field(a)),null===c?r.delete(a):r.set(a,c),i=i.add(a)}return new $c(n.key,r,new $s(i.toArray()),vr.none())}}function m2(n,e,t){n instanceof Jm?function(r,i,a){const c=r.value.clone(),h=zN(r.fieldTransforms,i,a.transformResults);c.setAll(h),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof $c?function(r,i,a){if(!DT(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=zN(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(GN(r)),h.setAll(c),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function W0(n,e,t,r){return n instanceof Jm?function(i,a,c,h){if(!DT(i.precondition,a))return c;const _=i.value.clone(),w=WN(i.fieldTransforms,h,a);return _.setAll(w),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof $c?function(i,a,c,h){if(!DT(i.precondition,a))return c;const _=WN(i.fieldTransforms,h,a),w=a.data;return w.setAll(GN(i)),w.setAll(_),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(c=t,DT(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c);var a,c}function _2(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=FN(r.transform,i||null);null!=a&&(null===t&&(t=xi.empty()),t.set(r.field,a))}return t||null}function HN(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&xu(t,r,(i,a)=>function p2(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof np&&r instanceof np||t instanceof rp&&r instanceof rp?xu(t.elements,r.elements,bn):t instanceof Xm&&r instanceof Xm?bn(t.It,r.It):t instanceof Qm&&r instanceof Qm);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Jm extends ST{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class $c extends ST{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function GN(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function zN(n,e,t){const r=new Map;Ct(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,h=e.data.field(a.field);r.set(a.field,f2(c,h,t[i]))}return r}function WN(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,h2(a,c,e))}return r}class e_ extends ST{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JA extends ST{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class y2{constructor(e){this.count=e}}var si,Tn;function qN(n){switch(n){default:return dt();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function KN(n){if(void 0===n)return Br("GRPC error has no .code"),le.UNKNOWN;switch(n){case si.OK:return le.OK;case si.CANCELLED:return le.CANCELLED;case si.UNKNOWN:return le.UNKNOWN;case si.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case si.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case si.INTERNAL:return le.INTERNAL;case si.UNAVAILABLE:return le.UNAVAILABLE;case si.UNAUTHENTICATED:return le.UNAUTHENTICATED;case si.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case si.NOT_FOUND:return le.NOT_FOUND;case si.ALREADY_EXISTS:return le.ALREADY_EXISTS;case si.PERMISSION_DENIED:return le.PERMISSION_DENIED;case si.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case si.ABORTED:return le.ABORTED;case si.OUT_OF_RANGE:return le.OUT_OF_RANGE;case si.UNIMPLEMENTED:return le.UNIMPLEMENTED;case si.DATA_LOSS:return le.DATA_LOSS;default:return dt()}}(Tn=si||(si={}))[Tn.OK=0]="OK",Tn[Tn.CANCELLED=1]="CANCELLED",Tn[Tn.UNKNOWN=2]="UNKNOWN",Tn[Tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tn[Tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tn[Tn.NOT_FOUND=5]="NOT_FOUND",Tn[Tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tn[Tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tn[Tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tn[Tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tn[Tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tn[Tn.ABORTED=10]="ABORTED",Tn[Tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tn[Tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tn[Tn.INTERNAL=13]="INTERNAL",Tn[Tn.UNAVAILABLE=14]="UNAVAILABLE",Tn[Tn.DATA_LOSS=15]="DATA_LOSS";class bd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){l(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return d(this.inner)}size(){return this.innerSize}}const v2=new jr(et.comparator);function Hs(){return v2}const ZN=new jr(et.comparator);function q0(...n){let e=ZN;for(const t of n)e=e.insert(t.key,t);return e}function YN(n){let e=ZN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Nu(){return K0()}function QN(){return K0()}function K0(){return new bd(n=>n.toString(),(n,e)=>n.isEqual(e))}const w2=new jr(et.comparator),E2=new qn(et.comparator);function un(...n){let e=E2;for(const t of n)e=e.add(t);return e}const I2=new qn(Qt);function AT(){return I2}class Z0{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Y0.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Z0(Nt.min(),i,AT(),Hs(),un())}}class Y0{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Y0(r,t,un(),un(),un())}}class RT{constructor(e,t,r,i){this.Et=e,this.removedTargetIds=t,this.key=r,this.At=i}}class XN{constructor(e,t){this.targetId=e,this.Rt=t}}class JN{constructor(e,t,r=A.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class eP{constructor(){this.Pt=0,this.vt=nP(),this.bt=A.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.bt}get Dt(){return 0!==this.Pt}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}Nt(){let e=un(),t=un(),r=un();return this.vt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:dt()}}),new Y0(this.bt,this.Vt,e,t,r)}kt(){this.St=!1,this.vt=nP()}$t(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ot(){this.Pt+=1}Ft(){this.Pt-=1}Bt(){this.St=!0,this.Vt=!0}}class b2{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=Hs(),this.Kt=tP(),this.Gt=new qn(Qt)}Qt(e){for(const t of e.Et)e.At&&e.At.isFoundDocument()?this.jt(t,e.At):this.zt(t,e.key,e.At);for(const t of e.removedTargetIds)this.zt(t,e.key,e.At)}Wt(e){this.forEachTarget(e,t=>{const r=this.Ht(t);switch(e.state){case 0:this.Jt(t)&&r.xt(e.resumeToken);break;case 1:r.Ft(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.Ft(),r.Dt||this.removeTarget(t);break;case 3:this.Jt(t)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:this.Jt(t)&&(this.Yt(t),r.xt(e.resumeToken));break;default:dt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((r,i)=>{this.Jt(i)&&t(i)})}Zt(e){const t=e.targetId,r=e.Rt.count,i=this.Xt(t);if(i){const a=i.target;if(ET(a))if(0===r){const c=new et(a.path);this.zt(t,c,fr.newNoDocument(c,Nt.min()))}else Ct(1===r);else this.te(t)!==r&&(this.Yt(t),this.Gt=this.Gt.add(t))}}ee(e){const t=new Map;this.qt.forEach((a,c)=>{const h=this.Xt(c);if(h){if(a.current&&ET(h.target)){const _=new et(h.target.path);null!==this.Ut.get(_)||this.ne(c,_)||this.zt(c,_,fr.newNoDocument(_,e))}a.Ct&&(t.set(c,a.Nt()),a.kt())}});let r=un();this.Kt.forEach((a,c)=>{let h=!0;c.forEachWhile(_=>{const w=this.Xt(_);return!w||2===w.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.Ut.forEach((a,c)=>c.setReadTime(e));const i=new Z0(e,t,this.Gt,this.Ut,r);return this.Ut=Hs(),this.Kt=tP(),this.Gt=new qn(Qt),i}jt(e,t){if(!this.Jt(e))return;const r=this.ne(e,t.key)?2:0;this.Ht(e).$t(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}zt(e,t,r){if(!this.Jt(e))return;const i=this.Ht(e);this.ne(e,t)?i.$t(t,1):i.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.qt.delete(e)}te(e){const t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Ht(e).Ot()}Ht(e){let t=this.qt.get(e);return t||(t=new eP,this.qt.set(e,t)),t}se(e){let t=this.Kt.get(e);return t||(t=new qn(Qt),this.Kt=this.Kt.insert(e,t)),t}Jt(e){const t=null!==this.Xt(e);return t||je("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new eP),this.Lt.getRemoteKeysForTarget(e).forEach(t=>{this.zt(e,t,null)})}ne(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}function tP(){return new jr(et.comparator)}function nP(){return new jr(et.comparator)}const T2={asc:"ASCENDING",desc:"DESCENDING"},C2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},D2={and:"AND",or:"OR"};class S2{constructor(e,t){this.databaseId=e,this.yt=t}}function t_(n,e){return n.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rP(n,e){return n.yt?e.toBase64():e.toUint8Array()}function A2(n,e){return t_(n,e.toTimestamp())}function Kr(n){return Ct(!!n),Nt.fromTimestamp(function(e){const t=K(e);return new $n(t.seconds,t.nanos)}(n))}function eR(n,e){return(t=n,new In(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function iP(n){const e=In.fromString(n);return Ct(fP(e)),e}function Q0(n,e){return eR(n.databaseId,e.path)}function Pu(n,e){const t=iP(e);if(t.get(1)!==n.databaseId.projectId)throw new Le(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Le(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new et(oP(t))}function tR(n,e){return eR(n.databaseId,e)}function sP(n){const e=iP(n);return 4===e.length?In.emptyPath():oP(e)}function X0(n){return new In(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function oP(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function aP(n,e,t){return{name:Q0(n,e),fields:t.value.mapValue.fields}}function uP(n,e,t){const r=Pu(n,e.name),i=Kr(e.updateTime),a=e.createTime?Kr(e.createTime):Nt.min(),c=new xi({mapValue:{fields:e.fields}}),h=fr.newFoundDocument(r,i,a,c);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function J0(n,e){let t;if(e instanceof Jm)t={update:aP(n,e.key,e.value)};else if(e instanceof e_)t={delete:Q0(n,e.key)};else if(e instanceof $c)t={update:aP(n,e.key,e.data),updateMask:L2(e.fieldMask)};else{if(!(e instanceof JA))return dt();t={verify:Q0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof Qm)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof np)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof rp)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Xm)return{fieldPath:a.field.canonicalString(),increment:c.It};throw dt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:A2(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:dt()),t;var i}function nR(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?vr.updateTime(Kr(i.updateTime)):void 0!==i.exists?vr.exists(i.exists):vr.none():vr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let h=null;"setToServerValue"in c?(Ct("REQUEST_TIME"===c.setToServerValue),h=new Qm):"appendMissingElements"in c?h=new np(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new rp(c.removeAllFromArray.values||[]):"increment"in c?h=new Xm(a,c.increment):dt();const _=hr.fromServerFormat(c.fieldPath);return new z0(_,h)}(n,i)):[];var i;if(e.update){const i=Pu(n,e.update.name),a=new xi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new $s((e.updateMask.fieldPaths||[]).map(w=>hr.fromServerFormat(w)));return new $c(i,a,c,t,r)}return new Jm(i,a,t,r)}if(e.delete){const i=Pu(n,e.delete);return new e_(i,t)}if(e.verify){const i=Pu(n,e.verify);return new JA(i,t)}return dt()}function cP(n,e){return{documents:[tR(n,e.path)]}}function rR(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=tR(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=tR(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0!==_.length)return hP(Hn.create(_,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(w=>{return{field:Td((b=w).field),direction:P2(b.dir)};var b})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=(w=e.limit,n.yt||m(w)?w:{value:w});var w,h,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function lP(n){let e=sP(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ct(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let a=[];t.where&&(a=function(b){const D=dP(b);return D instanceof Hn&&WA(D)?D.getFilters():[D]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(b=>{return new Km(n_((D=b).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let h=null;t.limit&&(h=function(b){let D;return D="object"==typeof b?b.value:b,m(D)?null:D}(t.limit));let _=null;var b;t.startAt&&(_=new Id((b=t.startAt).values||[],!!b.before));let w=null;return t.endAt&&(w=function(b){return new Id(b.values||[],!b.before)}(t.endAt)),RN(e,i,c,a,h,"F",_,w)}function dP(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=n_(e.unaryFilter.field);return vn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=n_(e.unaryFilter.field);return vn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=n_(e.unaryFilter.field);return vn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=n_(e.unaryFilter.field);return vn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return dt()}}(n):void 0!==n.fieldFilter?vn.create(n_((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Hn.create(e.compositeFilter.filters.map(t=>dP(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return dt()}}(e.compositeFilter.op))}(n):dt();var e}function P2(n){return T2[n]}function k2(n){return C2[n]}function O2(n){return D2[n]}function Td(n){return{fieldPath:n.canonicalString()}}function n_(n){return hr.fromServerFormat(n.fieldPath)}function hP(n){return n instanceof vn?function(e){if("=="===e.op){if(hN(e.value))return{unaryFilter:{field:Td(e.field),op:"IS_NAN"}};if(dN(e.value))return{unaryFilter:{field:Td(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(hN(e.value))return{unaryFilter:{field:Td(e.field),op:"IS_NOT_NAN"}};if(dN(e.value))return{unaryFilter:{field:Td(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Td(e.field),op:k2(e.op),value:e.value}}}(n):n instanceof Hn?function(e){const t=e.getFilters().map(r=>hP(r));return 1===t.length?t[0]:{compositeFilter:{op:O2(e.op),filters:t}}}(n):dt()}function L2(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function fP(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function vs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=pP(e)),e=F2(n.get(t),e);return pP(e)}function F2(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function pP(n){return n+"\x01\x01"}function ku(n){const e=n.length;if(Ct(e>=2),2===e)return Ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),In.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&dt(),n.charAt(c+1)){case"\x01":const h=n.substring(a,c);let _;0===i.length?_=h:(i+=h,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:dt()}a=c+2}return new In(r)}const gP=["userId","batchId"];function xT(n,e){return[n,vs(e)]}function mP(n,e,t){return[n,vs(e),t]}const U2={},V2=["prefixPath","collectionGroup","readTime","documentId"],B2=["prefixPath","collectionGroup","documentId"],j2=["collectionGroup","readTime","prefixPath","documentId"],$2=["canonicalId","targetId"],H2=["targetId","path"],G2=["path","targetId"],z2=["collectionId","parent"],W2=["indexId","uid"],q2=["uid","sequenceNumber"],K2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Z2=["indexId","uid","orderedDocumentKey"],Y2=["userId","collectionPath","documentId"],Q2=["userId","collectionPath","largestBatchId"],X2=["userId","collectionGroup","largestBatchId"],_P=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],J2=[..._P,"documentOverlays"],yP=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],vP=yP,eU=[...vP,"indexConfiguration","indexState","indexEntries"];class iR extends zm{constructor(e,t){super(),this.re=e,this.currentSequenceNumber=t}}function Mi(n,e){const t=rt(n);return fo.M(t.re,e)}class sR{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&m2(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=W0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=W0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=QN();return this.mutations.forEach(i=>{const a=e.get(i.key),c=a.overlayedDocument;let h=this.applyToLocalView(c,a.mutatedFields);h=t.has(i.key)?null:h;const _=$N(c,h);null!==_&&r.set(i.key,_),c.isValidDocument()||c.convertToNoDocument(Nt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),un())}isEqual(e){return this.batchId===e.batchId&&xu(this.mutations,e.mutations,(t,r)=>HN(t,r))&&xu(this.baseMutations,e.baseMutations,(t,r)=>HN(t,r))}}class oR{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ct(e.mutations.length===r.length);let i=w2;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new oR(e,t,r,i)}}class aR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Cd{constructor(e,t,r,i,a=Nt.min(),c=Nt.min(),h=A.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h}withSequenceNumber(e){return new Cd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Cd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Cd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class wP{constructor(e){this.oe=e}}function EP(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:MT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Q0(i=n.oe,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:t_(i,a.version.toTimestamp()),createTime:t_(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ip(e.version)};else{if(!e.isUnknownDocument())return dt();r.unknownDocument={path:t.path.toArray(),version:ip(e.version)}}var i,a;return r}function MT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ip(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function sp(n){const e=new $n(n.seconds,n.nanoseconds);return Nt.fromTimestamp(e)}function op(n,e){const t=(e.baseMutations||[]).map(a=>nR(n.oe,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>nR(n.oe,a)),i=$n.fromMillis(e.localWriteTimeMs);return new sR(e.batchId,i,t,r)}function ew(n){const e=sp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?sp(n.lastLimboFreeSnapshotVersion):Nt.min();let r;var i;return void 0!==n.query.documents?(Ct(1===(i=n.query).documents.length),r=ys(Ym(sP(i.documents[0])))):r=ys(lP(n.query)),new Cd(r,n.targetId,0,n.lastListenSequenceNumber,e,t,A.fromBase64String(n.resumeToken))}function IP(n,e){const t=ip(e.snapshotVersion),r=ip(e.lastLimboFreeSnapshotVersion);let i;i=ET(e.target)?cP(n.oe,e.target):rR(n.oe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ep(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function uR(n){const e=lP({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?TT(e,e.limit,"L"):e}function cR(n,e){return new aR(e.largestBatchId,nR(n.oe,e.overlayMutation))}function bP(n,e){const t=e.path.lastSegment();return[n,vs(e.path.popLast()),t]}function TP(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:ip(r.readTime),documentKey:vs(r.documentKey.path),largestBatchId:r.largestBatchId}}class nU{getBundleMetadata(e,t){return CP(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:sp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return CP(e).put({bundleId:(r=t).id,createTime:ip(Kr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return DP(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:uR(i.bundledQuery),readTime:sp(i.readTime)};var i})}saveNamedQuery(e,t){return DP(e).put({name:(r=t).name,readTime:ip(Kr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function CP(n){return Mi(n,"bundles")}function DP(n){return Mi(n,"namedQueries")}class NT{constructor(e,t){this.Tt=e,this.userId=t}static ue(e,t){return new NT(e,t.uid||"")}getOverlay(e,t){return tw(e).get(bP(this.userId,t)).next(r=>r?cR(this.Tt,r):null)}getOverlays(e,t){const r=Nu();return ie.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,c)=>{const h=new aR(t,c);i.push(this.ce(e,h))}),ie.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(vs(c.getCollectionPath())));const a=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(tw(e).Y("collectionPathOverlayIndex",h))}),ie.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Nu(),a=vs(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return tw(e).W("collectionPathOverlayIndex",c).next(h=>{for(const _ of h){const w=cR(this.Tt,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Nu();let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return tw(e).X({index:"collectionGroupOverlayIndex",range:h},(_,w,b)=>{const D=cR(this.Tt,w);a.size()<i||D.largestBatchId===c?(a.set(D.getKey(),D),c=D.largestBatchId):b.done()}).next(()=>a)}ce(e,t){return tw(e).put(function(r,i,a){const[c,h,_]=bP(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:J0(r.oe,a.mutation)}}(this.Tt,this.userId,t))}}function tw(n){return Mi(n,"documentOverlays")}class ap{constructor(){}ae(e,t){this.he(e,t),t.le()}he(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(X(e.integerValue));else if("doubleValue"in e){const r=X(e.doubleValue);isNaN(r)?this.fe(t,13):(this.fe(t,15),v(r)?t.de(0):t.de(r))}else if("timestampValue"in e){const r=e.timestampValue;this.fe(t,20),"string"==typeof r?t._e(r):(t._e(`${r.seconds||""}`),t.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(ve(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.fe(t,45),t.de(r.latitude||0),t.de(r.longitude||0)}else"mapValue"in e?fN(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):dt()}we(e,t){this.fe(t,25),this.Te(e,t)}Te(e,t){t._e(e)}pe(e,t){const r=e.fields||{};this.fe(t,55);for(const i of Object.keys(r))this.we(i,t),this.he(r[i],t)}Ie(e,t){const r=e.values||[];this.fe(t,50);for(const i of r)this.he(i,t)}ye(e,t){this.fe(t,37),et.fromName(e).path.forEach(r=>{this.fe(t,60),this.Te(r,t)})}fe(e,t){e.de(t)}me(e){e.de(2)}}function rU(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function SP(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=rU(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}ap.Ee=new ap;class iU{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Re(r.value),r=t.next();this.Pe()}ve(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Ve()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const i=t.codePointAt(0);this.Re(240|i>>>18),this.Re(128|63&i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i)}}this.Pe()}De(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=t.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Ve()}Ce(e){const t=this.xe(e),r=SP(t);this.Ne(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}ke(e){const t=this.xe(e),r=SP(t);this.Ne(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$e(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Re(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}be(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Pe(){this.Me(0),this.Me(1)}Ve(){this.Fe(0),this.Fe(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}Fe(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class sU{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.$e()}}class oU{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Oe()}}class nw{constructor(){this.Le=new iU,this.qe=new sU(this.Le),this.Ue=new oU(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return 0===e?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}class up{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ge(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new up(this.indexId,this.documentKey,this.arrayValue,r)}}function Dd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=AP(n.arrayValue,e.arrayValue),0!==t?t:(t=AP(n.directionalValue,e.directionalValue),0!==t?t:et.comparator(n.documentKey,e.documentKey)))}function AP(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class aU{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const t of e.filters){const r=t;r.isInequality()?this.ze=r:this.je.push(r)}}We(e){Ct(e.collectionGroup===this.collectionId);const t=k0(e);if(void 0!==t&&!this.He(t))return!1;const r=Uc(e);let i=0,a=0;for(;i<r.length&&this.He(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.ze){const c=r[i];if(!this.Je(this.ze,c)||!this.Ye(this.Qe[a++],c))return!1;++i}for(;i<r.length;++i)if(a>=this.Qe.length||!this.Ye(this.Qe[a++],r[i]))return!1;return!0}He(e){for(const t of this.je)if(this.Je(t,e))return!0;return!1}Je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ye(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function RP(n){var e,t;if(Ct(n instanceof vn||n instanceof Hn),n instanceof vn){if(n instanceof TN){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>vn.create(n.field,"==",a)))||[];return Hn.create(i,"or")}return n}const r=n.filters.map(i=>RP(i));return Hn.create(r,n.op)}function uU(n){if(0===n.getFilters().length)return[];const e=hR(RP(n));return Ct(xP(e)),lR(e)||dR(e)?[e]:e.getFilters()}function lR(n){return n instanceof vn}function dR(n){return n instanceof Hn&&WA(n)}function xP(n){return lR(n)||dR(n)||function(e){if(e instanceof Hn&&zA(e)){for(const t of e.getFilters())if(!lR(t)&&!dR(t))return!1;return!0}return!1}(n)}function hR(n){if(Ct(n instanceof vn||n instanceof Hn),n instanceof vn)return n;if(1===n.filters.length)return hR(n.filters[0]);const e=n.filters.map(r=>hR(r));let t=Hn.create(e,n.op);return t=PT(t),xP(t)?t:(Ct(t instanceof Hn),Ct(qm(t)),Ct(t.filters.length>1),t.filters.reduce((r,i)=>fR(r,i)))}function fR(n,e){let t;return Ct(n instanceof vn||n instanceof Hn),Ct(e instanceof vn||e instanceof Hn),t=n instanceof vn?e instanceof vn?Hn.create([n,e],"and"):MP(n,e):e instanceof vn?MP(e,n):function(r,i){if(Ct(r.filters.length>0&&i.filters.length>0),qm(r)&&qm(i))return EN(r,i.getFilters());const a=zA(r)?r:i,c=zA(r)?i:r,h=a.filters.map(_=>fR(_,c));return Hn.create(h,"or")}(n,e),PT(t)}function MP(n,e){if(qm(e))return EN(e,n.getFilters());{const t=e.filters.map(r=>fR(n,r));return Hn.create(t,"or")}}function PT(n){if(Ct(n instanceof vn||n instanceof Hn),n instanceof vn)return n;const e=n.getFilters();if(1===e.length)return PT(e[0]);if(vN(n))return n;const t=e.map(i=>PT(i)),r=[];return t.forEach(i=>{i instanceof vn?r.push(i):i instanceof Hn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Hn.create(r,n.op)}class cU{constructor(){this.Ze=new pR}addToCollectionParentIndex(e,t){return this.Ze.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Ze.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Hi.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Hi.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class pR{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new qn(In.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qn(In.comparator)).toArray()}}const kT=new Uint8Array(0);class lU{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new pR,this.tn=new bd(r=>ep(r),(r,i)=>$0(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const a={collectionId:r,parent:vs(i)};return NP(e).put(a)}return ie.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[$m(t),""],!1,!0);return NP(e).W(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(ku(c.parent))}return r})}addFieldIndex(e,t){const r=OT(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var c;delete i.indexId;const a=r.add(i);if(t.indexState){const c=iw(e);return a.next(h=>{c.put(TP(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=OT(e),i=iw(e),a=rw(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=rw(e);let i=!0;const a=new Map;return ie.forEach(this.en(t),c=>this.nn(e,c).next(h=>{i&&(i=!!h),a.set(c,h)})).next(()=>{if(i){let c=un();const h=[];return ie.forEach(a,(_,w)=>{var b;je("IndexedDbIndexManager",`Using index ${b=_,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(lt=>`${lt.fieldPath}:${lt.kind}`).join(",")}`} to execute ${ep(t)}`);const D=function(lt,wt){const Bt=k0(wt);if(void 0===Bt)return null;for(const Yt of IT(lt,Bt.fieldPath))switch(Yt.op){case"array-contains-any":return Yt.value.arrayValue.values||[];case"array-contains":return[Yt.value]}return null}(w,_),x=function(lt,wt){const Bt=new Map;for(const Yt of Uc(wt))for(const $r of IT(lt,Yt.fieldPath))switch($r.op){case"==":case"in":Bt.set(Yt.fieldPath.canonicalString(),$r.value);break;case"not-in":case"!=":return Bt.set(Yt.fieldPath.canonicalString(),$r.value),Array.from(Bt.values())}return null}(w,_),F=function(lt,wt){const Bt=[];let Yt=!0;for(const $r of Uc(wt)){const qs=0===$r.kind?SN(lt,$r.fieldPath,lt.startAt):AN(lt,$r.fieldPath,lt.startAt);Bt.push(qs.value),Yt&&(Yt=qs.inclusive)}return new Id(Bt,Yt)}(w,_),$=function(lt,wt){const Bt=[];let Yt=!0;for(const $r of Uc(wt)){const qs=0===$r.kind?AN(lt,$r.fieldPath,lt.endAt):SN(lt,$r.fieldPath,lt.endAt);Bt.push(qs.value),Yt&&(Yt=qs.inclusive)}return new Id(Bt,Yt)}(w,_),ee=this.sn(_,w,F),se=this.sn(_,w,$),ft=this.rn(_,w,x),yt=this.on(_.indexId,D,ee,F.inclusive,se,$.inclusive,ft);return ie.forEach(yt,lt=>r.J(lt,t.limit).next(wt=>{wt.forEach(Bt=>{const Yt=et.fromSegments(Bt.documentKey);c.has(Yt)||(c=c.add(Yt),h.push(Yt))})}))}).next(()=>h)}return ie.resolve(null)})}en(e){let t=this.tn.get(e);return t||(t=0===e.filters.length?[e]:uU(Hn.create(e.filters,"and")).map(r=>KA(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,t),t)}on(e,t,r,i,a,c,h){const _=(null!=t?t.length:1)*Math.max(r.length,a.length),w=_/(null!=t?t.length:1),b=[];for(let D=0;D<_;++D){const x=t?this.un(t[D/w]):kT,F=this.cn(e,x,r[D%w],i),$=this.an(e,x,a[D%w],c),ee=h.map(se=>this.cn(e,x,se,!0));b.push(...this.createRange(F,$,ee))}return b}cn(e,t,r,i){const a=new up(e,et.empty(),t,r);return i?a:a.Ge()}an(e,t,r,i){const a=new up(e,et.empty(),t,r);return i?a.Ge():a}nn(e,t){const r=new aU(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let c=null;for(const h of a)r.We(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(e,t){let r=2;const i=this.en(t);return ie.forEach(i,a=>this.nn(e,a).next(c=>{c?0!==r&&c.fields.length<function(h){let _=new qn(hr.comparator),w=!1;for(const b of h.filters)for(const D of b.getFlattenedFilters())D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?w=!0:_=_.add(D.field));for(const b of h.orderBy)b.field.isKeyField()||(_=_.add(b.field));return _.size+(w?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}hn(e,t){const r=new nw;for(const i of Uc(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const c=r.Ke(i.kind);ap.Ee.ae(a,c)}return r.Be()}un(e){const t=new nw;return ap.Ee.ae(e,t.Ke(0)),t.Be()}ln(e,t){const r=new nw;return ap.Ee.ae(Jf(this.databaseId,t),r.Ke(function(i){const a=Uc(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Be()}rn(e,t,r){if(null===r)return[];let i=[];i.push(new nw);let a=0;for(const c of Uc(e)){const h=r[a++];for(const _ of i)if(this.fn(t,c.fieldPath)&&B0(h))i=this.dn(i,c,h);else{const w=_.Ke(c.kind);ap.Ee.ae(h,w)}}return this._n(i)}sn(e,t,r){return this.rn(e,t,r.position)}_n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Be();return t}dn(e,t,r){const i=[...e],a=[];for(const c of r.arrayValue.values||[])for(const h of i){const _=new nw;_.seed(h.Be()),ap.Ee.ae(c,_.Ke(t.kind)),a.push(_)}return a}fn(e,t){return!!e.filters.find(r=>r instanceof vn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=OT(e),i=iw(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const c=[];return ie.forEach(a,h=>i.get([h.indexId,this.uid]).next(_=>{c.push(function(w,b){const D=b?new Qf(b.sequenceNumber,new Hi(sp(b.readTime),new et(ku(b.documentKey)),b.largestBatchId)):Qf.empty(),x=w.fields.map(([F,$])=>new Yf(hr.fromServerFormat(F),$));return new Gm(w.indexId,w.collectionGroup,x,D)}(h,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Qt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=OT(e),a=iw(e);return this.wn(e).next(c=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>ie.forEach(h,_=>a.put(TP(_.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ie.forEach(t,(i,a)=>{const c=r.get(i.collectionGroup);return(c?ie.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ie.forEach(h,_=>this.mn(e,i,_).next(w=>{const b=this.gn(a,_);return w.isEqual(b)?ie.resolve():this.yn(e,a,_,w,b)}))))})}pn(e,t,r,i){return rw(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.ln(r,t.key),documentKey:t.key.path.toArray()})}In(e,t,r,i){return rw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.ln(r,t.key),t.key.path.toArray()])}mn(e,t,r){const i=rw(e);let a=new qn(Dd);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.ln(r,t)])},(c,h)=>{a=a.add(new up(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}gn(e,t){let r=new qn(Dd);const i=this.hn(t,e);if(null==i)return r;const a=k0(t);if(null!=a){const c=e.data.field(a.fieldPath);if(B0(c))for(const h of c.arrayValue.values||[])r=r.add(new up(t.indexId,e.key,this.un(h),i))}else r=r.add(new up(t.indexId,e.key,kT,i));return r}yn(e,t,r,i,a){je("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(h,_,w,b,D){const x=h.getIterator(),F=_.getIterator();let $=Zm(x),ee=Zm(F);for(;$||ee;){let se=!1,ft=!1;if($&&ee){const yt=w($,ee);yt<0?ft=!0:yt>0&&(se=!0)}else null!=$?ft=!0:se=!0;se?(b(ee),ee=Zm(F)):ft?(D($),$=Zm(x)):($=Zm(x),ee=Zm(F))}}(i,a,Dd,h=>{c.push(this.pn(e,t,r,h))},h=>{c.push(this.In(e,t,r,h))}),ie.waitFor(c)}wn(e){let t=1;return iw(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,h)=>Dd(c,h)).filter((c,h,_)=>!h||0!==Dd(c,_[h-1]));const i=[];i.push(e);for(const c of r){const h=Dd(c,e),_=Dd(c,t);if(0===h)i[0]=e.Ge();else if(h>0&&_<0)i.push(c),i.push(c.Ge());else if(_>0)break}i.push(t);const a=[];for(let c=0;c<i.length;c+=2){if(this.Tn(i[c],i[c+1]))return[];a.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,kT,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,kT,[]]))}return a}Tn(e,t){return Dd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(PP)}getMinOffset(e,t){return ie.mapArray(this.en(t),r=>this.nn(e,r).next(i=>i||dt())).next(PP)}}function NP(n){return Mi(n,"collectionParents")}function rw(n){return Mi(n,"indexEntries")}function OT(n){return Mi(n,"indexConfiguration")}function iw(n){return Mi(n,"indexState")}function PP(n){Ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;_T(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Hi(e.readTime,e.documentKey,t)}const kP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Gs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Gs(e,Gs.DEFAULT_COLLECTION_PERCENTILE,Gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function OP(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],c=IDBKeyRange.only(t.batchId);let h=0;const _=r.X({range:c},(b,D,x)=>(h++,x.delete()));a.push(_.next(()=>{Ct(1===h)}));const w=[];for(const b of t.mutations){const D=mP(e,b.key.path,t.batchId);a.push(i.delete(D)),w.push(b.key)}return ie.waitFor(a).next(()=>w)}function LT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw dt();e=n.noDocument}return JSON.stringify(e).length}Gs.DEFAULT_COLLECTION_PERCENTILE=10,Gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gs.DEFAULT=new Gs(41943040,Gs.DEFAULT_COLLECTION_PERCENTILE,Gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gs.DISABLED=new Gs(-1,0,0);class FT{constructor(e,t,r,i){this.userId=e,this.Tt=t,this.indexManager=r,this.referenceDelegate=i,this.En={}}static ue(e,t,r,i){Ct(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new FT(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Sd(e).X({index:"userMutationsIndex",range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=r_(e),c=Sd(e);return c.add({}).next(h=>{Ct("number"==typeof h);const _=new sR(h,t,r,i),w=function(x,F,$){const ee=$.baseMutations.map(ft=>J0(x.oe,ft)),se=$.mutations.map(ft=>J0(x.oe,ft));return{userId:F,batchId:$.batchId,localWriteTimeMs:$.localWriteTime.toMillis(),baseMutations:ee,mutations:se}}(this.Tt,this.userId,_),b=[];let D=new qn((x,F)=>Qt(x.canonicalString(),F.canonicalString()));for(const x of i){const F=mP(this.userId,x.key.path,h);D=D.add(x.key.path.popLast()),b.push(c.put(w)),b.push(a.put(F,U2))}return D.forEach(x=>{b.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.En[h]=_.keys()}),ie.waitFor(b).next(()=>_)})}lookupMutationBatch(e,t){return Sd(e).get(t).next(r=>r?(Ct(r.userId===this.userId),op(this.Tt,r)):null)}An(e,t){return this.En[t]?ie.resolve(this.En[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.En[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Sd(e).X({index:"userMutationsIndex",range:i},(c,h,_)=>{h.userId===this.userId&&(Ct(h.batchId>=r),a=op(this.Tt,h)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Sd(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Sd(e).W("userMutationsIndex",t).next(r=>r.map(i=>op(this.Tt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=xT(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return r_(e).X({range:i},(c,h,_)=>{const[w,b,D]=c,x=ku(b);if(w===this.userId&&t.path.isEqual(x))return Sd(e).get(D).next(F=>{if(!F)throw dt();Ct(F.userId===this.userId),a.push(op(this.Tt,F))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new qn(Qt);const i=[];return t.forEach(a=>{const c=xT(this.userId,a.path),h=IDBKeyRange.lowerBound(c),_=r_(e).X({range:h},(w,b,D)=>{const[x,F,$]=w,ee=ku(F);x===this.userId&&a.path.isEqual(ee)?r=r.add($):D.done()});i.push(_)}),ie.waitFor(i).next(()=>this.Rn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=xT(this.userId,r),c=IDBKeyRange.lowerBound(a);let h=new qn(Qt);return r_(e).X({range:c},(_,w,b)=>{const[D,x,F]=_,$=ku(x);D===this.userId&&r.isPrefixOf($)?$.length===i&&(h=h.add(F)):b.done()}).next(()=>this.Rn(e,h))}Rn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Sd(e).get(a).next(c=>{if(null===c)throw dt();Ct(c.userId===this.userId),r.push(op(this.Tt,c))}))}),ie.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return OP(e.re,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Pn(t.batchId)}),ie.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Pn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ie.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return r_(e).X({range:r},(a,c,h)=>{if(a[0]===this.userId){const _=ku(a[1]);i.push(_)}else h.done()}).next(()=>{Ct(0===i.length)})})}containsKey(e,t){return LP(e,this.userId,t)}vn(e){return FP(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function LP(n,e,t){const r=xT(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return r_(n).X({range:a,Z:!0},(h,_,w)=>{const[b,D,x]=h;b===e&&D===i&&(c=!0),w.done()}).next(()=>c)}function Sd(n){return Mi(n,"mutations")}function r_(n){return Mi(n,"documentMutations")}function FP(n){return Mi(n,"mutationQueues")}class cp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Vn(){return new cp(0)}static Sn(){return new cp(-1)}}class dU{constructor(e,t){this.referenceDelegate=e,this.Tt=t}allocateTargetId(e){return this.Dn(e).next(t=>{const r=new cp(t.highestTargetId);return t.highestTargetId=r.next(),this.Cn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(t=>Nt.fromTimestamp(new $n(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Dn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Cn(e,i)))}addTargetData(e,t){return this.xn(e,t).next(()=>this.Dn(e).next(r=>(r.targetCount+=1,this.Nn(t,r),this.Cn(e,r))))}updateTargetData(e,t){return this.xn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>i_(e).delete(t.targetId)).next(()=>this.Dn(e)).next(r=>(Ct(r.targetCount>0),r.targetCount-=1,this.Cn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return i_(e).X((c,h)=>{const _=ew(h);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>ie.waitFor(a)).next(()=>i)}forEachTarget(e,t){return i_(e).X((r,i)=>{const a=ew(i);t(a)})}Dn(e){return UP(e).get("targetGlobalKey").next(t=>(Ct(null!==t),t))}Cn(e,t){return UP(e).put("targetGlobalKey",t)}xn(e,t){return i_(e).put(IP(this.Tt,t))}Nn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Dn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ep(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return i_(e).X({range:i,index:"queryTargetsIndex"},(c,h,_)=>{const w=ew(h);$0(t,w.target)&&(a=w,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Ad(e);return t.forEach(c=>{const h=vs(c.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,c))}),ie.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ad(e);return ie.forEach(t,a=>{const c=vs(a.path);return ie.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Ad(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ad(e);let a=un();return i.X({range:r,Z:!0},(c,h,_)=>{const w=ku(c[1]),b=new et(w);a=a.add(b)}).next(()=>a)}containsKey(e,t){const r=vs(t.path),i=IDBKeyRange.bound([r],[$m(r)],!1,!0);let a=0;return Ad(e).X({index:"documentTargetsIndex",Z:!0,range:i},([c,h],_,w)=>{0!==c&&(a++,w.done())}).next(()=>a>0)}ie(e,t){return i_(e).get(t).next(r=>r?ew(r):null)}}function i_(n){return Mi(n,"targets")}function UP(n){return Mi(n,"targetGlobal")}function Ad(n){return Mi(n,"targetDocuments")}function VP([n,e],[t,r]){const i=Qt(n,t);return 0===i?Qt(e,r):i}class hU{constructor(e){this.kn=e,this.buffer=new qn(VP),this.$n=0}Mn(){return++this.$n}On(e){const t=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();VP(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class fU{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Fn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}stop(){this.Fn&&(this.Fn.cancel(),this.Fn=null)}get started(){return null!==this.Fn}Bn(e){var t=this;je("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Fn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,me.Z)(function*(){t.Fn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Vc(r)?je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Mu(r)}yield t.Bn(3e5)}))}}class pU{constructor(e,t){this.Ln=e,this.params=t}calculateTargetCount(e,t){return this.Ln.qn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ie.resolve(js.at);const r=new hU(t);return this.Ln.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.Ln.Un(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Ln.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Ln.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(kP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kP):this.Kn(e,t))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,t){let r,i,a,c,h,_,w;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,c=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,h=Date.now(),this.removeTargets(e,r,t))).next(D=>(a=D,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(w=Date.now(),Vm()<=ao.in.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-b}ms\n\tDetermined least recently used ${i} in `+(h-c)+`ms\n\tRemoved ${a} targets in `+(_-h)+`ms\n\tRemoved ${D} documents in `+(w-_)+`ms\nTotal Duration: ${w-b}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:D})))}}class gU{constructor(e,t){this.db=e,this.garbageCollector=new pU(this,t)}qn(e){const t=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Gn(e){let t=0;return this.Un(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Un(e,t){return this.Qn(e,(r,i)=>t(i))}addReference(e,t,r){return UT(e,r)}removeReference(e,t,r){return UT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return UT(e,t)}jn(e,t){return function(r,i){let a=!1;return FP(r).tt(c=>LP(r,c,i).next(h=>(h&&(a=!0),ie.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Qn(e,(c,h)=>{if(h<=t){const _=this.jn(e,c).next(w=>{if(!w)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Nt.min()),Ad(e).delete([0,vs(c.path)])))});i.push(_)}}).next(()=>ie.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return UT(e,t)}Qn(e,t){const r=Ad(e);let i,a=js.at;return r.X({index:"documentTargetsIndex"},([c,h],{path:_,sequenceNumber:w})=>{0===c?(a!==js.at&&t(new et(ku(i)),a),a=w,i=_):a=js.at}).next(()=>{a!==js.at&&t(new et(ku(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function UT(n,e){return Ad(n).put((r=n.currentSequenceNumber,{targetId:0,path:vs(e.path),sequenceNumber:r}));var r}class BP{constructor(){this.changes=new bd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class mU{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return lp(e).put(r)}removeEntry(e,t,r){return lp(e).delete(function(i,a){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],MT(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.zn(e,r)))}getEntry(e,t){let r=fr.newInvalidDocument(t);return lp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(sw(t))},(i,a)=>{r=this.Wn(t,a)}).next(()=>r)}Hn(e,t){let r={size:0,document:fr.newInvalidDocument(t)};return lp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(sw(t))},(i,a)=>{r={document:this.Wn(t,a),size:LT(a)}}).next(()=>r)}getEntries(e,t){let r=Hs();return this.Jn(e,t,(i,a)=>{const c=this.Wn(i,a);r=r.insert(i,c)}).next(()=>r)}Yn(e,t){let r=Hs(),i=new jr(et.comparator);return this.Jn(e,t,(a,c)=>{const h=this.Wn(a,c);r=r.insert(a,h),i=i.insert(a,LT(c))}).next(()=>({documents:r,Zn:i}))}Jn(e,t,r){if(t.isEmpty())return ie.resolve();let i=new qn(GP);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(sw(i.first()),sw(i.last())),c=i.getIterator();let h=c.getNext();return lp(e).X({index:"documentKeyIndex",range:a},(_,w,b)=>{const D=et.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;h&&GP(h,D)<0;)r(h,null),h=c.getNext();h&&h.isEqual(D)&&(r(h,w),h=c.hasNext()?c.getNext():null),h?b.j(sw(h)):b.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,c=[a.popLast().toArray(),a.lastSegment(),MT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lp(e).W(IDBKeyRange.bound(c,h,!0)).next(_=>{let w=Hs();for(const b of _){const D=this.Wn(et.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);D.isFoundDocument()&&(G0(t,D)||i.has(D.key))&&(w=w.insert(D.key,D))}return w})}getAllFromCollectionGroup(e,t,r,i){let a=Hs();const c=HP(t,r),h=HP(t,Hi.max());return lp(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(_,w,b)=>{const D=this.Wn(et.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(D.key,D),a.size===i&&b.done()}).next(()=>a)}newChangeBuffer(e){return new _U(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return $P(e).get("remoteDocumentGlobalKey").next(t=>(Ct(!!t),t))}zn(e,t){return $P(e).put("remoteDocumentGlobalKey",t)}Wn(e,t){if(t){const r=function tU(n,e){let t;if(e.document)t=uP(n.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=et.fromSegments(e.noDocument.path),i=sp(e.noDocument.readTime);t=fr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return dt();{const r=et.fromSegments(e.unknownDocument.path),i=sp(e.unknownDocument.version);t=fr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new $n(r[0],r[1]);return Nt.fromTimestamp(i)}(e.readTime)),t}(this.Tt,t);if(!r.isNoDocument()||!r.version.isEqual(Nt.min()))return r}return fr.newInvalidDocument(e)}}function jP(n){return new mU(n)}class _U extends BP{constructor(e,t){super(),this.Xn=e,this.trackRemovals=t,this.ts=new bd(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new qn((a,c)=>Qt(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const h=this.ts.get(a);if(t.push(this.Xn.removeEntry(e,a,h.readTime)),c.isValidDocument()){const _=EP(this.Xn.Tt,c);i=i.add(a.path.popLast());const w=LT(_);r+=w-h.size,t.push(this.Xn.addEntry(e,a,_))}else if(r-=h.size,this.trackRemovals){const _=EP(this.Xn.Tt,c.convertToNoDocument(Nt.min()));t.push(this.Xn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.Xn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Xn.updateMetadata(e,r)),ie.waitFor(t)}getFromCache(e,t){return this.Xn.Hn(e,t).next(r=>(this.ts.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Xn.Yn(e,t).next(({documents:r,Zn:i})=>(i.forEach((a,c)=>{this.ts.set(a,{size:c,readTime:r.get(a).readTime})}),r))}}function $P(n){return Mi(n,"remoteDocumentGlobal")}function lp(n){return Mi(n,"remoteDocumentsV14")}function sw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function HP(n,e){const t=e.documentKey.path.toArray();return[n,MT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function GP(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Qt(t[a],r[a]),i)return i;return i=Qt(t.length,r.length),i||(i=Qt(t[t.length-2],r[r.length-2]),i||Qt(t[t.length-1],r[r.length-1]))}class yU{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class zP{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&W0(r.mutation,i,$s.empty(),$n.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,un()).next(()=>r))}getLocalViewOfDocuments(e,t,r=un()){const i=Nu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let c=q0();return a.forEach((h,_)=>{c=c.insert(h,_.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Nu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,un()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,i){let a=Hs();const c=K0(),h=K0();return t.forEach((_,w)=>{const b=r.get(w.key);i.has(w.key)&&(void 0===b||b.mutation instanceof $c)?a=a.insert(w.key,w):void 0!==b?(c.set(w.key,b.mutation.getFieldMask()),W0(b.mutation,w,b.mutation.getFieldMask(),$n.now())):c.set(w.key,$s.empty())}),this.recalculateAndSaveOverlays(e,a).next(_=>(_.forEach((w,b)=>c.set(w,b)),t.forEach((w,b)=>{var D;return h.set(w,new yU(b,null!==(D=c.get(w))&&void 0!==D?D:null))}),h))}recalculateAndSaveOverlays(e,t){const r=K0();let i=new jr((c,h)=>c-h),a=un();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(_=>{const w=t.get(_);if(null===w)return;let b=r.get(_)||$s.empty();b=h.applyToLocalView(w,b),r.set(_,b);const D=(i.get(h.batchId)||un()).add(_);i=i.insert(h.batchId,D)})}).next(()=>{const c=[],h=i.getReverseIterator();for(;h.hasNext();){const _=h.getNext(),w=_.key,b=_.value,D=QN();b.forEach(x=>{if(!a.has(x)){const F=$N(t.get(x),r.get(x));null!==F&&D.set(x,F),a=a.add(x)}}),c.push(this.documentOverlayCache.saveOverlays(e,w,D))}return ie.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return et.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):YA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ie.resolve(Nu());let h=-1,_=a;return c.next(w=>ie.forEach(w,(b,D)=>(h<D.largestBatchId&&(h=D.largestBatchId),a.get(b)?ie.resolve():this.remoteDocumentCache.getEntry(e,b).next(x=>{_=_.insert(b,x)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,_,w,un())).next(b=>({batchId:h,changes:YN(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new et(t)).next(r=>{let i=q0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=q0();return this.indexManager.getCollectionParents(e,i).next(c=>ie.forEach(c,h=>{const _=(w=t,b=h.child(i),new jc(b,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,b;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(w=>{w.forEach((b,D)=>{a=a.insert(b,D)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((h,_)=>{const w=_.getKey();null===a.get(w)&&(a=a.insert(w,fr.newInvalidDocument(w)))});let c=q0();return a.forEach((h,_)=>{const w=i.get(h);void 0!==w&&W0(w.mutation,_,$s.empty(),$n.now()),G0(t,_)&&(c=c.insert(h,_))}),c})}}class vU{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,t){return ie.resolve(this.es.get(t))}saveBundleMetadata(e,t){var r;return this.es.set(t.id,{id:(r=t).id,version:r.version,createTime:Kr(r.createTime)}),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.ns.get(t))}saveNamedQuery(e,t){return this.ns.set(t.name,{name:(r=t).name,query:uR(r.bundledQuery),readTime:Kr(r.readTime)}),ie.resolve();var r}}class wU{constructor(){this.overlays=new jr(et.comparator),this.ss=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Nu();return ie.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ce(e,t,a)}),ie.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ss.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ss.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const i=Nu(),a=t.length+1,c=new et(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const _=h.getNext().value,w=_.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return ie.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new jr((w,b)=>w-b);const c=this.overlays.getIterator();for(;c.hasNext();){const w=c.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let b=a.get(w.largestBatchId);null===b&&(b=Nu(),a=a.insert(w.largestBatchId,b)),b.set(w.getKey(),w)}}const h=Nu(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,b)=>h.set(w,b)),!(h.size()>=i)););return ie.resolve(h)}ce(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.ss.get(i.largestBatchId).delete(r.key);this.ss.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new aR(t,r));let a=this.ss.get(t);void 0===a&&(a=un(),this.ss.set(t,a)),this.ss.set(t,a.add(r.key))}}class gR{constructor(){this.rs=new qn(Ni.os),this.us=new qn(Ni.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,t){const r=new Ni(e,t);this.rs=this.rs.add(r),this.us=this.us.add(r)}hs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ls(new Ni(e,t))}fs(e,t){e.forEach(r=>this.removeReference(r,t))}ds(e){const t=new et(new In([])),r=new Ni(t,e),i=new Ni(t,e+1),a=[];return this.us.forEachInRange([r,i],c=>{this.ls(c),a.push(c.key)}),a}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const t=new et(new In([])),r=new Ni(t,e),i=new Ni(t,e+1);let a=un();return this.us.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Ni(e,0),r=this.rs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ni{constructor(e,t){this.key=e,this.gs=t}static os(e,t){return et.comparator(e.key,t.key)||Qt(e.gs,t.gs)}static cs(e,t){return Qt(e.gs,t.gs)||et.comparator(e.key,t.key)}}class EU{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ys=1,this.ps=new qn(Ni.os)}checkEmpty(e){return ie.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ys;this.ys++;const c=new sR(a,t,r,i);this.mutationQueue.push(c);for(const h of i)this.ps=this.ps.add(new Ni(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ie.resolve(c)}lookupMutationBatch(e,t){return ie.resolve(this.Is(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ts(t+1),a=i<0?0:i;return ie.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ni(t,0),i=new Ni(t,Number.POSITIVE_INFINITY),a=[];return this.ps.forEachInRange([r,i],c=>{const h=this.Is(c.gs);a.push(h)}),ie.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new qn(Qt);return t.forEach(i=>{const a=new Ni(i,0),c=new Ni(i,Number.POSITIVE_INFINITY);this.ps.forEachInRange([a,c],h=>{r=r.add(h.gs)})}),ie.resolve(this.Es(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;et.isDocumentKey(a)||(a=a.child(""));const c=new Ni(new et(a),0);let h=new qn(Qt);return this.ps.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(h=h.add(_.gs)),!0)},c),ie.resolve(this.Es(h))}Es(e){const t=[];return e.forEach(r=>{const i=this.Is(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ct(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ps;return ie.forEach(t.mutations,i=>{const a=new Ni(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ps=r})}Pn(e){}containsKey(e,t){const r=new Ni(t,0),i=this.ps.firstAfterOrEqual(r);return ie.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ie.resolve()}As(e,t){return this.Ts(e)}Ts(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Is(e){const t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class IU{constructor(e){this.Rs=e,this.docs=new jr(et.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.Rs(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():fr.newInvalidDocument(t))}getEntries(e,t){let r=Hs();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():fr.newInvalidDocument(i))}),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Hs();const c=t.path,h=new et(c.child("")),_=this.docs.getIteratorFrom(h);for(;_.hasNext();){const{key:w,value:{document:b}}=_.getNext();if(!c.isPrefixOf(w.path))break;w.path.length>c.length+1||_T(O0(b),r)<=0||(i.has(b.key)||G0(t,b))&&(a=a.insert(b.key,b.mutableCopy()))}return ie.resolve(a)}getAllFromCollectionGroup(e,t,r,i){dt()}Ps(e,t){return ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new bU(this)}getSize(e){return ie.resolve(this.size)}}class bU extends BP{constructor(e){super(),this.Xn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Xn.addEntry(e,i)):this.Xn.removeEntry(r)}),ie.waitFor(t)}getFromCache(e,t){return this.Xn.getEntry(e,t)}getAllFromCache(e,t){return this.Xn.getEntries(e,t)}}class TU{constructor(e){this.persistence=e,this.vs=new bd(t=>ep(t),$0),this.lastRemoteSnapshotVersion=Nt.min(),this.highestTargetId=0,this.bs=0,this.Vs=new gR,this.targetCount=0,this.Ss=cp.Vn()}forEachTarget(e,t){return this.vs.forEach((r,i)=>t(i)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ie.resolve()}xn(e){this.vs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ss=new cp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.xn(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.xn(t),ie.resolve()}removeTargetData(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.vs.forEach((c,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.vs.delete(c),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ie.waitFor(a).next(()=>i)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.vs.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this.Vs.hs(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this.Vs.fs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),ie.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Vs.ds(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Vs.ws(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this.Vs.containsKey(t))}}class WP{constructor(e,t){this.Ds={},this.overlays={},this.Cs=new js(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new TU(this),this.indexManager=new cU,this.remoteDocumentCache=new IU(r=>this.referenceDelegate.ks(r)),this.Tt=new wP(t),this.$s=new vU(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wU,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ds[e.toKey()];return r||(r=new EU(t,this.referenceDelegate),this.Ds[e.toKey()]=r),r}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$s}runTransaction(e,t,r){je("MemoryPersistence","Starting transaction:",e);const i=new CU(this.Cs.next());return this.referenceDelegate.Ms(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Fs(e,t){return ie.or(Object.values(this.Ds).map(r=>()=>r.containsKey(e,t)))}}class CU extends zm{constructor(e){super(),this.currentSequenceNumber=e}}class VT{constructor(e){this.persistence=e,this.Bs=new gR,this.Ls=null}static qs(e){return new VT(e)}get Us(){if(this.Ls)return this.Ls;throw dt()}addReference(e,t,r){return this.Bs.addReference(r,t),this.Us.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Bs.removeReference(r,t),this.Us.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.Us.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Bs.ds(t.targetId).forEach(i=>this.Us.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Us.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ms(){this.Ls=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.Us,r=>{const i=et.fromPath(r);return this.Ks(e,i).next(a=>{a||t.removeEntry(i,Nt.min())})}).next(()=>(this.Ls=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ks(e,t).next(r=>{r?this.Us.delete(t.toString()):this.Us.add(t.toString())})}ks(e){return 0}Ks(e,t){return ie.or([()=>ie.resolve(this.Bs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Fs(e,t)])}}class DU{constructor(e){this.Tt=e}F(e,t,r,i){const a=new U0("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gP,{unique:!0}),h.createObjectStore("documentMutations"),qP(e),function(h){h.createObjectStore("remoteDocuments")}(e));let c=ie.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),qP(e)),c=c.next(()=>function(h){const _=h.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Nt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(h,_){return _.store("mutations").W().next(w=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gP,{unique:!0});const b=_.store("mutations"),D=w.map(x=>b.put(x));return ie.waitFor(D)})}(e,a))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Gs(a))),r<6&&i>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(a)))),r<7&&i>=7&&(c=c.next(()=>this.js(a))),r<8&&i>=8&&(c=c.next(()=>this.zs(e,a))),r<9&&i>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Ws(a))),r<11&&i>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(h){const _=h.createObjectStore("documentOverlays",{keyPath:Y2});_.createIndex("collectionPathOverlayIndex",Q2,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",X2,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(h){const _=h.createObjectStore("remoteDocumentsV14",{keyPath:V2});_.createIndex("documentKeyIndex",B2),_.createIndex("collectionGroupIndex",j2)}(e)).next(()=>this.Hs(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.Js(e,a))),r<15&&i>=15&&(c=c.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:W2}).createIndex("sequenceNumberIndex",q2,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:K2}).createIndex("documentKeyIndex",Z2,{unique:!1})}(e))),c}Qs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=LT(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Gs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>ie.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(h=>ie.forEach(h,_=>{Ct(_.userId===a.userId);const w=op(this.Tt,_);return OP(e,a.userId,w).next(()=>{})}))}))}js(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((c,h)=>{const _=new In(c),w=[0,vs(_)];a.push(t.get(w).next(b=>b?ie.resolve():t.put({targetId:0,path:vs(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ie.waitFor(a))})}zs(e,t){e.createObjectStore("collectionParents",{keyPath:z2});const r=t.store("collectionParents"),i=new pR,a=c=>{if(i.add(c)){const h=c.lastSegment(),_=c.popLast();return r.put({collectionId:h,parent:vs(_)})}};return t.store("remoteDocuments").X({Z:!0},(c,h)=>{const _=new In(c);return a(_.popLast())}).next(()=>t.store("documentMutations").X({Z:!0},([c,h,_],w)=>{const b=ku(h);return a(b.popLast())}))}Ws(e){const t=e.store("targets");return t.X((r,i)=>{const a=ew(i),c=IP(this.Tt,a);return t.put(c)})}Hs(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((a,c)=>{const h=t.store("remoteDocumentsV14"),_=(w=c,w.document?new et(In.fromString(w.document.name).popFirst(5)):w.noDocument?et.fromSegments(w.noDocument.path):w.unknownDocument?et.fromSegments(w.unknownDocument.path):dt()).path.toArray();var w;const b={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(h.put(b))}).next(()=>ie.waitFor(i))}Js(e,t){const r=t.store("mutations"),i=jP(this.Tt),a=new WP(VT.qs,this.Tt.oe);return r.W().next(c=>{const h=new Map;return c.forEach(_=>{var w;let b=null!==(w=h.get(_.userId))&&void 0!==w?w:un();op(this.Tt,_).keys().forEach(D=>b=b.add(D)),h.set(_.userId,b)}),ie.forEach(h,(_,w)=>{const b=new qr(w),D=NT.ue(this.Tt,b),x=a.getIndexManager(b),F=FT.ue(b,this.Tt,x,a.referenceDelegate);return new zP(i,F,D,x).recalculateAndSaveOverlaysForDocumentKeys(new iR(t,js.at),_).next()})})}}function qP(n){n.createObjectStore("targetDocuments",{keyPath:H2}).createIndex("documentTargetsIndex",G2,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",$2,{unique:!0}),n.createObjectStore("targetGlobal")}const mR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class _R{constructor(e,t,r,i,a,c,h,_,w,b,D=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ys=a,this.window=c,this.document=h,this.Zs=w,this.Xs=b,this.ti=D,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=x=>Promise.resolve(),!_R.C())throw new Le(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gU(this,i),this.oi=t+"main",this.Tt=new wP(_),this.ui=new fo(this.oi,this.ti,new DU(this.Tt)),this.Ns=new dU(this.referenceDelegate,this.Tt),this.remoteDocumentCache=jP(this.Tt),this.$s=new nU,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===b&&Br("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Le(le.FAILED_PRECONDITION,mR);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new js(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){var t=this;return this.ri=function(){var r=(0,me.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.ai())})))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>BT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(t=>{t||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(t=>this.isPrimary&&!t?this.mi(e).next(()=>!1):!!t&&this.gi(e).next(()=>!0))).catch(e=>{if(Vc(e))return je("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return ow(e).get("owner").next(t=>ie.resolve(this.yi(t)))}pi(e){return BT(e).delete(this.clientId)}Ii(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.Ti(e.ii,18e5)){e.ii=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Mi(r,"clientMetadata");return i.W().next(a=>{const c=e.Ei(a,18e5),h=a.filter(_=>-1===c.indexOf(_));return ie.forEach(h,_=>i.delete(_.clientId)).next(()=>h)})}).catch(()=>[]);if(e.ci)for(const r of t)e.ci.removeItem(e.Ai(r.clientId))}})()}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?ie.resolve(!0):ow(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)){if(this.yi(t)&&this.networkEnabled)return!0;if(!this.yi(t)){if(!t.allowTabSynchronization)throw new Le(le.FAILED_PRECONDITION,mR);return!1}}return!(!this.networkEnabled||!this.inForeground)||BT(e).W().next(r=>void 0===this.Ei(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&je("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.xs=!1,e.Pi(),e.si&&(e.si.cancel(),e.si=null),e.vi(),e.bi(),yield e.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new iR(t,js.at);return e.mi(r).next(()=>e.pi(r))}),e.ui.close(),e.Vi()})()}Ei(e,t){return e.filter(r=>this.Ti(r.updateTimeMs,t)&&!this.Ri(r.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>BT(e).W().next(t=>this.Ei(t,18e5).map(r=>r.clientId)))}get started(){return this.xs}getMutationQueue(e,t){return FT.ue(e,this.Tt,t,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new lU(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return NT.ue(this.Tt,e)}getBundleCache(){return this.$s}runTransaction(e,t,r){je("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(c=this.ti)?eU:14===c?vP:13===c?yP:12===c?J2:11===c?_P:void dt();var c;let h;return this.ui.runTransaction(e,i,a,_=>(h=new iR(_,this.Cs?this.Cs.next():js.at),"readwrite-primary"===t?this._i(h).next(w=>!!w||this.wi(h)).next(w=>{if(!w)throw Br(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new Le(le.FAILED_PRECONDITION,L0);return r(h)}).next(w=>this.gi(h).next(()=>w)):this.Di(h).next(()=>r(h)))).then(_=>(h.raiseOnCommittedEvent(),_))}Di(e){return ow(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)&&!this.yi(t)&&!(this.Xs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Le(le.FAILED_PRECONDITION,mR)})}gi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ow(e).put("owner",t)}static C(){return fo.C()}mi(e){const t=ow(e);return t.get("owner").next(r=>this.yi(r)?(je("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ie.resolve())}Ti(e,t){const r=Date.now();return!(e<r-t||e>r&&(Br(`Detected an update time that is in the future: ${e} > ${r}`),1))}hi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=()=>{this.Pi();const t=/(?:Version|Mobile)\/1[456]/;(0,N.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}bi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var t;try{const r=null!==(null===(t=this.ci)||void 0===t?void 0:t.getItem(this.Ai(e)));return je("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Br("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Pi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){Br("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch{}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ow(n){return Mi(n,"owner")}function BT(n){return Mi(n,"clientMetadata")}function yR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class vR{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ci=r,this.xi=i}static Ni(e,t){let r=un(),i=un();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new vR(e,t.fromCache,r,i)}}class KP{constructor(){this.ki=!1}initialize(e,t){this.$i=e,this.indexManager=t,this.ki=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Mi(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Fi(e,t))}Mi(e,t){if(xN(t))return ie.resolve(null);let r=ys(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=TT(t,null,"F"),r=ys(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=un(...a);return this.$i.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,r).next(_=>{const w=this.Bi(t,h);return this.Li(t,w,c,_.readTime)?this.Mi(e,TT(t,null,"F")):this.qi(e,w,t,_)}))})))}Oi(e,t,r,i){return xN(t)||i.isEqual(Nt.min())?this.Fi(e,t):this.$i.getDocuments(e,r).next(a=>{const c=this.Bi(t,a);return this.Li(t,c,r,i)?this.Fi(e,t):(Vm()<=ao.in.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),XA(t)),this.qi(e,c,t,mT(i,-1)))})}Bi(e,t){let r=new qn(PN(e));return t.forEach((i,a)=>{G0(e,a)&&(r=r.add(a))}),r}Li(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Fi(e,t){return Vm()<=ao.in.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",XA(t)),this.$i.getDocumentsMatchingQuery(e,t,Hi.min())}qi(e,t,r,i){return this.$i.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}class SU{constructor(e,t,r,i){this.persistence=e,this.Ui=t,this.Tt=i,this.Ki=new jr(Qt),this.Gi=new bd(a=>ep(a),$0),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.$s=e.getBundleCache(),this.zi(r)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zP(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ki))}}function ZP(n,e,t,r){return new SU(n,e,t,r)}function YP(n,e){return wR.apply(this,arguments)}function wR(){return wR=(0,me.Z)(function*(n,e){const t=rt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.zi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],h=[];let _=un();for(const w of i){c.push(w.batchId);for(const b of w.mutations)_=_.add(b.key)}for(const w of a){h.push(w.batchId);for(const b of w.mutations)_=_.add(b.key)}return t.localDocuments.getDocuments(r,_).next(w=>({Wi:w,removedBatchIds:c,addedBatchIds:h}))})})}),wR.apply(this,arguments)}function QP(n){const e=rt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ns.getLastRemoteSnapshotVersion(t))}function XP(n,e,t){let r=un(),i=un();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=Hs();return t.forEach((h,_)=>{const w=a.get(h);_.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(h)),_.isNoDocument()&&_.version.isEqual(Nt.min())?(e.removeEntry(h,_.readTime),c=c.insert(h,_)):!w.isValidDocument()||_.version.compareTo(w.version)>0||0===_.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(_),c=c.insert(h,_)):je("LocalStore","Ignoring outdated watch update for ",h,". Current version:",w.version," Watch version:",_.version)}),{Hi:c,Ji:i}})}function xU(n,e){const t=rt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function s_(n,e){const t=rt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ns.getTargetData(r,e).next(a=>a?(i=a,ie.resolve(i)):t.Ns.allocateTargetId(r).next(c=>(i=new Cd(e,c,0,r.currentSequenceNumber),t.Ns.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ki.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ki=t.Ki.insert(r.targetId,r),t.Gi.set(e,r.targetId)),r})}function o_(n,e,t){return ER.apply(this,arguments)}function ER(){return ER=(0,me.Z)(function*(n,e,t){const r=rt(n),i=r.Ki.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Vc(c))throw c;je("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ki=r.Ki.remove(e),r.Gi.delete(i.target)}),ER.apply(this,arguments)}function jT(n,e,t){const r=rt(n);let i=Nt.min(),a=un();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,_,w){const b=rt(h),D=b.Gi.get(w);return void 0!==D?ie.resolve(b.Ki.get(D)):b.Ns.getTargetData(_,w)}(r,c,ys(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(c,h.targetId).next(_=>{a=_})}).next(()=>r.Ui.getDocumentsMatchingQuery(c,e,t?i:Nt.min(),t?a:un())).next(h=>(tk(r,NN(e),h),{documents:h,Yi:a})))}function JP(n,e){const t=rt(n),r=rt(t.Ns),i=t.Ki.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.ie(a,e).next(c=>c?c.target:null))}function ek(n,e){const t=rt(n),r=t.Qi.get(e)||Nt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.ji.getAllFromCollectionGroup(i,e,mT(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(tk(t,e,i),i))}function tk(n,e,t){let r=n.Qi.get(e)||Nt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Qi.set(e,r)}function IR(){return IR=(0,me.Z)(function*(n,e,t,r){const i=rt(n);let a=un(),c=Hs();for(const w of t){const b=e.Zi(w.metadata.name);w.document&&(a=a.add(b));const D=e.Xi(w);D.setReadTime(e.tr(w.metadata.readTime)),c=c.insert(b,D)}const h=i.ji.newChangeBuffer({trackRemovals:!0}),_=yield s_(i,(w=r,ys(Ym(In.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>XP(w,h,c).next(b=>(h.apply(w),b)).next(b=>i.Ns.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.Ns.addMatchingKeys(w,a,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,b.Hi,b.Ji)).next(()=>b.Hi)))}),IR.apply(this,arguments)}function NU(n,e){return bR.apply(this,arguments)}function bR(){return bR=(0,me.Z)(function*(n,e,t=un()){const r=yield s_(n,ys(uR(e.bundledQuery))),i=rt(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=Kr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.$s.saveNamedQuery(a,e);const h=r.withResumeToken(A.EMPTY_BYTE_STRING,c);return i.Ki=i.Ki.insert(h.targetId,h),i.Ns.updateTargetData(a,h).next(()=>i.Ns.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Ns.addMatchingKeys(a,t,r.targetId)).next(()=>i.$s.saveNamedQuery(a,e))})}),bR.apply(this,arguments)}function nk(n,e){return`firestore_clients_${n}_${e}`}function rk(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function TR(n,e){return`firestore_targets_${n}_${e}`}class $T{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static er(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new Le(i.error.code,i.error.message))),c?new $T(e,t,i.state,a):(Br("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class aw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static er(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Le(r.error.code,r.error.message))),a?new aw(e,r.state,i):(Br("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class HT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static er(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=AT();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=I(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new HT(e,a):(Br("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class CR{constructor(e,t){this.clientId=e,this.onlineState=t}static er(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new CR(t.clientId,t.onlineState):(Br("SharedClientState",`Failed to parse online state: ${e}`),null)}}class DR{constructor(){this.activeTargetIds=AT()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class SR{constructor(e,t,r,i,a){this.window=e,this.Ys=t,this.persistenceKey=r,this.rr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new jr(Qt),this.started=!1,this.hr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.lr=nk(this.persistenceKey,this.rr),this.dr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.rr,new DR),this._r=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.gr=`firestore_online_state_${this.persistenceKey}`,this.yr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.Si();for(const i of t){if(i===e.rr)continue;const a=e.getItem(nk(e.persistenceKey,i));if(a){const c=HT.er(i,a);c&&(e.ar=e.ar.insert(c.clientId,c))}}e.pr();const r=e.storage.getItem(e.gr);if(r){const i=e.Ir(r);i&&e.Tr(i)}for(const i of e.hr)e.cr(i);e.hr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,t,r){this.Ar(e,t,r),this.Rr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(TR(this.persistenceKey,e));if(r){const i=aw.er(e,r);i&&(t=i.state)}}return this.Pr.sr(e),this.pr(),t}removeLocalQueryTarget(e){this.Pr.ir(e),this.pr()}isLocalQueryTarget(e){return this.Pr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(TR(this.persistenceKey,e))}updateQueryState(e,t,r){this.vr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Rr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return je("SharedClientState","READ",e,t),t}setItem(e,t){je("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){je("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(je("SharedClientState","EVENT",r.key,r.newValue),r.key===this.lr)return void Br("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t._r.test(r.key)){if(null==r.newValue){const i=t.Sr(r.key);return t.Dr(i,null)}{const i=t.Cr(r.key,r.newValue);if(i)return t.Dr(i.clientId,i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(t.mr.test(r.key)){if(null!==r.newValue){const i=t.$r(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.gr){if(null!==r.newValue){const i=t.Ir(r.newValue);if(i)return t.Tr(i)}}else if(r.key===t.dr){const i=function(a){let c=js.at;if(null!=a)try{const h=JSON.parse(a);Ct("number"==typeof h),c=h}catch(h){Br("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(r.newValue);i!==js.at&&t.sequenceNumberHandler(i)}else if(r.key===t.yr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Fr(a)))}}else t.hr.push(r)}))}}get Pr(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.Pr.nr())}Ar(e,t,r){const i=new $T(this.currentUser,e,t,r),a=rk(this.persistenceKey,this.currentUser,e);this.setItem(a,i.nr())}Rr(e){const t=rk(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.gr,JSON.stringify({clientId:this.rr,onlineState:e}))}vr(e,t,r){const i=TR(this.persistenceKey,e),a=new aw(e,t,r);this.setItem(i,a.nr())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.yr,t)}Sr(e){const t=this._r.exec(e);return t?t[1]:null}Cr(e,t){const r=this.Sr(e);return HT.er(r,t)}Nr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return $T.er(new qr(void 0!==r[2]?r[2]:null),i,t)}$r(e,t){const r=this.mr.exec(e),i=Number(r[1]);return aw.er(i,t)}Ir(e){return CR.er(e)}Or(e){return JSON.parse(e)}kr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Br(e.batchId,e.state,e.error);je("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Er(this.ar),a=this.Er(r),c=[],h=[];return a.forEach(_=>{i.has(_)||c.push(_)}),i.forEach(_=>{a.has(_)||h.push(_)}),this.syncEngine.qr(c,h).then(()=>{this.ar=r})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let t=AT();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class ik{constructor(){this.Ur=new DR,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,t,r){this.Kr[e]=t}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new DR,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class PU{Gr(e){}shutdown(){}}class sk{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let GT=null;function AR(){return null===GT?GT=268435456+Math.round(2147483648*Math.random()):GT++,"0x"+GT.toString(16)}const kU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OU{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}const ss="WebChannelConnection";class LU extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.co=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,t,r,i,a){const c=AR(),h=this.fo(e,t);je("RestConnection",`Sending RPC '${e}' ${c}:`,h,r);const _={};return this._o(_,i,a),this.wo(e,h,_,r).then(w=>(je("RestConnection",`Received RPC '${e}' ${c}: `,w),w),w=>{throw wd("RestConnection",`RPC '${e}' ${c} failed with error: `,w,"url: ",h,"request:",r),w})}mo(e,t,r,i,a,c){return this.lo(e,t,r,i,a)}_o(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ka,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}fo(e,t){return`${this.co}/v1/${t}:${kU[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,t,r,i){const a=AR();return new Promise((c,h)=>{const _=new hT;_.setWithCredentials(!0),_.listenOnce(lT.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case x0.NO_ERROR:const b=_.getResponseJson();je(ss,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(b)),c(b);break;case x0.TIMEOUT:je(ss,`RPC '${e}' ${a} timed out`),h(new Le(le.DEADLINE_EXCEEDED,"Request time out"));break;case x0.HTTP_ERROR:const D=_.getStatus();if(je(ss,`RPC '${e}' ${a} failed with status:`,D,"response text:",_.getResponseText()),D>0){let x=_.getResponseJson();Array.isArray(x)&&(x=x[0]);const F=x?.error;if(F&&F.status&&F.message){const $=function(ee){const se=ee.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(se)>=0?se:le.UNKNOWN}(F.status);h(new Le($,F.message))}else h(new Le(le.UNKNOWN,"Server responded with status "+_.getStatus()))}else h(new Le(le.UNAVAILABLE,"Connection failed."));break;default:dt()}}finally{je(ss,`RPC '${e}' ${a} completed.`)}});const w=JSON.stringify(i);je(ss,`RPC '${e}' ${a} sending request:`,i),_.send(t,"POST",w,r,15)})}yo(e,t,r){const i=AR(),a=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=tN(),h=cT(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(_.xmlHttpFactory=new dT({})),this._o(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const w=a.join("");je(ss,`Creating RPC '${e}' stream ${i}: ${w}`,_);const b=c.createWebChannel(w,_);let D=!1,x=!1;const F=new OU({Yr:ee=>{x?je(ss,`Not sending because RPC '${e}' stream ${i} is closed:`,ee):(D||(je(ss,`Opening RPC '${e}' stream ${i} transport.`),b.open(),D=!0),je(ss,`RPC '${e}' stream ${i} sending:`,ee),b.send(ee))},Zr:()=>b.close()}),$=(ee,se,ft)=>{ee.listen(se,yt=>{try{ft(yt)}catch(lt){setTimeout(()=>{throw lt},0)}})};return $(b,Zf.EventType.OPEN,()=>{x||je(ss,`RPC '${e}' stream ${i} transport opened.`)}),$(b,Zf.EventType.CLOSE,()=>{x||(x=!0,je(ss,`RPC '${e}' stream ${i} transport closed`),F.oo())}),$(b,Zf.EventType.ERROR,ee=>{x||(x=!0,wd(ss,`RPC '${e}' stream ${i} transport errored:`,ee),F.oo(new Le(le.UNAVAILABLE,"The operation could not be completed")))}),$(b,Zf.EventType.MESSAGE,ee=>{var se;if(!x){const ft=ee.data[0];Ct(!!ft);const lt=ft.error||(null===(se=ft[0])||void 0===se?void 0:se.error);if(lt){je(ss,`RPC '${e}' stream ${i} received error:`,lt);const wt=lt.status;let Bt=function($r){const qs=si[$r];if(void 0!==qs)return KN(qs)}(wt),Yt=lt.message;void 0===Bt&&(Bt=le.INTERNAL,Yt="Unknown error status: "+wt+" with message "+lt.message),x=!0,F.oo(new Le(Bt,Yt)),b.close()}else je(ss,`RPC '${e}' stream ${i} received:`,ft),F.uo(ft)}}),$(h,nN.STAT_EVENT,ee=>{ee.stat===Um.PROXY?je(ss,`RPC '${e}' stream ${i} detected buffering proxy`):ee.stat===Um.NOPROXY&&je(ss,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{F.ro()},0),F}}function ok(){return typeof window<"u"?window:null}function zT(){return typeof document<"u"?document:null}function uw(n){return new S2(n,!0)}class RR{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Ys=e,this.timerId=t,this.po=r,this.Io=i,this.To=a,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}Po(){this.Eo=this.To}vo(e){this.cancel();const t=Math.floor(this.Eo+this.bo()),r=Math.max(0,Date.now()-this.Ro),i=Math.max(0,t-r);i>0&&je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Eo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,i,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}bo(){return(Math.random()-.5)*this.Eo}}class ak{constructor(e,t,r,i,a,c,h,_){this.Ys=e,this.So=r,this.Do=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=_,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new RR(e,t)}$o(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,me.Z)(function*(){e.$o()&&(yield e.close(0))})()}Fo(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}Lo(){var e=this;return(0,me.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.Uo(),r.Ko(),r.ko.cancel(),r.Co++,4!==e?r.ko.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(Br(t.toString()),Br("Using maximum backoff delay to prevent overloading the backend."),r.ko.Po()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Go(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.no(t)})()}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),t=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Co===t&&this.jo(r,i)},r=>{e(()=>{const i=new Le(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.zo(i)})})}jo(e,t){const r=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(i=>{r(()=>this.zo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.ko.vo((0,me.Z)(function*(){e.state=0,e.start()}))}zo(e){return je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return t=>{this.Ys.enqueueAndForget(()=>this.Co===e?t():(je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FU extends ak{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.Tt=a}Wo(e,t){return this.connection.yo("Listen",e,t)}onMessage(e){this.ko.reset();const t=function x2(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:dt(),i=e.targetChange.targetIds||[],a=function(_,w){return _.yt?(Ct(void 0===w||"string"==typeof w),A.fromBase64String(w||"")):(Ct(void 0===w||w instanceof Uint8Array),A.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(_){const w=void 0===_.code?le.UNKNOWN:KN(_.code);return new Le(w,_.message||"")}(c);t=new JN(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Pu(n,r.document.name),a=Kr(r.document.updateTime),c=r.document.createTime?Kr(r.document.createTime):Nt.min(),h=new xi({mapValue:{fields:r.document.fields}}),_=fr.newFoundDocument(i,a,c,h);t=new RT(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,i=Pu(n,r.document),a=r.readTime?Kr(r.readTime):Nt.min(),c=fr.newNoDocument(i,a);t=new RT([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Pu(n,r.document);t=new RT([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return dt();{const r=e.filter,a=new y2(r.count||0);t=new XN(r.targetId,a)}}var _;return t}(this.Tt,e),r=function(i){if(!("targetChange"in i))return Nt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Nt.min():a.readTime?Kr(a.readTime):Nt.min()}(e);return this.listener.Ho(t,r)}Jo(e){const t={};t.database=X0(this.Tt),t.addTarget=function(i,a){let c;const h=a.target;return c=ET(h)?{documents:cP(i,h)}:{query:rR(i,h)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?c.resumeToken=rP(i,a.resumeToken):a.snapshotVersion.compareTo(Nt.min())>0&&(c.readTime=t_(i,a.snapshotVersion.toTimestamp())),c}(this.Tt,e);const r=function N2(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return dt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.qo(t)}Yo(e){const t={};t.database=X0(this.Tt),t.removeTarget=e,this.qo(t)}}class UU extends ak{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.Tt=a,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,t){return this.connection.yo("Write",e,t)}onMessage(e){if(Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const t=function M2(n,e){return n&&n.length>0?(Ct(void 0!==e),n.map(t=>function(r,i){let a=Kr(r.updateTime?r.updateTime:i);return a.isEqual(Nt.min())&&(a=Kr(i)),new g2(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Kr(e.commitTime);return this.listener.eu(r,t)}return Ct(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=X0(this.Tt),this.qo(e)}tu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>J0(this.Tt,r))};this.qo(t)}}class VU extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.Tt=i,this.iu=!1}ru(){if(this.iu)throw new Le(le.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,t,r){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.lo(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Le(le.UNKNOWN,i.toString())})}mo(e,t,r,i){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.mo(e,t,r,a,c,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Le(le.UNKNOWN,a.toString())})}terminate(){this.iu=!0}}class jU{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(Br(t),this.cu=!1):je("OnlineStateTracker",t)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}class $U{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=a,this.yu.Gr(h=>{r.enqueueAndForget((0,me.Z)(function*(){var _;Hc(c)&&(je("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,me.Z)(function*(w){const b=rt(w);b.mu.add(4),yield a_(b),b.pu.set("Unknown"),b.mu.delete(4),yield cw(b)}),function(w){return _.apply(this,arguments)})(c))}))}),this.pu=new jU(r,i)}}function cw(n){return MR.apply(this,arguments)}function MR(){return MR=(0,me.Z)(function*(n){if(Hc(n))for(const e of n.gu)yield e(!0)}),MR.apply(this,arguments)}function a_(n){return NR.apply(this,arguments)}function NR(){return NR=(0,me.Z)(function*(n){for(const e of n.gu)yield e(!1)}),NR.apply(this,arguments)}function WT(n,e){const t=rt(n);t.wu.has(e.targetId)||(t.wu.set(e.targetId,e),OR(t)?kR(t):c_(t).Mo()&&PR(t,e))}function lw(n,e){const t=rt(n),r=c_(t);t.wu.delete(e),r.Mo()&&uk(t,e),0===t.wu.size&&(r.Mo()?r.Bo():Hc(t)&&t.pu.set("Unknown"))}function PR(n,e){n.Iu.Ot(e.targetId),c_(n).Jo(e)}function uk(n,e){n.Iu.Ot(e),c_(n).Yo(e)}function kR(n){n.Iu=new b2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>n.wu.get(e)||null}),c_(n).start(),n.pu.au()}function OR(n){return Hc(n)&&!c_(n).$o()&&n.wu.size>0}function Hc(n){return 0===rt(n).mu.size}function ck(n){n.Iu=void 0}function HU(n){return LR.apply(this,arguments)}function LR(){return LR=(0,me.Z)(function*(n){n.wu.forEach((e,t)=>{PR(n,e)})}),LR.apply(this,arguments)}function GU(n,e){return FR.apply(this,arguments)}function FR(){return FR=(0,me.Z)(function*(n,e){ck(n),OR(n)?(n.pu.fu(e),kR(n)):n.pu.set("Unknown")}),FR.apply(this,arguments)}function zU(n,e,t){return UR.apply(this,arguments)}function UR(){return UR=(0,me.Z)(function*(n,e,t){if(n.pu.set("Online"),e instanceof JN&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(i,a){const c=a.cause;for(const h of a.targetIds)i.wu.has(h)&&(yield i.remoteSyncer.rejectListen(h,c),i.wu.delete(h),i.Iu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield qT(n,r)}else if(e instanceof RT?n.Iu.Qt(e):e instanceof XN?n.Iu.Zt(e):n.Iu.Wt(e),!t.isEqual(Nt.min()))try{const r=yield QP(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.Iu.ee(a);return c.targetChanges.forEach((h,_)=>{if(h.resumeToken.approximateByteSize()>0){const w=i.wu.get(_);w&&i.wu.set(_,w.withResumeToken(h.resumeToken,a))}}),c.targetMismatches.forEach(h=>{const _=i.wu.get(h);if(!_)return;i.wu.set(h,_.withResumeToken(A.EMPTY_BYTE_STRING,_.snapshotVersion)),uk(i,h);const w=new Cd(_.target,h,1,_.sequenceNumber);PR(i,w)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){je("RemoteStore","Failed to raise snapshot:",r),yield qT(n,r)}var r}),UR.apply(this,arguments)}function qT(n,e,t){return VR.apply(this,arguments)}function VR(){return VR=(0,me.Z)(function*(n,e,t){if(!Vc(e))throw e;n.mu.add(1),yield a_(n),n.pu.set("Offline"),t||(t=()=>QP(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){je("RemoteStore","Retrying IndexedDB access"),yield t(),n.mu.delete(1),yield cw(n)}))}),VR.apply(this,arguments)}function lk(n,e){return e().catch(t=>qT(n,t,e))}function u_(n){return BR.apply(this,arguments)}function BR(){return BR=(0,me.Z)(function*(n){const e=rt(n),t=Rd(e);let r=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;WU(e);)try{const i=yield xU(e.localStore,r);if(null===i){0===e._u.length&&t.Bo();break}r=i.batchId,qU(e,i)}catch(i){yield qT(e,i)}dk(e)&&hk(e)}),BR.apply(this,arguments)}function WU(n){return Hc(n)&&n._u.length<10}function qU(n,e){n._u.push(e);const t=Rd(n);t.Mo()&&t.Xo&&t.tu(e.mutations)}function dk(n){return Hc(n)&&!Rd(n).$o()&&n._u.length>0}function hk(n){Rd(n).start()}function KU(n){return jR.apply(this,arguments)}function jR(){return jR=(0,me.Z)(function*(n){Rd(n).su()}),jR.apply(this,arguments)}function ZU(n){return $R.apply(this,arguments)}function $R(){return $R=(0,me.Z)(function*(n){const e=Rd(n);for(const t of n._u)e.tu(t.mutations)}),$R.apply(this,arguments)}function YU(n,e,t){return HR.apply(this,arguments)}function HR(){return HR=(0,me.Z)(function*(n,e,t){const r=n._u.shift(),i=oR.from(r,e,t);yield lk(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield u_(n)}),HR.apply(this,arguments)}function QU(n,e){return GR.apply(this,arguments)}function GR(){return GR=(0,me.Z)(function*(n,e){var t;e&&Rd(n).Xo&&(yield(t=(0,me.Z)(function*(r,i){if(qN(a=i.code)&&a!==le.ABORTED){const c=r._u.shift();Rd(r).Fo(),yield lk(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield u_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),dk(n)&&hk(n)}),GR.apply(this,arguments)}function fk(n,e){return zR.apply(this,arguments)}function zR(){return zR=(0,me.Z)(function*(n,e){const t=rt(n);t.asyncQueue.verifyOperationInProgress(),je("RemoteStore","RemoteStore received new credentials");const r=Hc(t);t.mu.add(3),yield a_(t),r&&t.pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.mu.delete(3),yield cw(t)}),zR.apply(this,arguments)}function WR(n,e){return qR.apply(this,arguments)}function qR(){return qR=(0,me.Z)(function*(n,e){const t=rt(n);e?(t.mu.delete(2),yield cw(t)):e||(t.mu.add(2),yield a_(t),t.pu.set("Unknown"))}),qR.apply(this,arguments)}function c_(n){return n.Tu||(n.Tu=function(e,t,r){const i=rt(e);return i.ru(),new FU(t,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(n.datastore,n.asyncQueue,{Xr:HU.bind(null,n),no:GU.bind(null,n),Ho:zU.bind(null,n)}),n.gu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Tu.Fo(),OR(n)?kR(n):n.pu.set("Unknown")):(yield n.Tu.stop(),ck(n))});return function(t){return e.apply(this,arguments)}}())),n.Tu}function Rd(n){return n.Eu||(n.Eu=function(e,t,r){const i=rt(e);return i.ru(),new UU(t,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(n.datastore,n.asyncQueue,{Xr:KU.bind(null,n),no:QU.bind(null,n),nu:ZU.bind(null,n),eu:YU.bind(null,n)}),n.gu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Eu.Fo(),yield u_(n)):(yield n.Eu.stop(),n._u.length>0&&(je("RemoteStore",`Stopping write stream with ${n._u.length} pending writes`),n._u=[]))});return function(t){return e.apply(this,arguments)}}())),n.Eu}class KR{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,h=new KR(e,t,c,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Le(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function l_(n,e){if(Br("AsyncQueue",`${e}: ${n}`),Vc(n))return new Le(le.UNAVAILABLE,`${e}: ${n}`);throw n}class d_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||et.comparator(t.key,r.key):(t,r)=>et.comparator(t.key,r.key),this.keyedMap=q0(),this.sortedSet=new jr(this.comparator)}static emptySet(e){return new d_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof d_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new d_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class pk{constructor(){this.Au=new jr(et.comparator)}track(e){const t=e.doc.key,r=this.Au.get(t);r?0!==e.type&&3===r.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==r.type?this.Au=this.Au.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Au=this.Au.remove(t):1===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):dt():this.Au=this.Au.insert(t,e)}Ru(){const e=[];return this.Au.inorderTraversal((t,r)=>{e.push(r)}),e}}class h_{constructor(e,t,r,i,a,c,h,_,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=_,this.hasCachedResults=w}static fromInitialDocuments(e,t,r,i,a){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new h_(e,t,d_.emptySet(t),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&H0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class XU{constructor(){this.Pu=void 0,this.listeners=[]}}class JU{constructor(){this.queries=new bd(e=>MN(e),H0),this.onlineState="Unknown",this.vu=new Set}}function ZR(n,e){return YR.apply(this,arguments)}function YR(){return YR=(0,me.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new XU),i)try{a.Pu=yield t.onListen(r)}catch(c){const h=l_(c,`Initialization of query '${XA(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Pu&&e.Vu(a.Pu)&&JR(t)}),YR.apply(this,arguments)}function QR(n,e){return XR.apply(this,arguments)}function XR(){return XR=(0,me.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),XR.apply(this,arguments)}function eV(n,e){const t=rt(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const h of c.listeners)h.Vu(i)&&(r=!0);c.Pu=i}}r&&JR(t)}function tV(n,e,t){const r=rt(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function JR(n){n.vu.forEach(e=>{e.next()})}class ex{constructor(e,t,r){this.query=e,this.Su=t,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new h_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Du?this.xu(e)&&(this.Su.next(e),t=!0):this.Nu(e,this.onlineState)&&(this.ku(e),t=!0),this.Cu=e,t}onError(e){this.Su.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}Nu(e,t){return!e.fromCache||(!this.options.$u||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}xu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ku(e){e=h_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}class nV{constructor(e,t){this.Mu=e,this.byteLength=t}Ou(){return"metadata"in this.Mu}}class gk{constructor(e){this.Tt=e}Zi(e){return Pu(this.Tt,e)}Xi(e){return e.metadata.exists?uP(this.Tt,e.document,!1):fr.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return Kr(e)}}class rV{constructor(e,t,r){this.Fu=e,this.localStore=t,this.Tt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=mk(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++t;const r=In.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Lu(e){const t=new Map,r=new gk(this.Tt);for(const i of e)if(i.metadata.queries){const a=r.Zi(i.metadata.name);for(const c of i.metadata.queries){const h=(t.get(c)||un()).add(a);t.set(c,h)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function MU(n,e,t,r){return IR.apply(this,arguments)}(e.localStore,new gk(e.Tt),e.documents,e.Fu.id),r=e.Lu(e.documents);for(const i of e.queries)yield NU(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,qu:e.collectionGroups,Uu:t}})()}}function mk(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class _k{constructor(e){this.key=e}}class yk{constructor(e){this.key=e}}class vk{constructor(e,t){this.query=e,this.Ku=t,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=un(),this.mutatedKeys=un(),this.ju=PN(e),this.zu=new d_(this.ju)}get Wu(){return this.Ku}Hu(e,t){const r=t?t.Ju:new pk,i=t?t.zu:this.zu;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,D)=>{const x=i.get(b),F=G0(this.query,D)?D:null,$=!!x&&this.mutatedKeys.has(x.key),ee=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let se=!1;x&&F?x.data.isEqual(F.data)?$!==ee&&(r.track({type:3,doc:F}),se=!0):this.Yu(x,F)||(r.track({type:2,doc:F}),se=!0,(_&&this.ju(F,_)>0||w&&this.ju(F,w)<0)&&(h=!0)):!x&&F?(r.track({type:0,doc:F}),se=!0):x&&!F&&(r.track({type:1,doc:x}),se=!0,(_||w)&&(h=!0)),se&&(F?(c=c.add(F),a=ee?a.add(b):a.delete(b)):(c=c.delete(b),a=a.delete(b)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const b="F"===this.query.limitType?c.last():c.first();c=c.delete(b.key),a=a.delete(b.key),r.track({type:1,doc:b})}return{zu:c,Ju:r,Li:h,mutatedKeys:a}}Yu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const a=e.Ju.Ru();a.sort((w,b)=>function(D,x){const F=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt()}};return F(D)-F(x)}(w.type,b.type)||this.ju(w.doc,b.doc)),this.Zu(r);const c=t?this.Xu():[],h=0===this.Qu.size&&this.current?1:0,_=h!==this.Gu;return this.Gu=h,0!==a.length||_?{snapshot:new h_(this.query,e.zu,i,a,e.mutatedKeys,0===h,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),tc:c}:{tc:c}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new pk,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(t=>this.Ku=this.Ku.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ku=this.Ku.delete(t)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=un(),this.zu.forEach(r=>{this.ec(r.key)&&(this.Qu=this.Qu.add(r.key))});const t=[];return e.forEach(r=>{this.Qu.has(r)||t.push(new yk(r))}),this.Qu.forEach(r=>{e.has(r)||t.push(new _k(r))}),t}nc(e){this.Ku=e.Yi,this.Qu=un();const t=this.Hu(e.documents);return this.applyChanges(t,!0)}sc(){return h_.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class iV{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class sV{constructor(e){this.key=e,this.ic=!1}}class oV{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.rc={},this.oc=new bd(h=>MN(h),H0),this.uc=new Map,this.cc=new Set,this.ac=new jr(et.comparator),this.hc=new Map,this.lc=new gR,this.fc={},this.dc=new Map,this._c=cp.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}function aV(n,e){return tx.apply(this,arguments)}function tx(){return tx=(0,me.Z)(function*(n,e){const t=Tx(n);let r,i;const a=t.oc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.sc();else{const c=yield s_(t.localStore,ys(e));t.isPrimaryClient&&WT(t.remoteStore,c);const h=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield nx(t,e,r,"current"===h,c.resumeToken)}return i}),tx.apply(this,arguments)}function nx(n,e,t,r,i){return rx.apply(this,arguments)}function rx(){return rx=(0,me.Z)(function*(n,e,t,r,i){n.mc=(D,x,F)=>{return($=(0,me.Z)(function*(ee,se,ft,yt){let lt=se.view.Hu(ft);lt.Li&&(lt=yield jT(ee.localStore,se.query,!1).then(({documents:Yt})=>se.view.Hu(Yt,lt)));const wt=yt&&yt.targetChanges.get(se.targetId),Bt=se.view.applyChanges(lt,ee.isPrimaryClient,wt);return fx(ee,se.targetId,Bt.tc),Bt.snapshot}),function(ee,se,ft,yt){return $.apply(this,arguments)})(n,D,x,F);var $};const a=yield jT(n.localStore,e,!0),c=new vk(e,a.Yi),h=c.Hu(a.documents),_=Y0.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),w=c.applyChanges(h,n.isPrimaryClient,_);fx(n,t,w.tc);const b=new iV(e,t,c);return n.oc.set(e,b),n.uc.has(t)?n.uc.get(t).push(e):n.uc.set(t,[e]),w.snapshot}),rx.apply(this,arguments)}function uV(n,e){return ix.apply(this,arguments)}function ix(){return ix=(0,me.Z)(function*(n,e){const t=rt(n),r=t.oc.get(e),i=t.uc.get(r.targetId);if(i.length>1)return t.uc.set(r.targetId,i.filter(a=>!H0(a,e))),void t.oc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield o_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),lw(t.remoteStore,r.targetId),f_(t,r.targetId)}).catch(Mu))):(f_(t,r.targetId),yield o_(t.localStore,r.targetId,!0))}),ix.apply(this,arguments)}function sx(){return sx=(0,me.Z)(function*(n,e,t){const r=Cx(n);try{const i=yield function(a,c){const h=rt(a),_=$n.now(),w=c.reduce((x,F)=>x.add(F.key),un());let b,D;return h.persistence.runTransaction("Locally write mutations","readwrite",x=>{let F=Hs(),$=un();return h.ji.getEntries(x,w).next(ee=>{F=ee,F.forEach((se,ft)=>{ft.isValidDocument()||($=$.add(se))})}).next(()=>h.localDocuments.getOverlayedDocuments(x,F)).next(ee=>{b=ee;const se=[];for(const ft of c){const yt=_2(ft,b.get(ft.key).overlayedDocument);null!=yt&&se.push(new $c(ft.key,yt,DN(yt.value.mapValue),vr.exists(!0)))}return h.mutationQueue.addMutationBatch(x,_,se,c)}).next(ee=>{D=ee;const se=ee.applyToLocalDocumentSet(b,$);return h.documentOverlayCache.saveOverlays(x,ee.batchId,se)})}).then(()=>({batchId:D.batchId,changes:YN(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,h){let _=a.fc[a.currentUser.toKey()];_||(_=new jr(Qt)),_=_.insert(c,h),a.fc[a.currentUser.toKey()]=_}(r,i.batchId,t),yield Gc(r,i.changes),yield u_(r.remoteStore)}catch(i){const a=l_(i,"Failed to persist write");t.reject(a)}}),sx.apply(this,arguments)}function wk(n,e){return ox.apply(this,arguments)}function ox(){return ox=(0,me.Z)(function*(n,e){const t=rt(n);try{const r=yield function RU(n,e){const t=rt(n),r=e.snapshotVersion;let i=t.Ki;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.ji.newChangeBuffer({trackRemovals:!0});i=t.Ki;const h=[];e.targetChanges.forEach((b,D)=>{const x=i.get(D);if(!x)return;h.push(t.Ns.removeMatchingKeys(a,b.removedDocuments,D).next(()=>t.Ns.addMatchingKeys(a,b.addedDocuments,D)));let F=x.withSequenceNumber(a.currentSequenceNumber);var $,ee,se;e.targetMismatches.has(D)?F=F.withResumeToken(A.EMPTY_BYTE_STRING,Nt.min()).withLastLimboFreeSnapshotVersion(Nt.min()):b.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(b.resumeToken,r)),i=i.insert(D,F),ee=F,se=b,(0===($=x).resumeToken.approximateByteSize()||ee.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=3e8||se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0)&&h.push(t.Ns.updateTargetData(a,F))});let _=Hs(),w=un();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,b))}),h.push(XP(a,c,e.documentUpdates).next(b=>{_=b.Hi,w=b.Ji})),!r.isEqual(Nt.min())){const b=t.Ns.getLastRemoteSnapshotVersion(a).next(D=>t.Ns.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(b)}return ie.waitFor(h).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,_,w)).next(()=>_)}).then(a=>(t.Ki=i,a))}(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.hc.get(a);c&&(Ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.ic=!0:i.modifiedDocuments.size>0?Ct(c.ic):i.removedDocuments.size>0&&(Ct(c.ic),c.ic=!1))}),yield Gc(t,r,e)}catch(r){yield Mu(r)}}),ox.apply(this,arguments)}function Ek(n,e,t){const r=rt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.oc.forEach((a,c)=>{const h=c.view.bu(e);h.snapshot&&i.push(h.snapshot)}),function(a,c){const h=rt(a);h.onlineState=c;let _=!1;h.queries.forEach((w,b)=>{for(const D of b.listeners)D.bu(c)&&(_=!0)}),_&&JR(h)}(r.eventManager,e),i.length&&r.rc.Ho(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function lV(n,e,t){return ax.apply(this,arguments)}function ax(){return ax=(0,me.Z)(function*(n,e,t){const r=rt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.hc.get(e),a=i&&i.key;if(a){let c=new jr(et.comparator);c=c.insert(a,fr.newNoDocument(a,Nt.min()));const h=un().add(a),_=new Z0(Nt.min(),new Map,new qn(Qt),c,h);yield wk(r,_),r.ac=r.ac.remove(a),r.hc.delete(e),px(r)}else yield o_(r.localStore,e,!1).then(()=>f_(r,e,t)).catch(Mu)}),ax.apply(this,arguments)}function dV(n,e){return ux.apply(this,arguments)}function ux(){return ux=(0,me.Z)(function*(n,e){const t=rt(n),r=e.batch.batchId;try{const i=yield function AU(n,e){const t=rt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.ji.newChangeBuffer({trackRemovals:!0});return function(c,h,_,w){const b=_.batch,D=b.keys();let x=ie.resolve();return D.forEach(F=>{x=x.next(()=>w.getEntry(h,F)).next($=>{const ee=_.docVersions.get(F);Ct(null!==ee),$.version.compareTo(ee)<0&&(b.applyToRemoteDocument($,_),$.isValidDocument()&&($.setReadTime(_.commitVersion),w.addEntry($)))})}),x.next(()=>c.mutationQueue.removeMutationBatch(h,b))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=un();for(let _=0;_<c.mutationResults.length;++_)c.mutationResults[_].transformResults.length>0&&(h=h.add(c.batch.mutations[_].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);hx(t,r,null),dx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Gc(t,i)}catch(i){yield Mu(i)}}),ux.apply(this,arguments)}function hV(n,e,t){return cx.apply(this,arguments)}function cx(){return cx=(0,me.Z)(function*(n,e,t){const r=rt(n);try{const i=yield function(a,c){const h=rt(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return h.mutationQueue.lookupMutationBatch(_,c).next(b=>(Ct(null!==b),w=b.keys(),h.mutationQueue.removeMutationBatch(_,b))).next(()=>h.mutationQueue.performConsistencyCheck(_)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(_,w,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w)).next(()=>h.localDocuments.getDocuments(_,w))})}(r.localStore,e);hx(r,e,t),dx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Gc(r,i)}catch(i){yield Mu(i)}}),cx.apply(this,arguments)}function lx(){return lx=(0,me.Z)(function*(n,e){const t=rt(n);Hc(t.remoteStore)||je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=rt(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.dc.get(r)||[];i.push(e),t.dc.set(r,i)}catch(r){const i=l_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),lx.apply(this,arguments)}function dx(n,e){(n.dc.get(e)||[]).forEach(t=>{t.resolve()}),n.dc.delete(e)}function hx(n,e,t){const r=rt(n);let i=r.fc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.fc[r.currentUser.toKey()]=i}}function f_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.uc.get(e))n.oc.delete(r),t&&n.rc.gc(r,t);n.uc.delete(e),n.isPrimaryClient&&n.lc.ds(e).forEach(r=>{n.lc.containsKey(r)||Ik(n,r)})}function Ik(n,e){n.cc.delete(e.path.canonicalString());const t=n.ac.get(e);null!==t&&(lw(n.remoteStore,t),n.ac=n.ac.remove(e),n.hc.delete(t),px(n))}function fx(n,e,t){for(const r of t)r instanceof _k?(n.lc.addReference(r.key,e),pV(n,r)):r instanceof yk?(je("SyncEngine","Document no longer in limbo: "+r.key),n.lc.removeReference(r.key,e),n.lc.containsKey(r.key)||Ik(n,r.key)):dt()}function pV(n,e){const t=e.key,r=t.path.canonicalString();n.ac.get(t)||n.cc.has(r)||(je("SyncEngine","New document in limbo: "+t),n.cc.add(r),px(n))}function px(n){for(;n.cc.size>0&&n.ac.size<n.maxConcurrentLimboResolutions;){const e=n.cc.values().next().value;n.cc.delete(e);const t=new et(In.fromString(e)),r=n._c.next();n.hc.set(r,new sV(t)),n.ac=n.ac.insert(t,r),WT(n.remoteStore,new Cd(ys(Ym(t.path)),r,2,js.at))}}function Gc(n,e,t){return gx.apply(this,arguments)}function gx(){return gx=(0,me.Z)(function*(n,e,t){const r=rt(n),i=[],a=[],c=[];var h;r.oc.isEmpty()||(r.oc.forEach((h,_)=>{c.push(r.mc(_,e,t).then(w=>{if((w||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w?.fromCache?"not-current":"current"),w){i.push(w);const b=vR.Ni(_.targetId,w);a.push(b)}}))}),yield Promise.all(c),r.rc.Ho(i),yield(h=(0,me.Z)(function*(_,w){const b=rt(_);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>ie.forEach(w,x=>ie.forEach(x.Ci,F=>b.persistence.referenceDelegate.addReference(D,x.targetId,F)).next(()=>ie.forEach(x.xi,F=>b.persistence.referenceDelegate.removeReference(D,x.targetId,F)))))}catch(D){if(!Vc(D))throw D;je("LocalStore","Failed to update sequence numbers: "+D)}for(const D of w){const x=D.targetId;if(!D.fromCache){const F=b.Ki.get(x),ee=F.withLastLimboFreeSnapshotVersion(F.snapshotVersion);b.Ki=b.Ki.insert(x,ee)}}}),function(_,w){return h.apply(this,arguments)})(r.localStore,a))}),gx.apply(this,arguments)}function gV(n,e){return mx.apply(this,arguments)}function mx(){return mx=(0,me.Z)(function*(n,e){const t=rt(n);if(!t.currentUser.isEqual(e)){je("SyncEngine","User change. New user:",e.toKey());const r=yield YP(t.localStore,e);t.currentUser=e,(i=t).dc.forEach(c=>{c.forEach(h=>{h.reject(new Le(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.dc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Gc(t,r.Wi)}var i}),mx.apply(this,arguments)}function mV(n,e){const t=rt(n),r=t.hc.get(e);if(r&&r.ic)return un().add(r.key);{let i=un();const a=t.uc.get(e);if(!a)return i;for(const c of a){const h=t.oc.get(c);i=i.unionWith(h.view.Wu)}return i}}function _V(n,e){return _x.apply(this,arguments)}function _x(){return _x=(0,me.Z)(function*(n,e){const t=rt(n),r=yield jT(t.localStore,e.query,!0),i=e.view.nc(r);return t.isPrimaryClient&&fx(t,e.targetId,i.tc),i}),_x.apply(this,arguments)}function yV(n,e){return yx.apply(this,arguments)}function yx(){return yx=(0,me.Z)(function*(n,e){const t=rt(n);return ek(t.localStore,e).then(r=>Gc(t,r))}),yx.apply(this,arguments)}function vV(n,e,t,r){return vx.apply(this,arguments)}function vx(){return vx=(0,me.Z)(function*(n,e,t,r){const i=rt(n),a=yield function(c,h){const _=rt(c),w=rt(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",b=>w.An(b,h).next(D=>D?_.localDocuments.getDocuments(b,D):ie.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield u_(i.remoteStore):"acknowledged"===t||"rejected"===t?(hx(i,e,r||null),dx(i,e),h=e,rt(rt(i.localStore).mutationQueue).Pn(h)):dt(),yield Gc(i,a)):je("SyncEngine","Cannot apply mutation batch with id: "+e)}),vx.apply(this,arguments)}function wx(){return wx=(0,me.Z)(function*(n,e){const t=rt(n);if(Tx(t),Cx(t),!0===e&&!0!==t.wc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield bk(t,r.toArray());t.wc=!0,yield WR(t.remoteStore,!0);for(const a of i)WT(t.remoteStore,a)}else if(!1===e&&!1!==t.wc){const r=[];let i=Promise.resolve();t.uc.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(f_(t,c),o_(t.localStore,c,!0))),lw(t.remoteStore,c)}),yield i,yield bk(t,r),function(a){const c=rt(a);c.hc.forEach((h,_)=>{lw(c.remoteStore,_)}),c.lc._s(),c.hc=new Map,c.ac=new jr(et.comparator)}(t),t.wc=!1,yield WR(t.remoteStore,!1)}}),wx.apply(this,arguments)}function bk(n,e,t){return Ex.apply(this,arguments)}function Ex(){return Ex=(0,me.Z)(function*(n,e,t){const r=rt(n),i=[],a=[];for(const c of e){let h;const _=r.uc.get(c);if(_&&0!==_.length){h=yield s_(r.localStore,ys(_[0]));for(const w of _){const b=r.oc.get(w),D=yield _V(r,b);D.snapshot&&a.push(D.snapshot)}}else{const w=yield JP(r.localStore,c);h=yield s_(r.localStore,w),yield nx(r,Tk(w),c,!1,h.resumeToken)}i.push(h)}return r.rc.Ho(a),i}),Ex.apply(this,arguments)}function Tk(n){return RN(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function EV(n){const e=rt(n);return rt(rt(e.localStore).persistence).Si()}function IV(n,e,t,r){return Ix.apply(this,arguments)}function Ix(){return Ix=(0,me.Z)(function*(n,e,t,r){const i=rt(n);if(i.wc)return void je("SyncEngine","Ignoring unexpected query state notification.");const a=i.uc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const c=yield ek(i.localStore,NN(a[0])),h=Z0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,A.EMPTY_BYTE_STRING);yield Gc(i,c,h);break}case"rejected":yield o_(i.localStore,e,!0),f_(i,e,r);break;default:dt()}}),Ix.apply(this,arguments)}function bV(n,e,t){return bx.apply(this,arguments)}function bx(){return bx=(0,me.Z)(function*(n,e,t){const r=Tx(n);if(r.wc){for(const i of e){if(r.uc.has(i)){je("SyncEngine","Adding an already active target "+i);continue}const a=yield JP(r.localStore,i),c=yield s_(r.localStore,a);yield nx(r,Tk(a),c.targetId,!1,c.resumeToken),WT(r.remoteStore,c)}for(const i of t)r.uc.has(i)&&(yield o_(r.localStore,i,!1).then(()=>{lw(r.remoteStore,i),f_(r,i)}).catch(Mu))}}),bx.apply(this,arguments)}function Tx(n){const e=rt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=wk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lV.bind(null,e),e.rc.Ho=eV.bind(null,e.eventManager),e.rc.gc=tV.bind(null,e.eventManager),e}function Cx(n){const e=rt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hV.bind(null,e),e}class Ck{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.Tt=uw(e.databaseInfo.databaseId),t.sharedClientState=t.Ic(e),t.persistence=t.Tc(e),yield t.persistence.start(),t.localStore=t.Ec(e),t.gcScheduler=t.Ac(e,t.localStore),t.indexBackfillerScheduler=t.Rc(e,t.localStore)})()}Ac(e,t){return null}Rc(e,t){return null}Ec(e){return ZP(this.persistence,new KP,e.initialUser,this.Tt)}Tc(e){return new WP(VT.qs,this.Tt)}Ic(e){return new ik}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Dk extends Ck{constructor(e,t,r){super(),this.Pc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.Pc.initialize(r,e),yield Cx(r.Pc.syncEngine),yield u_(r.Pc.remoteStore),yield r.persistence.di(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ec(e){return ZP(this.persistence,new KP,e.initialUser,this.Tt)}Ac(e,t){return new fU(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Rc(e,t){const r=new aN(t,this.persistence);return new oN(e.asyncQueue,r)}Tc(e){const t=yR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Gs.withCacheSize(this.cacheSizeBytes):Gs.DEFAULT;return new _R(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,ok(),zT(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new ik}}class CV extends Dk{constructor(e,t){super(e,t,!1),this.Pc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const i=r.Pc.syncEngine;r.sharedClientState instanceof SR&&(r.sharedClientState.syncEngine={Br:vV.bind(null,i),Lr:IV.bind(null,i),qr:bV.bind(null,i),Si:EV.bind(null,i),Fr:yV.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.di(function(){var a=(0,me.Z)(function*(c){yield function wV(n,e){return wx.apply(this,arguments)}(r.Pc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}Ic(e){const t=ok();if(!SR.C(t))throw new Le(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=yR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new SR(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Dx{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Ek(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=gV.bind(null,r.syncEngine),yield WR(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new JU}createDatastore(e){const t=uw(e.databaseInfo.databaseId),r=new LU(e.databaseInfo);return new VU(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>Ek(this.syncEngine,h,0),c=sk.C()?new sk:new PU,new $U(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,h,_,w){const b=new oV(r,i,a,c,h,_);return w&&(b.wc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=rt(t);je("RemoteStore","RemoteStore shutting down."),r.mu.add(5),yield a_(r),r.yu.shutdown(),r.pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Sk(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class KT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):Br("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class DV{constructor(e,t){this.Vc=e,this.Tt=t,this.metadata=new ii,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Mu)}`))},r=>this.metadata.reject(r))}close(){return this.Vc.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}yc(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Dc()})()}Dc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Cc();if(null===t)return null;const r=e.Sc.decode(t),i=Number(r);isNaN(i)&&e.xc(`length string (${r}) is not valid number`);const a=yield e.Nc(i);return new nV(JSON.parse(a),t.length+i)})()}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Cc(){var e=this;return(0,me.Z)(function*(){for(;e.kc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const t=e.kc();t<0&&e.xc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Nc(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.$c())&&t.xc("Reached the end of bundle when more is expected.");const r=t.Sc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,me.Z)(function*(){const t=yield e.Vc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class SV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Le(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,me.Z)(function*(a,c){const h=rt(a),_=X0(h.Tt)+"/documents",w={documents:c.map(F=>Q0(h.Tt,F))},b=yield h.mo("BatchGetDocuments",_,w,c.length),D=new Map;b.forEach(F=>{const $=function R2(n,e){return"found"in e?function(t,r){Ct(!!r.found);const i=Pu(t,r.found.name),a=Kr(r.found.updateTime),c=r.found.createTime?Kr(r.found.createTime):Nt.min(),h=new xi({mapValue:{fields:r.found.fields}});return fr.newFoundDocument(i,a,c,h)}(n,e):"missing"in e?function(t,r){Ct(!!r.missing),Ct(!!r.readTime);const i=Pu(t,r.missing),a=Kr(r.readTime);return fr.newNoDocument(i,a)}(n,e):dt()}(h.Tt,F);D.set($.key.toString(),$)});const x=[];return c.forEach(F=>{const $=D.get(F.toString());Ct(!!$),x.push($)}),x}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new e_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=et.fromPath(i);e.mutations.push(new JA(a,e.precondition(a)))}),yield(r=(0,me.Z)(function*(i,a){const c=rt(i),h=X0(c.Tt)+"/documents",_={writes:a.map(w=>J0(c.Tt,w))};yield c.lo("Commit",h,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dt();t=Nt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Le(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Nt.min())?vr.exists(!1):vr.updateTime(t):vr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Nt.min()))throw new Le(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vr.updateTime(t)}return vr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class AV{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Mc=r.maxAttempts,this.ko=new RR(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Oc()}Oc(){var e=this;this.ko.vo((0,me.Z)(function*(){const t=new SV(e.datastore),r=e.Fc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Bc(a)}))}).catch(i=>{e.Bc(i)})}))}Fc(e){try{const t=this.updateFunction(e);return!m(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!qN(t)}return!1}}class RV{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=qr.UNAUTHENTICATED,this.clientId=jm.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,me.Z)(function*(h){je("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(je("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Le(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=l_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Ak(n,e){return Sx.apply(this,arguments)}function Sx(){return Sx=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),je("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,me.Z)(function*(a){r.isEqual(a)||(yield YP(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Sx.apply(this,arguments)}function Rk(n,e){return Ax.apply(this,arguments)}function Ax(){return Ax=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Rx(n);je("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>fk(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>fk(e.remoteStore,a)),n.onlineComponents=e}),Ax.apply(this,arguments)}function Rx(n){return xx.apply(this,arguments)}function xx(){return xx=(0,me.Z)(function*(n){return n.offlineComponents||(je("FirestoreClient","Using default OfflineComponentProvider"),yield Ak(n,new Ck)),n.offlineComponents}),xx.apply(this,arguments)}function ZT(n){return Mx.apply(this,arguments)}function Mx(){return Mx=(0,me.Z)(function*(n){return n.onlineComponents||(je("FirestoreClient","Using default OnlineComponentProvider"),yield Rk(n,new Dx)),n.onlineComponents}),Mx.apply(this,arguments)}function xk(n){return Rx(n).then(e=>e.persistence)}function YT(n){return Rx(n).then(e=>e.localStore)}function Nx(n){return ZT(n).then(e=>e.remoteStore)}function Px(n){return ZT(n).then(e=>e.syncEngine)}function p_(n){return kx.apply(this,arguments)}function kx(){return kx=(0,me.Z)(function*(n){const e=yield ZT(n),t=e.eventManager;return t.onListen=aV.bind(null,e.syncEngine),t.onUnlisten=uV.bind(null,e.syncEngine),t}),kx.apply(this,arguments)}function Nk(n,e,t={}){const r=new ii;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,a,c,h,_){const w=new KT({next:D=>{a.enqueueAndForget(()=>QR(i,b));const x=D.docs.has(c);!x&&D.fromCache?_.reject(new Le(le.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&D.fromCache&&h&&"server"===h.source?_.reject(new Le(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(D)},error:D=>_.reject(D)}),b=new ex(Ym(c.path),w,{includeMetadataChanges:!0,$u:!0});return ZR(i,b)}(yield p_(n),n.asyncQueue,e,t,r)})),r.promise}function Pk(n,e,t={}){const r=new ii;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,a,c,h,_){const w=new KT({next:D=>{a.enqueueAndForget(()=>QR(i,b)),D.fromCache&&"server"===h.source?_.reject(new Le(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(D)},error:D=>_.reject(D)}),b=new ex(c,w,{includeMetadataChanges:!0,$u:!0});return ZR(i,b)}(yield p_(n),n.asyncQueue,e,t,r)})),r.promise}const kk=new Map;function Ox(n,e,t){if(!t)throw new Le(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Ok(n,e,t,r){if(!0===e&&!0===r)throw new Le(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Lk(n){if(!et.isDocumentKey(n))throw new Le(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Fk(n){if(et.isDocumentKey(n))throw new Le(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function QT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":dt()}function wn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Le(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=QT(n);throw new Le(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Uk(n,e){if(e<=0)throw new Le(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Vk{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Le(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Le(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Ok("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dw{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vk({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Le(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Le(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vk(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new rN;switch(t.type){case"gapi":return new VA(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Le(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=kk.get(e);t&&(je("ComponentProvider","Removing Datastore"),kk.delete(e),t.terminate())}(this),Promise.resolve()}}class pr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ou(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pr(this.firestore,e,this._key)}}class zi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zi(this.firestore,e,this._query)}}class Ou extends zi{constructor(e,t,r){super(e,t,Ym(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pr(this.firestore,null,new et(e))}withConverter(e){return new Ou(this.firestore,e,this._path)}}function jk(n,e,...t){if(n=(0,N.m9)(n),Ox("collection","path",e),n instanceof dw){const r=In.fromString(e,...t);return Fk(r),new Ou(n,null,r)}{if(!(n instanceof pr||n instanceof Ou))throw new Le(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(In.fromString(e,...t));return Fk(r),new Ou(n.firestore,null,r)}}function XT(n,e,...t){if(n=(0,N.m9)(n),1===arguments.length&&(e=jm.R()),Ox("doc","path",e),n instanceof dw){const r=In.fromString(e,...t);return Lk(r),new pr(n,null,new et(r))}{if(!(n instanceof pr||n instanceof Ou))throw new Le(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(In.fromString(e,...t));return Lk(r),new pr(n.firestore,n instanceof Ou?n.converter:null,new et(r))}}function $k(n,e){return n=(0,N.m9)(n),e=(0,N.m9)(e),(n instanceof pr||n instanceof Ou)&&(e instanceof pr||e instanceof Ou)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Lx(n,e){return n=(0,N.m9)(n),e=(0,N.m9)(e),n instanceof zi&&e instanceof zi&&n.firestore===e.firestore&&H0(n._query,e._query)&&n.converter===e.converter}class UV{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new RR(this,"async_queue_retry"),this.Hc=()=>{const t=zT();t&&je("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ko.Vo()};const e=zT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const t=zT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const t=new ii;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}Zc(){var e=this;return(0,me.Z)(function*(){if(0!==e.Uc.length){try{yield e.Uc[0](),e.Uc.shift(),e.ko.reset()}catch(t){if(!Vc(t))throw t;je("AsyncQueue","Operation failed with retryable error: "+t)}e.Uc.length>0&&e.ko.vo(()=>e.Zc())}})()}Yc(e){const t=this.qc.then(()=>(this.jc=!0,e().catch(r=>{throw this.Qc=r,this.jc=!1,Br("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.jc=!1,r))));return this.qc=t,t}enqueueAfterDelay(e,t,r){this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);const i=KR.createAndSchedule(this,e,t,r,a=>this.Xc(a));return this.Gc.push(i),i}Jc(){this.Qc&&dt()}verifyOperationInProgress(){}ta(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.qc,yield t}while(t!==e.qc)})()}ea(e){for(const t of this.Gc)if(t.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Gc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}function Fx(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class VV{constructor(){this._progressObserver={},this._taskCompletionResolver=new ii,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class gr extends dw{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new UV,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Hk(this),this._firestoreClient.terminate()}}function Zr(n){return n._firestoreClient||Hk(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Hk(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new s(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new RV(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Gk(n,e,t){const r=new ii;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield Ak(n,t),yield Rk(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(c=a).name?c.code===le.FAILED_PRECONDITION||c.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw a;wd("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var c})).then(()=>r.promise)}function zk(n){if(n._initialized||n._terminated)throw new Le(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Lu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lu(A.fromBase64String(e))}catch(t){throw new Le(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Lu(A.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class zc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Le(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class dp{constructor(e){this._methodName=e}}class JT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Le(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Le(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qt(this._lat,e._lat)||Qt(this._long,e._long)}}const YV=/^__.*__$/;class QV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new $c(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jm(e,this.data,t,this.fieldTransforms)}}class Wk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new $c(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function qk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt()}}class eC{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.Tt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ia(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new eC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.oa({path:r,ca:!1});return i.aa(e),i}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.oa({path:r,ca:!1});return i.ia(),i}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return rC(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(qk(this.ra)&&YV.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class XV{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.Tt=r||uw(e)}wa(e,t,r,i=!1){return new eC({ra:e,methodName:t,_a:r,path:hr.emptyPath(),ca:!1,da:i},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function hp(n){const e=n._freezeSettings(),t=uw(n._databaseId);return new XV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tC(n,e,t,r,i,a={}){const c=n.wa(a.merge||a.mergeFields?2:0,e,t,i);jx("Data must be an object, but it was:",c,r);const h=Yk(r,c);let _,w;if(a.merge)_=new $s(c.fieldMask),w=c.fieldTransforms;else if(a.mergeFields){const b=[];for(const D of a.mergeFields){const x=pw(e,D,t);if(!c.contains(x))throw new Le(le.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);Xk(b,x)||b.push(x)}_=new $s(b),w=c.fieldTransforms.filter(D=>_.covers(D.field))}else _=null,w=c.fieldTransforms;return new QV(new xi(h),_,w)}class fw extends dp{_toFieldTransform(e){if(2!==e.ra)throw e.fa(1===e.ra?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fw}}function Kk(n,e,t){return new eC({ra:3,_a:e.settings._a,methodName:n._methodName,ca:t},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class Ux extends dp{_toFieldTransform(e){return new z0(e.path,new Qm)}isEqual(e){return e instanceof Ux}}class JV extends dp{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=Kk(this,e,!0),r=this.ma.map(a=>fp(a,t)),i=new np(r);return new z0(e.path,i)}isEqual(e){return this===e}}class eB extends dp{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=Kk(this,e,!0),r=this.ma.map(a=>fp(a,t)),i=new rp(r);return new z0(e.path,i)}isEqual(e){return this===e}}class tB extends dp{constructor(e,t){super(e),this.ga=t}_toFieldTransform(e){const t=new Xm(e.Tt,LN(e.Tt,this.ga));return new z0(e.path,t)}isEqual(e){return this===e}}function Vx(n,e,t,r){const i=n.wa(1,e,t);jx("Data must be an object, but it was:",i,r);const a=[],c=xi.empty();l(r,(_,w)=>{const b=nC(e,_,t);w=(0,N.m9)(w);const D=i.ha(b);if(w instanceof fw)a.push(b);else{const x=fp(w,D);null!=x&&(a.push(b),c.set(b,x))}});const h=new $s(a);return new Wk(c,h,i.fieldTransforms)}function Bx(n,e,t,r,i,a){const c=n.wa(1,e,t),h=[pw(e,r,t)],_=[i];if(a.length%2!=0)throw new Le(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)h.push(pw(e,a[x])),_.push(a[x+1]);const w=[],b=xi.empty();for(let x=h.length-1;x>=0;--x)if(!Xk(w,h[x])){const F=h[x];let $=_[x];$=(0,N.m9)($);const ee=c.ha(F);if($ instanceof fw)w.push(F);else{const se=fp($,ee);null!=se&&(w.push(F),b.set(F,se))}}const D=new $s(w);return new Wk(b,D,c.fieldTransforms)}function Zk(n,e,t,r=!1){return fp(t,n.wa(r?4:3,e))}function fp(n,e){if(Qk(n=(0,N.m9)(n)))return jx("Unsupported field value:",e,n),Yk(n,e);if(n instanceof dp)return function(t,r){if(!qk(r.ra))throw r.fa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.fa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ca&&4!==e.ra)throw e.fa("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let h=fp(c,r.la(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,N.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return LN(r.Tt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=$n.fromDate(t);return{timestampValue:t_(r.Tt,i)}}if(t instanceof $n){const i=new $n(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:t_(r.Tt,i)}}if(t instanceof JT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Lu)return{bytesValue:rP(r.Tt,t._byteString)};if(t instanceof pr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.fa(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:eR(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.fa(`Unsupported field value: ${QT(t)}`)}(n,e)}function Yk(n,e){const t={};return d(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):l(n,(r,i)=>{const a=fp(i,e.ua(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function Qk(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof $n||n instanceof JT||n instanceof Lu||n instanceof pr||n instanceof dp)}function jx(n,e,t){if(!Qk(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=QT(t);throw e.fa("an object"===r?n+" a custom object":n+" "+r)}var r}function pw(n,e,t){if((e=(0,N.m9)(e))instanceof zc)return e._internalPath;if("string"==typeof e)return nC(n,e);throw rC("Field path arguments must be of type string or ",n,!1,void 0,t)}const nB=new RegExp("[~\\*/\\[\\]]");function nC(n,e,t){if(e.search(nB)>=0)throw rC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new zc(...e.split("."))._internalPath}catch{throw rC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function rC(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let _="";return(a||c)&&(_+=" (found",a&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new Le(le.INVALID_ARGUMENT,h+n+_)}function Xk(n,e){return n.some(t=>t.isEqual(e))}class gw{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new pr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new rB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(iC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class rB extends gw{data(){return super.data()}}function iC(n,e){return"string"==typeof e?nC(n,e):e instanceof zc?e._internalPath:e._delegate._internalPath}function Jk(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Le(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $x{}class mw extends $x{}function xd(n,e,...t){let r=[];e instanceof $x&&r.push(e),r=r.concat(t),function(i){const a=i.filter(h=>h instanceof g_).length,c=i.filter(h=>h instanceof _w).length;if(a>1||a>0&&c>0)throw new Le(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class _w extends mw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new _w(e,t,r)}_apply(e){const t=this._parse(e);return rO(e._query,t),new zi(e.firestore,e.converter,QA(e._query,t))}_parse(e){const t=hp(e.firestore);return function(i,a,c,h,_,w,b){let D;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Le(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){nO(b,w);const x=[];for(const F of b)x.push(tO(h,i,F));D={arrayValue:{values:x}}}else D=tO(h,i,b)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||nO(b,w),D=Zk(c,"where",b,"in"===w||"not-in"===w);return vn.create(_,w,D)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class g_ extends $x{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new g_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Hn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const c=i.getFlattenedFilters();for(const h of c)rO(a,h),a=QA(a,h)}(e._query,t),new zi(e.firestore,e.converter,QA(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Hx extends mw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Hx(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Le(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Le(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Km(i,a);return function(h,_){if(null===ZA(h)){const w=bT(h);null!==w&&iO(0,w,_.field)}}(r,c),c}(e._query,this._field,this._direction);return new zi(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new jc(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class sC extends mw{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new sC(e,t,r)}_apply(e){return new zi(e.firestore,e.converter,TT(e._query,this._limit,this._limitType))}}class oC extends mw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new oC(e,t,r)}_apply(e){const t=eO(e,this.type,this._docOrFields,this._inclusive);return new zi(e.firestore,e.converter,(i=t,new jc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class aC extends mw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new aC(e,t,r)}_apply(e){const t=eO(e,this.type,this._docOrFields,this._inclusive);return new zi(e.firestore,e.converter,(i=t,new jc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function eO(n,e,t,r){if(t[0]=(0,N.m9)(t[0]),t[0]instanceof gw)return function(i,a,c,h,_){if(!h)throw new Le(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const w=[];for(const b of tp(i))if(b.field.isKeyField())w.push(Jf(a,h.key));else{const D=h.data.field(b.field);if(ze(D))throw new Le(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const x=b.field.canonicalString();throw new Le(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}w.push(D)}return new Id(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=hp(n.firestore);return function(a,c,h,_,w,b){const D=a.explicitOrderBy;if(w.length>D.length)throw new Le(le.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let F=0;F<w.length;F++){const $=w[F];if(D[F].field.isKeyField()){if("string"!=typeof $)throw new Le(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof $}`);if(!YA(a)&&-1!==$.indexOf("/"))throw new Le(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${$}' contains a slash.`);const ee=a.path.child(In.fromString($));if(!et.isDocumentKey(ee))throw new Le(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${ee}' is not because it contains an odd number of segments.`);const se=new et(ee);x.push(Jf(c,se))}else{const ee=Zk(h,_,$);x.push(ee)}}return new Id(x,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function tO(n,e,t){if("string"==typeof(t=(0,N.m9)(t))){if(""===t)throw new Le(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!YA(e)&&-1!==t.indexOf("/"))throw new Le(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(In.fromString(t));if(!et.isDocumentKey(r))throw new Le(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Jf(n,new et(r))}if(t instanceof pr)return Jf(n,t._key);throw new Le(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${QT(t)}.`)}function nO(n,e){if(!Array.isArray(n)||0===n.length)throw new Le(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rO(n,e){if(e.isInequality()){const r=bT(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Le(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=ZA(n);null!==a&&iO(0,i,a)}const t=function(r,i){for(const a of r)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Le(le.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function iO(n,e,t){if(!t.isEqual(e))throw new Le(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Gx{convertValue(e,t="none"){switch($t(e)){case 0:return null;case 1:return e.booleanValue;case 2:return X(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ve(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw dt()}}convertObject(e,t){const r={};return l(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new JT(X(e.latitude),X(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=tt(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ht(e));default:return null}}convertTimestamp(e){const t=K(e);return new $n(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=In.fromString(e);Ct(fP(r));const i=new o(r.get(1),r.get(3)),a=new et(r.popFirst(5));return i.isEqual(t)||Br(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function uC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class hB extends Gx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pr(this.firestore,null,t)}}class pp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wc extends gw{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new yw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(iC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class yw extends Wc{data(e={}){return super.data(e)}}class Md{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new pp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new yw(this._firestore,this._userDataWriter,r.key,r,new pp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Le(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new yw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new pp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const h=new yw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new pp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==c.type&&(_=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),w=a.indexOf(c.doc.key)),{type:pB(c.type),doc:h,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function pB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt()}}function oO(n,e){return n instanceof Wc&&e instanceof Wc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Md&&e instanceof Md&&n._firestore===e._firestore&&Lx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Nd extends Gx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pr(this.firestore,null,t)}}function aO(n,e,t){n=wn(n,pr);const r=wn(n.firestore,gr),i=uC(n.converter,e,t);return m_(r,[tC(hp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,vr.none())])}function uO(n,e,t,...r){n=wn(n,pr);const i=wn(n.firestore,gr),a=hp(i);let c;return c="string"==typeof(e=(0,N.m9)(e))||e instanceof zc?Bx(a,"updateDoc",n._key,e,t,r):Vx(a,"updateDoc",n._key,e),m_(i,[c.toMutation(n._key,vr.exists(!0))])}function cO(n,...e){var t,r,i;n=(0,N.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||Fx(e[c])||(a=e[c],c++);const h={includeMetadataChanges:a.includeMetadataChanges};if(Fx(e[c])){const D=e[c];e[c]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[c+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[c+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let _,w,b;if(n instanceof pr)w=wn(n.firestore,gr),b=Ym(n._key.path),_={next:D=>{e[c]&&e[c](zx(w,n,D))},error:e[c+1],complete:e[c+2]};else{const D=wn(n,zi);w=wn(D.firestore,gr),b=D._query;const x=new Nd(w);_={next:F=>{e[c]&&e[c](new Md(w,x,D,F))},error:e[c+1],complete:e[c+2]},Jk(n._query)}return function(D,x,F,$){const ee=new KT($),se=new ex(x,ee,F);return D.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return ZR(yield p_(D),se)})),()=>{ee.bc(),D.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return QR(yield p_(D),se)}))}}(Zr(w),b,h,_)}function m_(n,e){return function(t,r){const i=new ii;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function cV(n,e,t){return sx.apply(this,arguments)}(yield Px(t),r,i)})),i.promise}(Zr(n),e)}function zx(n,e,t){const r=t.docs.get(e._key),i=new Nd(n);return new Wc(n,i,e._key,r,new pp(t.hasPendingWrites,t.fromCache),e.converter)}const CB={maxAttempts:5};class lO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=hp(e)}set(e,t,r){this._verifyNotCommitted();const i=Pd(e,this._firestore),a=uC(i.converter,t,r),c=tC(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,vr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Pd(e,this._firestore);let c;return c="string"==typeof(t=(0,N.m9)(t))||t instanceof zc?Bx(this._dataReader,"WriteBatch.update",a._key,t,r,i):Vx(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,vr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Pd(e,this._firestore);return this._mutations=this._mutations.concat(new e_(t._key,vr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Le(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Pd(n,e){if((n=(0,N.m9)(n)).firestore!==e)throw new Le(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class DB extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=hp(e)}get(e){const t=Pd(e,this._firestore),r=new hB(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return dt();const a=i[0];if(a.isFoundDocument())return new gw(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new gw(this._firestore,r,t._key,null,t.converter);throw dt()})}set(e,t,r){const i=Pd(e,this._firestore),a=uC(i.converter,t,r),c=tC(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=Pd(e,this._firestore);let c;return c="string"==typeof(t=(0,N.m9)(t))||t instanceof zc?Bx(this._dataReader,"Transaction.update",a._key,t,r,i):Vx(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=Pd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Pd(e,this._firestore),r=new Nd(this._firestore);return super.get(e).then(i=>new Wc(this._firestore,r,t._key,i._document,new pp(!1,!1),t.converter))}}!function(n,e=!0){ka=ji.SDK_VERSION,(0,ji._registerComponent)(new oo.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),c=new gr(new Bm(t.getProvider("auth-internal")),new Fc(t.getProvider("app-check-internal")),function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Le(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new o(h.options.projectId,_)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,ji.registerVersion)(M0,"3.9.0",n),(0,ji.registerVersion)(M0,"3.9.0","esm2017")}();function Wx(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Le("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function hO(){if(typeof Uint8Array>"u")throw new Le("unimplemented","Uint8Arrays are not available in this environment.")}function fO(){if(!function S(){return typeof atob<"u"}())throw new Le("unimplemented","Blobs are unavailable in Firestore in this environment.")}class vw{constructor(e){this._delegate=e}static fromBase64String(e){return fO(),new vw(Lu.fromBase64String(e))}static fromUint8Array(e){return hO(),new vw(Lu.fromUint8Array(e))}toBase64(){return fO(),this._delegate.toBase64()}toUint8Array(){return hO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function qx(n){return function OB(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class LB{enableIndexedDbPersistence(e,t){return function jV(n,e){zk(n=wn(n,gr));const t=Zr(n),r=n._freezeSettings(),i=new Dx;return Gk(t,i,new Dk(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function $V(n){zk(n=wn(n,gr));const e=Zr(n),t=n._freezeSettings(),r=new Dx;return Gk(e,r,new CV(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function HV(n){if(n._initialized&&!n._terminated)throw new Le(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ii;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!fo.C())return Promise.resolve();const i=r+"main";yield fo.delete(i)}),function(r){return t.apply(this,arguments)})(yR(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class pO{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof o||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&wd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Bk(n,e,t,r={}){var i;const a=(n=wn(n,dw))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&wd("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,h;if("string"==typeof r.mockUserToken)c=r.mockUserToken,h=qr.MOCK_USER;else{c=(0,N.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Le(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new qr(_)}n._authCredentials=new FA(new LA(c,h))}}(this._delegate,e,t,r)}enableNetwork(){return function zV(n){return function xV(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield xk(n),t=yield Nx(n);return e.setNetworkEnabled(!0),function(r){const i=rt(r);return i.mu.delete(0),cw(i)}(t)}))}(Zr(n=wn(n,gr)))}(this._delegate)}disableNetwork(){return function WV(n){return function MV(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield xk(n),t=yield Nx(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(i){const a=rt(i);a.mu.add(0),yield a_(a),a.pu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Zr(n=wn(n,gr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Ok("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function GV(n){return function(e){const t=new ii;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function fV(n,e){return lx.apply(this,arguments)}(yield Px(e),t)})),t.promise}(Zr(n=wn(n,gr)))}(this._delegate)}onSnapshotsInSync(e){return function bB(n,e){return function kV(n,e){const t=new KT(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield p_(n),i=t,rt(r).vu.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield p_(n),i=t,void rt(r).vu.delete(i);var r,i}))}}(Zr(n=wn(n,gr)),Fx(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Le("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new __(this,jk(this._delegate,e))}catch(t){throw ws(t,"collection()","Firestore.collection()")}}doc(e){try{return new zo(this,XT(this._delegate,e))}catch(t){throw ws(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Es(this,function FV(n,e){if(n=wn(n,dw),Ox("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Le(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new zi(n,null,(t=e,new jc(In.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ws(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function SB(n,e,t){n=wn(n,gr);const r=Object.assign(Object.assign({},CB),t);return function(i){if(i.maxAttempts<1)throw new Le(le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,c){const h=new ii;return i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const _=yield function Mk(n){return ZT(n).then(e=>e.datastore)}(i);new AV(i.asyncQueue,_,c,a,h).run()})),h.promise}(Zr(n),i=>e(new DB(n,i)),r)}(this._delegate,t=>e(new gO(this,t)))}batch(){return Zr(this._delegate),new mO(new lO(this._delegate,e=>m_(this._delegate,e)))}loadBundle(e){return function qV(n,e){const t=Zr(n=wn(n,gr)),r=new VV;return function OV(n,e,t,r){const i=function(a,c){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,w){if(_ instanceof Uint8Array)return Sk(_,w);if(_ instanceof ArrayBuffer)return Sk(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new DV(_,c);var _}(t,uw(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function TV(n,e,t){const r=rt(n);var i;(i=(0,me.Z)(function*(a,c,h){try{const _=yield c.getMetadata();if(yield function(x,F){const $=rt(x),ee=Kr(F.createTime);return $.persistence.runTransaction("hasNewerBundle","readonly",se=>$.$s.getBundleMetadata(se,F.id)).then(se=>!!se&&se.createTime.compareTo(ee)>=0)}(a.localStore,_))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:(x=_).totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}),Promise.resolve(new Set);h._updateProgress(mk(_));const w=new rV(_,a.localStore,c.Tt);let b=yield c.yc();for(;b;){const x=yield w.Bu(b);x&&h._updateProgress(x),b=yield c.yc()}const D=yield w.complete();return yield Gc(a,D.Uu,void 0),yield function(x,F){const $=rt(x);return $.persistence.runTransaction("Save bundle","readwrite",ee=>$.$s.saveBundleMetadata(ee,F))}(a.localStore,_),h._completeWith(D.progress),Promise.resolve(D.qu)}catch(_){return wd("SyncEngine",`Loading bundle failed with ${_}`),h._failWith(_),Promise.resolve(new Set)}var x}),function(a,c,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Px(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function KV(n,e){return function LV(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const i=rt(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.$s.getNamedQuery(a,r))}(yield YT(n),e)}))}(Zr(n=wn(n,gr)),e).then(t=>t?new zi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Es(this,t):null)}}class cC extends Gx{constructor(e){super(),this.firestore=e}convertBytes(e){return new vw(new Lu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return zo.forKey(t,this.firestore,null)}}class gO{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new cC(e)}get(e){const t=mp(e);return this._delegate.get(t).then(r=>new ww(this._firestore,new Wc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=mp(e);return r?(Wx("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=mp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=mp(e);return this._delegate.delete(t),this}}class mO{constructor(e){this._delegate=e}set(e,t,r){const i=mp(e);return r?(Wx("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=mp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=mp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class gp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new yw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ew(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=gp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new gp(e,new cC(e),t),i.set(t,a)),a}}gp.INSTANCES=new WeakMap;class zo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new cC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Le("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new zo(t,new pr(t._delegate,r,new et(e)))}static forKey(e,t,r){return new zo(t,new pr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new __(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new __(this.firestore,jk(this._delegate,e))}catch(t){throw ws(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,N.m9)(e))instanceof pr&&$k(this._delegate,e)}set(e,t){t=Wx("DocumentReference.set",t);try{return t?aO(this._delegate,e,t):aO(this._delegate,e)}catch(r){throw ws(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?uO(this._delegate,e):uO(this._delegate,e,t,...r)}catch(i){throw ws(i,"updateDoc()","DocumentReference.update()")}}delete(){return function EB(n){return m_(wn(n.firestore,gr),[new e_(n._key,vr.none())])}(this._delegate)}onSnapshot(...e){const t=_O(e),r=yO(e,i=>new ww(this.firestore,new Wc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return cO(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function mB(n){n=wn(n,pr);const e=wn(n.firestore,gr),t=Zr(e),r=new Nd(e);return function NV(n,e){const t=new ii;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,a,c){try{const h=yield function(_,w){const b=rt(_);return b.persistence.runTransaction("read document","readonly",D=>b.localDocuments.getDocument(D,w))}(i,a);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new Le(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const _=l_(h,`Failed to get document '${a} from cache`);c.reject(_)}}),function(i,a,c){return r.apply(this,arguments)})(yield YT(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Wc(e,r,n._key,i,new pp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function _B(n){n=wn(n,pr);const e=wn(n.firestore,gr);return Nk(Zr(e),n._key,{source:"server"}).then(t=>zx(e,n,t))}(this._delegate):function gB(n){n=wn(n,pr);const e=wn(n.firestore,gr);return Nk(Zr(e),n._key).then(t=>zx(e,n,t))}(this._delegate),t.then(r=>new ww(this.firestore,new Wc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new zo(this.firestore,this._delegate.withConverter(e?gp.getInstance(this.firestore,e):null))}}function ws(n,e,t){return n.message=n.message.replace(e,t),n}function _O(n){for(const e of n)if("object"==typeof e&&!qx(e))return e;return{}}function yO(n,e){var t,r;let i;return i=qx(n[0])?n[0]:qx(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class ww{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new zo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return oO(this._delegate,e._delegate)}}class Ew extends ww{data(e){const t=this._delegate.data(e);return function OA(n,e){n||dt()}(void 0!==t),t}}class Es{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new cC(e)}where(e,t,r){try{return new Es(this.firestore,xd(this._delegate,function iB(n,e,t){const r=e,i=iC("where",n);return _w._create(i,r,t)}(e,t,r)))}catch(i){throw ws(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Es(this.firestore,xd(this._delegate,function sB(n,e="asc"){const t=e,r=iC("orderBy",n);return Hx._create(r,t)}(e,t)))}catch(r){throw ws(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Es(this.firestore,xd(this._delegate,function oB(n){return Uk("limit",n),sC._create("limit",n,"F")}(e)))}catch(t){throw ws(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Es(this.firestore,xd(this._delegate,function aB(n){return Uk("limitToLast",n),sC._create("limitToLast",n,"L")}(e)))}catch(t){throw ws(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Es(this.firestore,xd(this._delegate,function uB(...n){return oC._create("startAt",n,!0)}(...e)))}catch(t){throw ws(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Es(this.firestore,xd(this._delegate,function cB(...n){return oC._create("startAfter",n,!1)}(...e)))}catch(t){throw ws(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Es(this.firestore,xd(this._delegate,function lB(...n){return aC._create("endBefore",n,!1)}(...e)))}catch(t){throw ws(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Es(this.firestore,xd(this._delegate,function dB(...n){return aC._create("endAt",n,!0)}(...e)))}catch(t){throw ws(t,"endAt()","Query.endAt()")}}isEqual(e){return Lx(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function vB(n){n=wn(n,zi);const e=wn(n.firestore,gr),t=Zr(e),r=new Nd(e);return function PV(n,e){const t=new ii;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,a,c){try{const h=yield jT(i,a,!0),_=new vk(a,h.Yi),w=_.Hu(h.documents),b=_.applyChanges(w,!1);c.resolve(b.snapshot)}catch(h){const _=l_(h,`Failed to execute query '${a} against cache`);c.reject(_)}}),function(i,a,c){return r.apply(this,arguments)})(yield YT(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Md(e,r,n,i))}(this._delegate):"server"===e?.source?function wB(n){n=wn(n,zi);const e=wn(n.firestore,gr),t=Zr(e),r=new Nd(e);return Pk(t,n._query,{source:"server"}).then(i=>new Md(e,r,n,i))}(this._delegate):function yB(n){n=wn(n,zi);const e=wn(n.firestore,gr),t=Zr(e),r=new Nd(e);return Jk(n._query),Pk(t,n._query).then(i=>new Md(e,r,n,i))}(this._delegate),t.then(r=>new Kx(this.firestore,new Md(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=_O(e),r=yO(e,i=>new Kx(this.firestore,new Md(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return cO(this._delegate,t,r)}withConverter(e){return new Es(this.firestore,this._delegate.withConverter(e?gp.getInstance(this.firestore,e):null))}}class UB{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ew(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Kx{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Es(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ew(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new UB(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Ew(this._firestore,r))})}isEqual(e){return oO(this._delegate,e._delegate)}}class __ extends Es{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new zo(this.firestore,e):null}doc(e){try{return new zo(this.firestore,void 0===e?XT(this._delegate):XT(this._delegate,e))}catch(t){throw ws(t,"doc()","CollectionReference.doc()")}}add(e){return function IB(n,e){const t=wn(n.firestore,gr),r=XT(n),i=uC(n.converter,e);return m_(t,[tC(hp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,vr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new zo(this.firestore,t))}isEqual(e){return $k(this._delegate,e._delegate)}withConverter(e){return new __(this.firestore,this._delegate.withConverter(e?gp.getInstance(this.firestore,e):null))}}function mp(n){return wn(n,pr)}class Zx{constructor(...e){this._delegate=new zc(...e)}static documentId(){return new Zx(hr.keyField().canonicalString())}isEqual(e){return(e=(0,N.m9)(e))instanceof zc&&this._delegate._internalPath.isEqual(e._internalPath)}}class _p{constructor(e){this._delegate=e}static serverTimestamp(){const e=function RB(){return new Ux("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new _p(e)}static delete(){const e=function AB(){return new fw("deleteField")}();return e._methodName="FieldValue.delete",new _p(e)}static arrayUnion(...e){const t=function xB(...n){return new JV("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new _p(t)}static arrayRemove(...e){const t=function MB(...n){return new eB("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new _p(t)}static increment(e){const t=function NB(n){return new tB("increment",n)}(e);return t._methodName="FieldValue.increment",new _p(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const VB={Firestore:pO,GeoPoint:JT,Timestamp:$n,Blob:vw,Transaction:gO,WriteBatch:mO,DocumentReference:zo,DocumentSnapshot:ww,Query:Es,QueryDocumentSnapshot:Ew,QuerySnapshot:Kx,CollectionReference:__,FieldPath:Zx,FieldValue:_p,setLogLevel:function FB(n){!function kA(n){ho.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function vO(n,e){return function $B(n,e=Bg.z){return new Ui.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function Yx(n,e){return vO(n,e).pipe((0,bt.U)(t=>({payload:t,type:"query"})))}function lC(n,e){return Yx(n,e).pipe(ac(void 0),rm(),(0,bt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,h)=>{const _=i.find(b=>b.doc.ref.isEqual(c.ref)),w=t?.payload.docs.find(b=>b.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),a}))}function wO(n,e,t){return lC(n,t).pipe(Mo((r,i)=>function GB(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function zB(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Qx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Qx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Qx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Vv(),(0,bt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function Qx(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function EO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function jB(n){(function BB(n,e){n.INTERNAL.registerComponent(new oo.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},VB)))})(n,(e,t)=>new pO(e,t,new LB)),n.registerVersion("@firebase/firestore-compat","0.3.5")}(Uo.Z);class IO{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=lC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,bt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ac(void 0),rm(),Vi(([r,i])=>i.length>0||!r),(0,bt.U)(([r,i])=>i),Ut.iC)}auditTrail(e){return this.stateChanges(e).pipe(Mo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=EO(e);return wO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ut.iC)}valueChanges(e={}){return Yx(this.query,this.afs.schedulers.outsideAngular).pipe((0,bt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Ut.iC)}get(e){return(0,en.D)(this.query.get(e)).pipe(Ut.iC)}add(e){return this.ref.add(e)}doc(e){return new bO(this.ref.doc(e),this.afs)}}class bO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=DO(r,t);return new IO(i,a,this.afs)}snapshotChanges(){return function HB(n,e){return vO(n,e).pipe(ac(void 0),rm(),(0,bt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ut.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,bt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,en.D)(this.ref.get(e)).pipe(Ut.iC)}}class WB{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?lC(this.query,this.afs.schedulers.outsideAngular).pipe((0,bt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Vi(t=>t.length>0),Ut.iC):lC(this.query,this.afs.schedulers.outsideAngular).pipe(Ut.iC)}auditTrail(e){return this.stateChanges(e).pipe(Mo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=EO(e);return wO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ut.iC)}valueChanges(e={}){return Yx(this.query,this.afs.schedulers.outsideAngular).pipe((0,bt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Ut.iC)}get(e){return(0,en.D)(this.query.get(e)).pipe(Ut.iC)}}const TO=new p.OlP("angularfire2.enableFirestorePersistence"),CO=new p.OlP("angularfire2.firestore.persistenceSettings"),qB=new p.OlP("angularfire2.firestore.settings"),KB=new p.OlP("angularfire2.firestore.use-emulator");function DO(n,e=(t=>t)){return{query:e(n),ref:n}}let ZB=(()=>{class n{constructor(t,r,i,a,c,h,_,w,b,D,x,F,$,ee,se,ft,yt){this.schedulers=_;const lt=(0,Qn.on)(t,h,r),wt=b;D&&Vg(lt,h,x,$,ee,se,F,ft),[this.firestore,this.persistenceEnabled$]=(0,Qn.cc)(`${lt.name}.firestore`,"AngularFirestore",lt.name,()=>{const Bt=h.runOutsideAngular(()=>lt.firestore());if(a&&Bt.settings(a),wt&&Bt.useEmulator(...wt),i&&!ia(c)){const Yt=()=>{try{return(0,en.D)(Bt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch($r){return typeof console<"u"&&console.warn($r),st(!1)}};return[Bt,h.runOutsideAngular(Yt)]}return[Bt,st(!1)]},[a,wt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=DO(i,r),h=this.schedulers.ngZone.run(()=>a);return new IO(h,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new WB(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new bO(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Qn.Dh),p.LFG(Qn.xv,8),p.LFG(TO,8),p.LFG(qB,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ut.HU),p.LFG(CO,8),p.LFG(KB,8),p.LFG(ed,8),p.LFG(kg,8),p.LFG(pf,8),p.LFG(Og,8),p.LFG(Lg,8),p.LFG(Fg,8),p.LFG(Ug,8),p.LFG(hf,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),YB=(()=>{class n{constructor(){Rc.Z.registerVersion("angularfire",Ut.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:TO,useValue:!0},{provide:CO,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[ZB]}),n})();var QB=P(5032);const SO="@firebase/database";let Xx="";function RO(n){Xx=n}class e3{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,N.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,N.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class t3{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,N.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const xO=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new e3(e)}}catch{}return new t3},yp=xO("localStorage"),Jx=xO("sessionStorage"),y_=new ao.Yd("@firebase/database"),MO=function(){let n=1;return function(){return n++}}(),NO=function(n){const e=(0,N.dS)(n),t=new N.gQ;t.update(e);const r=t.digest();return N.US.encodeByteArray(r)},Iw=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Iw.apply(null,r):e+="object"==typeof r?(0,N.Wl)(r):r,e+=" "}return e};let vp=null,PO=!0;const kO=function(n,e){(0,N.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(y_.logLevel=ao.in.VERBOSE,vp=y_.log.bind(y_),e&&Jx.set("logging_enabled",!0)):"function"==typeof n?vp=n:(vp=null,Jx.remove("logging_enabled"))},Pi=function(...n){if(!0===PO&&(PO=!1,null===vp&&!0===Jx.get("logging_enabled")&&kO(!0)),vp){const e=Iw.apply(null,n);vp(e)}},bw=function(n){return function(...e){Pi(n,...e)}},e1=function(...n){const e="FIREBASE INTERNAL ERROR: "+Iw(...n);y_.error(e)},Fu=function(...n){const e=`FIREBASE FATAL ERROR: ${Iw(...n)}`;throw y_.error(e),new Error(e)},os=function(...n){const e="FIREBASE WARNING: "+Iw(...n);y_.warn(e)},dC=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},kd="[MIN_NAME]",qc="[MAX_NAME]",wp=function(n,e){if(n===e)return 0;if(n===kd||e===qc)return-1;if(e===kd||n===qc)return 1;{const t=FO(n),r=FO(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},i3=function(n,e){return n===e?0:n<e?-1:1},Tw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,N.Wl)(e))},t1=function(n){if("object"!=typeof n||null===n)return(0,N.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,N.Wl)(e[r]),t+=":",t+=t1(n[e[r]]);return t+="}",t},OO=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function ki(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const LO=function(n){(0,N.hu)(!dC(n),"Invalid JSON number");const r=1023;let i,a,c,h,_;0===n?(a=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,c=Math.round(n/Math.pow(2,-1074))));const w=[];for(_=52;_;_-=1)w.push(c%2?1:0),c=Math.floor(c/2);for(_=11;_;_-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const b=w.join("");let D="";for(_=0;_<64;_+=8){let x=parseInt(b.substr(_,8),2).toString(16);1===x.length&&(x="0"+x),D+=x}return D.toLowerCase()},u3=new RegExp("^-?(0*)\\d{1,10}$"),FO=function(n){if(u3.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},v_=function(n){try{n()}catch(e){setTimeout(()=>{throw os("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},d3=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Cw=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class h3{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){os(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class f3{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Pi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',os(e)}}let Dw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const $O=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,zO="websocket",WO="long_polling";class r1{constructor(e,t,r,i,a=!1,c="",h=!1,_=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=_,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=yp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&yp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function qO(n,e,t){let r;if((0,N.hu)("string"==typeof e,"typeof type must == string"),(0,N.hu)("object"==typeof t,"typeof params must == object"),e===zO)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==WO)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function p3(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return ki(t,(a,c)=>{i.push(a+"="+c)}),r+i.join("&")}class g3{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,N.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,N.p$)(this.counters_)}}const s1={},o1={};function a1(n){const e=n.toString();return s1[e]||(s1[e]=new g3),s1[e]}class _3{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&v_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Od{constructor(e,t,r,i,a,c,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=bw(e),this.stats_=a1(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),qO(t,WO,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new _3(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,N.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new u1((...a)=>{const[c,h,_,w,b]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=_;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[c,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&$O.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Od.forceAllow_=!0}static forceDisallow(){Od.forceDisallow_=!0}static isAvailable(){return!((0,N.Yr)()||!Od.forceAllow_&&(Od.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,N.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,N.h$)(t),i=OO(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,N.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,N.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class u1{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,N.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=MO(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=u1.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){Pi("frame writing exception"),h.stack&&Pi(h.stack),Pi(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Pi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,N.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Pi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let fC=null;typeof MozWebSocket<"u"?fC=MozWebSocket:typeof WebSocket<"u"&&(fC=WebSocket);let w_=(()=>{class n{constructor(t,r,i,a,c,h,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=bw(this.connId),this.stats_=a1(r),this.connURL=n.connectionURL_(r,h,_,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,c){const h={v:"5"};return!(0,N.Yr)()&&typeof location<"u"&&location.hostname&&$O.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),c&&(h.p=c),qO(t,zO,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,yp.set("previous_websocket_failure",!0);try{let i;if((0,N.Yr)()){i={headers:{"User-Agent":`Firebase/5/${Xx}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,h=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new fC(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==fC&&!n.forceDisallow_}static previouslyFailed(){return yp.isInMemoryStorage||!0===yp.get("previous_websocket_failure")}markConnectionHealthy(){yp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,N.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,N.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,N.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=OO(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),eL=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Od,w_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=w_&&w_.isAvailable();let i=r&&!w_.previouslyFailed();if(t.webSocketOnly&&(r||os("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[w_];else{const a=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&a.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class aL{constructor(e,t,r,i,a,c,h,_,w,b){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=_,this.onKill_=w,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=bw("c:"+this.id+":"),this.transportManager_=new eL(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Cw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Tw("t",e),r=Tw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Tw("t",e),r=Tw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Tw("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?e1("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):e1("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&os("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Cw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Cw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(yp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class uL{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class cL{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,N.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,N.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class pC extends cL{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,N.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new pC}getInitialEvent(e){return(0,N.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const lL=32,dL=768;class Vn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Nn(){return new Vn("")}function pn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ld(n){return n.pieces_.length-n.pieceNum_}function Jn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Vn(n.pieces_,e)}function l1(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Sw(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function hL(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Vn(e,0)}function wr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Vn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Vn(t,0)}function gn(n){return n.pieceNum_>=n.pieces_.length}function Is(n,e){const t=pn(n),r=pn(e);if(null===t)return e;if(t===r)return Is(Jn(n),Jn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function V3(n,e){const t=Sw(n,0),r=Sw(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=wp(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function d1(n,e){if(Ld(n)!==Ld(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Wo(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Ld(n)>Ld(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class B3{constructor(e,t){this.errorPrefix_=t,this.parts_=Sw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,N.ug)(this.parts_[r]);fL(this)}}function fL(n){if(n.byteLength_>dL)throw new Error(n.errorPrefix_+"has a key path longer than "+dL+" bytes ("+n.byteLength_+").");if(n.parts_.length>lL)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+lL+") or object contains a cycle "+Ep(n))}function Ep(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class h1 extends cL{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new h1}getInitialEvent(e){return(0,N.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Aw=1e3;let mC,Ip=(()=>{class n extends uL{constructor(t,r,i,a,c,h,_,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=_,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=bw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Aw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,N.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");h1.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&pC.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,c={r:a,a:t,b:r};this.log_((0,N.Wl)(c)),(0,N.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new N.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const _=h.d;"ok"===h.s?r.resolve(_):r.reject(_)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,N.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,N.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(c,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,_=>{const w=_.d,b=_.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==b&&this.removeListen_(i,a),t.onComplete&&t.onComplete(b,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,N.r3)(t,"w")){const i=(0,N.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();os(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,N.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,N.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const c=a.s,h=a.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,N.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const c={p:t};a&&(c.q=i,c.t=a),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,c){this.initConnection_();const h={p:r,d:i};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,N.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):e1("Unrecognized action received from server: "+(0,N.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,N.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Aw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Aw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Aw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,me.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let _=!1,w=null;const b=function(){w?w.close():(_=!0,a())};t.realtime_={close:b,sendRequest:function(F){(0,N.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(F)}};const x=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[F,$]=yield Promise.all([t.authTokenProvider_.getToken(x),t.appCheckTokenProvider_.getToken(x)]);_?Pi("getToken() completed but was canceled"):(Pi("getToken() completed. Creating connection."),t.authToken_=F&&F.accessToken,t.appCheckToken_=$&&$.token,w=new aL(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ee=>{os(ee+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(F){t.log_("Failed to get token: "+F),_||(t.repoInfo_.nodeAdmin&&os(F),b())}}})()}interrupt(t){Pi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Pi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,N.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Aw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>t1(c)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Vn(t).toString();let a;if(this.listens.has(i)){const c=this.listens.get(i);a=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Pi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Pi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,N.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Xx.replace(/\./g,"-")]=1,(0,N.uI)()?t["framework.cordova"]=1:(0,N.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=pC.getInstance().currentlyOnline();return(0,N.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class _n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new _n(e,t)}}class gC{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new _n(kd,e),i=new _n(kd,t);return 0!==this.compare(r,i)}minPost(){return _n.MIN}}class mL extends gC{static get __EMPTY_NODE(){return mC}static set __EMPTY_NODE(e){mC=e}compare(e,t){return wp(e.name,t.name)}isDefinedOn(e){throw(0,N.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return _n.MIN}maxPost(){return new _n(qc,mC)}makePost(e,t){return(0,N.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new _n(e,mC)}toString(){return".key"}}const Uu=new mL;class _C{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let p1,Oa=(()=>{class n{constructor(t,r,i,a,c){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??zs.EMPTY_NODE,this.right=c??zs.EMPTY_NODE}copy(t,r,i,a,c){return new n(t??this.key,r??this.value,i??this.color,a??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const c=i(t,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===c?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return zs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return zs.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class zs{constructor(e,t=zs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new zs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Oa.BLACK,null,null))}remove(e){return new zs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Oa.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new _C(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new _C(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new _C(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new _C(this.root_,null,this.comparator_,!0,e)}}function K3(n,e){return wp(n.name,e.name)}function f1(n,e){return wp(n,e)}zs.EMPTY_NODE=new class q3{copy(e,t,r,i,a){return this}insert(e,t,r){return new Oa(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const _L=function(n){return"number"==typeof n?"number:"+LO(n):"string:"+n},yL=function(n){if(n.isLeafNode()){const e=n.val();(0,N.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,N.r3)(e,".sv"),"Priority must be a string or number.")}else(0,N.hu)(n===p1||n.isEmpty(),"priority of unexpected type.");(0,N.hu)(n===p1||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let vL,wL,EL,E_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,N.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),yL(this.priorityNode_)}static set __childrenNodeConstructor(t){vL=t}static get __childrenNodeConstructor(){return vL}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return gn(t)?this:".priority"===pn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=pn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,N.hu)(".priority"!==i||1===Ld(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Jn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+_L(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?LO(this.value_):this.value_,this.lazyHash_=NO(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,N.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,N.hu)(a>=0,"Unknown leaf type: "+r),(0,N.hu)(c>=0,"Unknown leaf type: "+i),a===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const ir=new class X3 extends gC{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?wp(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return _n.MIN}maxPost(){return new _n(qc,new E_("[PRIORITY-POST]",EL))}makePost(e,t){const r=wL(e);return new _n(t,new E_("[PRIORITY-POST]",r))}toString(){return".priority"}},J3=Math.log(2);class ej{constructor(e){this.count=parseInt(Math.log(e+1)/J3,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const yC=function(n,e,t,r){n.sort(e);const i=function(_,w){const b=w-_;let D,x;if(0===b)return null;if(1===b)return D=n[_],x=t?t(D):D,new Oa(x,D.node,Oa.BLACK,null,null);{const F=parseInt(b/2,10)+_,$=i(_,F),ee=i(F+1,w);return D=n[F],x=t?t(D):D,new Oa(x,D.node,Oa.BLACK,$,ee)}},h=function(_){let w=null,b=null,D=n.length;const x=function($,ee){const se=D-$,ft=D;D-=$;const yt=i(se+1,ft),lt=n[se],wt=t?t(lt):lt;F(new Oa(wt,lt.node,ee,null,yt))},F=function($){w?(w.left=$,w=$):(b=$,w=$)};for(let $=0;$<_.count;++$){const ee=_.nextBitIsOne(),se=Math.pow(2,_.count-($+1));ee?x(se,Oa.BLACK):(x(se,Oa.BLACK),x(se,Oa.RED))}return b}(new ej(n.length));return new zs(r||e,h)};let g1;const I_={};class Kc{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,N.hu)(I_&&ir,"ChildrenNode.ts has not been loaded"),g1=g1||new Kc({".priority":I_},{".priority":ir}),g1}get(e){const t=(0,N.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof zs?t:null}hasIndex(e){return(0,N.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,N.hu)(e!==Uu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(_n.Wrap);let h,c=a.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=a.getNext();h=i?yC(r,e.getCompare()):I_;const _=e.toString(),w=Object.assign({},this.indexSet_);w[_]=e;const b=Object.assign({},this.indexes_);return b[_]=h,new Kc(b,w)}addToIndexes(e,t){const r=(0,N.UI)(this.indexes_,(i,a)=>{const c=(0,N.DV)(this.indexSet_,a);if((0,N.hu)(c,"Missing index implementation for "+a),i===I_){if(c.isDefinedOn(e.node)){const h=[],_=t.getIterator(_n.Wrap);let w=_.getNext();for(;w;)w.name!==e.name&&h.push(w),w=_.getNext();return h.push(e),yC(h,c.getCompare())}return I_}{const h=t.get(e.name);let _=i;return h&&(_=_.remove(new _n(e.name,h))),_.insert(e,e.node)}});return new Kc(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,N.UI)(this.indexes_,i=>{if(i===I_)return i;{const a=t.get(e.name);return a?i.remove(new _n(e.name,a)):i}});return new Kc(r,this.indexSet_)}}let Rw,an=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&yL(this.priorityNode_),this.children_.isEmpty()&&(0,N.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Rw||(Rw=new n(new zs(f1),null,Kc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Rw}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Rw:r}}getChild(t){const r=pn(t);return null===r?this:this.getImmediateChild(r).getChild(Jn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,N.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new _n(t,r);let a,c;r.isEmpty()?(a=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?Rw:this.priorityNode_;return new n(a,h,c)}}updateChild(t,r){const i=pn(t);if(null===i)return r;{(0,N.hu)(".priority"!==pn(t)||1===Ld(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Jn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,c=!0;if(this.forEachChild(ir,(h,_)=>{r[h]=_.val(t),i++,c&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):c=!1}),!t&&c&&a<2*i){const h=[];for(const _ in r)h[_]=r[_];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+_L(this.getPriority().val())+":"),this.forEachChild(ir,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":NO(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const c=a.getPredecessorKey(new _n(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new _n(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new _n(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,_n.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,_n.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)>0;)a.getNext(),c=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===xw?-1:0}withIndex(t){if(t===Uu||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Uu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(ir),a=r.getIterator(ir);let c=i.getNext(),h=a.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=a.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(t){return t===Uu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const xw=new class tj extends an{constructor(){super(new zs(f1),an.EMPTY_NODE,Kc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return an.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(_n,{MIN:{value:new _n(kd,an.EMPTY_NODE)},MAX:{value:new _n(qc,xw)}}),mL.__EMPTY_NODE=an.EMPTY_NODE,E_.__childrenNodeConstructor=an,function Z3(n){p1=n}(xw),function Q3(n){EL=n}(xw);const nj=!0;function xr(n,e=null){if(null===n)return an.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,N.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new E_(n,xr(e));if(n instanceof Array||!nj){let t=an.EMPTY_NODE;return ki(n,(r,i)=>{if((0,N.r3)(n,r)&&"."!==r.substring(0,1)){const a=xr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(xr(e))}{const t=[];let r=!1;if(ki(n,(c,h)=>{if("."!==c.substring(0,1)){const _=xr(h);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new _n(c,_)))}}),0===t.length)return an.EMPTY_NODE;const a=yC(t,K3,c=>c.name,f1);if(r){const c=yC(t,ir.getCompare());return new an(a,xr(e),new Kc({".priority":c},{".priority":ir}))}return new an(a,xr(e),Kc.Default)}}!function Y3(n){wL=n}(xr);class m1 extends gC{constructor(e){super(),this.indexPath_=e,(0,N.hu)(!gn(e)&&".priority"!==pn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?wp(e.name,t.name):a}makePost(e,t){const r=xr(e),i=an.EMPTY_NODE.updateChild(this.indexPath_,r);return new _n(t,i)}maxPost(){const e=an.EMPTY_NODE.updateChild(this.indexPath_,xw);return new _n(qc,e)}toString(){return Sw(this.indexPath_,0).join("/")}}const _1=new class rj extends gC{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?wp(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return _n.MIN}maxPost(){return _n.MAX}makePost(e,t){const r=xr(e);return new _n(t,r)}toString(){return".value"}};function IL(n){return{type:"value",snapshotNode:n}}function b_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Mw(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Nw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class y1{constructor(e){this.index_=e}updateChild(e,t,r,i,a,c){(0,N.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(Mw(t,h)):(0,N.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(b_(t,r)):c.trackChildChange(Nw(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(ir,(i,a)=>{t.hasChild(i)||r.trackChildChange(Mw(i,a))}),t.isLeafNode()||t.forEachChild(ir,(i,a)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(a)||r.trackChildChange(Nw(i,a,c))}else r.trackChildChange(b_(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?an.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Pw{constructor(e){this.indexedFilter_=new y1(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Pw.getStartPost_(e),this.endPost_=Pw.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,a,c){return this.matches(new _n(t,r))||(r=an.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=an.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(an.EMPTY_NODE);const a=this;return t.forEachChild(ir,(c,h)=>{a.matches(new _n(c,h))||(i=i.updateImmediateChild(c,an.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class sj{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Pw(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,a,c){return this.rangedFilter_.matches(new _n(t,r))||(r=an.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,c):this.fullLimitUpdateChild_(e,t,r,a,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=an.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=an.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const h=a.getNext();if(this.withinDirectionalStart(h)){if(!this.withinDirectionalEnd(h))break;i=i.updateImmediateChild(h.name,h.node),c++}}}else{let a;i=t.withIndex(this.index_),i=i.updatePriority(an.EMPTY_NODE),a=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let c=0;for(;a.hasNext();){const h=a.getNext();c<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?c++:i=i.updateImmediateChild(h.name,an.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let c;if(this.reverse_){const D=this.index_.getCompare();c=(x,F)=>D(F,x)}else c=this.index_.getCompare();const h=e;(0,N.hu)(h.numChildren()===this.limit_,"");const _=new _n(t,r),w=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),b=this.rangedFilter_.matches(_);if(h.hasChild(t)){const D=h.getImmediateChild(t);let x=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=x&&(x.name===t||h.hasChild(x.name));)x=i.getChildAfterChild(this.index_,x,this.reverse_);const F=null==x?1:c(x,_);if(b&&!r.isEmpty()&&F>=0)return a?.trackChildChange(Nw(t,r,D)),h.updateImmediateChild(t,r);{a?.trackChildChange(Mw(t,D));const ee=h.updateImmediateChild(t,an.EMPTY_NODE);return null!=x&&this.rangedFilter_.matches(x)?(a?.trackChildChange(b_(x.name,x.node)),ee.updateImmediateChild(x.name,x.node)):ee}}return r.isEmpty()?e:b&&c(w,_)>=0?(null!=a&&(a.trackChildChange(Mw(w.name,w.node)),a.trackChildChange(b_(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(w.name,an.EMPTY_NODE)):e}}class vC{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ir}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:kd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:qc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,N.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ir}copy(){const e=new vC;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function v1(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function w1(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function wC(n,e){const t=n.copy();return t.index_=e,t}function bL(n){const e={};if(n.isDefault())return e;let t;if(n.index_===ir?t="$priority":n.index_===_1?t="$value":n.index_===Uu?t="$key":((0,N.hu)(n.index_ instanceof m1,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,N.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,N.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,N.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,N.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,N.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function TL(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==ir&&(e.i=n.index_.toString()),e}class EC extends uL{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=bw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,N.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=EC.getListenId_(e,r),h={};this.listens_[c]=h;const _=bL(e._queryParams);this.restRequest_(a+".json",_,(w,b)=>{let D=b;if(404===w&&(D=null,w=null),null===w&&this.onDataUpdate_(a,D,!1,r),(0,N.DV)(this.listens_,c)===h){let x;x=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(x,null)}})}unlisten(e,t){const r=EC.getListenId_(e,t);delete this.listens_[r]}get(e){const t=bL(e._queryParams),r=e._path.toString(),i=new N.BH;return this.restRequest_(r+".json",t,(a,c)=>{let h=c;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,N.xO)(t);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let _=null;if(h.status>=200&&h.status<300){try{_=(0,N.cI)(h.responseText)}catch{os("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,_)}else 401!==h.status&&404!==h.status&&os("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}}class dj{constructor(){this.rootNode_=an.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function IC(){return{value:null,children:new Map}}function T_(n,e,t){if(gn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=pn(e);n.children.has(r)||n.children.set(r,IC()),T_(n.children.get(r),e=Jn(e),t)}}function E1(n,e){if(gn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(ir,(r,i)=>{T_(n,new Vn(r),i)}),E1(n,e)}}if(n.children.size>0){const t=pn(e);return e=Jn(e),n.children.has(t)&&E1(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function I1(n,e,t){null!==n.value?t(e,n.value):function hj(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{I1(i,new Vn(e.toString()+"/"+r),t)})}class fj{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ki(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class mj{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new fj(e);const r=1e4+2e4*Math.random();Cw(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ki(e,(i,a)=>{a>0&&(0,N.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Cw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var qo=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(qo||(qo={})),qo))();function C1(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class bC{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=qo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(gn(this.path)){if(null!=this.affectedTree.value)return(0,N.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Vn(e));return new bC(Nn(),t,this.revert)}}return(0,N.hu)(pn(this.path)===e,"operationForChild called for unrelated child."),new bC(Jn(this.path),this.affectedTree,this.revert)}}class kw{constructor(e,t){this.source=e,this.path=t,this.type=qo.LISTEN_COMPLETE}operationForChild(e){return gn(this.path)?new kw(this.source,Nn()):new kw(this.source,Jn(this.path))}}class bp{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=qo.OVERWRITE}operationForChild(e){return gn(this.path)?new bp(this.source,Nn(),this.snap.getImmediateChild(e)):new bp(this.source,Jn(this.path),this.snap)}}class C_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=qo.MERGE}operationForChild(e){if(gn(this.path)){const t=this.children.subtree(new Vn(e));return t.isEmpty()?null:t.value?new bp(this.source,Nn(),t.value):new C_(this.source,Nn(),t)}return(0,N.hu)(pn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new C_(this.source,Jn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Fd{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(gn(e))return this.isFullyInitialized()&&!this.filtered_;const t=pn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class _j{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Ow(n,e,t,r,i,a){const c=r.filter(h=>h.type===t);c.sort((h,_)=>function wj(n,e,t){if(null==e.childName||null==t.childName)throw(0,N.g5)("Should only compare child_ events.");const r=new _n(e.childName,e.snapshotNode),i=new _n(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,_)),c.forEach(h=>{const _=function vj(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(w=>{w.respondsTo(h.type)&&e.push(w.createEvent(_,n.query_))})})}function TC(n,e){return{eventCache:n,serverCache:e}}function Lw(n,e,t,r){return TC(new Fd(e,t,r),n.serverCache)}function DL(n,e,t,r){return TC(n.eventCache,new Fd(e,t,r))}function CC(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Tp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let D1;class sr{constructor(e,t=(()=>(D1||(D1=new zs(i3)),D1))()){this.value=e,this.children=t}static fromObject(e){let t=new sr(null);return ki(e,(r,i)=>{t=t.set(new Vn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Nn(),value:this.value};if(gn(e))return null;{const r=pn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Jn(e),t);return null!=a?{path:wr(new Vn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(gn(e))return this;{const t=pn(e),r=this.children.get(t);return null!==r?r.subtree(Jn(e)):new sr(null)}}set(e,t){if(gn(e))return new sr(t,this.children);{const r=pn(e),a=(this.children.get(r)||new sr(null)).set(Jn(e),t),c=this.children.insert(r,a);return new sr(this.value,c)}}remove(e){if(gn(e))return this.children.isEmpty()?new sr(null):new sr(null,this.children);{const t=pn(e),r=this.children.get(t);if(r){const i=r.remove(Jn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new sr(null):new sr(this.value,a)}return this}}get(e){if(gn(e))return this.value;{const t=pn(e),r=this.children.get(t);return r?r.get(Jn(e)):null}}setTree(e,t){if(gn(e))return t;{const r=pn(e),a=(this.children.get(r)||new sr(null)).setTree(Jn(e),t);let c;return c=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new sr(this.value,c)}}fold(e){return this.fold_(Nn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(wr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Nn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(gn(e))return null;{const a=pn(e),c=this.children.get(a);return c?c.findOnPath_(Jn(e),wr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Nn(),t)}foreachOnPath_(e,t,r){if(gn(e))return this;{this.value&&r(t,this.value);const i=pn(e),a=this.children.get(i);return a?a.foreachOnPath_(Jn(e),wr(t,i),r):new sr(null)}}foreach(e){this.foreach_(Nn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(wr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class La{constructor(e){this.writeTree_=e}static empty(){return new La(new sr(null))}}function Fw(n,e,t){if(gn(e))return new La(new sr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const c=Is(i,e);return a=a.updateChild(c,t),new La(n.writeTree_.set(i,a))}{const i=new sr(t),a=n.writeTree_.setTree(e,i);return new La(a)}}}function S1(n,e,t){let r=n;return ki(t,(i,a)=>{r=Fw(r,wr(e,i),a)}),r}function SL(n,e){if(gn(e))return La.empty();{const t=n.writeTree_.setTree(e,new sr(null));return new La(t)}}function A1(n,e){return null!=Cp(n,e)}function Cp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Is(t.path,e)):null}function AL(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(ir,(r,i)=>{e.push(new _n(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new _n(r,i.value))}),e}function Ud(n,e){if(gn(e))return n;{const t=Cp(n,e);return new La(null!=t?new sr(t):n.writeTree_.subtree(e))}}function R1(n){return n.writeTree_.isEmpty()}function D_(n,e){return RL(Nn(),n.writeTree_,e)}function RL(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,N.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=RL(wr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(wr(n,".priority"),r)),t}}function DC(n,e){return kL(e,n)}function Dj(n,e){if(n.snap)return Wo(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Wo(wr(n.path,t),e))return!0;return!1}function Aj(n){return n.visible}function xL(n,e,t){let r=La.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const c=a.path;let h;if(a.snap)Wo(t,c)?(h=Is(t,c),r=Fw(r,h,a.snap)):Wo(c,t)&&(h=Is(c,t),r=Fw(r,Nn(),a.snap.getChild(h)));else{if(!a.children)throw(0,N.g5)("WriteRecord should have .snap or .children");if(Wo(t,c))h=Is(t,c),r=S1(r,h,a.children);else if(Wo(c,t))if(h=Is(c,t),gn(h))r=S1(r,Nn(),a.children);else{const _=(0,N.DV)(a.children,pn(h));if(_){const w=_.getChild(Jn(h));r=Fw(r,Nn(),w)}}}}}return r}function ML(n,e,t,r,i){if(r||i){const a=Ud(n.visibleWrites,e);return!i&&R1(a)?t:i||null!=t||A1(a,Nn())?D_(xL(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(Wo(w.path,e)||Wo(e,w.path))},e),t||an.EMPTY_NODE):null}{const a=Cp(n.visibleWrites,e);if(null!=a)return a;{const c=Ud(n.visibleWrites,e);return R1(c)?t:null!=t||A1(c,Nn())?D_(c,t||an.EMPTY_NODE):null}}}function SC(n,e,t,r){return ML(n.writeTree,n.treePath,e,t,r)}function x1(n,e){return function Rj(n,e,t){let r=an.EMPTY_NODE;const i=Cp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ir,(a,c)=>{r=r.updateImmediateChild(a,c)}),r;if(t){const a=Ud(n.visibleWrites,e);return t.forEachChild(ir,(c,h)=>{const _=D_(Ud(a,new Vn(c)),h);r=r.updateImmediateChild(c,_)}),AL(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return AL(Ud(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function NL(n,e,t,r){return function xj(n,e,t,r,i){(0,N.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=wr(e,t);if(A1(n.visibleWrites,a))return null;{const c=Ud(n.visibleWrites,a);return R1(c)?i.getChild(t):D_(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function AC(n,e){return function Nj(n,e){return Cp(n.visibleWrites,e)}(n.writeTree,wr(n.treePath,e))}function M1(n,e,t){return function Mj(n,e,t,r){const i=wr(e,t),a=Cp(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?D_(Ud(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function PL(n,e){return kL(wr(n.treePath,e),n.writeTree)}function kL(n,e){return{treePath:n,writeTree:e}}class Lj{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,N.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,N.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,Nw(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,Mw(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,b_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,N.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Nw(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const OL=new class Fj{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class N1{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Fd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return M1(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Tp(this.viewCache_),a=function Oj(n,e,t,r,i,a){return function Pj(n,e,t,r,i,a,c){let h;const _=Ud(n.visibleWrites,e),w=Cp(_,Nn());if(null!=w)h=w;else{if(null==t)return[];h=D_(_,t)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const b=[],D=c.getCompare(),x=a?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c);let F=x.getNext();for(;F&&b.length<i;)0!==D(F,r)&&b.push(F),F=x.getNext();return b}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function LL(n,e,t,r,i,a){const c=e.eventCache;if(null!=AC(r,t))return e;{let h,_;if(gn(t))if((0,N.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=Tp(e),D=x1(r,w instanceof an?w:an.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),D,a)}else{const w=SC(r,Tp(e));h=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=pn(t);if(".priority"===w){(0,N.hu)(1===Ld(t),"Can't have a priority with additional path components");const b=c.getNode();_=e.serverCache.getNode();const D=NL(r,t,b,_);h=null!=D?n.filter.updatePriority(b,D):c.getNode()}else{const b=Jn(t);let D;if(c.isCompleteForChild(w)){_=e.serverCache.getNode();const x=NL(r,t,c.getNode(),_);D=null!=x?c.getNode().getImmediateChild(w).updateChild(b,x):c.getNode().getImmediateChild(w)}else D=M1(r,w,e.serverCache);h=null!=D?n.filter.updateChild(c.getNode(),w,D,b,i,a):c.getNode()}}return Lw(e,h,c.isFullyInitialized()||gn(t),n.filter.filtersNodes())}}function RC(n,e,t,r,i,a,c,h){const _=e.serverCache;let w;const b=c?n.filter:n.filter.getIndexedFilter();if(gn(t))w=b.updateFullNode(_.getNode(),r,null);else if(b.filtersNodes()&&!_.isFiltered()){const F=_.getNode().updateChild(t,r);w=b.updateFullNode(_.getNode(),F,null)}else{const F=pn(t);if(!_.isCompleteForPath(t)&&Ld(t)>1)return e;const $=Jn(t),se=_.getNode().getImmediateChild(F).updateChild($,r);w=".priority"===F?b.updatePriority(_.getNode(),se):b.updateChild(_.getNode(),F,se,$,OL,null)}const D=DL(e,w,_.isFullyInitialized()||gn(t),b.filtersNodes());return LL(n,D,t,i,new N1(i,D,a),h)}function P1(n,e,t,r,i,a,c){const h=e.eventCache;let _,w;const b=new N1(i,e,a);if(gn(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,c),_=Lw(e,w,!0,n.filter.filtersNodes());else{const D=pn(t);if(".priority"===D)w=n.filter.updatePriority(e.eventCache.getNode(),r),_=Lw(e,w,h.isFullyInitialized(),h.isFiltered());else{const x=Jn(t),F=h.getNode().getImmediateChild(D);let $;if(gn(x))$=r;else{const ee=b.getCompleteChild(D);$=null!=ee?".priority"===l1(x)&&ee.getChild(hL(x)).isEmpty()?ee:ee.updateChild(x,r):an.EMPTY_NODE}_=F.equals($)?e:Lw(e,n.filter.updateChild(h.getNode(),D,$,x,b,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return _}function FL(n,e){return n.eventCache.isCompleteForChild(e)}function UL(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function k1(n,e,t,r,i,a,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,_=e;w=gn(t)?r:new sr(null).setTree(t,r);const b=e.serverCache.getNode();return w.children.inorderTraversal((D,x)=>{if(b.hasChild(D)){const $=UL(0,e.serverCache.getNode().getImmediateChild(D),x);_=RC(n,_,new Vn(D),$,i,a,c,h)}}),w.children.inorderTraversal((D,x)=>{const F=!e.serverCache.isCompleteForChild(D)&&null===x.value;if(!b.hasChild(D)&&!F){const ee=UL(0,e.serverCache.getNode().getImmediateChild(D),x);_=RC(n,_,new Vn(D),ee,i,a,c,h)}}),_}class Wj{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new y1(r.getIndex()),a=function oj(n){return n.loadsAllData()?new y1(n.getIndex()):n.hasLimit()?new sj(n):new Pw(n)}(r);this.processor_=function Uj(n){return{filter:n}}(a);const c=t.serverCache,h=t.eventCache,_=i.updateFullNode(an.EMPTY_NODE,c.getNode(),null),w=a.updateFullNode(an.EMPTY_NODE,h.getNode(),null),b=new Fd(_,c.isFullyInitialized(),i.filtersNodes()),D=new Fd(w,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=TC(D,b),this.eventGenerator_=new _j(this.query_)}get query(){return this.query_}}function Zj(n,e){const t=Tp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!gn(e)&&!t.getImmediateChild(pn(e)).isEmpty())?t.getChild(e):null}function VL(n){return 0===n.eventRegistrations_.length}function BL(n,e,t){const r=[];if(t){(0,N.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const c=n.eventRegistrations_[a];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function jL(n,e,t,r){e.type===qo.MERGE&&null!==e.source.queryId&&((0,N.hu)(Tp(n.viewCache_),"We should always have a full cache before handling merges"),(0,N.hu)(CC(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function Bj(n,e,t,r,i){const a=new Lj;let c,h;if(t.type===qo.OVERWRITE){const w=t;w.source.fromUser?c=P1(n,e,w.path,w.snap,r,i,a):((0,N.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered()&&!gn(w.path),c=RC(n,e,w.path,w.snap,r,i,h,a))}else if(t.type===qo.MERGE){const w=t;w.source.fromUser?c=function $j(n,e,t,r,i,a,c){let h=e;return r.foreach((_,w)=>{const b=wr(t,_);FL(e,pn(b))&&(h=P1(n,h,b,w,i,a,c))}),r.foreach((_,w)=>{const b=wr(t,_);FL(e,pn(b))||(h=P1(n,h,b,w,i,a,c))}),h}(n,e,w.path,w.children,r,i,a):((0,N.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered(),c=k1(n,e,w.path,w.children,r,i,h,a))}else if(t.type===qo.ACK_USER_WRITE){const w=t;c=w.revert?function zj(n,e,t,r,i,a){let c;if(null!=AC(r,t))return e;{const h=new N1(r,e,i),_=e.eventCache.getNode();let w;if(gn(t)||".priority"===pn(t)){let b;if(e.serverCache.isFullyInitialized())b=SC(r,Tp(e));else{const D=e.serverCache.getNode();(0,N.hu)(D instanceof an,"serverChildren would be complete if leaf node"),b=x1(r,D)}w=n.filter.updateFullNode(_,b,a)}else{const b=pn(t);let D=M1(r,b,e.serverCache);null==D&&e.serverCache.isCompleteForChild(b)&&(D=_.getImmediateChild(b)),w=null!=D?n.filter.updateChild(_,b,D,Jn(t),h,a):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(_,b,an.EMPTY_NODE,Jn(t),h,a):_,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=SC(r,Tp(e)),c.isLeafNode()&&(w=n.filter.updateFullNode(w,c,a)))}return c=e.serverCache.isFullyInitialized()||null!=AC(r,Nn()),Lw(e,w,c,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function Hj(n,e,t,r,i,a,c){if(null!=AC(i,t))return e;const h=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(gn(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return RC(n,e,t,_.getNode().getChild(t),i,a,h,c);if(gn(t)){let w=new sr(null);return _.getNode().forEachChild(Uu,(b,D)=>{w=w.set(new Vn(b),D)}),k1(n,e,t,w,i,a,h,c)}return e}{let w=new sr(null);return r.foreach((b,D)=>{const x=wr(t,b);_.isCompleteForPath(x)&&(w=w.set(b,_.getNode().getChild(x)))}),k1(n,e,t,w,i,a,h,c)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==qo.LISTEN_COMPLETE)throw(0,N.g5)("Unknown operation type: "+t.type);c=function Gj(n,e,t,r,i){const a=e.serverCache;return LL(n,DL(e,a.getNode(),a.isFullyInitialized()||gn(t),a.isFiltered()),t,r,OL,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function jj(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=CC(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(IL(CC(e)))}}(e,c,_),{viewCache:c,changes:_}}(n.processor_,i,e,t,r);return function Vj(n,e){(0,N.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,N.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,N.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,$L(n,a.changes,a.viewCache.eventCache.getNode(),null)}function $L(n,e,t,r){return function yj(n,e,t,r){const i=[],a=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(function ij(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),Ow(n,i,"child_removed",e,r,t),Ow(n,i,"child_added",e,r,t),Ow(n,i,"child_moved",a,r,t),Ow(n,i,"child_changed",e,r,t),Ow(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let xC,NC;class HL{constructor(){this.views=new Map}}function O1(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,N.hu)(null!=a,"SyncTree gave us an op for an invalid query."),jL(a,e,t,r)}{let a=[];for(const c of n.views.values())a=a.concat(jL(c,e,t,r));return a}}function GL(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let h=SC(t,i?r:null),_=!1;h?_=!0:r instanceof an?(h=x1(t,r),_=!1):(h=an.EMPTY_NODE,_=!1);const w=TC(new Fd(h,_,!1),new Fd(r,i,!1));return new Wj(e,w)}return c}function zL(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Vd(n,e){let t=null;for(const r of n.views.values())t=t||Zj(r,e);return t}function WL(n,e){return e._queryParams.loadsAllData()?MC(n):n.views.get(e._queryIdentifier)}function qL(n,e){return null!=WL(n,e)}function Bd(n){return null!=MC(n)}function MC(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let s$=1;class KL{constructor(e){this.listenProvider_=e,this.syncPointTree_=new sr(null),this.pendingWriteTree_=function kj(){return{visibleWrites:La.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function L1(n,e,t,r,i){return function Ij(n,e,t,r,i){(0,N.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Fw(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?S_(n,new bp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function jd(n,e,t=!1){const r=function Tj(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Cj(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,N.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=t&&Dj(h,r.path)?i=!1:Wo(r.path,h.path)&&(a=!0)),c--}return!!i&&(a?(function Sj(n){n.visibleWrites=xL(n.allWrites,Aj,Nn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=SL(n.visibleWrites,r.path):ki(r.children,_=>{n.visibleWrites=SL(n.visibleWrites,wr(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new sr(null);return null!=r.snap?a=a.set(Nn(),!0):ki(r.children,c=>{a=a.set(new Vn(c),!0)}),S_(n,new bC(r.path,a,t))}return[]}function Uw(n,e,t){return S_(n,new bp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function PC(n,e,t,r,i=!1){const a=e._path,c=n.syncPointTree_.get(a);let h=[];if(c&&("default"===e._queryIdentifier||qL(c,e))){const _=function n$(n,e,t,r){const i=e._queryIdentifier,a=[];let c=[];const h=Bd(n);if("default"===i)for(const[_,w]of n.views.entries())c=c.concat(BL(w,t,r)),VL(w)&&(n.views.delete(_),w.query._queryParams.loadsAllData()||a.push(w.query));else{const _=n.views.get(i);_&&(c=c.concat(BL(_,t,r)),VL(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return h&&!Bd(n)&&a.push(new(function Jj(){return(0,N.hu)(xC,"Reference.ts has not been loaded"),xC}())(e._repo,e._path)),{removed:a,events:c}}(c,e,t,r);(function e$(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const w=_.removed;if(h=_.events,!i){const b=-1!==w.findIndex(x=>x._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(a,(x,F)=>Bd(F));if(b&&!D){const x=n.syncPointTree_.subtree(a);if(!x.isEmpty()){const F=function h$(n){return n.fold((e,t,r)=>{if(t&&Bd(t))return[MC(t)];{let i=[];return t&&(i=zL(t)),ki(r,(a,c)=>{i=i.concat(c)}),i}})}(x);for(let $=0;$<F.length;++$){const ee=F[$],se=ee.query,ft=XL(n,ee);n.listenProvider_.startListening(Bw(se),Vw(n,se),ft.hashFn,ft.onComplete)}}}!D&&w.length>0&&!r&&(b?n.listenProvider_.stopListening(Bw(e),null):w.forEach(x=>{const F=n.queryToTagMap.get(OC(x));n.listenProvider_.stopListening(Bw(x),F)}))}!function f$(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=OC(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,w)}return h}function ZL(n,e,t,r){const i=U1(n,r);if(null!=i){const a=V1(i),c=a.path,h=a.queryId,_=Is(c,e);return B1(n,c,new bp(C1(h),_,t))}return[]}function F1(n,e,t,r=!1){const i=e._path;let a=null,c=!1;n.syncPointTree_.foreachOnPath(i,(x,F)=>{const $=Is(x,i);a=a||Vd(F,$),c=c||Bd(F)});let _,h=n.syncPointTree_.get(i);h?(c=c||Bd(h),a=a||Vd(h,Nn())):(h=new HL,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=a?_=!0:(_=!1,a=an.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((F,$)=>{const ee=Vd($,Nn());ee&&(a=a.updateImmediateChild(F,ee))}));const w=qL(h,e);if(!w&&!e._queryParams.loadsAllData()){const x=OC(e);(0,N.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const F=function p$(){return s$++}();n.queryToTagMap.set(x,F),n.tagToQueryMap.set(F,x)}let D=function t$(n,e,t,r,i,a){const c=GL(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function Yj(n,e){n.eventRegistrations_.push(e)}(c,t),function Qj(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(ir,(a,c)=>{r.push(b_(a,c))}),t.isFullyInitialized()&&r.push(IL(t.getNode())),$L(n,r,t.getNode(),e)}(c,t)}(h,e,t,DC(n.pendingWriteTree_,i),a,_);if(!w&&!c&&!r){const x=WL(h,e);D=D.concat(function g$(n,e,t){const r=e._path,i=Vw(n,e),a=XL(n,t),c=n.listenProvider_.startListening(Bw(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,N.hu)(!Bd(h.value),"If we're adding a query, it shouldn't be shadowed");else{const _=h.fold((w,b,D)=>{if(!gn(w)&&b&&Bd(b))return[MC(b).query];{let x=[];return b&&(x=x.concat(zL(b).map(F=>F.query))),ki(D,(F,$)=>{x=x.concat($)}),x}});for(let w=0;w<_.length;++w){const b=_[w];n.listenProvider_.stopListening(Bw(b),Vw(n,b))}}return c}(n,e,x))}return D}function kC(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(c,h)=>{const w=Vd(h,Is(c,e));if(w)return w});return ML(i,e,a,t,!0)}function S_(n,e){return YL(e,n.syncPointTree_,null,DC(n.pendingWriteTree_,Nn()))}function YL(n,e,t,r){if(gn(n.path))return QL(n,e,t,r);{const i=e.get(Nn());null==t&&null!=i&&(t=Vd(i,Nn()));let a=[];const c=pn(n.path),h=n.operationForChild(c),_=e.children.get(c);if(_&&h){const w=t?t.getImmediateChild(c):null,b=PL(r,c);a=a.concat(YL(h,_,w,b))}return i&&(a=a.concat(O1(i,n,r,t))),a}}function QL(n,e,t,r){const i=e.get(Nn());null==t&&null!=i&&(t=Vd(i,Nn()));let a=[];return e.children.inorderTraversal((c,h)=>{const _=t?t.getImmediateChild(c):null,w=PL(r,c),b=n.operationForChild(c);b&&(a=a.concat(QL(b,h,_,w)))}),i&&(a=a.concat(O1(i,n,r,t))),a}function XL(n,e){const t=e.query,r=Vw(n,t);return{hashFn:()=>(function qj(n){return n.viewCache_.serverCache.getNode()}(e)||an.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function c$(n,e,t){const r=U1(n,t);if(r){const i=V1(r),a=i.path,c=i.queryId,h=Is(a,e);return B1(n,a,new kw(C1(c),h))}return[]}(n,t._path,r):function u$(n,e){return S_(n,new kw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function a3(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return PC(n,t,null,a)}}}}function Vw(n,e){const t=OC(e);return n.queryToTagMap.get(t)}function OC(n){return n._path.toString()+"$"+n._queryIdentifier}function U1(n,e){return n.tagToQueryMap.get(e)}function V1(n){const e=n.indexOf("$");return(0,N.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Vn(n.substr(0,e))}}function B1(n,e,t){const r=n.syncPointTree_.get(e);return(0,N.hu)(r,"Missing sync point for query tag that we're tracking"),O1(r,t,DC(n.pendingWriteTree_,e),null)}function Bw(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function i$(){return(0,N.hu)(NC,"Reference.ts has not been loaded"),NC}())(n._repo,n._path):n}class j1{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new j1(t)}node(){return this.node_}}class $1{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=wr(this.path_,e);return new $1(this.syncTree_,t)}node(){return kC(this.syncTree_,this.path_)}}const m$=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},JL=function(n,e,t){return n&&"object"==typeof n?((0,N.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?_$(n[".sv"],e,t):"object"==typeof n[".sv"]?y$(n[".sv"],e):void(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},_$=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,N.hu)(!1,"Unexpected server value: "+n)},y$=function(n,e,t){n.hasOwnProperty("increment")||(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,N.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,N.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},eF=function(n,e,t,r){return G1(e,new $1(t,n),r)},H1=function(n,e,t){return G1(n,new j1(e),t)};function G1(n,e,t){const r=n.getPriority().val(),i=JL(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const c=n,h=JL(c.getValue(),e,t);return h!==c.getValue()||i!==c.getPriority().val()?new E_(h,xr(i)):n}{const c=n;return a=c,i!==c.getPriority().val()&&(a=a.updatePriority(new E_(i))),c.forEachChild(ir,(h,_)=>{const w=G1(_,e.getImmediateChild(h),t);w!==_&&(a=a.updateImmediateChild(h,w))}),a}}class z1{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function LC(n,e){let t=e instanceof Vn?e:new Vn(e),r=n,i=pn(t);for(;null!==i;){const a=(0,N.DV)(r.node.children,i)||{children:{},childCount:0};r=new z1(i,r,a),t=Jn(t),i=pn(t)}return r}function Dp(n){return n.node.value}function W1(n,e){n.node.value=e,q1(n)}function tF(n){return n.node.childCount>0}function FC(n,e){ki(n.node.children,(t,r)=>{e(new z1(t,n,r))})}function nF(n,e,t,r){t&&!r&&e(n),FC(n,i=>{nF(i,e,!0,r)}),t&&r&&e(n)}function jw(n){return new Vn(null===n.parent?n.name:jw(n.parent)+"/"+n.name)}function q1(n){null!==n.parent&&function E$(n,e,t){const r=function v$(n){return void 0===Dp(n)&&!tF(n)}(t),i=(0,N.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,q1(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,q1(n))}(n.parent,n.name,n)}const I$=/[\[\].#$\/\u0000-\u001F\u007F]/,b$=/[\[\].#$\u0000-\u001F\u007F]/,K1=10485760,UC=function(n){return"string"==typeof n&&0!==n.length&&!I$.test(n)},rF=function(n){return"string"==typeof n&&0!==n.length&&!b$.test(n)},$w=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!dC(n)||n&&"object"==typeof n&&(0,N.r3)(n,".sv")},Vu=function(n,e,t,r){r&&void 0===e||Hw((0,N.gK)(n,"value"),e,t)},Hw=function(n,e,t){const r=t instanceof Vn?new B3(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Ep(r));if("function"==typeof e)throw new Error(n+"contains a function "+Ep(r)+" with contents = "+e.toString());if(dC(e))throw new Error(n+"contains "+e.toString()+" "+Ep(r));if("string"==typeof e&&e.length>K1/3&&(0,N.ug)(e)>K1)throw new Error(n+"contains a string greater than "+K1+" utf8 bytes "+Ep(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(ki(e,(c,h)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(a=!0,!UC(c)))throw new Error(n+" contains an invalid key ("+c+") "+Ep(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function j3(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,N.ug)(e),fL(n)})(r,c),Hw(n,h,r),function $3(n){const e=n.parts_.pop();n.byteLength_-=(0,N.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Ep(r)+" in addition to actual children.")}},iF=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,N.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];ki(e,(c,h)=>{const _=new Vn(c);if(Hw(i,h,wr(t,_)),".priority"===l1(_)&&!$w(h))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=Sw(r);for(let c=0;c<a.length;c++)if((".priority"!==a[c]||c!==a.length-1)&&!UC(a[c]))throw new Error(n+"contains an invalid key ("+a[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(V3);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Wo(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},Z1=function(n,e,t){if(!t||void 0!==e){if(dC(e))throw new Error((0,N.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!$w(e))throw new Error((0,N.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Gw=function(n,e,t,r){if(!(r&&void 0===t||UC(t)))throw new Error((0,N.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},zw=function(n,e,t,r){if(!(r&&void 0===t||rF(t)))throw new Error((0,N.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},D$=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),zw(n,e,t,r)},Ko=function(n,e){if(".info"===pn(e))throw new Error(n+" failed = Can't modify data under /.info/")},sF=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!UC(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),rF(n)}(t))throw new Error((0,N.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class S${constructor(){this.eventLists_=[],this.recursionDepth_=0}}function VC(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!d1(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function oF(n,e,t){VC(n,t),aF(n,r=>d1(r,e))}function po(n,e,t){VC(n,t),aF(n,r=>Wo(r,e)||Wo(e,r))}function aF(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(A$(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function A$(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();vp&&Pi("event: "+t.toString()),v_(r)}}}const uF="repo_interrupt",R$=25;class x${constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new S$,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=IC(),this.transactionQueueTree_=new z1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function cF(n){const t=n.infoData_.getNode(new Vn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Ww(n){return m$({timestamp:cF(n)})}function lF(n,e,t,r,i){n.dataUpdateCount++;const a=new Vn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const _=(0,N.UI)(t,w=>xr(w));c=function l$(n,e,t,r){const i=U1(n,r);if(i){const a=V1(i),c=a.path,h=a.queryId,_=Is(c,e),w=sr.fromObject(t);return B1(n,c,new C_(C1(h),_,w))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=xr(t);c=ZL(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,N.UI)(t,w=>xr(w));c=function a$(n,e,t){const r=sr.fromObject(t);return S_(n,new C_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=xr(t);c=Uw(n.serverSyncTree_,a,_)}let h=a;c.length>0&&(h=R_(n,a)),po(n.eventQueue_,h,c)}function dF(n,e){Y1(n,"connected",e),!1===e&&function O$(n){A_(n,"onDisconnectEvents");const e=Ww(n),t=IC();I1(n.onDisconnect_,Nn(),(i,a)=>{const c=eF(i,a,n.serverSyncTree_,e);T_(t,i,c)});let r=[];I1(t,Nn(),(i,a)=>{r=r.concat(Uw(n.serverSyncTree_,i,a));const c=eM(n,i);R_(n,c)}),n.onDisconnect_=IC(),po(n.eventQueue_,Nn(),r)}(n)}function Y1(n,e,t){const r=new Vn("/.info/"+e),i=xr(t);n.infoData_.updateSnapshot(r,i);const a=Uw(n.infoSyncTree_,r,i);po(n.eventQueue_,r,a)}function BC(n){return n.nextWriteId_++}function Q1(n,e,t,r,i){A_(n,"set",{path:e.toString(),value:t,priority:r});const a=Ww(n),c=xr(t,r),h=kC(n.serverSyncTree_,e),_=H1(c,h,a),w=BC(n),b=L1(n.serverSyncTree_,e,_,w,!0);VC(n.eventQueue_,b),n.server_.put(e.toString(),c.val(!0),(x,F)=>{const $="ok"===x;$||os("set at "+e+" failed: "+x);const ee=jd(n.serverSyncTree_,w,!$);po(n.eventQueue_,e,ee),$d(0,i,x,F)});const D=eM(n,e);R_(n,D),po(n.eventQueue_,D,[])}function L$(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&E1(n.onDisconnect_,e),$d(0,t,r,i)})}function hF(n,e,t,r){const i=xr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,c)=>{"ok"===a&&T_(n.onDisconnect_,e,i),$d(0,r,a,c)})}function X1(n,e,t){let r;r=".info"===pn(e._path)?PC(n.infoSyncTree_,e,t):PC(n.serverSyncTree_,e,t),oF(n.eventQueue_,e._path,r)}function fF(n){n.persistentConnection_&&n.persistentConnection_.interrupt(uF)}function A_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Pi(t,...e)}function $d(n,e,t,r){e&&v_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const c=new Error(a);c.code=i,e(c)}})}function J1(n,e,t){return kC(n.serverSyncTree_,e,t)||an.EMPTY_NODE}function jC(n,e=n.transactionQueueTree_){if(e||$C(n,e),Dp(e)){const t=gF(n,e);(0,N.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function $$(n,e,t){const r=t.map(w=>w.currentWriteId),i=J1(n,e,r);let a=i;const c=i.hash();for(let w=0;w<t.length;w++){const b=t[w];(0,N.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const D=Is(e,b.path);a=a.updateChild(D,b.currentOutputSnapshotRaw)}const h=a.val(!0),_=e;n.server_.put(_.toString(),h,w=>{A_(n,"transaction put response",{path:_.toString(),status:w});let b=[];if("ok"===w){const D=[];for(let x=0;x<t.length;x++)t[x].status=2,b=b.concat(jd(n.serverSyncTree_,t[x].currentWriteId)),t[x].onComplete&&D.push(()=>t[x].onComplete(null,!0,t[x].currentOutputSnapshotResolved)),t[x].unwatcher();$C(n,LC(n.transactionQueueTree_,e)),jC(n,n.transactionQueueTree_),po(n.eventQueue_,e,b);for(let x=0;x<D.length;x++)v_(D[x])}else{if("datastale"===w)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{os("transaction at "+_.toString()+" failed: "+w);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=w}R_(n,e)}},c)}(n,jw(e),t)}else tF(e)&&FC(e,t=>{jC(n,t)})}function R_(n,e){const t=pF(n,e),r=jw(t);return function H$(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const _=e[h],w=Is(t,_.path);let D,b=!1;if((0,N.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)b=!0,D=_.abortReason,i=i.concat(jd(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=R$)b=!0,D="maxretry",i=i.concat(jd(n.serverSyncTree_,_.currentWriteId,!0));else{const x=J1(n,_.path,c);_.currentInputSnapshot=x;const F=e[h].update(x.val());if(void 0!==F){Hw("transaction failed: Data returned ",F,_.path);let $=xr(F);"object"==typeof F&&null!=F&&(0,N.r3)(F,".priority")||($=$.updatePriority(x.getPriority()));const se=_.currentWriteId,ft=Ww(n),yt=H1($,x,ft);_.currentOutputSnapshotRaw=$,_.currentOutputSnapshotResolved=yt,_.currentWriteId=BC(n),c.splice(c.indexOf(se),1),i=i.concat(L1(n.serverSyncTree_,_.path,yt,_.currentWriteId,_.applyLocally)),i=i.concat(jd(n.serverSyncTree_,se,!0))}else b=!0,D="nodata",i=i.concat(jd(n.serverSyncTree_,_.currentWriteId,!0))}po(n.eventQueue_,t,i),i=[],b&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===D?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(D),!1,null)))}$C(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)v_(r[h]);jC(n,n.transactionQueueTree_)}(n,gF(n,t),r),r}function pF(n,e){let t,r=n.transactionQueueTree_;for(t=pn(e);null!==t&&void 0===Dp(r);)r=LC(r,t),t=pn(e=Jn(e));return r}function gF(n,e){const t=[];return mF(n,e,t),t.sort((r,i)=>r.order-i.order),t}function mF(n,e,t){const r=Dp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);FC(e,i=>{mF(n,i,t)})}function $C(n,e){const t=Dp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,W1(e,t.length>0?t:void 0)}FC(e,r=>{$C(n,r)})}function eM(n,e){const t=jw(pF(n,e)),r=LC(n.transactionQueueTree_,e);return function w$(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{tM(n,i)}),tM(n,r),nF(r,i=>{tM(n,i)}),t}function tM(n,e){const t=Dp(e);if(t){const r=[];let i=[],a=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,N.hu)(a===c-1,"All SENT items should be at beginning of queue."),a=c,t[c].status=3,t[c].abortReason="set"):((0,N.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(jd(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===a?W1(e,void 0):t.length=a+1,po(n.eventQueue_,jw(e),i);for(let c=0;c<r.length;c++)v_(r[c])}}const nM=function(n,e){const t=W$(n),r=t.namespace;return"firebase.com"===t.domain&&Fu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Fu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&os("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new r1(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Vn(t.pathString)}},W$=function(n){let e="",t="",r="",i="",a="",c=!0,h="https",_=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(h=n.substring(0,w-1),n=n.substring(w+2));let b=n.indexOf("/");-1===b&&(b=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(b,D)),b<D&&(i=function G$(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(b,D)));const x=function z$(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):os(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));w=e.indexOf(":"),w>=0?(c="https"===h||"wss"===h,_=parseInt(e.substring(w+1),10)):w=e.length;const F=e.slice(0,w);if("localhost"===F.toLowerCase())t="localhost";else if(F.split(".").length<=2)t=F;else{const $=e.indexOf(".");r=e.substring(0,$).toLowerCase(),t=e.substring($+1),a=r}"ns"in x&&(a=x.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:c,scheme:h,pathString:i,namespace:a}},_F="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",q$=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=_F.charAt(t%64),t=Math.floor(t/64);(0,N.hu)(0===t,"Cannot push at time == 0");let c=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=_F.charAt(e[i]);return(0,N.hu)(20===c.length,"nextPushId: Length should be 20."),c}}();class yF{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,N.Wl)(this.snapshot.exportVal())}}class vF{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class rM{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,N.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class wF{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new N.BH;return L$(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ko("OnDisconnect.remove",this._path);const e=new N.BH;return hF(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ko("OnDisconnect.set",this._path),Vu("OnDisconnect.set",e,this._path,!1);const t=new N.BH;return hF(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ko("OnDisconnect.setWithPriority",this._path),Vu("OnDisconnect.setWithPriority",e,this._path,!1),Z1("OnDisconnect.setWithPriority",t,!1);const r=new N.BH;return function F$(n,e,t,r,i){const a=xr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(c,h)=>{"ok"===c&&T_(n.onDisconnect_,e,a),$d(0,i,c,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Ko("OnDisconnect.update",this._path),iF("OnDisconnect.update",e,this._path,!1);const t=new N.BH;return function U$(n,e,t,r){if((0,N.xb)(t))return Pi("onDisconnect().update() called with empty data.  Don't do anything."),void $d(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&ki(t,(c,h)=>{const _=xr(h);T_(n.onDisconnect_,wr(e,c),_)}),$d(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Ws{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return gn(this._path)?null:l1(this._path)}get ref(){return new Zo(this._repo,this._path)}get _queryIdentifier(){const e=TL(this._queryParams),t=t1(e);return"{}"===t?"default":t}get _queryObject(){return TL(this._queryParams)}isEqual(e){if(!((e=(0,N.m9)(e))instanceof Ws))return!1;const t=this._repo===e._repo,r=d1(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function U3(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function HC(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Hd(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Uu){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==kd)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==qc)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===ir){if(null!=e&&!$w(e)||null!=t&&!$w(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,N.hu)(n.getIndex()instanceof m1||n.getIndex()===_1,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function GC(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Zo extends Ws{constructor(e,t){super(e,t,new vC,!1)}get parent(){const e=hL(this._path);return null===e?null:new Zo(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Sp{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Vn(e),r=Ap(this.ref,e);return new Sp(this._node.getChild(t),r,ir)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Sp(i,Ap(this.ref,r),ir)))}hasChild(e){const t=new Vn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function EF(n,e){return(n=(0,N.m9)(n))._checkNotDeleted("ref"),void 0!==e?Ap(n._root,e):n._root}function IF(n,e){(n=(0,N.m9)(n))._checkNotDeleted("refFromURL");const t=nM(e,n._repo.repoInfo_.nodeAdmin);sF("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Fu("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),EF(n,t.path.toString())}function Ap(n,e){return null===pn((n=(0,N.m9)(n))._path)?D$("child","path",e,!1):zw("child","path",e,!1),new Zo(n._repo,wr(n._path,e))}function iM(n,e){n=(0,N.m9)(n),Ko("set",n._path),Vu("set",e,n._path,!1);const t=new N.BH;return Q1(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function X$(n,e){iF("update",e,n._path,!1);const t=new N.BH;return function k$(n,e,t,r){A_(n,"update",{path:e.toString(),value:t});let i=!0;const a=Ww(n),c={};if(ki(t,(h,_)=>{i=!1,c[h]=eF(wr(e,h),xr(_),n.serverSyncTree_,a)}),i)Pi("update() called with empty data.  Don't do anything."),$d(0,r,"ok",void 0);else{const h=BC(n),_=function o$(n,e,t,r){!function bj(n,e,t,r){(0,N.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=S1(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=sr.fromObject(t);return S_(n,new C_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,h);VC(n.eventQueue_,_),n.server_.merge(e.toString(),t,(w,b)=>{const D="ok"===w;D||os("update at "+e+" failed: "+w);const x=jd(n.serverSyncTree_,h,!D),F=x.length>0?R_(n,e):e;po(n.eventQueue_,F,x),$d(0,r,w,b)}),ki(t,w=>{const b=eM(n,wr(e,w));R_(n,b)}),po(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function J$(n){n=(0,N.m9)(n);const e=new rM(()=>{}),t=new qw(e);return function P$(n,e,t){const r=function d$(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,b)=>{const D=Is(w,t);r=r||Vd(b,D)});let i=n.syncPointTree_.get(t);i?r=r||Vd(i,Nn()):(i=new HL,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,c=a?new Fd(r,!0,!1):null;return function Kj(n){return CC(n.viewCache_)}(GL(i,e,DC(n.pendingWriteTree_,e._path),a?c.getNode():an.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=xr(i).withIndex(e._queryParams.getIndex());let c;if(F1(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())c=Uw(n.serverSyncTree_,e._path,a);else{const h=Vw(n.serverSyncTree_,e);c=ZL(n.serverSyncTree_,e._path,a,h)}return po(n.eventQueue_,e._path,c),PC(n.serverSyncTree_,e,t,null,!0),a},i=>(A_(n,"get for query "+(0,N.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Sp(r,new Zo(n._repo,n._path),n._queryParams.getIndex()))}class qw{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new yF("value",this,new Sp(e.snapshotNode,new Zo(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new vF(this,e,t):null}matches(e){return e instanceof qw&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class zC{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new vF(this,e,t):null}createEvent(e,t){(0,N.hu)(null!=e.childName,"Child events should have a childName.");const r=Ap(new Zo(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new yF(e.type,this,new Sp(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof zC&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Kw(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,w=(b,D)=>{X1(n._repo,n,h),_(b,D)};w.userCallback=t.userCallback,w.context=t.context,t=w}const c=new rM(t,a||void 0),h="value"===e?new qw(c):new zC(e,c);return function V$(n,e,t){let r;r=".info"===pn(e._path)?F1(n.infoSyncTree_,e,t):F1(n.serverSyncTree_,e,t),oF(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>X1(n._repo,n,h)}function sM(n,e,t,r){return Kw(n,"value",e,t,r)}function bF(n,e,t,r){return Kw(n,"child_added",e,t,r)}function TF(n,e,t,r){return Kw(n,"child_changed",e,t,r)}function CF(n,e,t,r){return Kw(n,"child_moved",e,t,r)}function DF(n,e,t,r){return Kw(n,"child_removed",e,t,r)}function SF(n,e,t){let r=null;const i=t?new rM(t):null;"value"===e?r=new qw(i):e&&(r=new zC(e,i)),X1(n._repo,n,r)}class Fa{}class AF extends Fa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Vu("endAt",this._value,e._path,!0);const t=w1(e._queryParams,this._value,this._key);if(GC(t),Hd(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ws(e._repo,e._path,t,e._orderByCalled)}}class t4 extends Fa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Vu("endBefore",this._value,e._path,!1);const t=function lj(n,e,t){let r;return r=w1(n,e,n.index_===Uu||t?t:kd),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(GC(t),Hd(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ws(e._repo,e._path,t,e._orderByCalled)}}class RF extends Fa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Vu("startAt",this._value,e._path,!0);const t=v1(e._queryParams,this._value,this._key);if(GC(t),Hd(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ws(e._repo,e._path,t,e._orderByCalled)}}class i4 extends Fa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Vu("startAfter",this._value,e._path,!1);const t=function cj(n,e,t){let r;return r=v1(n,e,n.index_===Uu||t?t:qc),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(GC(t),Hd(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ws(e._repo,e._path,t,e._orderByCalled)}}class o4 extends Fa{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ws(e._repo,e._path,function aj(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class u4 extends Fa{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ws(e._repo,e._path,function uj(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class l4 extends Fa{constructor(e){super(),this._path=e}_apply(e){HC(e,"orderByChild");const t=new Vn(this._path);if(gn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new m1(t),i=wC(e._queryParams,r);return Hd(i),new Ws(e._repo,e._path,i,!0)}}class h4 extends Fa{_apply(e){HC(e,"orderByKey");const t=wC(e._queryParams,Uu);return Hd(t),new Ws(e._repo,e._path,t,!0)}}class p4 extends Fa{_apply(e){HC(e,"orderByPriority");const t=wC(e._queryParams,ir);return Hd(t),new Ws(e._repo,e._path,t,!0)}}class m4 extends Fa{_apply(e){HC(e,"orderByValue");const t=wC(e._queryParams,_1);return Hd(t),new Ws(e._repo,e._path,t,!0)}}class y4 extends Fa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Vu("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new AF(this._value,this._key)._apply(new RF(this._value,this._key)._apply(e))}}function Ua(n,...e){let t=(0,N.m9)(n);for(const r of e)t=r._apply(t);return t}(function Xj(n){(0,N.hu)(!xC,"__referenceConstructor has already been defined"),xC=n})(Zo),function r$(n){(0,N.hu)(!NC,"__referenceConstructor has already been defined"),NC=n}(Zo);const w4="FIREBASE_DATABASE_EMULATOR_HOST",oM={};let xF=!1;function MF(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Fu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Pi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,w,c=nM(a,i),h=c.repoInfo;typeof process<"u"&&process.env&&(w=process.env[w4]),w?(_=!0,a=`http://${w}?ns=${h.namespace}`,c=nM(a,i),h=c.repoInfo):_=!c.repoInfo.secure;const b=i&&_?new Dw(Dw.OWNER):new f3(n.name,n.options,e);sF("Invalid Firebase Database URL",c),gn(c.path)||Fu("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function b4(n,e,t,r){let i=oM[e.name];i||(i={},oM[e.name]=i);let a=i[n.toURLString()];return a&&Fu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new x$(n,xF,t,r),i[n.toURLString()]=a,a}(h,n,b,new h3(n.name,t));return new C4(D,n)}class C4{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function M$(n,e,t){if(n.stats_=a1(n.repoInfo_),n.forceRestClient_||d3())n.server_=new EC(n.repoInfo_,(r,i,a,c)=>{lF(n,r,i,a,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>dF(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,N.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Ip(n.repoInfo_,e,(r,i,a,c)=>{lF(n,r,i,a,c)},r=>{dF(n,r)},r=>{!function N$(n,e){ki(e,(t,r)=>{Y1(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function m3(n,e){const t=n.toString();return o1[t]||(o1[t]=e()),o1[t]}(n.repoInfo_,()=>new mj(n.stats_,n.server_)),n.infoData_=new dj,n.infoSyncTree_=new KL({startListening:(r,i,a,c)=>{let h=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(h=Uw(n.infoSyncTree_,r._path,_),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),Y1(n,"connected",!1),n.serverSyncTree_=new KL({startListening:(r,i,a,c)=>(n.server_.listen(r,a,i,(h,_)=>{const w=c(h,_);po(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Zo(this._repo,Nn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function I4(n,e){const t=oM[e];(!t||t[n.key]!==n)&&Fu(`Database ${e}(${n.repoInfo_}) has already been deleted.`),fF(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Fu("Cannot call "+e+" on a deleted database.")}}function NF(){eL.IS_TRANSPORT_INITIALIZED&&os("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function D4(){NF(),Od.forceDisallow()}function S4(){NF(),w_.forceDisallow(),Od.forceAllow()}function x4(n,e){kO(n,e)}const N4={".sv":"timestamp"};class O4{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ip.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Ip.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function M4(n){RO(ji.SDK_VERSION),(0,ji._registerComponent)(new oo.wA("database",(e,{instanceIdentifier:t})=>MF(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ji.registerVersion)(SO,"0.14.4",n),(0,ji.registerVersion)(SO,"0.14.4","esm2017")}();const V4=new ao.Yd("@firebase/database-compat"),kF=function(n){V4.warn("FIREBASE WARNING: "+n)};class $4{constructor(e){this._delegate=e}cancel(e){(0,N.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,N.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,N.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,N.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,N.Dv)("OnDisconnect.set",1,2,arguments.length),(0,N.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,N.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,N.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,N.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,kF("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,N.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class H4{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,N.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Gd{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,N.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,N.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,N.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,N.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,N.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),zw("DataSnapshot.child","path",e,!1),new Gd(this._database,this._delegate.child(e))}hasChild(e){return(0,N.Dv)("DataSnapshot.hasChild",1,1,arguments.length),zw("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,N.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,N.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,N.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Gd(this._database,t)))}hasChildren(){return(0,N.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,N.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,N.Dv)("DataSnapshot.ref",0,0,arguments.length),new go(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Wi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,N.Dv)("Query.on",2,4,arguments.length),(0,N.Wj)("Query.on","callback",t,!1);const c=Wi.getCancelAndContextArgs_("Query.on",r,i),h=(w,b)=>{t.call(c.context,new Gd(this.database,w),b)};h.userCallback=t,h.context=c.context;const _=null===(a=c.cancel)||void 0===a?void 0:a.bind(c.context);switch(e){case"value":return sM(this._delegate,h,_),t;case"child_added":return bF(this._delegate,h,_),t;case"child_removed":return DF(this._delegate,h,_),t;case"child_changed":return TF(this._delegate,h,_),t;case"child_moved":return CF(this._delegate,h,_),t;default:throw new Error((0,N.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,N.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,N.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,N.Wj)("Query.off","callback",t,!0),(0,N.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,SF(this._delegate,e,i)}else SF(this._delegate,e)}get(){return J$(this._delegate).then(e=>new Gd(this.database,e))}once(e,t,r,i){(0,N.Dv)("Query.once",1,4,arguments.length),(0,N.Wj)("Query.once","callback",t,!0);const a=Wi.getCancelAndContextArgs_("Query.once",r,i),c=new N.BH,h=(w,b)=>{const D=new Gd(this.database,w);t&&t.call(a.context,D,b),c.resolve(D)};h.userCallback=t,h.context=a.context;const _=w=>{a.cancel&&a.cancel.call(a.context,w),c.reject(w)};switch(e){case"value":sM(this._delegate,h,_,{onlyOnce:!0});break;case"child_added":bF(this._delegate,h,_,{onlyOnce:!0});break;case"child_removed":DF(this._delegate,h,_,{onlyOnce:!0});break;case"child_changed":TF(this._delegate,h,_,{onlyOnce:!0});break;case"child_moved":CF(this._delegate,h,_,{onlyOnce:!0});break;default:throw new Error((0,N.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,N.Dv)("Query.limitToFirst",1,1,arguments.length),new Wi(this.database,Ua(this._delegate,function a4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new o4(n)}(e)))}limitToLast(e){return(0,N.Dv)("Query.limitToLast",1,1,arguments.length),new Wi(this.database,Ua(this._delegate,function c4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new u4(n)}(e)))}orderByChild(e){return(0,N.Dv)("Query.orderByChild",1,1,arguments.length),new Wi(this.database,Ua(this._delegate,function d4(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return zw("orderByChild","path",n,!1),new l4(n)}(e)))}orderByKey(){return(0,N.Dv)("Query.orderByKey",0,0,arguments.length),new Wi(this.database,Ua(this._delegate,function f4(){return new h4}()))}orderByPriority(){return(0,N.Dv)("Query.orderByPriority",0,0,arguments.length),new Wi(this.database,Ua(this._delegate,function g4(){return new p4}()))}orderByValue(){return(0,N.Dv)("Query.orderByValue",0,0,arguments.length),new Wi(this.database,Ua(this._delegate,function _4(){return new m4}()))}startAt(e=null,t){return(0,N.Dv)("Query.startAt",0,2,arguments.length),new Wi(this.database,Ua(this._delegate,function r4(n=null,e){return Gw("startAt","key",e,!0),new RF(n,e)}(e,t)))}startAfter(e=null,t){return(0,N.Dv)("Query.startAfter",0,2,arguments.length),new Wi(this.database,Ua(this._delegate,function s4(n,e){return Gw("startAfter","key",e,!0),new i4(n,e)}(e,t)))}endAt(e=null,t){return(0,N.Dv)("Query.endAt",0,2,arguments.length),new Wi(this.database,Ua(this._delegate,function e4(n,e){return Gw("endAt","key",e,!0),new AF(n,e)}(e,t)))}endBefore(e=null,t){return(0,N.Dv)("Query.endBefore",0,2,arguments.length),new Wi(this.database,Ua(this._delegate,function n4(n,e){return Gw("endBefore","key",e,!0),new t4(n,e)}(e,t)))}equalTo(e,t){return(0,N.Dv)("Query.equalTo",1,2,arguments.length),new Wi(this.database,Ua(this._delegate,function v4(n,e){return Gw("equalTo","key",e,!0),new y4(n,e)}(e,t)))}toString(){return(0,N.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,N.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,N.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Wi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,N.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,N.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,N.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new go(this.database,new Zo(this._delegate._repo,this._delegate._path))}}class go extends Wi{constructor(e,t){super(e,new Ws(t._repo,t._path,new vC,!1)),this.database=e,this._delegate=t}getKey(){return(0,N.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,N.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new go(this.database,Ap(this._delegate,e))}getParent(){(0,N.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new go(this.database,e):null}getRoot(){return(0,N.Dv)("Reference.root",0,0,arguments.length),new go(this.database,this._delegate.root)}set(e,t){(0,N.Dv)("Reference.set",1,2,arguments.length),(0,N.Wj)("Reference.set","onComplete",t,!0);const r=iM(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,N.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,kF("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ko("Reference.update",this._delegate._path),(0,N.Wj)("Reference.update","onComplete",t,!0);const r=X$(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,N.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,N.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function Q$(n,e,t){if(Ko("setWithPriority",n._path),Vu("setWithPriority",e,n._path,!1),Z1("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new N.BH;return Q1(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,N.Dv)("Reference.remove",0,1,arguments.length),(0,N.Wj)("Reference.remove","onComplete",e,!0);const t=function Z$(n){return Ko("remove",n._path),iM(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,N.Dv)("Reference.transaction",1,3,arguments.length),(0,N.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,N.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,N.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function L4(n,e,t){var r;if(n=(0,N.m9)(n),Ko("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new N.BH,h=sM(n,()=>{});return function j$(n,e,t,r,i,a){A_(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:MO(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=J1(n,e,void 0);c.currentInputSnapshot=h;const _=c.update(h.val());if(void 0===_)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Hw("transaction failed: Data returned ",_,c.path),c.status=0;const w=LC(n.transactionQueueTree_,e),b=Dp(w)||[];let D;b.push(c),W1(w,b),"object"==typeof _&&null!==_&&(0,N.r3)(_,".priority")?(D=(0,N.DV)(_,".priority"),(0,N.hu)($w(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(kC(n.serverSyncTree_,e)||an.EMPTY_NODE).getPriority().val();const x=Ww(n),F=xr(_,D),$=H1(F,h,x);c.currentOutputSnapshotRaw=F,c.currentOutputSnapshotResolved=$,c.currentWriteId=BC(n);const ee=L1(n.serverSyncTree_,e,$,c.currentWriteId,c.applyLocally);po(n.eventQueue_,e,ee),jC(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,w,b)=>{let D=null;_?a.reject(_):(D=new Sp(b,new Zo(n._repo,n._path),ir),a.resolve(new O4(w,D)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new H4(a.committed,new Gd(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,N.Dv)("Reference.setPriority",1,2,arguments.length),(0,N.Wj)("Reference.setPriority","onComplete",t,!0);const r=function Y$(n,e){n=(0,N.m9)(n),Ko("setPriority",n._path),Z1("setPriority",e,!1);const t=new N.BH;return Q1(n._repo,wr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,N.Dv)("Reference.push",0,2,arguments.length),(0,N.Wj)("Reference.push","onComplete",t,!0);const r=function K$(n,e){n=(0,N.m9)(n),Ko("push",n._path),Vu("push",e,n._path,!0);const t=cF(n._repo),r=q$(t),i=Ap(n,r),a=Ap(n,r);let c;return c=null!=e?iM(a,e).then(()=>a):Promise.resolve(a),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new go(this.database,c));t&&i.then(()=>t(null),c=>t(c));const a=new go(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Ko("Reference.onDisconnect",this._delegate._path),new $4(new wF(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Zw{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:D4,forceLongPolling:S4}}useEmulator(e,t,r={}){!function PF(n,e,t,r={}){(n=(0,N.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Fu("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Fu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Dw(Dw.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,N.Sg)(r.mockUserToken,n.app.options.projectId);a=new Dw(c)}!function E4(n,e,t,r){n.repoInfo_=new r1(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,N.Dv)("database.ref",0,1,arguments.length),e instanceof go){const t=IF(this._delegate,e.toString());return new go(this,t)}{const t=EF(this._delegate,e);return new go(this,t)}}refFromURL(e){(0,N.Dv)("database.refFromURL",1,1,arguments.length);const r=IF(this._delegate,e);return new go(this,r)}goOffline(){return(0,N.Dv)("database.goOffline",0,0,arguments.length),function A4(n){(n=(0,N.m9)(n))._checkNotDeleted("goOffline"),fF(n._repo)}(this._delegate)}goOnline(){return(0,N.Dv)("database.goOnline",0,0,arguments.length),function R4(n){(n=(0,N.m9)(n))._checkNotDeleted("goOnline"),function B$(n){n.persistentConnection_&&n.persistentConnection_.resume(uF)}(n._repo)}(this._delegate)}}Zw.ServerValue={TIMESTAMP:function P4(){return N4}(),increment:n=>function k4(n){return{".sv":{increment:n}}}(n)};var z4=Object.freeze({__proto__:null,initStandalone:function G4({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){RO(t);const c=new oo.zt("auth-internal",new oo.H0("database-standalone"));return c.setComponent(new oo.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Zw(MF(n,c,void 0,e,a),n),namespace:i}}});const W4=Zw.ServerValue;function OF(n){return null==n}function LF(n){return"function"==typeof n.set}function FF(n,e){return LF(e)?e:n.ref(e)}function UF(n,e){if(function K4(n){return"string"==typeof n}(n))return e.stringCase();if(LF(n))return e.firebaseCase();if(function Z4(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Yw(n,e,t="on",r=Bg.z){return new Ui.y(i=>{let a=null;return a=n[t](e,(c,h)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,bt.U)(i=>{const{snapshot:a,prevKey:c}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:c,key:h}}),(0,qy.B)())}function VF(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function X4(n,e){const{payload:t,prevKey:r,key:i}=e,a=VF(n,i),c=function Q4(n,e){if(OF(e))return 0;{const t=VF(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(_=>{const w={payload:_,type:"value",prevKey:h,key:_.key};return h=_.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(c,0,h),n}return n;default:return n}}function BF(n){return(OF(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function jF(n,e,t){return function Y4(n,e,t){return Yw(n,"value","once",t).pipe(Wn(r=>{const i=[st(r)];return e.forEach(a=>i.push(Yw(n,a,"on",t))),(0,Wy.T)(...i).pipe(Mo(X4,[]))}),Vv())}(n,e=BF(e),t)}function $F(n,e,t){const r=(e=BF(e)).map(i=>Yw(n,i,"on",t));return(0,Wy.T)(...r)}function HF(n,e){return function(r,i){return UF(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function nH(n){return function(t){return t?UF(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function GF(n,e){return function(){return Yw(n,"value","on",e)}}!function q4(n){n.INTERNAL.registerComponent(new oo.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Zw(i,r)},"PUBLIC").setServiceProps({Reference:go,Query:Wi,Database:Zw,DataSnapshot:Gd,enableLogging:x4,INTERNAL:z4,ServerValue:W4}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(Uo.Z);const sH=new p.OlP("angularfire2.realtimeDatabaseURL"),oH=new p.OlP("angularfire2.database.use-emulator");let aH=(()=>{class n{constructor(t,r,i,a,c,h,_,w,b,D,x,F,$,ee,se){this.schedulers=h;const ft=_,yt=(0,Qn.on)(t,c,r);w&&Vg(yt,c,b,x,F,$,D,ee),this.database=(0,Qn.cc)(`${yt.name}.database.${i}`,"AngularFireDatabase",yt.name,()=>{const lt=c.runOutsideAngular(()=>yt.database(i||void 0));return ft&&lt.useEmulator(...ft),lt},[ft])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>FF(this.database,t));let a=i;return r&&(a=r(i)),function rH(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:HF(r,"update"),set:HF(r,"set"),push:i=>r.push(i),remove:nH(r),snapshotChanges:i=>jF(n,i,t).pipe(Ut.iC),stateChanges:i=>$F(n,i,t).pipe(Ut.iC),auditTrail:i=>function J4(n,e,t){return function tH(n,e,t){return function eH(n,e){return Yw(n,"value","on",e).pipe((0,bt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function XB(...n){const e=(0,Ro.jO)(n);return(0,yr.e)((t,r)=>{const i=n.length,a=new Array(i);let c=n.map(()=>!1),h=!1;for(let _=0;_<i;_++)(0,ma.Xf)(n[_]).subscribe((0,Fn.x)(r,w=>{a[_]=w,!h&&!c[_]&&(c[_]=!0,(h=c.every(es.y))&&(c=null))},QB.Z));t.subscribe((0,Fn.x)(r,_=>{if(h){const w=[_,...a];r.next(e?e(...w):w)}}))})}(e),(0,bt.U)(([i,a])=>{const c=i.lastKeyToLoad,h=a.map(_=>_.key);return{actions:a,lastKeyToLoad:c,loadedKeys:h}}),function JB(n){return(0,yr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Fn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,bt.U)(i=>i.actions))}(n,$F(n,e).pipe(Mo((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(Ut.iC),valueChanges:(i,a)=>jF(n,i,t).pipe((0,bt.U)(h=>h.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),Ut.iC)}}(a,this)}object(t){return function iH(n,e){return{query:n,snapshotChanges:()=>GF(n,e.schedulers.outsideAngular)().pipe(Ut.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>GF(n,e.schedulers.outsideAngular)().pipe(Ut.iC,(0,bt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>FF(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Qn.Dh),p.LFG(Qn.xv,8),p.LFG(sH,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ut.HU),p.LFG(oH,8),p.LFG(ed,8),p.LFG(kg,8),p.LFG(pf,8),p.LFG(Og,8),p.LFG(Lg,8),p.LFG(Fg,8),p.LFG(Ug,8),p.LFG(hf,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),uH=(()=>{class n{constructor(){Rc.Z.registerVersion("angularfire",Ut.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[aH]}),n})();var zF=P(655),cH=P(5132);const qF="firebase_screen_id",uM="outlet",Qw="screen_class",KF="screen_name";let IH=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const cM={},bH=n=>{const e=[n[Qw],n[uM]].join("#");if(cM.hasOwnProperty(e))return cM[e];{const t=IH++;return cM[e]=t,t}},RH=new p.OlP("angularfire2.analytics.analyticsCollectionEnabled"),xH=new p.OlP("angularfire2.analytics.appVersion"),MH=new p.OlP("angularfire2.analytics.appName"),NH=new p.OlP("angularfire2.analytics.debugMode"),PH=new p.OlP("angularfire2.analytics.config"),WC="dataLayer";let Xw=(()=>{class n{constructor(t,r,i,a,c,h,_,w,b){if(this.analyticsInitialized=new Promise(()=>{}),function tl(n){return n===ra}(_)){window[WC]=window[WC]||[];const x=(...ee)=>"config"===ee[0]&&"firebase"===ee[2].origin&&(this.measurementId=ee[1],!0),F=ee=>{window.gtag=(...se)=>{ee&&ee(...se),"event"===se[0]&&se[2].send_to===this.measurementId&&(a&&(se[2].app_name=a),i&&(se[2].app_version=i)),c&&typeof console<"u"&&console.info(...se),function(...ft){window[WC].push(arguments)}(...se)}};window[WC].some(x)?(this.analyticsInitialized=Promise.resolve(),F()):this.analyticsInitialized=new Promise(ee=>{F((...se)=>{x(...se)&&ee()})}),h&&this.updateConfig(h),c&&this.updateConfig({debug_mode:1})}else this.analyticsInitialized=Promise.resolve();const D=st(void 0).pipe((0,ef.Q)(b.outsideAngular),Wn(cH.Gb),Wn(x=>x?w.runOutsideAngular(()=>P.e(814).then(P.bind(P,3814))):ds.E),(0,bt.U)(()=>(0,Qn.cc)("analytics","AngularFireAnalytics",t.name,()=>{const x=t.analytics();return!1===r&&x.setAnalyticsCollectionEnabled(!1),x},[t,r,h,c])),Tg({bufferSize:1,refCount:!1}));return(0,Qn.pX)(this,D,w)}updateConfig(t){return(0,zF.mG)(this,void 0,void 0,function*(){yield this.analyticsInitialized,window.gtag("config",this.measurementId,Object.assign(Object.assign({},t),{update:!0}))})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Qn.Ot),p.LFG(RH,8),p.LFG(xH,8),p.LFG(MH,8),p.LFG(NH,8),p.LFG(PH,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ut.HU))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),YF=(()=>{class n{constructor(t,r,i,a){if(this.disposables=[],Rc.Z.registerVersion("angularfire",Ut.q4.full,"compat-user-tracking"),ia(r))this.initialized=Promise.resolve();else{let c;this.initialized=a.runOutsideAngular(()=>new Promise(h=>c=h)),this.disposables=[i.authState.subscribe(h=>{t.setUserId(h?.uid),c()}),i.credential.subscribe(h=>{if(h){const _=h.user.isAnonymous?"anonymous":h.additionalUserInfo.providerId;h.additionalUserInfo.isNewUser&&t.logEvent("sign_up",{method:_}),t.logEvent("login",{method:_})}})]}}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Xw),p.LFG(p.Lbi),p.LFG(ed),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),BH=(()=>{class n{constructor(t,r,i,a,c,h){if(Rc.Z.registerVersion("angularfire",Ut.q4.full,"compat-screen-tracking"),!r||!t)return this;c.runOutsideAngular(()=>{this.disposable=((n,e,t)=>n.events.pipe(Vi(i=>i instanceof Fl)).pipe(Wn(i=>{var a;const h=(null===(a=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,F=>F.replace("://",":///"))).root.children[i.snapshot.outlet])||void 0===a?void 0:a.toString())||"",_=n.routerState.root.children.map(F=>F).find(F=>F.outlet===i.snapshot.outlet);if(!_)return st(null);let w=_;for(;w.firstChild;)w=w.firstChild;const b=w.pathFromRoot.map(F=>{var $;return null===($=F.routeConfig)||void 0===$?void 0:$.path}).filter(F=>F).join("/")||"/",D={[KF]:b,page_path:`/${h}`,firebase_event_origin:"auto",firebase_screen:b,[uM]:i.snapshot.outlet};e&&(D.page_title=e.getTitle());let x=_.component;if(x){if(x===lg){let F=i.snapshot;for(;F.firstChild;)F=F.firstChild;x=F.component}}else x=i.snapshot.component;if("string"==typeof x)return st(Object.assign(Object.assign({},D),{[Qw]:x}));if(x){const F=t.resolveComponentFactory(x);return st(Object.assign(Object.assign({},D),{[Qw]:F.selector}))}return st(null)}),Vi(i=>!!i),(0,bt.U)(i=>Object.assign({firebase_screen_class:i[Qw],[qF]:bH(i)},i)),function lH(n,e,t,r){return(0,yr.e)((i,a)=>{let c;e&&"function"!=typeof e?({duration:t,element:c,connector:r}=e):c=e;const h=new Map,_=$=>{h.forEach($),$(a)},w=$=>_(ee=>ee.error($));let b=0,D=!1;const x=new Fn.Q(a,$=>{try{const ee=n($);let se=h.get(ee);if(!se){h.set(ee,se=r?r():new xo.x);const ft=function F($,ee){const se=new Ui.y(ft=>{b++;const yt=ee.subscribe(ft);return()=>{yt.unsubscribe(),0==--b&&D&&x.unsubscribe()}});return se.key=$,se}(ee,se);if(a.next(ft),t){const yt=(0,Fn.x)(se,()=>{se.complete(),yt?.unsubscribe()},void 0,void 0,()=>h.delete(ee));x.add((0,ma.Xf)(t(ft)).subscribe(yt))}}se.next(c?c($):$)}catch(ee){w(ee)}},()=>_($=>$.complete()),w,()=>h.clear(),()=>(D=!0,0===b));i.subscribe(x)})}(i=>i[uM]),(0,Cr.z)(i=>i.pipe(Vv((a,c)=>JSON.stringify(a)===JSON.stringify(c)),ac(void 0),rm(),(0,bt.U)(([a,c])=>a?Object.assign({firebase_previous_class:a[Qw],firebase_previous_screen:a[KF],firebase_previous_id:a[qF]},c):c)))))(r,i,a).pipe(Wn(_=>(0,zF.mG)(this,void 0,void 0,function*(){return h&&(yield h.initialized),yield t.logEvent("screen_view",_)}))).subscribe()})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Xw),p.LFG(Bi,8),p.LFG(So,8),p.LFG(p._Vd),p.LFG(p.R0b),p.LFG(YF,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),jH=(()=>{class n{constructor(t,r,i){Rc.Z.registerVersion("angularfire",Ut.q4.full,"analytics-compat"),t.app.then(()=>{})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Xw),p.LFG(BH,8),p.LFG(YF,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[Xw]}),n})();const $H_firebaseConfig={apiKey:"AIzaSyDp-n3JPvXmCB1RRaXBrODB11YauEjeZ4Y",authDomain:"opacscc-a73c7.firebaseapp.com",databaseURL:"https://opacscc-a73c7-default-rtdb.firebaseio.com",projectId:"opacscc-a73c7",storageBucket:"opacscc-a73c7.appspot.com",messagingSenderId:"514399829505",appId:"1:514399829505:web:63cae12e2f15759e694a00",measurementId:"G-BPS0HTXKS3"};let HH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[XE]}),n.\u0275inj=p.cJS({imports:[Ya,Jh,Qn.hO.initializeApp($H_firebaseConfig,"opacscc"),AI,eA,YB,uH,jH]}),n})();Ju().bootstrapModule(HH).catch(n=>console.error(n))},9751:(gt,De,P)=>{P.d(De,{y:()=>ge});var p=P(930),J=P(727),V=P(8822),te=P(9635),ae=P(2416),ne=P(576),de=P(2806);let ge=(()=>{class Y{constructor(we){we&&(this._subscribe=we)}lift(we){const Ze=new Y;return Ze.source=this,Ze.operator=we,Ze}subscribe(we,Ze,nt){const pe=function W(Y){return Y&&Y instanceof p.Lv||function G(Y){return Y&&(0,ne.m)(Y.next)&&(0,ne.m)(Y.error)&&(0,ne.m)(Y.complete)}(Y)&&(0,J.Nn)(Y)}(we)?we:new p.Hp(we,Ze,nt);return(0,de.x)(()=>{const{operator:Te,source:Me}=this;pe.add(Te?Te.call(pe,Me):Me?this._subscribe(pe):this._trySubscribe(pe))}),pe}_trySubscribe(we){try{return this._subscribe(we)}catch(Ze){we.error(Ze)}}forEach(we,Ze){return new(Ze=ue(Ze))((nt,pe)=>{const Te=new p.Hp({next:Me=>{try{we(Me)}catch(Ue){pe(Ue),Te.unsubscribe()}},error:pe,complete:nt});this.subscribe(Te)})}_subscribe(we){var Ze;return null===(Ze=this.source)||void 0===Ze?void 0:Ze.subscribe(we)}[V.L](){return this}pipe(...we){return(0,te.U)(we)(this)}toPromise(we){return new(we=ue(we))((Ze,nt)=>{let pe;this.subscribe(Te=>pe=Te,Te=>nt(Te),()=>Ze(pe))})}}return Y.create=Pe=>new Y(Pe),Y})();function ue(Y){var Pe;return null!==(Pe=Y??ae.v.Promise)&&void 0!==Pe?Pe:Promise}},7579:(gt,De,P)=>{P.d(De,{x:()=>de});var p=P(9751),J=P(727);const te=(0,P(3888).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ae=P(8737),ne=P(2806);let de=(()=>{class ue extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const Y=new ge(this,this);return Y.operator=W,Y}_throwIfClosed(){if(this.closed)throw new te}next(W){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next(W)}})}error(W){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:Y}=this;for(;Y.length;)Y.shift().error(W)}})}complete(){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:Y,isStopped:Pe,observers:we}=this;return Y||Pe?J.Lc:(this.currentObservers=null,we.push(W),new J.w0(()=>{this.currentObservers=null,(0,ae.P)(we,W)}))}_checkFinalizedStatuses(W){const{hasError:Y,thrownError:Pe,isStopped:we}=this;Y?W.error(Pe):we&&W.complete()}asObservable(){const W=new p.y;return W.source=this,W}}return ue.create=(G,W)=>new ge(G,W),ue})();class ge extends de{constructor(G,W){super(),this.destination=G,this.source=W}next(G){var W,Y;null===(Y=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===Y||Y.call(W,G)}error(G){var W,Y;null===(Y=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===Y||Y.call(W,G)}complete(){var G,W;null===(W=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===W||W.call(G)}_subscribe(G){var W,Y;return null!==(Y=null===(W=this.source)||void 0===W?void 0:W.subscribe(G))&&void 0!==Y?Y:J.Lc}}},930:(gt,De,P)=>{P.d(De,{Hp:()=>nt,Lv:()=>Y});var p=P(576),J=P(727),V=P(2416),te=P(7849),ae=P(5032);const ne=ue("C",void 0,void 0);function ue(Ae,Ie,Re){return{kind:Ae,value:Ie,error:Re}}var G=P(3410),W=P(2806);class Y extends J.w0{constructor(Ie){super(),this.isStopped=!1,Ie?(this.destination=Ie,(0,J.Nn)(Ie)&&Ie.add(this)):this.destination=Ue}static create(Ie,Re,Ge){return new nt(Ie,Re,Ge)}next(Ie){this.isStopped?Me(function ge(Ae){return ue("N",Ae,void 0)}(Ie),this):this._next(Ie)}error(Ie){this.isStopped?Me(function de(Ae){return ue("E",void 0,Ae)}(Ie),this):(this.isStopped=!0,this._error(Ie))}complete(){this.isStopped?Me(ne,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ie){this.destination.next(Ie)}_error(Ie){try{this.destination.error(Ie)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Pe=Function.prototype.bind;function we(Ae,Ie){return Pe.call(Ae,Ie)}class Ze{constructor(Ie){this.partialObserver=Ie}next(Ie){const{partialObserver:Re}=this;if(Re.next)try{Re.next(Ie)}catch(Ge){pe(Ge)}}error(Ie){const{partialObserver:Re}=this;if(Re.error)try{Re.error(Ie)}catch(Ge){pe(Ge)}else pe(Ie)}complete(){const{partialObserver:Ie}=this;if(Ie.complete)try{Ie.complete()}catch(Re){pe(Re)}}}class nt extends Y{constructor(Ie,Re,Ge){let Se;if(super(),(0,p.m)(Ie)||!Ie)Se={next:Ie??void 0,error:Re??void 0,complete:Ge??void 0};else{let j;this&&V.v.useDeprecatedNextContext?(j=Object.create(Ie),j.unsubscribe=()=>this.unsubscribe(),Se={next:Ie.next&&we(Ie.next,j),error:Ie.error&&we(Ie.error,j),complete:Ie.complete&&we(Ie.complete,j)}):Se=Ie}this.destination=new Ze(Se)}}function pe(Ae){V.v.useDeprecatedSynchronousErrorHandling?(0,W.O)(Ae):(0,te.h)(Ae)}function Me(Ae,Ie){const{onStoppedNotification:Re}=V.v;Re&&G.z.setTimeout(()=>Re(Ae,Ie))}const Ue={closed:!0,next:ae.Z,error:function Te(Ae){throw Ae},complete:ae.Z}},727:(gt,De,P)=>{P.d(De,{Lc:()=>ne,w0:()=>ae,Nn:()=>de});var p=P(576);const V=(0,P(3888).d)(ue=>function(W){ue(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((Y,Pe)=>`${Pe+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var te=P(8737);class ae{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const we of W)we.remove(this);else W.remove(this);const{initialTeardown:Y}=this;if((0,p.m)(Y))try{Y()}catch(we){G=we instanceof V?we.errors:[we]}const{_finalizers:Pe}=this;if(Pe){this._finalizers=null;for(const we of Pe)try{ge(we)}catch(Ze){G=G??[],Ze instanceof V?G=[...G,...Ze.errors]:G.push(Ze)}}if(G)throw new V(G)}}add(G){var W;if(G&&G!==this)if(this.closed)ge(G);else{if(G instanceof ae){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(W=this._finalizers)&&void 0!==W?W:[]).push(G)}}_hasParent(G){const{_parentage:W}=this;return W===G||Array.isArray(W)&&W.includes(G)}_addParent(G){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push(G),W):W?[W,G]:G}_removeParent(G){const{_parentage:W}=this;W===G?this._parentage=null:Array.isArray(W)&&(0,te.P)(W,G)}remove(G){const{_finalizers:W}=this;W&&(0,te.P)(W,G),G instanceof ae&&G._removeParent(this)}}ae.EMPTY=(()=>{const ue=new ae;return ue.closed=!0,ue})();const ne=ae.EMPTY;function de(ue){return ue instanceof ae||ue&&"closed"in ue&&(0,p.m)(ue.remove)&&(0,p.m)(ue.add)&&(0,p.m)(ue.unsubscribe)}function ge(ue){(0,p.m)(ue)?ue():ue.unsubscribe()}},2416:(gt,De,P)=>{P.d(De,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(gt,De,P)=>{P.d(De,{E:()=>J});const J=new(P(9751).y)(ae=>ae.complete())},8996:(gt,De,P)=>{P.d(De,{D:()=>Ie});var p=P(8421),J=P(5363),V=P(9468),ne=P(9751),ge=P(2202),ue=P(576),G=P(9672);function Y(Re,Ge){if(!Re)throw new Error("Iterable cannot be null");return new ne.y(Se=>{(0,G.f)(Se,Ge,()=>{const j=Re[Symbol.asyncIterator]();(0,G.f)(Se,Ge,()=>{j.next().then(Ee=>{Ee.done?Se.complete():Se.next(Ee.value)})},0,!0)})})}var Pe=P(3670),we=P(8239),Ze=P(1144),nt=P(6495),pe=P(2206),Te=P(4532),Me=P(3260);function Ie(Re,Ge){return Ge?function Ae(Re,Ge){if(null!=Re){if((0,Pe.c)(Re))return function te(Re,Ge){return(0,p.Xf)(Re).pipe((0,V.R)(Ge),(0,J.Q)(Ge))}(Re,Ge);if((0,Ze.z)(Re))return function de(Re,Ge){return new ne.y(Se=>{let j=0;return Ge.schedule(function(){j===Re.length?Se.complete():(Se.next(Re[j++]),Se.closed||this.schedule())})})}(Re,Ge);if((0,we.t)(Re))return function ae(Re,Ge){return(0,p.Xf)(Re).pipe((0,V.R)(Ge),(0,J.Q)(Ge))}(Re,Ge);if((0,pe.D)(Re))return Y(Re,Ge);if((0,nt.T)(Re))return function W(Re,Ge){return new ne.y(Se=>{let j;return(0,G.f)(Se,Ge,()=>{j=Re[ge.h](),(0,G.f)(Se,Ge,()=>{let Ee,We;try{({value:Ee,done:We}=j.next())}catch(Ye){return void Se.error(Ye)}We?Se.complete():Se.next(Ee)},0,!0)}),()=>(0,ue.m)(j?.return)&&j.return()})}(Re,Ge);if((0,Me.L)(Re))return function Ue(Re,Ge){return Y((0,Me.Q)(Re),Ge)}(Re,Ge)}throw(0,Te.z)(Re)}(Re,Ge):(0,p.Xf)(Re)}},8421:(gt,De,P)=>{P.d(De,{Xf:()=>Pe});var p=P(655),J=P(1144),V=P(8239),te=P(9751),ae=P(3670),ne=P(2206),de=P(4532),ge=P(6495),ue=P(3260),G=P(576),W=P(7849),Y=P(8822);function Pe(Ae){if(Ae instanceof te.y)return Ae;if(null!=Ae){if((0,ae.c)(Ae))return function we(Ae){return new te.y(Ie=>{const Re=Ae[Y.L]();if((0,G.m)(Re.subscribe))return Re.subscribe(Ie);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,J.z)(Ae))return function Ze(Ae){return new te.y(Ie=>{for(let Re=0;Re<Ae.length&&!Ie.closed;Re++)Ie.next(Ae[Re]);Ie.complete()})}(Ae);if((0,V.t)(Ae))return function nt(Ae){return new te.y(Ie=>{Ae.then(Re=>{Ie.closed||(Ie.next(Re),Ie.complete())},Re=>Ie.error(Re)).then(null,W.h)})}(Ae);if((0,ne.D)(Ae))return Te(Ae);if((0,ge.T)(Ae))return function pe(Ae){return new te.y(Ie=>{for(const Re of Ae)if(Ie.next(Re),Ie.closed)return;Ie.complete()})}(Ae);if((0,ue.L)(Ae))return function Me(Ae){return Te((0,ue.Q)(Ae))}(Ae)}throw(0,de.z)(Ae)}function Te(Ae){return new te.y(Ie=>{(function Ue(Ae,Ie){var Re,Ge,Se,j;return(0,p.mG)(this,void 0,void 0,function*(){try{for(Re=(0,p.KL)(Ae);!(Ge=yield Re.next()).done;)if(Ie.next(Ge.value),Ie.closed)return}catch(Ee){Se={error:Ee}}finally{try{Ge&&!Ge.done&&(j=Re.return)&&(yield j.call(Re))}finally{if(Se)throw Se.error}}Ie.complete()})})(Ae,Ie).catch(Re=>Ie.error(Re))})}},6451:(gt,De,P)=>{P.d(De,{T:()=>ne});var p=P(8189),J=P(8421),V=P(515),te=P(7669),ae=P(8996);function ne(...de){const ge=(0,te.yG)(de),ue=(0,te._6)(de,1/0),G=de;return G.length?1===G.length?(0,J.Xf)(G[0]):(0,p.J)(ue)((0,ae.D)(G,ge)):V.E}},5403:(gt,De,P)=>{P.d(De,{Q:()=>V,x:()=>J});var p=P(930);function J(te,ae,ne,de,ge){return new V(te,ae,ne,de,ge)}class V extends p.Lv{constructor(ae,ne,de,ge,ue,G){super(ae),this.onFinalize=ue,this.shouldUnsubscribe=G,this._next=ne?function(W){try{ne(W)}catch(Y){ae.error(Y)}}:super._next,this._error=ge?function(W){try{ge(W)}catch(Y){ae.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=de?function(){try{de()}catch(W){ae.error(W)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ne}=this;super.unsubscribe(),!ne&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}}},4004:(gt,De,P)=>{P.d(De,{U:()=>V});var p=P(4482),J=P(5403);function V(te,ae){return(0,p.e)((ne,de)=>{let ge=0;ne.subscribe((0,J.x)(de,ue=>{de.next(te.call(ae,ue,ge++))}))})}},8189:(gt,De,P)=>{P.d(De,{J:()=>V});var p=P(5577),J=P(4671);function V(te=1/0){return(0,p.z)(J.y,te)}},5577:(gt,De,P)=>{P.d(De,{z:()=>ge});var p=P(4004),J=P(8421),V=P(4482),te=P(9672),ae=P(5403),de=P(576);function ge(ue,G,W=1/0){return(0,de.m)(G)?ge((Y,Pe)=>(0,p.U)((we,Ze)=>G(Y,we,Pe,Ze))((0,J.Xf)(ue(Y,Pe))),W):("number"==typeof G&&(W=G),(0,V.e)((Y,Pe)=>function ne(ue,G,W,Y,Pe,we,Ze,nt){const pe=[];let Te=0,Me=0,Ue=!1;const Ae=()=>{Ue&&!pe.length&&!Te&&G.complete()},Ie=Ge=>Te<Y?Re(Ge):pe.push(Ge),Re=Ge=>{we&&G.next(Ge),Te++;let Se=!1;(0,J.Xf)(W(Ge,Me++)).subscribe((0,ae.x)(G,j=>{Pe?.(j),we?Ie(j):G.next(j)},()=>{Se=!0},void 0,()=>{if(Se)try{for(Te--;pe.length&&Te<Y;){const j=pe.shift();Ze?(0,te.f)(G,Ze,()=>Re(j)):Re(j)}Ae()}catch(j){G.error(j)}}))};return ue.subscribe((0,ae.x)(G,Ie,()=>{Ue=!0,Ae()})),()=>{nt?.()}}(Y,Pe,ue,W)))}},5363:(gt,De,P)=>{P.d(De,{Q:()=>te});var p=P(9672),J=P(4482),V=P(5403);function te(ae,ne=0){return(0,J.e)((de,ge)=>{de.subscribe((0,V.x)(ge,ue=>(0,p.f)(ge,ae,()=>ge.next(ue),ne),()=>(0,p.f)(ge,ae,()=>ge.complete(),ne),ue=>(0,p.f)(ge,ae,()=>ge.error(ue),ne)))})}},3099:(gt,De,P)=>{P.d(De,{B:()=>ae});var p=P(8421),J=P(7579),V=P(930),te=P(4482);function ae(de={}){const{connector:ge=(()=>new J.x),resetOnError:ue=!0,resetOnComplete:G=!0,resetOnRefCountZero:W=!0}=de;return Y=>{let Pe,we,Ze,nt=0,pe=!1,Te=!1;const Me=()=>{we?.unsubscribe(),we=void 0},Ue=()=>{Me(),Pe=Ze=void 0,pe=Te=!1},Ae=()=>{const Ie=Pe;Ue(),Ie?.unsubscribe()};return(0,te.e)((Ie,Re)=>{nt++,!Te&&!pe&&Me();const Ge=Ze=Ze??ge();Re.add(()=>{nt--,0===nt&&!Te&&!pe&&(we=ne(Ae,W))}),Ge.subscribe(Re),!Pe&&nt>0&&(Pe=new V.Hp({next:Se=>Ge.next(Se),error:Se=>{Te=!0,Me(),we=ne(Ue,ue,Se),Ge.error(Se)},complete:()=>{pe=!0,Me(),we=ne(Ue,G),Ge.complete()}}),(0,p.Xf)(Ie).subscribe(Pe))})(Y)}}function ne(de,ge,...ue){if(!0===ge)return void de();if(!1===ge)return;const G=new V.Hp({next:()=>{G.unsubscribe(),de()}});return(0,p.Xf)(ge(...ue)).subscribe(G)}},9468:(gt,De,P)=>{P.d(De,{R:()=>J});var p=P(4482);function J(V,te=0){return(0,p.e)((ae,ne)=>{ne.add(V.schedule(()=>ae.subscribe(ne),te))})}},8505:(gt,De,P)=>{P.d(De,{b:()=>ae});var p=P(576),J=P(4482),V=P(5403),te=P(4671);function ae(ne,de,ge){const ue=(0,p.m)(ne)||de||ge?{next:ne,error:de,complete:ge}:ne;return ue?(0,J.e)((G,W)=>{var Y;null===(Y=ue.subscribe)||void 0===Y||Y.call(ue);let Pe=!0;G.subscribe((0,V.x)(W,we=>{var Ze;null===(Ze=ue.next)||void 0===Ze||Ze.call(ue,we),W.next(we)},()=>{var we;Pe=!1,null===(we=ue.complete)||void 0===we||we.call(ue),W.complete()},we=>{var Ze;Pe=!1,null===(Ze=ue.error)||void 0===Ze||Ze.call(ue,we),W.error(we)},()=>{var we,Ze;Pe&&(null===(we=ue.unsubscribe)||void 0===we||we.call(ue)),null===(Ze=ue.finalize)||void 0===Ze||Ze.call(ue)}))}):te.y}},4408:(gt,De,P)=>{P.d(De,{o:()=>ae});var p=P(727);class J extends p.w0{constructor(de,ge){super()}schedule(de,ge=0){return this}}const V={setInterval(ne,de,...ge){const{delegate:ue}=V;return ue?.setInterval?ue.setInterval(ne,de,...ge):setInterval(ne,de,...ge)},clearInterval(ne){const{delegate:de}=V;return(de?.clearInterval||clearInterval)(ne)},delegate:void 0};var te=P(8737);class ae extends J{constructor(de,ge){super(de,ge),this.scheduler=de,this.work=ge,this.pending=!1}schedule(de,ge=0){var ue;if(this.closed)return this;this.state=de;const G=this.id,W=this.scheduler;return null!=G&&(this.id=this.recycleAsyncId(W,G,ge)),this.pending=!0,this.delay=ge,this.id=null!==(ue=this.id)&&void 0!==ue?ue:this.requestAsyncId(W,this.id,ge),this}requestAsyncId(de,ge,ue=0){return V.setInterval(de.flush.bind(de,this),ue)}recycleAsyncId(de,ge,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return ge;null!=ge&&V.clearInterval(ge)}execute(de,ge){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(de,ge);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(de,ge){let G,ue=!1;try{this.work(de)}catch(W){ue=!0,G=W||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:de,scheduler:ge}=this,{actions:ue}=ge;this.work=this.state=this.scheduler=null,this.pending=!1,(0,te.P)(ue,this),null!=de&&(this.id=this.recycleAsyncId(ge,de,null)),this.delay=null,super.unsubscribe()}}}},7565:(gt,De,P)=>{P.d(De,{v:()=>V});var p=P(6063);class J{constructor(ae,ne=J.now){this.schedulerActionCtor=ae,this.now=ne}schedule(ae,ne=0,de){return new this.schedulerActionCtor(this,ae).schedule(de,ne)}}J.now=p.l.now;class V extends J{constructor(ae,ne=J.now){super(ae,ne),this.actions=[],this._active=!1}flush(ae){const{actions:ne}=this;if(this._active)return void ne.push(ae);let de;this._active=!0;do{if(de=ae.execute(ae.state,ae.delay))break}while(ae=ne.shift());if(this._active=!1,de){for(;ae=ne.shift();)ae.unsubscribe();throw de}}}},4986:(gt,De,P)=>{P.d(De,{z:()=>V});var p=P(4408);const V=new(P(7565).v)(p.o)},6063:(gt,De,P)=>{P.d(De,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(gt,De,P)=>{P.d(De,{z:()=>p});const p={setTimeout(J,V,...te){const{delegate:ae}=p;return ae?.setTimeout?ae.setTimeout(J,V,...te):setTimeout(J,V,...te)},clearTimeout(J){const{delegate:V}=p;return(V?.clearTimeout||clearTimeout)(J)},delegate:void 0}},2202:(gt,De,P)=>{P.d(De,{h:()=>J});const J=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(gt,De,P)=>{P.d(De,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(gt,De,P)=>{P.d(De,{_6:()=>ne,jO:()=>te,yG:()=>ae});var p=P(576);function V(de){return de[de.length-1]}function te(de){return(0,p.m)(V(de))?de.pop():void 0}function ae(de){return function J(de){return de&&(0,p.m)(de.schedule)}(V(de))?de.pop():void 0}function ne(de,ge){return"number"==typeof V(de)?de.pop():ge}},8737:(gt,De,P)=>{function p(J,V){if(J){const te=J.indexOf(V);0<=te&&J.splice(te,1)}}P.d(De,{P:()=>p})},3888:(gt,De,P)=>{function p(J){const te=J(ae=>{Error.call(ae),ae.stack=(new Error).stack});return te.prototype=Object.create(Error.prototype),te.prototype.constructor=te,te}P.d(De,{d:()=>p})},2806:(gt,De,P)=>{P.d(De,{O:()=>te,x:()=>V});var p=P(2416);let J=null;function V(ae){if(p.v.useDeprecatedSynchronousErrorHandling){const ne=!J;if(ne&&(J={errorThrown:!1,error:null}),ae(),ne){const{errorThrown:de,error:ge}=J;if(J=null,de)throw ge}}else ae()}function te(ae){p.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=ae)}},9672:(gt,De,P)=>{function p(J,V,te,ae=0,ne=!1){const de=V.schedule(function(){te(),ne?J.add(this.schedule(null,ae)):this.unsubscribe()},ae);if(J.add(de),!ne)return de}P.d(De,{f:()=>p})},4671:(gt,De,P)=>{function p(J){return J}P.d(De,{y:()=>p})},1144:(gt,De,P)=>{P.d(De,{z:()=>p});const p=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(gt,De,P)=>{P.d(De,{D:()=>J});var p=P(576);function J(V){return Symbol.asyncIterator&&(0,p.m)(V?.[Symbol.asyncIterator])}},576:(gt,De,P)=>{function p(J){return"function"==typeof J}P.d(De,{m:()=>p})},3670:(gt,De,P)=>{P.d(De,{c:()=>V});var p=P(8822),J=P(576);function V(te){return(0,J.m)(te[p.L])}},6495:(gt,De,P)=>{P.d(De,{T:()=>V});var p=P(2202),J=P(576);function V(te){return(0,J.m)(te?.[p.h])}},8239:(gt,De,P)=>{P.d(De,{t:()=>J});var p=P(576);function J(V){return(0,p.m)(V?.then)}},3260:(gt,De,P)=>{P.d(De,{L:()=>te,Q:()=>V});var p=P(655),J=P(576);function V(ae){return(0,p.FC)(this,arguments,function*(){const de=ae.getReader();try{for(;;){const{value:ge,done:ue}=yield(0,p.qq)(de.read());if(ue)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(ge)}}finally{de.releaseLock()}})}function te(ae){return(0,J.m)(ae?.getReader)}},4482:(gt,De,P)=>{P.d(De,{A:()=>J,e:()=>V});var p=P(576);function J(te){return(0,p.m)(te?.lift)}function V(te){return ae=>{if(J(ae))return ae.lift(function(ne){try{return te(ne,this)}catch(de){this.error(de)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(gt,De,P)=>{function p(){}P.d(De,{Z:()=>p})},9635:(gt,De,P)=>{P.d(De,{U:()=>V,z:()=>J});var p=P(4671);function J(...te){return V(te)}function V(te){return 0===te.length?p.y:1===te.length?te[0]:function(ne){return te.reduce((de,ge)=>ge(de),ne)}}},7849:(gt,De,P)=>{P.d(De,{h:()=>V});var p=P(2416),J=P(3410);function V(te){J.z.setTimeout(()=>{const{onUnhandledError:ae}=p.v;if(!ae)throw te;ae(te)})}},4532:(gt,De,P)=>{function p(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(De,{z:()=>p})},655:(gt,De,P)=>{function te(re,he){var _e={};for(var xe in re)Object.prototype.hasOwnProperty.call(re,xe)&&he.indexOf(xe)<0&&(_e[xe]=re[xe]);if(null!=re&&"function"==typeof Object.getOwnPropertySymbols){var Fe=0;for(xe=Object.getOwnPropertySymbols(re);Fe<xe.length;Fe++)he.indexOf(xe[Fe])<0&&Object.prototype.propertyIsEnumerable.call(re,xe[Fe])&&(_e[xe[Fe]]=re[xe[Fe]])}return _e}function Y(re,he,_e,xe){return new(_e||(_e=Promise))(function($e,Je){function it(rn){try{Et(xe.next(rn))}catch(Qe){Je(Qe)}}function yn(rn){try{Et(xe.throw(rn))}catch(Qe){Je(Qe)}}function Et(rn){rn.done?$e(rn.value):function Fe($e){return $e instanceof _e?$e:new _e(function(Je){Je($e)})}(rn.value).then(it,yn)}Et((xe=xe.apply(re,he||[])).next())})}function Ae(re){return this instanceof Ae?(this.v=re,this):new Ae(re)}function Ie(re,he,_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,xe=_e.apply(re,he||[]),$e=[];return Fe={},Je("next"),Je("throw"),Je("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe;function Je(vt){xe[vt]&&(Fe[vt]=function(Pn){return new Promise(function(Dn,Sn){$e.push([vt,Pn,Dn,Sn])>1||it(vt,Pn)})})}function it(vt,Pn){try{!function yn(vt){vt.value instanceof Ae?Promise.resolve(vt.value.v).then(Et,rn):Qe($e[0][2],vt)}(xe[vt](Pn))}catch(Dn){Qe($e[0][3],Dn)}}function Et(vt){it("next",vt)}function rn(vt){it("throw",vt)}function Qe(vt,Pn){vt(Pn),$e.shift(),$e.length&&it($e[0][0],$e[0][1])}}function Ge(re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _e,he=re[Symbol.asyncIterator];return he?he.call(re):(re=function nt(re){var he="function"==typeof Symbol&&Symbol.iterator,_e=he&&re[he],xe=0;if(_e)return _e.call(re);if(re&&"number"==typeof re.length)return{next:function(){return re&&xe>=re.length&&(re=void 0),{value:re&&re[xe++],done:!re}}};throw new TypeError(he?"Object is not iterable.":"Symbol.iterator is not defined.")}(re),_e={},xe("next"),xe("throw"),xe("return"),_e[Symbol.asyncIterator]=function(){return this},_e);function xe($e){_e[$e]=re[$e]&&function(Je){return new Promise(function(it,yn){!function Fe($e,Je,it,yn){Promise.resolve(yn).then(function(Et){$e({value:Et,done:it})},Je)}(it,yn,(Je=re[$e](Je)).done,Je.value)})}}}P.d(De,{FC:()=>Ie,KL:()=>Ge,_T:()=>te,mG:()=>Y,qq:()=>Ae})},4650:(gt,De,P)=>{P.d(De,{$8M:()=>fl,$WT:()=>Zn,$Z:()=>KE,AFp:()=>_0,AaK:()=>ge,CHM:()=>N_,CRH:()=>jb,CZH:()=>_d,CqO:()=>DI,D6c:()=>Xf,EJc:()=>Wf,EpF:()=>bI,F4k:()=>CI,FYo:()=>xE,FiY:()=>es,GfV:()=>ME,JOm:()=>Ii,KtG:()=>P_,LFG:()=>He,Lbi:()=>xA,Lck:()=>Gv,MAs:()=>Ng,MMx:()=>am,NdJ:()=>SI,O4$:()=>Yd,OlP:()=>Mn,P3R:()=>vy,PXZ:()=>_s,Q6J:()=>wI,QGY:()=>TI,Qsj:()=>uD,R0b:()=>Ri,RDi:()=>_c,Rgc:()=>Du,SBq:()=>Ta,Sil:()=>MA,Suo:()=>kc,TTD:()=>oa,TgZ:()=>Pg,X6Q:()=>je,XFs:()=>mt,Xpm:()=>ur,Xts:()=>_u,Y36:()=>zl,YKP:()=>Hv,YNc:()=>XD,Yjl:()=>Ve,Yz7:()=>Qe,Z0I:()=>Sn,ZZ4:()=>Hi,_UZ:()=>df,_Vd:()=>vu,_c5:()=>fo,_uU:()=>GI,aQg:()=>zm,c2e:()=>Mm,cJS:()=>Pn,cg1:()=>Yg,dDg:()=>A0,dqk:()=>Rt,eFA:()=>cT,eJc:()=>wm,eoX:()=>Om,f3M:()=>ot,g9A:()=>Qb,h0i:()=>ud,hGG:()=>jA,hij:()=>Di,iGM:()=>Bb,ifc:()=>B,ip1:()=>Rm,jDz:()=>Cf,kL8:()=>yf,kcU:()=>j_,lG2:()=>ye,lqb:()=>Ec,lri:()=>D0,n5z:()=>oh,oAB:()=>_o,q4F:()=>Ay,qLn:()=>qh,qZA:()=>lf,rWj:()=>S0,sBO:()=>Ct,s_b:()=>pm,soG:()=>zf,tb:()=>R0,tp0:()=>rc,uIk:()=>lv,vHH:()=>pe,vpe:()=>Vs,wAp:()=>Vt,xp6:()=>BE,z2F:()=>ka,zSh:()=>by,zs3:()=>$l});var p=P(7579),J=P(727),V=P(9751),te=P(6451),ae=P(3099);function ne(s){for(let o in s)if(s[o]===ne)return o;throw Error("Could not find renamed property on target object.")}function ge(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ge).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function ue(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const G=ne({__forward_ref__:ne});function W(s){return s.__forward_ref__=W,s.toString=function(){return ge(this())},s}function Y(s){return Pe(s)?s():s}function Pe(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===W}function we(s){return s&&!!s.\u0275providers}const nt="https://g.co/ng/security#xss";class pe extends Error{constructor(o,u){super(Te(o,u)),this.code=o}}function Te(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}function Me(s){return"string"==typeof s?s:null==s?"":String(s)}function Ge(s,o){throw new pe(-201,!1)}function Je(s,o){null==s&&function it(s,o,u,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${u} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function Qe(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Pn(s){return{providers:s.providers||[],imports:s.imports||[]}}function Dn(s){return dn(s,Kn)||dn(s,En)}function Sn(s){return null!==Dn(s)}function dn(s,o){return s.hasOwnProperty(o)?s[o]:null}function Yr(s){return s&&(s.hasOwnProperty(oi)||s.hasOwnProperty(kn))?s[oi]:null}const Kn=ne({\u0275prov:ne}),oi=ne({\u0275inj:ne}),En=ne({ngInjectableDef:ne}),kn=ne({ngInjectorDef:ne});var mt=(()=>((mt=mt||{})[mt.Default=0]="Default",mt[mt.Host=1]="Host",mt[mt.Self=2]="Self",mt[mt.SkipSelf=4]="SkipSelf",mt[mt.Optional=8]="Optional",mt))();let Qr;function mn(s){const o=Qr;return Qr=s,o}function ar(s,o,u){const l=Dn(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:u&mt.Optional?null:void 0!==o?o:void Ge(ge(s))}const Rt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),tn={},Gn="__NG_DI_FLAG__",er="ngTempTokenPath",tr="ngTokenPath",qi=/\n/gm,cn="\u0275",Nr="__source";let Xt;function mr(s){const o=Xt;return Xt=s,o}function ai(s,o=mt.Default){if(void 0===Xt)throw new pe(-203,!1);return null===Xt?ar(s,void 0,o):Xt.get(s,o&mt.Optional?null:void 0,o)}function He(s,o=mt.Default){return(function Xr(){return Qr}()||ai)(Y(s),o)}function ot(s,o=mt.Default){return He(s,Dt(o))}function Dt(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Lt(s){const o=[];for(let u=0;u<s.length;u++){const l=Y(s[u]);if(Array.isArray(l)){if(0===l.length)throw new pe(900,!1);let d,m=mt.Default;for(let v=0;v<l.length;v++){const I=l[v],T=zn(I);"number"==typeof T?-1===T?d=I.token:m|=T:d=I}o.push(He(d,m))}else o.push(He(l))}return o}function jt(s,o){return s[Gn]=o,s.prototype[Gn]=o,s}function zn(s){return s[Gn]}function L(s){return{toString:s}.toString()}var q=(()=>((q=q||{})[q.OnPush=0]="OnPush",q[q.Default=1]="Default",q))(),B=(()=>{return(s=B||(B={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",B;var s})();const ce={},be=[],ct=ne({\u0275cmp:ne}),Pt=ne({\u0275dir:ne}),kt=ne({\u0275pipe:ne}),nn=ne({\u0275mod:ne}),It=ne({\u0275fac:ne}),An=ne({__NG_ELEMENT_ID__:ne});let Er=0;function ur(s){return L(()=>{const o=Ki(s),u={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===q.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||B.Emulated,id:"c"+Er++,styles:s.styles||be,_:null,schemas:s.schemas||null,tView:null};Pr(u);const l=s.dependencies;return u.directiveDefs=as(l,!1),u.pipeDefs=as(l,!0),u})}function Qo(s){return qe(s)||Jt(s)}function mo(s){return null!==s}function _o(s){return L(()=>({type:s.type,bootstrap:s.bootstrap||be,declarations:s.declarations||be,imports:s.imports||be,exports:s.exports||be,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Z(s,o){if(null==s)return ce;const u={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],m=d;Array.isArray(d)&&(m=d[1],d=d[0]),u[d]=l,o&&(o[d]=m)}return u}function ye(s){return L(()=>{const o=Ki(s);return Pr(o),o})}function Ve(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function qe(s){return s[ct]||null}function Jt(s){return s[Pt]||null}function Ht(s){return s[kt]||null}function Zn(s){const o=qe(s)||Jt(s)||Ht(s);return null!==o&&o.standalone}function hn(s,o){const u=s[nn]||null;if(!u&&!0===o)throw new Error(`Type ${ge(s)} does not have '\u0275mod' property.`);return u}function Ki(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||be,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Z(s.inputs,o),outputs:Z(s.outputs)}}function Pr(s){s.features?.forEach(o=>o(s))}function as(s,o){if(!s)return null;const u=o?Ht:Qo;return()=>("function"==typeof s?s():s).map(l=>u(l)).filter(mo)}const mi=0,ut=1,Gt=2,On=3,Jr=4,Li=5,nr=6,Ks=7,Ln=8,Va=9,bs=10,Kt=11,us=12,Ts=13,Zs=14,Ys=15,Ir=16,Cs=17,Ds=18,ei=19,_i=20,Bu=21,ln=22,Jo=1,Ba=2,yo=7,vo=8,ea=9,kr=10;function yi(s){return Array.isArray(s)&&"object"==typeof s[Jo]}function vi(s){return Array.isArray(s)&&!0===s[Jo]}function cs(s){return 0!=(4&s.flags)}function ta(s){return s.componentOffset>-1}function ja(s){return 1==(1&s.flags)}function Hr(s){return!!s.template}function Rp(s){return 0!=(256&s[Gt])}function As(s,o){return s.hasOwnProperty(It)?s[It]:null}class xp{constructor(o,u,l){this.previousValue=o,this.currentValue=u,this.firstChange=l}isFirstChange(){return this.firstChange}}function oa(){return Qi}function Qi(s){return s.type.prototype.ngOnChanges&&(s.setInput=Xi),Ga}function Ga(){const s=nl(this),o=s?.current;if(o){const u=s.previous;if(u===ce)s.previous=o;else for(let l in o)u[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Xi(s,o,u,l){const d=this.declaredInputs[u],m=nl(s)||function Gu(s,o){return s[Hu]=o}(s,{previous:ce,current:null}),v=m.current||(m.current={}),I=m.previous,T=I[d];v[d]=new xp(T&&T.currentValue,o,I===ce),s[l]=o}oa.ngInherit=!0;const Hu="__ngSimpleChanges__";function nl(s){return s[Hu]||null}const ti=function(s,o,u){},O="svg";function z(s){for(;Array.isArray(s);)s=s[mi];return s}function Be(s,o){return z(o[s.index])}function jn(s,o){return s.data[o]}function sn(s,o){const u=o[s];return yi(u)?u:u[mi]}function zt(s){return 64==(64&s[Gt])}function br(s,o){return null==o?null:s[o]}function aa(s){s[Ds]=0}function Qs(s,o){s[Li]+=o;let u=s,l=s[On];for(;null!==l&&(1===o&&1===u[Li]||-1===o&&0===u[Li]);)l[Li]+=o,u=l,l=l[On]}const Ft={lFrame:V_(null),bindingsEnabled:!0};function M_(){return Ft.bindingsEnabled}function Ne(){return Ft.lFrame.lView}function fn(){return Ft.lFrame.tView}function N_(s){return Ft.lFrame.contextLView=s,s[Ln]}function P_(s){return Ft.lFrame.contextLView=null,s}function Or(){let s=k_();for(;null!==s&&64===s.type;)s=s.parent;return s}function k_(){return Ft.lFrame.currentTNode}function Xs(s,o){const u=Ft.lFrame;u.currentTNode=s,u.isParent=o}function il(){return Ft.lFrame.isParent}function ca(){return Ft.lFrame.bindingIndex++}function kp(s,o){const u=Ft.lFrame;u.bindingIndex=u.bindingRootIndex=s,Js(o)}function Js(s){Ft.lFrame.currentDirectiveIndex=s}function F_(){return Ft.lFrame.currentQueryIndex}function Op(s){Ft.lFrame.currentQueryIndex=s}function eE(s){const o=s[ut];return 2===o.type?o.declTNode:1===o.type?s[nr]:null}function U_(s,o,u){if(u&mt.SkipSelf){let d=o,m=s;for(;!(d=d.parent,null!==d||u&mt.Host||(d=eE(m),null===d||(m=m[Ys],10&d.type))););if(null===d)return!1;o=d,s=m}const l=Ft.lFrame=tE();return l.currentTNode=o,l.lView=s,!0}function Lp(s){const o=tE(),u=s[ut];Ft.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function tE(){const s=Ft.lFrame,o=null===s?null:s.child;return null===o?V_(s):o}function V_(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function B_(){const s=Ft.lFrame;return Ft.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const nE=B_;function Fp(){const s=B_();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function wi(){return Ft.lFrame.selectedIndex}function bo(s){Ft.lFrame.selectedIndex=s}function xn(){const s=Ft.lFrame;return jn(s.tView,s.selectedIndex)}function Yd(){Ft.lFrame.currentNamespace=O}function j_(){!function sE(){Ft.lFrame.currentNamespace=null}()}function zu(s,o){for(let u=o.directiveStart,l=o.directiveEnd;u<l;u++){const m=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:T,ngAfterViewChecked:S,ngOnDestroy:A}=m;v&&(s.contentHooks||(s.contentHooks=[])).push(-u,v),I&&((s.contentHooks||(s.contentHooks=[])).push(u,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,I)),T&&(s.viewHooks||(s.viewHooks=[])).push(-u,T),S&&((s.viewHooks||(s.viewHooks=[])).push(u,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,S)),null!=A&&(s.destroyHooks||(s.destroyHooks=[])).push(u,A)}}function Qd(s,o,u){qa(s,o,3,u)}function la(s,o,u,l){(3&s[Gt])===u&&qa(s,o,u,l)}function Wa(s,o){let u=s[Gt];(3&u)===o&&(u&=2047,u+=1,s[Gt]=u)}function qa(s,o,u,l){const m=l??-1,v=o.length-1;let I=0;for(let T=void 0!==l?65535&s[Ds]:0;T<v;T++)if("number"==typeof o[T+1]){if(I=o[T],null!=l&&I>=l)break}else o[T]<0&&(s[Ds]+=65536),(I<m||-1==m)&&($_(s,u,o,T),s[Ds]=(4294901760&s[Ds])+T+2),T++}function $_(s,o,u,l){const d=u[l]<0,m=u[l+1],I=s[d?-u[l]:u[l]];if(d){if(s[Gt]>>11<s[Ds]>>16&&(3&s[Gt])===o){s[Gt]+=2048,ti(4,I,m);try{m.call(I)}finally{ti(5,I,m)}}}else{ti(4,I,m);try{m.call(I)}finally{ti(5,I,m)}}}const eo=-1;class al{constructor(o,u,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=l}}function ul(s,o,u){let l=0;for(;l<u.length;){const d=u[l];if("number"==typeof d){if(0!==d)break;l++;const m=u[l++],v=u[l++],I=u[l++];s.setAttribute(o,v,I,m)}else{const m=d,v=u[++l];cl(m)?s.setProperty(o,m,v):s.setAttribute(o,m,v),l++}}return l}function Co(s){return 3===s||4===s||6===s}function cl(s){return 64===s.charCodeAt(0)}function to(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?u=d:0===u||Jd(s,u,d,null,-1===u||2===u?o[++l]:null)}}return s}function Jd(s,o,u,l,d){let m=0,v=s.length;if(-1===o)v=-1;else for(;m<s.length;){const I=s[m++];if("number"==typeof I){if(I===o){v=-1;break}if(I>o){v=m-1;break}}}for(;m<s.length;){const I=s[m];if("number"==typeof I)break;if(I===u){if(null===l)return void(null!==d&&(s[m+1]=d));if(l===s[m+1])return void(s[m+2]=d)}m++,null!==l&&m++,null!==d&&m++}-1!==v&&(s.splice(v,0,o),m=v+1),s.splice(m++,0,u),null!==l&&s.splice(m++,0,l),null!==d&&s.splice(m++,0,d)}function eh(s){return s!==eo}function qu(s){return 32767&s}function da(s,o){let u=function G_(s){return s>>16}(s),l=o;for(;u>0;)l=l[Ys],u--;return l}let Ku=!0;function Do(s){const o=Ku;return Ku=s,o}const nh=255,Zu=5;let ll=0;const Ei={};function ha(s,o){const u=Vp(s,o);if(-1!==u)return u;const l=o[ut];l.firstCreatePass&&(s.injectorIndex=o.length,Yu(l.data,s),Yu(o,null),Yu(l.blueprint,null));const d=Qu(s,o),m=s.injectorIndex;if(eh(d)){const v=qu(d),I=da(d,o),T=I[ut].data;for(let S=0;S<8;S++)o[m+S]=I[v+S]|T[v+S]}return o[m+8]=d,m}function Yu(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Vp(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Qu(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,l=null,d=o;for(;null!==d;){if(l=ah(d),null===l)return eo;if(u++,d=d[Ys],-1!==l.injectorIndex)return l.injectorIndex|u<<16}return eo}function rh(s,o,u){!function z_(s,o,u){let l;"string"==typeof u?l=u.charCodeAt(0)||0:u.hasOwnProperty(An)&&(l=u[An]),null==l&&(l=u[An]=ll++);const d=l&nh;o.data[s+(d>>Zu)]|=1<<d}(s,o,u)}function ih(s,o,u){if(u&mt.Optional||void 0!==s)return s;Ge()}function Bp(s,o,u,l){if(u&mt.Optional&&void 0===l&&(l=null),!(u&(mt.Self|mt.Host))){const d=s[Va],m=mn(void 0);try{return d?d.get(o,l,u&mt.Optional):ar(o,l,u&mt.Optional)}finally{mn(m)}}return ih(l,0,u)}function jp(s,o,u,l=mt.Default,d){if(null!==s){if(1024&o[Gt]){const v=function Hp(s,o,u,l,d){let m=s,v=o;for(;null!==m&&null!==v&&1024&v[Gt]&&!(256&v[Gt]);){const I=dl(m,v,u,l|mt.Self,Ei);if(I!==Ei)return I;let T=m.parent;if(!T){const S=v[Bu];if(S){const A=S.get(u,Ei,l);if(A!==Ei)return A}T=ah(v),v=v[Ys]}m=T}return d}(s,o,u,l,Ei);if(v!==Ei)return v}const m=dl(s,o,u,l,Ei);if(m!==Ei)return m}return Bp(o,u,l,d)}function dl(s,o,u,l,d){const m=function $p(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(An)?s[An]:void 0;return"number"==typeof o?o>=0?o&nh:q_:o}(u);if("function"==typeof m){if(!U_(o,s,l))return l&mt.Host?ih(d,0,l):Bp(o,u,l,d);try{const v=m(l);if(null!=v||l&mt.Optional)return v;Ge()}finally{nE()}}else if("number"==typeof m){let v=null,I=Vp(s,o),T=eo,S=l&mt.Host?o[Ir][nr]:null;for((-1===I||l&mt.SkipSelf)&&(T=-1===I?Qu(s,o):o[I+8],T!==eo&&Xu(l,!1)?(v=o[ut],I=qu(T),o=da(T,o)):I=-1);-1!==I;){const A=o[ut];if(W_(m,I,A.data)){const U=sh(I,o,u,v,l,S);if(U!==Ei)return U}T=o[I+8],T!==eo&&Xu(l,o[ut].data[I+8]===S)&&W_(m,I,o)?(v=A,I=qu(T),o=da(T,o)):I=-1}}return d}function sh(s,o,u,l,d,m){const v=o[ut],I=v.data[s+8],A=hl(I,v,u,null==l?ta(I)&&Ku:l!=v&&0!=(3&I.type),d&mt.Host&&m===I);return null!==A?fa(o,v,A,I):Ei}function hl(s,o,u,l,d){const m=s.providerIndexes,v=o.data,I=1048575&m,T=s.directiveStart,A=m>>20,K=d?I+A:s.directiveEnd;for(let X=l?I:I+A;X<K;X++){const ve=v[X];if(X<T&&u===ve||X>=T&&ve.type===u)return X}if(d){const X=v[T];if(X&&Hr(X)&&X.type===u)return T}return null}function fa(s,o,u,l){let d=s[u];const m=o.data;if(function Wu(s){return s instanceof al}(d)){const v=d;v.resolving&&function Ae(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new pe(-200,`Circular dependency in DI detected for ${s}${u}`)}(function Ue(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Me(s)}(m[u]));const I=Do(v.canSeeViewProviders);v.resolving=!0;const T=v.injectImpl?mn(v.injectImpl):null;U_(s,l,mt.Default);try{d=s[u]=v.factory(void 0,m,s,l),o.firstCreatePass&&u>=l.directiveStart&&function Up(s,o,u){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:m}=o.type.prototype;if(l){const v=Qi(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),m&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,m))}(u,m[u],o)}finally{null!==T&&mn(T),Do(I),v.resolving=!1,nE()}}return d}function W_(s,o,u){return!!(u[o+(s>>Zu)]&1<<s)}function Xu(s,o){return!(s&mt.Self||s&mt.Host&&o)}class Za{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,l){return jp(this._tNode,this._lView,o,Dt(l),u)}}function q_(){return new Za(Or(),Ne())}function oh(s){return L(()=>{const o=s.prototype.constructor,u=o[It]||Ju(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const m=d[It]||Ju(d);if(m&&m!==u)return m;d=Object.getPrototypeOf(d)}return m=>new m})}function Ju(s){return Pe(s)?()=>{const o=Ju(Y(s));return o&&o()}:As(s)}function ah(s){const o=s[ut],u=o.type;return 2===u?o.declTNode:1===u?s[nr]:null}function fl(s){return function Ka(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const l=u.length;let d=0;for(;d<l;){const m=u[d];if(Co(m))break;if(0===m)d+=2;else if("number"==typeof m)for(d++;d<l&&"string"==typeof u[d];)d++;else{if(m===o)return u[d+1];d+=2}}}return null}(Or(),s)}const ec="__parameters__";function So(s,o,u){return L(()=>{const l=function uh(s){return function(...u){if(s){const l=s(...u);for(const d in l)this[d]=l[d]}}}(o);function d(...m){if(this instanceof d)return l.apply(this,m),this;const v=new d(...m);return I.annotation=v,I;function I(T,S,A){const U=T.hasOwnProperty(ec)?T[ec]:Object.defineProperty(T,ec,{value:[]})[ec];for(;U.length<=A;)U.push(null);return(U[A]=U[A]||[]).push(v),T}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class Mn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Qe({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ga(s,o){s.forEach(u=>Array.isArray(u)?ga(u,o):o(u))}function X_(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function dh(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}const es=jt(So("Optional"),8),rc=jt(So("SkipSelf"),4);var Ii=(()=>((Ii=Ii||{})[Ii.Important=1]="Important",Ii[Ii.DashCase=2]="DashCase",Ii))();const ts=new Map;let El=0;const bl="__ngContext__";function ni(s,o){yi(o)?(s[bl]=o[_i],function bh(s){ts.set(s[_i],s)}(o)):s[bl]=o}let va;function cc(s,o){return va(s,o)}function Po(s){const o=s[On];return vi(o)?o[On]:o}function ou(s){return Al(s[Ts])}function Sh(s){return Al(s[Jr])}function Al(s){for(;null!==s&&!vi(s);)s=s[Jr];return s}function ro(s,o,u,l,d){if(null!=l){let m,v=!1;vi(l)?m=l:yi(l)&&(v=!0,l=l[mi]);const I=z(l);0===s&&null!==u?null==d?tg(o,u,I):ns(o,u,I,d||null,!0):1===s&&null!==u?ns(o,u,I,d||null,!0):2===s?function lu(s,o,u){const l=gc(s,o);l&&function fc(s,o,u,l){s.removeChild(o,u,l)}(s,l,o,u)}(o,I,v):3===s&&o.destroyNode(I),null!=m&&function fs(s,o,u,l,d){const m=u[yo];m!==z(u)&&ro(o,s,l,m,d);for(let I=kr;I<u.length;I++){const T=u[I];ko(T[ut],T,s,o,l,m)}}(o,s,m,u,d)}}function Rh(s,o,u){return s.createElement(o,u)}function eg(s,o){const u=s[ea],l=u.indexOf(o),d=o[On];512&o[Gt]&&(o[Gt]&=-513,Qs(d,-1)),u.splice(l,1)}function dc(s,o){if(s.length<=kr)return;const u=kr+o,l=s[u];if(l){const d=l[Cs];null!==d&&d!==s&&eg(d,l),o>0&&(s[u-1][Jr]=l[Jr]);const m=dh(s,kr+o);!function uy(s,o){ko(s,o,o[Kt],2,null,null),o[mi]=null,o[nr]=null}(l[ut],l);const v=m[ei];null!==v&&v.detachView(m[ut]),l[On]=null,l[Jr]=null,l[Gt]&=-65}return l}function hc(s,o){if(!(128&o[Gt])){const u=o[Kt];u.destroyNode&&ko(s,o,u,3,null,null),function cy(s){let o=s[Ts];if(!o)return Nl(s[ut],s);for(;o;){let u=null;if(yi(o))u=o[Ts];else{const l=o[kr];l&&(u=l)}if(!u){for(;o&&!o[Jr]&&o!==s;)yi(o)&&Nl(o[ut],o),o=o[On];null===o&&(o=s),yi(o)&&Nl(o[ut],o),u=o&&o[Jr]}o=u}}(o)}}function Nl(s,o){if(!(128&o[Gt])){o[Gt]&=-65,o[Gt]|=128,function Mh(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let l=0;l<u.length;l+=2){const d=o[u[l]];if(!(d instanceof al)){const m=u[l+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const I=d[m[v]],T=m[v+1];ti(4,I,T);try{T.call(I)}finally{ti(5,I,T)}}else{ti(4,d,m);try{m.call(d)}finally{ti(5,d,m)}}}}}(s,o),function wa(s,o){const u=s.cleanup,l=o[Ks];let d=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const v=u[m+3];v>=0?l[d=v]():l[d=-v].unsubscribe(),m+=2}else{const v=l[d=u[m+1]];u[m].call(v)}if(null!==l){for(let m=d+1;m<l.length;m++)(0,l[m])();o[Ks]=null}}(s,o),1===o[ut].type&&o[Kt].destroy();const u=o[Cs];if(null!==u&&vi(o[On])){u!==o[On]&&eg(u,o);const l=o[ei];null!==l&&l.detachView(s)}!function Dr(s){ts.delete(s[_i])}(o)}}function dy(s,o,u){return function Nh(s,o,u){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return u[mi];{const{componentOffset:d}=l;if(d>-1){const{encapsulation:m}=s.data[l.directiveStart+d];if(m===B.None||m===B.Emulated)return null}return Be(l,u)}}(s,o.parent,u)}function ns(s,o,u,l,d){s.insertBefore(o,u,l,d)}function tg(s,o,u){s.appendChild(o,u)}function Ea(s,o,u,l,d){null!==l?ns(s,o,u,l,d):tg(s,o,u)}function gc(s,o){return s.parentNode(o)}let Ol,ps,yc,kl=function io(s,o,u){return 40&s.type?Be(s,u):null};function uu(s,o,u,l){const d=dy(s,l,o),m=o[Kt],I=function Pl(s,o,u){return kl(s,o,u)}(l.parent||o[nr],l,o);if(null!=d)if(Array.isArray(u))for(let T=0;T<u.length;T++)Ea(m,d,u[T],I,!1);else Ea(m,d,u,I,!1);void 0!==Ol&&Ol(m,l,o,u,d)}function cu(s,o){if(null!==o){const u=o.type;if(3&u)return Be(o,s);if(4&u)return Ia(-1,s[o.index]);if(8&u){const l=o.child;if(null!==l)return cu(s,l);{const d=s[o.index];return vi(d)?Ia(-1,d):z(d)}}if(32&u)return cc(o,s)()||z(s[o.index]);{const l=Sr(s,o);return null!==l?Array.isArray(l)?l[0]:cu(Po(s[Ir]),l):cu(s,o.next)}}return null}function Sr(s,o){return null!==o?s[Ir][nr].projection[o.projection]:null}function Ia(s,o){const u=kr+s+1;if(u<o.length){const l=o[u],d=l[ut].firstChild;if(null!==d)return cu(l,d)}return o[yo]}function kh(s,o,u,l,d,m,v){for(;null!=u;){const I=l[u.index],T=u.type;if(v&&0===o&&(I&&ni(z(I),l),u.flags|=2),32!=(32&u.flags))if(8&T)kh(s,o,u.child,l,d,m,!1),ro(o,s,d,I,m);else if(32&T){const S=cc(u,l);let A;for(;A=S();)ro(o,s,d,A,m);ro(o,s,d,I,m)}else 16&T?du(s,o,l,u,d,m):ro(o,s,d,I,m);u=v?u.projectionNext:u.next}}function ko(s,o,u,l,d,m){kh(u,l,s.firstChild,o,d,m,!1)}function du(s,o,u,l,d,m){const v=u[Ir],T=v[nr].projection[l.projection];if(Array.isArray(T))for(let S=0;S<T.length;S++)ro(o,s,d,T[S],m);else kh(s,o,T,v[On],d,m,!0)}function hu(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function mc(s,o,u){const{mergedAttrs:l,classes:d,styles:m}=u;null!==l&&ul(s,o,l),null!==d&&hu(s,o,d),null!==m&&function Ti(s,o,u){s.setAttribute(o,"style",u)}(s,o,m)}function _c(s){ps=s}function sg(s){return function Fl(){if(void 0===yc&&(yc=null,Rt.trustedTypes))try{yc=Rt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return yc}()?.createScriptURL(s)||s}class og{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${nt})`}}function C(s){return s instanceof og?s.changingThisBreaksApplicationSecurity:s}function M(s,o){const u=function Q(s){return s instanceof og&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${nt})`)}return u===o}const wc=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Fr=(()=>((Fr=Fr||{})[Fr.NONE=0]="NONE",Fr[Fr.HTML=1]="HTML",Fr[Fr.STYLE=2]="STYLE",Fr[Fr.SCRIPT=3]="SCRIPT",Fr[Fr.URL=4]="URL",Fr[Fr.RESOURCE_URL=5]="RESOURCE_URL",Fr))();function dg(s){const o=Gh();return o?o.sanitize(Fr.URL,s)||"":M(s,"URL")?C(s):function gu(s){return(s=String(s)).match(wc)?s:"unsafe:"+s}(Me(s))}function ms(s){const o=Gh();if(o)return sg(o.sanitize(Fr.RESOURCE_URL,s)||"");if(M(s,"ResourceURL"))return sg(C(s));throw new pe(904,!1)}function vy(s,o,u){return function tD(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?ms:dg}(o,u)(s)}function Gh(){const s=Ne();return s&&s[us]}const _u=new Mn("ENVIRONMENT_INITIALIZER"),Vl=new Mn("INJECTOR",-1),_E=new Mn("INJECTOR_DEF_TYPES");class yE{get(o,u=tn){if(u===tn){const l=new Error(`NullInjectorError: No provider for ${ge(o)}!`);throw l.name="NullInjectorError",l}return u}}function zh(...s){return{\u0275providers:vE(0,s),\u0275fromNgModule:!0}}function vE(s,...o){const u=[],l=new Set;let d;return ga(o,m=>{const v=m;Ey(v,u,[],l)&&(d||(d=[]),d.push(v))}),void 0!==d&&wE(d,u),u}function wE(s,o){for(let u=0;u<s.length;u++){const{providers:d}=s[u];Iy(d,m=>{o.push(m)})}}function Ey(s,o,u,l){if(!(s=Y(s)))return!1;let d=null,m=Yr(s);const v=!m&&qe(s);if(m||v){if(v&&!v.standalone)return!1;d=s}else{const T=s.ngModule;if(m=Yr(T),!m)return!1;d=T}const I=l.has(d);if(v){if(I)return!1;if(l.add(d),v.dependencies){const T="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const S of T)Ey(S,o,u,l)}}else{if(!m)return!1;{if(null!=m.imports&&!I){let S;l.add(d);try{ga(m.imports,A=>{Ey(A,o,u,l)&&(S||(S=[]),S.push(A))})}finally{}void 0!==S&&wE(S,o)}if(!I){const S=As(d)||(()=>new d);o.push({provide:d,useFactory:S,deps:be},{provide:_E,useValue:d,multi:!0},{provide:_u,useValue:()=>He(d),multi:!0})}const T=m.providers;null==T||I||Iy(T,A=>{o.push(A)})}}return d!==s&&void 0!==s.providers}function Iy(s,o){for(let u of s)we(u)&&(u=u.\u0275providers),Array.isArray(u)?Iy(u,o):o(u)}const nD=ne({provide:String,useValue:ne});function EE(s){return null!==s&&"object"==typeof s&&nD in s}function Oo(s){return"function"==typeof s}const by=new Mn("Set Injector scope."),pg={},rD={};let Ty;function gg(){return void 0===Ty&&(Ty=new yE),Ty}class Ec{}class bE extends Ec{get destroyed(){return this._destroyed}constructor(o,u,l,d){super(),this.parent=u,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Sy(o,v=>this.processProvider(v)),this.records.set(Vl,yu(void 0,this)),d.has("environment")&&this.records.set(Ec,yu(void 0,this));const m=this.records.get(by);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(_E.multi,be,mt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=mr(this),l=mn(void 0);try{return o()}finally{mr(u),mn(l)}}get(o,u=tn,l=mt.Default){this.assertNotDestroyed(),l=Dt(l);const d=mr(this),m=mn(void 0);try{if(!(l&mt.SkipSelf)){let I=this.records.get(o);if(void 0===I){const T=function mg(s){return"function"==typeof s||"object"==typeof s&&s instanceof Mn}(o)&&Dn(o);I=T&&this.injectableDefInScope(T)?yu(Cy(o),pg):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(l&mt.Self?gg():this.parent).get(o,u=l&mt.Optional&&u===tn?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[er]=v[er]||[]).unshift(ge(o)),d)throw v;return function H(s,o,u,l){const d=s[er];throw o[Nr]&&d.unshift(o[Nr]),s.message=function R(s,o,u,l=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==cn?s.slice(2):s;let d=ge(o);if(Array.isArray(o))d=o.map(ge).join(" -> ");else if("object"==typeof o){let m=[];for(let v in o)if(o.hasOwnProperty(v)){let I=o[v];m.push(v+":"+("string"==typeof I?JSON.stringify(I):ge(I)))}d=`{${m.join(", ")}}`}return`${u}${l?"("+l+")":""}[${d}]: ${s.replace(qi,"\n  ")}`}("\n"+s.message,d,u,l),s[tr]=d,s[er]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{mn(m),mr(d)}}resolveInjectorInitializers(){const o=mr(this),u=mn(void 0);try{const l=this.get(_u.multi,be,mt.Self);for(const d of l)d()}finally{mr(o),mn(u)}}toString(){const o=[],u=this.records;for(const l of u.keys())o.push(ge(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new pe(205,!1)}processProvider(o){let u=Oo(o=Y(o))?o:Y(o&&o.provide);const l=function TE(s){return EE(s)?yu(void 0,s.useValue):yu(function CE(s,o,u){let l;if(Oo(s)){const d=Y(s);return As(d)||Cy(d)}if(EE(s))l=()=>Y(s.useValue);else if(function fg(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...Lt(s.deps||[]));else if(function IE(s){return!(!s||!s.useExisting)}(s))l=()=>He(Y(s.useExisting));else{const d=Y(s&&(s.useClass||s.provide));if(!function DE(s){return!!s.deps}(s))return As(d)||Cy(d);l=()=>new d(...Lt(s.deps))}return l}(s),pg)}(o);if(Oo(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=yu(void 0,pg,!0),d.factory=()=>Lt(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,l)}hydrate(o,u){return u.value===pg&&(u.value=rD,u.value=u.factory()),"object"==typeof u.value&&u.value&&function Dy(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=Y(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Cy(s){const o=Dn(s),u=null!==o?o.factory:As(s);if(null!==u)return u;if(s instanceof Mn)throw new pe(204,!1);if(s instanceof Function)return function iD(s){const o=s.length;if(o>0)throw function Xa(s,o){const u=[];for(let l=0;l<s;l++)u.push(o);return u}(o,"?"),new pe(204,!1);const u=function or(s){const o=s&&(s[Kn]||s[En]);return o?(function Mr(s){if(s.hasOwnProperty("name"))return s.name;(""+s).match(/^function\s*([^\s(]+)/)}(s),o):null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new pe(204,!1)}function yu(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function Sy(s,o){for(const u of s)Array.isArray(u)?Sy(u,o):u&&we(u)?Sy(u.\u0275providers,o):o(u)}class sD{}class SE{}class AE{resolveComponentFactory(o){throw function oD(s){const o=Error(`No component factory found for ${ge(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let vu=(()=>{class s{}return s.NULL=new AE,s})();function _g(){return Ic(Or(),Ne())}function Ic(s,o){return new Ta(Be(s,o))}let Ta=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=_g,s})();function RE(s){return s instanceof Ta?s.nativeElement:s}class xE{}let uD=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function cD(){const s=Ne(),u=sn(Or().index,s);return(yi(u)?u:s)[Kt]}(),s})(),lD=(()=>{class s{}return s.\u0275prov=Qe({token:s,providedIn:"root",factory:()=>null}),s})();class ME{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Ay=new ME("15.2.3"),Ry={},xy="ngOriginalError";function My(s){return s[xy]}class qh{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&My(o);for(;u&&My(u);)u=My(u);return u||null}}function Lo(s){return s instanceof Function?s():s}function Ny(s,o,u){let l=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const m=o.length;if(d+m===l||s.charCodeAt(d+m)<=32)return d}u=d+1}}const yg="ng-template";function _D(s,o,u){let l=0;for(;l<s.length;){let d=s[l++];if(u&&"class"===d){if(d=s[l],-1!==Ny(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function Py(s){return 4===s.type&&s.value!==yg}function jl(s,o,u){return o===(4!==s.type||u?s.value:yg)}function ky(s,o,u){let l=4;const d=s.attrs||[],m=function FE(s){for(let o=0;o<s.length;o++)if(Co(s[o]))return o;return s.length}(d);let v=!1;for(let I=0;I<o.length;I++){const T=o[I];if("number"!=typeof T){if(!v)if(4&l){if(l=2|1&l,""!==T&&!jl(s,T,u)||""===T&&1===o.length){if(so(l))return!1;v=!0}}else{const S=8&l?T:o[++I];if(8&l&&null!==s.attrs){if(!_D(s.attrs,S,u)){if(so(l))return!1;v=!0}continue}const U=LE(8&l?"class":T,d,Py(s),u);if(-1===U){if(so(l))return!1;v=!0;continue}if(""!==S){let K;K=U>m?"":d[U+1].toLowerCase();const X=8&l?K:null;if(X&&-1!==Ny(X,S,0)||2&l&&S!==K){if(so(l))return!1;v=!0}}}}else{if(!v&&!so(l)&&!so(T))return!1;if(v&&so(T))continue;v=!1,l=T|1&l}}return so(l)||v}function so(s){return 0==(1&s)}function LE(s,o,u,l){if(null===o)return-1;let d=0;if(l||!u){let m=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)m=!0;else{if(1===v||2===v){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=m?1:2}return-1}return function UE(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const l=s[u];if("number"==typeof l)return-1;if(l===o)return u;u++}return-1}(o,s)}function Kh(s,o,u=!1){for(let l=0;l<o.length;l++)if(ky(s,o[l],u))return!0;return!1}function VE(s,o){return s?":not("+o.trim()+")":o}function vD(s){let o=s[0],u=1,l=2,d="",m=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&l){const I=s[++u];d+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!so(v)&&(o+=VE(m,d),d=""),l=v,m=m||!so(l);u++}return""!==d&&(o+=VE(m,d)),o}const qt={};function BE(s){jE(fn(),Ne(),wi()+s,!1)}function jE(s,o,u,l){if(!l)if(3==(3&o[Gt])){const m=s.preOrderCheckHooks;null!==m&&Qd(o,m,u)}else{const m=s.preOrderHooks;null!==m&&la(o,m,0,u)}bo(u)}function HE(s,o=null,u=null,l){const d=Ly(s,o,u,l);return d.resolveInjectorInitializers(),d}function Ly(s,o=null,u=null,l,d=new Set){const m=[u||be,zh(s)];return l=l||("object"==typeof s?void 0:ge(s)),new bE(m,o||gg(),l||null,d)}let $l=(()=>{class s{static create(u,l){if(Array.isArray(u))return HE({name:""},l,u,"");{const d=u.name??"";return HE({name:d},u.parent,u.providers,d)}}}return s.THROW_IF_NOT_FOUND=tn,s.NULL=new yE,s.\u0275prov=Qe({token:s,providedIn:"any",factory:()=>He(Vl)}),s.__NG_ELEMENT_ID__=-1,s})();function zl(s,o=mt.Default){const u=Ne();return null===u?He(s,o):jp(Or(),u,Y(s),o)}function KE(){throw new Error("invalid")}function ZE(s,o){const u=s.contentQueries;if(null!==u)for(let l=0;l<u.length;l+=2){const m=u[l+1];if(-1!==m){const v=s.data[m];Op(u[l]),v.contentQueries(2,o[m],m)}}}function Ig(s,o,u,l,d,m,v,I,T,S,A){const U=o.blueprint.slice();return U[mi]=d,U[Gt]=76|l,(null!==A||s&&1024&s[Gt])&&(U[Gt]|=1024),aa(U),U[On]=U[Ys]=s,U[Ln]=u,U[bs]=v||s&&s[bs],U[Kt]=I||s&&s[Kt],U[us]=T||s&&s[us]||null,U[Va]=S||s&&s[Va]||null,U[nr]=m,U[_i]=function Qp(){return El++}(),U[Bu]=A,U[Ir]=2==o.type?s[Ir]:U,U}function Xh(s,o,u,l,d){let m=s.data[o];if(null===m)m=function jy(s,o,u,l,d){const m=k_(),v=il(),T=s.data[o]=function UD(s,o,u,l,d,m){return{type:u,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,u,o,l,d);return null===s.firstChild&&(s.firstChild=T),null!==m&&(v?null==m.child&&null!==T.parent&&(m.child=T):null===m.next&&(m.next=T,T.prev=m)),T}(s,o,u,l,d),function Np(){return Ft.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=u,m.value=l,m.attrs=d;const v=function ua(){const s=Ft.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return Xs(m,!0),m}function Jh(s,o,u,l){if(0===u)return-1;const d=o.length;for(let m=0;m<u;m++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function $y(s,o,u){Lp(o);try{const l=s.viewQuery;null!==l&&Jy(1,l,u);const d=s.template;null!==d&&QE(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&ZE(s,o),s.staticViewQueries&&Jy(2,s.viewQuery,u);const m=s.components;null!==m&&function YE(s,o){for(let u=0;u<o.length;u++)di(s,o[u])}(o,m)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[Gt]&=-5,Fp()}}function bg(s,o,u,l){const d=o[Gt];if(128!=(128&d)){Lp(o);try{aa(o),function O_(s){return Ft.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&QE(s,o,u,2,l);const v=3==(3&d);if(v){const S=s.preOrderCheckHooks;null!==S&&Qd(o,S,null)}else{const S=s.preOrderHooks;null!==S&&la(o,S,0,null),Wa(o,0)}if(function Qy(s){for(let o=ou(s);null!==o;o=Sh(o)){if(!o[Ba])continue;const u=o[ea];for(let l=0;l<u.length;l++){const d=u[l];512&d[Gt]||Qs(d[On],1),d[Gt]|=512}}}(o),function ao(s){for(let o=ou(s);null!==o;o=Sh(o))for(let u=kr;u<o.length;u++){const l=o[u],d=l[ut];zt(l)&&bg(d,l,d.template,l[Ln])}}(o),null!==s.contentQueries&&ZE(s,o),v){const S=s.contentCheckHooks;null!==S&&Qd(o,S)}else{const S=s.contentHooks;null!==S&&la(o,S,1),Wa(o,1)}!function LD(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let l=0;l<u.length;l++){const d=u[l];if(d<0)bo(~d);else{const m=d,v=u[++l],I=u[++l];kp(v,m),I(2,o[m])}}}finally{bo(-1)}}(s,o);const I=s.components;null!==I&&function FD(s,o){for(let u=0;u<o.length;u++)sI(s,o[u])}(o,I);const T=s.viewQuery;if(null!==T&&Jy(2,T,l),v){const S=s.viewCheckHooks;null!==S&&Qd(o,S)}else{const S=s.viewHooks;null!==S&&la(o,S,2),Wa(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[Gt]&=-41,512&o[Gt]&&(o[Gt]&=-513,Qs(o[On],-1))}finally{Fp()}}}function QE(s,o,u,l,d){const m=wi(),v=2&l;try{bo(-1),v&&o.length>ln&&jE(s,o,ln,!1),ti(v?2:0,d),u(l,d)}finally{bo(m),ti(v?3:1,d)}}function Hy(s,o,u){if(cs(o)){const d=o.directiveEnd;for(let m=o.directiveStart;m<d;m++){const v=s.data[m];v.contentQueries&&v.contentQueries(1,u[m],m)}}}function Gy(s,o,u){M_()&&(function SM(s,o,u,l){const d=u.directiveStart,m=u.directiveEnd;ta(u)&&function PM(s,o,u){const l=Be(o,s),d=XE(u),m=s[bs],v=Cc(s,Ig(s,d,null,u.onPush?32:16,l,o,m,m.createRenderer(l,u),null,null,null));s[o.index]=v}(o,u,s.data[d+u.componentOffset]),s.firstCreatePass||ha(u,o),ni(l,o);const v=u.initialInputs;for(let I=d;I<m;I++){const T=s.data[I],S=fa(o,s,I,u);ni(S,o),null!==v&&ji(0,I-d,S,T,0,v),Hr(T)&&(sn(u.index,o)[Ln]=fa(o,s,I,u))}}(s,o,u,Be(u,o)),64==(64&u.flags)&&rI(s,o,u))}function zy(s,o,u=Be){const l=o.localNames;if(null!==l){let d=o.index+1;for(let m=0;m<l.length;m+=2){const v=l[m+1],I=-1===v?u(o,s):s[v];s[d++]=I}}}function XE(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Qn(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Qn(s,o,u,l,d,m,v,I,T,S){const A=ln+l,U=A+d,K=function Wy(s,o){const u=[];for(let l=0;l<o;l++)u.push(l<s?null:qt);return u}(A,U),X="function"==typeof S?S():S;return K[ut]={type:s,blueprint:K,template:u,queries:null,viewQuery:I,declTNode:o,data:K.slice().fill(null,A),bindingStartIndex:A,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:T,consts:X,incompleteFirstPass:!1}}function JE(s,o,u,l){const d=oI(o);null===u?d.push(l):(d.push(u),s.firstCreatePass&&aI(s).push(l,d.length-1))}function qy(s,o,u,l){for(let d in s)if(s.hasOwnProperty(d)){u=null===u?{}:u;const m=s[d];null===l?Tg(u,o,d,m):l.hasOwnProperty(d)&&Tg(u,o,l[d],m)}return u}function Tg(s,o,u,l){s.hasOwnProperty(u)?s[u].push(o,l):s[u]=[o,l]}function Zy(s,o){const u=sn(o,s);16&u[Gt]||(u[Gt]|=32)}function tI(s,o,u,l){if(M_()){const d=null===l?null:{"":-1},m=function AM(s,o){const u=s.directiveRegistry;let l=null,d=null;if(u)for(let m=0;m<u.length;m++){const v=u[m];if(Kh(o,v.selectors,!1))if(l||(l=[]),Hr(v))if(null!==v.findHostDirectiveDefs){const I=[];d=d||new Map,v.findHostDirectiveDefs(v,I,d),l.unshift(...I,v),iI(s,o,I.length)}else l.unshift(v),iI(s,o,0);else d=d||new Map,v.findHostDirectiveDefs?.(v,l,d),l.push(v)}return null===l?null:[l,d]}(s,u);let v,I;null===m?v=I=null:[v,I]=m,null!==v&&nI(s,o,u,v,d,I),d&&function RM(s,o,u){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const m=u[o[d+1]];if(null==m)throw new pe(-301,!1);l.push(o[d],m)}}}(u,l,d)}u.mergedAttrs=to(u.mergedAttrs,u.attrs)}function nI(s,o,u,l,d,m){for(let S=0;S<l.length;S++)rh(ha(u,o),s,l[S].type);!function MM(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}(u,s.data.length,l.length);for(let S=0;S<l.length;S++){const A=l[S];A.providersResolver&&A.providersResolver(A)}let v=!1,I=!1,T=Jh(s,o,l.length,null);for(let S=0;S<l.length;S++){const A=l[S];u.mergedAttrs=to(u.mergedAttrs,A.hostAttrs),NM(s,u,o,T,A),xM(T,A,d),null!==A.contentQueries&&(u.flags|=4),(null!==A.hostBindings||null!==A.hostAttrs||0!==A.hostVars)&&(u.flags|=64);const U=A.type.prototype;!v&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),v=!0),!I&&(U.ngOnChanges||U.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),I=!0),T++}!function eI(s,o,u){const d=o.directiveEnd,m=s.data,v=o.attrs,I=[];let T=null,S=null;for(let A=o.directiveStart;A<d;A++){const U=m[A],K=u?u.get(U):null,ve=K?K.outputs:null;T=qy(U.inputs,A,T,K?K.inputs:null),S=qy(U.outputs,A,S,ve);const ze=null===T||null===v||Py(o)?null:oo(T,A,v);I.push(ze)}null!==T&&(T.hasOwnProperty("class")&&(o.flags|=8),T.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=I,o.inputs=T,o.outputs=S}(s,u,m)}function rI(s,o,u){const l=u.directiveStart,d=u.directiveEnd,m=u.index,v=function L_(){return Ft.lFrame.currentDirectiveIndex}();try{bo(m);for(let I=l;I<d;I++){const T=s.data[I],S=o[I];Js(I),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&VD(T,S)}}finally{bo(-1),Js(v)}}function VD(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function iI(s,o,u){o.componentOffset=u,(s.components||(s.components=[])).push(o.index)}function xM(s,o,u){if(u){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)u[o.exportAs[l]]=s;Hr(o)&&(u[""]=s)}}function NM(s,o,u,l,d){s.data[l]=d;const m=d.factory||(d.factory=As(d.type)),v=new al(m,Hr(d),zl);s.blueprint[l]=v,u[l]=v,function Yy(s,o,u,l,d){const m=d.hostBindings;if(m){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const I=~o.index;(function DM(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(v)!=I&&v.push(I),v.push(u,l,m)}}(s,o,l,Jh(s,u,d.hostVars,qt),d)}function Ca(s,o,u,l,d,m){const v=Be(s,o);!function me(s,o,u,l,d,m,v){if(null==m)s.removeAttribute(o,d,u);else{const I=null==v?Me(m):v(m,l||"",d);s.setAttribute(o,d,I,u)}}(o[Kt],v,m,s.value,u,l,d)}function ji(s,o,u,l,d,m){const v=m[o];if(null!==v){const I=l.setInput;for(let T=0;T<v.length;){const S=v[T++],A=v[T++],U=v[T++];null!==I?l.setInput(u,U,S,A):u[A]=U}}}function oo(s,o,u){let l=null,d=0;for(;d<u.length;){const m=u[d];if(0!==m)if(5!==m){if("number"==typeof m)break;if(s.hasOwnProperty(m)){null===l&&(l=[]);const v=s[m];for(let I=0;I<v.length;I+=2)if(v[I]===o){l.push(m,v[I+1],u[d+1]);break}}d+=2}else d+=2;else d+=4}return l}function N(s,o,u,l){return[s,!0,!1,o,null,0,l,u,null,null]}function sI(s,o){const u=sn(o,s);if(zt(u)){const l=u[ut];48&u[Gt]?bg(l,u,l.template,u[Ln]):u[Li]>0&&Xy(u)}}function Xy(s){for(let l=ou(s);null!==l;l=Sh(l))for(let d=kr;d<l.length;d++){const m=l[d];if(zt(m))if(512&m[Gt]){const v=m[ut];bg(v,m,v.template,m[Ln])}else m[Li]>0&&Xy(m)}const u=s[ut].components;if(null!==u)for(let l=0;l<u.length;l++){const d=sn(u[l],s);zt(d)&&d[Li]>0&&Xy(d)}}function di(s,o){const u=sn(o,s),l=u[ut];(function BD(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(l,u),$y(l,u,u[Ln])}function Cc(s,o){return s[Ts]?s[Zs][Jr]=o:s[Ts]=o,s[Zs]=o,o}function nf(s){for(;s;){s[Gt]|=32;const o=Po(s);if(Rp(s)&&!o)return s;s=o}return null}function Cg(s,o,u,l=!0){const d=o[bs];d.begin&&d.begin();try{bg(s,o,s.template,u)}catch(v){throw l&&cI(o,v),v}finally{d.end&&d.end()}}function Jy(s,o,u){Op(0),o(s,u)}function oI(s){return s[Ks]||(s[Ks]=[])}function aI(s){return s.cleanup||(s.cleanup=[])}function cI(s,o){const u=s[Va],l=u?u.get(qh,null):null;l&&l.handleError(o)}function hi(s,o,u,l,d){for(let m=0;m<u.length;){const v=u[m++],I=u[m++],T=o[v],S=s.data[v];null!==S.setInput?S.setInput(T,d,l,I):T[I]=d}}function Os(s,o,u){const l=function ke(s,o){return z(o[s])}(o,s);!function xl(s,o,u){s.setValue(o,u)}(s[Kt],l,u)}function rf(s,o,u){let l=u?s.styles:null,d=u?s.classes:null,m=0;if(null!==o)for(let v=0;v<o.length;v++){const I=o[v];"number"==typeof I?m=I:1==m?d=ue(d,I):2==m&&(l=ue(l,I+": "+o[++v]+";"))}u?s.styles=l:s.stylesWithoutHost=l,u?s.classes=d:s.classesWithoutHost=d}function Wl(s,o,u,l,d=!1){for(;null!==u;){const m=o[u.index];if(null!==m&&l.push(z(m)),vi(m))for(let I=kr;I<m.length;I++){const T=m[I],S=T[ut].firstChild;null!==S&&Wl(T[ut],T,S,l)}const v=u.type;if(8&v)Wl(s,o,u.child,l);else if(32&v){const I=cc(u,o);let T;for(;T=I();)l.push(T)}else if(16&v){const I=Sr(o,u);if(Array.isArray(I))l.push(...I);else{const T=Po(o[Ir]);Wl(T[ut],T,I,l,!0)}}u=d?u.projectionNext:u.next}return l}class wu{get rootNodes(){const o=this._lView,u=o[ut];return Wl(u,o,u.firstChild,[])}constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ln]}set context(o){this._lView[Ln]=o}get destroyed(){return 128==(128&this._lView[Gt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[On];if(vi(o)){const u=o[vo],l=u?u.indexOf(this):-1;l>-1&&(dc(o,l),dh(u,l))}this._attachedToViewContainer=!1}hc(this._lView[ut],this._lView)}onDestroy(o){JE(this._lView[ut],this._lView,null,o)}markForCheck(){nf(this._cdRefInjectingView||this._lView)}detach(){this._lView[Gt]&=-65}reattach(){this._lView[Gt]|=64}detectChanges(){Cg(this._lView[ut],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new pe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function xh(s,o){ko(s,o,o[Kt],2,null,null)}(this._lView[ut],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new pe(902,!1);this._appRef=o}}class ev extends wu{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Cg(o[ut],o,o[Ln],!1)}checkNoChanges(){}get context(){return null}}class Dg extends vu{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=qe(o);return new sf(u,this.ngModule)}}function lI(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class HD{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,l){l=Dt(l);const d=this.injector.get(o,Ry,l);return d!==Ry||u===Ry?d:this.parentInjector.get(o,u,l)}}class sf extends SE{get inputs(){return lI(this.componentDef.inputs)}get outputs(){return lI(this.componentDef.outputs)}constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function wD(s){return s.map(vD).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}create(o,u,l,d){let m=(d=d||this.ngModule)instanceof Ec?d:d?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const v=m?new HD(o,m):o,I=v.get(xE,null);if(null===I)throw new pe(407,!1);const T=v.get(lD,null),S=I.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",U=l?function ef(s,o,u){return s.selectRootElement(o,u===B.ShadowDom)}(S,l,this.componentDef.encapsulation):Rh(S,A,function $D(s){const o=s.toLowerCase();return"svg"===o?O:"math"===o?"math":null}(A)),K=this.componentDef.onPush?288:272,X=Qn(0,null,null,1,0,null,null,null,null,null),ve=Ig(null,X,null,K,null,null,I,S,T,v,null);let ze,tt;Lp(ve);try{const ht=this.componentDef;let At,Oe=null;ht.findHostDirectiveDefs?(At=[],Oe=new Map,ht.findHostDirectiveDefs(ht,At,Oe),At.push(ht)):At=[ht];const $t=function dI(s,o){const u=s[ut],l=ln;return s[l]=o,Xh(u,l,2,"#host",null)}(ve,U),bn=function Ag(s,o,u,l,d,m,v,I){const T=d[ut];!function hI(s,o,u,l){for(const d of s)o.mergedAttrs=to(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(rf(o,o.mergedAttrs,!0),null!==u&&mc(l,u,o))}(l,s,o,v);const S=m.createRenderer(o,u),A=Ig(d,XE(u),null,u.onPush?32:16,d[s.index],s,m,S,I||null,null,null);return T.firstCreatePass&&iI(T,s,l.length-1),Cc(d,A),d[s.index]=A}($t,U,ht,At,ve,I,S);tt=jn(X,ln),U&&function WD(s,o,u,l){if(l)ul(s,u,["ng-version",Ay.full]);else{const{attrs:d,classes:m}=function ED(s){const o=[],u=[];let l=1,d=2;for(;l<s.length;){let m=s[l];if("string"==typeof m)2===d?""!==m&&o.push(m,s[++l]):8===d&&u.push(m);else{if(!so(d))break;d=m}l++}return{attrs:o,classes:u}}(o.selectors[0]);d&&ul(s,u,d),m&&m.length>0&&hu(s,u,m.join(" "))}}(S,ht,U,l),void 0!==u&&function qD(s,o,u){const l=s.projection=[];for(let d=0;d<o.length;d++){const m=u[d];l.push(null!=m?Array.from(m):null)}}(tt,this.ngContentSelectors,u),ze=function zD(s,o,u,l,d,m){const v=Or(),I=d[ut],T=Be(v,d);nI(I,d,v,u,null,l);for(let A=0;A<u.length;A++)ni(fa(d,I,v.directiveStart+A,v),d);rI(I,d,v),T&&ni(T,d);const S=fa(d,I,v.directiveStart+v.componentOffset,v);if(s[Ln]=d[Ln]=S,null!==m)for(const A of m)A(S,o);return Hy(I,v,s),S}(bn,ht,At,Oe,ve,[KD]),$y(X,ve,null)}finally{Fp()}return new GD(this.componentType,ze,Ic(tt,ve),ve,tt)}}class GD extends sD{constructor(o,u,l,d,m){super(),this.location=l,this._rootLView=d,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new ev(d),this.componentType=o}setInput(o,u){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){const m=this._rootLView;hi(m[ut],m,d,o,u),Zy(m,this._tNode.index)}}get injector(){return new Za(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function KD(){const s=Or();zu(Ne()[ut],s)}function Dc(s){return!!cf(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function cf(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ar(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function lv(s,o,u,l){const d=Ne();return Ar(d,ca(),o)&&(fn(),Ca(xn(),d,s,o,u,l)),lv}function XD(s,o,u,l,d,m,v,I){const T=Ne(),S=fn(),A=s+ln,U=S.firstCreatePass?function QD(s,o,u,l,d,m,v,I,T){const S=o.consts,A=Xh(o,s,4,v||null,br(S,I));tI(o,u,A,br(S,T)),zu(o,A);const U=A.tView=Qn(2,A,l,d,m,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,A),U.queries=o.queries.embeddedTView(A)),A}(A,S,T,o,u,l,d,m,v):S.data[A];Xs(U,!1);const K=T[Kt].createComment("");uu(S,T,K,U),ni(K,T),Cc(T,T[A]=N(K,T,K,U)),ja(U)&&Gy(S,T,U),null!=v&&zy(T,U,I)}function Ng(s){return function Cn(s,o){return s[o]}(function sl(){return Ft.lFrame.contextLView}(),ln+s)}function wI(s,o,u){const l=Ne();return Ar(l,ca(),o)&&function Ut(s,o,u,l,d,m,v,I){const T=Be(o,u);let A,S=o.inputs;!I&&null!=S&&(A=S[l])?(hi(s,u,A,l,d),ta(o)&&Zy(u,o.index)):3&o.type&&(l=function Ky(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=v?v(d,o.value||"",l):d,m.setProperty(T,l,d))}(fn(),xn(),l,s,o,l[Kt],u,!1),wI}function mv(s,o,u,l,d){const v=d?"class":"style";hi(s,u,o.inputs[v],v,l)}function Pg(s,o,u,l){const d=Ne(),m=fn(),v=ln+s,I=d[Kt],T=m.firstCreatePass?function EI(s,o,u,l,d,m){const v=o.consts,T=Xh(o,s,2,l,br(v,d));return tI(o,u,T,br(v,m)),null!==T.attrs&&rf(T,T.attrs,!1),null!==T.mergedAttrs&&rf(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(v,m,d,o,u,l):m.data[v],S=d[v]=Rh(I,o,function oE(){return Ft.lFrame.currentNamespace}()),A=ja(T);return Xs(T,!0),mc(I,S,T),32!=(32&T.flags)&&uu(m,d,S,T),0===function za(){return Ft.lFrame.elementDepthCount}()&&ni(S,d),function x_(){Ft.lFrame.elementDepthCount++}(),A&&(Gy(m,d,T),Hy(m,T,d)),null!==l&&zy(d,T),Pg}function lf(){let s=Or();il()?function Mp(){Ft.lFrame.isParent=!1}():(s=s.parent,Xs(s,!1));const o=s;!function qd(){Ft.lFrame.elementDepthCount--}();const u=fn();return u.firstCreatePass&&(zu(u,s),cs(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function H_(s){return 0!=(8&s.flags)}(o)&&mv(u,o,Ne(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function To(s){return 0!=(16&s.flags)}(o)&&mv(u,o,Ne(),o.stylesWithoutHost,!1),lf}function df(s,o,u,l){return Pg(s,o,u,l),lf(),df}function bI(){return Ne()}function TI(s){return!!s&&"function"==typeof s.then}function CI(s){return!!s&&"function"==typeof s.subscribe}const DI=CI;function SI(s,o,u,l){const d=Ne(),m=fn(),v=Or();return function nS(s,o,u,l,d,m,v){const I=ja(l),S=s.firstCreatePass&&aI(s),A=o[Ln],U=oI(o);let K=!0;if(3&l.type||v){const ze=Be(l,o),tt=v?v(ze):ze,ht=U.length,At=v?$t=>v(z($t[l.index])):l.index;let Oe=null;if(!v&&I&&(Oe=function tS(s,o,u,l){const d=s.cleanup;if(null!=d)for(let m=0;m<d.length-1;m+=2){const v=d[m];if(v===u&&d[m+1]===l){const I=o[Ks],T=d[m+2];return I.length>T?I[T]:null}"string"==typeof v&&(m+=2)}return null}(s,o,d,l.index)),null!==Oe)(Oe.__ngLastListenerFn__||Oe).__ngNextListenerFn__=m,Oe.__ngLastListenerFn__=m,K=!1;else{m=iS(l,o,A,m,!1);const $t=u.listen(tt,d,m);U.push(m,$t),S&&S.push(d,At,ht,ht+1)}}else m=iS(l,o,A,m,!1);const X=l.outputs;let ve;if(K&&null!==X&&(ve=X[d])){const ze=ve.length;if(ze)for(let tt=0;tt<ze;tt+=2){const bn=o[ve[tt]][ve[tt+1]].subscribe(m),Xn=U.length;U.push(m,bn),S&&S.push(d,l.index,Xn,-(Xn+1))}}}(m,d,d[Kt],v,s,o,l),SI}function rS(s,o,u,l){try{return ti(6,o,u),!1!==u(l)}catch(d){return cI(s,d),!1}finally{ti(7,o,u)}}function iS(s,o,u,l,d){return function m(v){if(v===Function)return l;nf(s.componentOffset>-1?sn(s.index,o):o);let T=rS(o,u,l,v),S=m.__ngNextListenerFn__;for(;S;)T=rS(o,u,S,v)&&T,S=S.__ngNextListenerFn__;return d&&!1===T&&(v.preventDefault(),v.returnValue=!1),T}}function GI(s,o=""){const u=Ne(),l=fn(),d=s+ln,m=l.firstCreatePass?Xh(l,d,1,o,null):l.data[d],v=u[d]=function Rl(s,o){return s.createText(o)}(u[Kt],o);uu(l,u,v,m),Xs(m,!1)}function Di(s,o,u){const l=Ne(),d=function Zl(s,o,u,l){return Ar(s,ca(),u)?o+Me(u)+l:qt}(l,s,o,u);return d!==qt&&Os(l,wi(),d),Di}const bu=void 0;var CS=["en",[["a","p"],["AM","PM"],bu],[["AM","PM"],bu,bu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],bu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],bu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",bu,"{1} 'at' {0}",bu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function TS(s){const u=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===l?1:5}];let sd={};function Yg(s){const o=function ib(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=Qg(o);if(u)return u;const l=o.split("-")[0];if(u=Qg(l),u)return u;if("en"===l)return CS;throw new pe(701,!1)}function yf(s){return Yg(s)[Vt.PluralCase]}function Qg(s){return s in sd||(sd[s]=Rt.ng&&Rt.ng.common&&Rt.ng.common.locales&&Rt.ng.common.locales[s]),sd[s]}var Vt=(()=>((Vt=Vt||{})[Vt.LocaleId=0]="LocaleId",Vt[Vt.DayPeriodsFormat=1]="DayPeriodsFormat",Vt[Vt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Vt[Vt.DaysFormat=3]="DaysFormat",Vt[Vt.DaysStandalone=4]="DaysStandalone",Vt[Vt.MonthsFormat=5]="MonthsFormat",Vt[Vt.MonthsStandalone=6]="MonthsStandalone",Vt[Vt.Eras=7]="Eras",Vt[Vt.FirstDayOfWeek=8]="FirstDayOfWeek",Vt[Vt.WeekendRange=9]="WeekendRange",Vt[Vt.DateFormat=10]="DateFormat",Vt[Vt.TimeFormat=11]="TimeFormat",Vt[Vt.DateTimeFormat=12]="DateTimeFormat",Vt[Vt.NumberSymbols=13]="NumberSymbols",Vt[Vt.NumberFormats=14]="NumberFormats",Vt[Vt.CurrencyCode=15]="CurrencyCode",Vt[Vt.CurrencySymbol=16]="CurrencySymbol",Vt[Vt.CurrencyName=17]="CurrencyName",Vt[Vt.Currencies=18]="Currencies",Vt[Vt.Directionality=19]="Directionality",Vt[Vt.PluralCase=20]="PluralCase",Vt[Vt.ExtraData=21]="ExtraData",Vt))();const Ur="en-US";let sb=Ur;class ud{}class Hv{}function Gv(s,o){return new gi(s,o??null)}class gi extends ud{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Dg(this);const l=hn(o);this._bootstrapComponents=Lo(l.bootstrap),this._r3Injector=Ly(o,u,[{provide:ud,useValue:this},{provide:vu,useValue:this.componentFactoryResolver}],ge(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class zv extends Hv{constructor(o){super(),this.moduleType=o}create(o){return new gi(this.moduleType,o)}}class om extends ud{constructor(o,u,l){super(),this.componentFactoryResolver=new Dg(this),this.instance=null;const d=new bE([...o,{provide:ud,useValue:this},{provide:vu,useValue:this.componentFactoryResolver}],u||gg(),l,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function am(s,o,u=null){return new om(s,o,u).injector}let Wv=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const l=vE(0,u.type),d=l.length>0?am([l],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,d)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Qe({token:s,providedIn:"environment",factory:()=>new s(He(Ec))}),s})();function Cf(s){s.getStandaloneInjector=o=>o.get(Wv).getOrCreateStandaloneInjector(s)}function xf(s){return o=>{setTimeout(s,void 0,o)}}const Vs=class r0 extends p.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,l){let d=o,m=u||(()=>null),v=l;if(o&&"object"==typeof o){const T=o;d=T.next?.bind(T),m=T.error?.bind(T),v=T.complete?.bind(T)}this.__isAsync&&(m=xf(m),d&&(d=xf(d)),v&&(v=xf(v)));const I=super.subscribe({next:d,error:m,complete:v});return o instanceof J.w0&&o.add(I),I}};function ri(){return this._results[Symbol.iterator]()}class Wr{get changes(){return this._changes||(this._changes=new Vs)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Wr.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=ri)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const l=this;l.dirty=!1;const d=function Fi(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function lE(s,o,u){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],m=o[l];if(u&&(d=u(d),m=u(m)),m!==d)return!1}return!0}(l._results,d,u))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Du=(()=>{class s{}return s.__NG_ELEMENT_ID__=fA,s})();const s0=Du,hA=class extends s0{constructor(o,u,l){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=l}createEmbeddedView(o,u){const l=this._declarationTContainer.tView,d=Ig(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null,u||null);d[Cs]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[ei];return null!==v&&(d[ei]=v.createEmbeddedView(l)),$y(l,d,o),new wu(d)}};function fA(){return Mf(Or(),Ne())}function Mf(s,o){return 4&s.type?new hA(o,s,Ic(s,o)):null}let pm=(()=>{class s{}return s.__NG_ELEMENT_ID__=pA,s})();function pA(){return o0(Or(),Ne())}const Lb=pm,gm=class extends Lb{constructor(o,u,l){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=l}get element(){return Ic(this._hostTNode,this._hostLView)}get injector(){return new Za(this._hostTNode,this._hostLView)}get parentInjector(){const o=Qu(this._hostTNode,this._hostLView);if(eh(o)){const u=da(o,this._hostLView),l=qu(o);return new Za(u[ut].data[l+8],u)}return new Za(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=Fb(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-kr}createEmbeddedView(o,u,l){let d,m;"number"==typeof l?d=l:null!=l&&(d=l.index,m=l.injector);const v=o.createEmbeddedView(u||{},m);return this.insert(v,d),v}createComponent(o,u,l,d,m){const v=o&&!function nc(s){return"function"==typeof s}(o);let I;if(v)I=u;else{const U=u||{};I=U.index,l=U.injector,d=U.projectableNodes,m=U.environmentInjector||U.ngModuleRef}const T=v?o:new sf(qe(o)),S=l||this.parentInjector;if(!m&&null==T.ngModule){const K=(v?S:this.parentInjector).get(Ec,null);K&&(m=K)}const A=T.create(S,d,void 0,m);return this.insert(A.hostView,I),A}insert(o,u){const l=o._lView,d=l[ut];if(function Io(s){return vi(s[On])}(l)){const A=this.indexOf(o);if(-1!==A)this.detach(A);else{const U=l[On],K=new gm(U,U[nr],U[On]);K.detach(K.indexOf(o))}}const m=this._adjustIndex(u),v=this._lContainer;!function ly(s,o,u,l){const d=kr+l,m=u.length;l>0&&(u[d-1][Jr]=o),l<m-kr?(o[Jr]=u[d],X_(u,kr+l,o)):(u.push(o),o[Jr]=null),o[On]=u;const v=o[Cs];null!==v&&u!==v&&function Ml(s,o){const u=s[ea];o[Ir]!==o[On][On][Ir]&&(s[Ba]=!0),null===u?s[ea]=[o]:u.push(o)}(v,o);const I=o[ei];null!==I&&I.insertView(s),o[Gt]|=64}(d,l,v,m);const I=Ia(m,v),T=l[Kt],S=gc(T,v[yo]);return null!==S&&function au(s,o,u,l,d,m){l[mi]=d,l[nr]=o,ko(s,l,u,1,d,m)}(d,v[nr],T,l,S,I),o.attachToViewContainerRef(),X_(Nf(v),m,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=Fb(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),l=dc(this._lContainer,u);l&&(dh(Nf(this._lContainer),u),hc(l[ut],l))}detach(o){const u=this._adjustIndex(o,-1),l=dc(this._lContainer,u);return l&&null!=dh(Nf(this._lContainer),u)?new wu(l):null}_adjustIndex(o,u=0){return o??this.length+u}};function Fb(s){return s[vo]}function Nf(s){return s[vo]||(s[vo]=[])}function o0(s,o){let u;const l=o[s.index];if(vi(l))u=l;else{let d;if(8&s.type)d=z(l);else{const m=o[Kt];d=m.createComment("");const v=Be(s,o);ns(m,gc(m,v),d,function ng(s,o){return s.nextSibling(o)}(m,v),!1)}o[s.index]=u=N(l,o,d,s),Cc(o,u)}return new gm(u,s,o)}class a0{constructor(o){this.queryList=o,this.matches=null}clone(){return new a0(this.queryList)}setDirty(){this.queryList.setDirty()}}class ld{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const l=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let m=0;m<l;m++){const v=u.getByIndex(m);d.push(this.queries[v.indexInDeclarationView].clone())}return new ld(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==l0(o,u).matches&&this.queries[u].setDirty()}}class mm{constructor(o,u,l=null){this.predicate=o,this.flags=u,this.read=l}}class Pf{constructor(o=[]){this.queries=o}elementStart(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let l=0;l<this.length;l++){const d=null!==u?u.length:0,m=this.getByIndex(l).embeddedTView(o,d);m&&(m.indexInDeclarationView=l,null!==u?u.push(m):u=[m])}return null!==u?new Pf(u):null}template(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class _m{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new _m(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==u;)l=l.parent;return u===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const m=l[d];this.matchTNodeWithReadOption(o,u,gA(u,m)),this.matchTNodeWithReadOption(o,u,hl(u,o,m,!1,!1))}else l===Du?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,hl(u,o,l,!1,!1))}matchTNodeWithReadOption(o,u,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===Ta||d===pm||d===Du&&4&u.type)this.addMatch(u.index,-2);else{const m=hl(u,o,d,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,l)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function gA(s,o){const u=s.localNames;if(null!==u)for(let l=0;l<u.length;l+=2)if(u[l]===o)return u[l+1];return null}function Ub(s,o,u,l){return-1===u?function kf(s,o){return 11&s.type?Ic(s,o):4&s.type?Mf(s,o):null}(o,s):-2===u?function Vb(s,o,u){return u===Ta?Ic(o,s):u===Du?Mf(o,s):u===pm?o0(o,s):void 0}(s,o,l):fa(s,s[ut],u,o)}function u0(s,o,u,l){const d=o[ei].queries[l];if(null===d.matches){const m=s.data,v=u.matches,I=[];for(let T=0;T<v.length;T+=2){const S=v[T];I.push(S<0?null:Ub(o,m[S],v[T+1],u.metadata.read))}d.matches=I}return d.matches}function dd(s,o,u,l){const d=s.queries.getByIndex(u),m=d.matches;if(null!==m){const v=u0(s,o,d,u);for(let I=0;I<m.length;I+=2){const T=m[I];if(T>0)l.push(v[I/2]);else{const S=m[I+1],A=o[-T];for(let U=kr;U<A.length;U++){const K=A[U];K[Cs]===K[On]&&dd(K[ut],K,S,l)}if(null!==A[ea]){const U=A[ea];for(let K=0;K<U.length;K++){const X=U[K];dd(X[ut],X,S,l)}}}}}return l}function Bb(s){const o=Ne(),u=fn(),l=F_();Op(l+1);const d=l0(u,l);if(s.dirty&&function Rn(s){return 4==(4&s[Gt])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const m=d.crossesNgTemplate?dd(u,o,l,[]):u0(u,o,d,l);s.reset(m,RE),s.notifyOnChanges()}return!0}return!1}function kc(s,o,u,l){const d=fn();if(d.firstCreatePass){const m=Or();(function c0(s,o,u){null===s.queries&&(s.queries=new Pf),s.queries.track(new _m(o,u))})(d,new mm(o,u,l),m.index),function ym(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function Su(s,o,u){const l=new Wr(4==(4&u));JE(s,o,l,l.destroy),null===o[ei]&&(o[ei]=new ld),o[ei].queries.push(new a0(l))}(d,Ne(),u)}function jb(){return function _A(s,o){return s[ei].queries[o].queryList}(Ne(),F_())}function l0(s,o){return s.queries.getByIndex(o)}function wm(s){return!!hn(s)}function Gf(...s){}const Rm=new Mn("Application Initializer");let _d=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Gf,this.reject=Gf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const m=this.appInits[d]();if(TI(m))u.push(m);else if(DI(m)){const v=new Promise((I,T)=>{m.subscribe({complete:I,error:T})});u.push(v)}}Promise.all(u).then(()=>{l()}).catch(d=>{this.reject(d)}),0===u.length&&l(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(He(Rm,8))},s.\u0275prov=Qe({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const _0=new Mn("AppId",{providedIn:"root",factory:function y0(){return`${v0()}${v0()}${v0()}`}});function v0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Qb=new Mn("Platform Initializer"),xA=new Mn("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let Mm=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Qe({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const zf=new Mn("LocaleId",{providedIn:"root",factory:()=>ot(zf,mt.Optional|mt.SkipSelf)||function E0(){return typeof $localize<"u"&&$localize.locale||Ur}()}),Wf=new Mn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Xb{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let MA=(()=>{class s{compileModuleSync(u){return new zv(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const l=this.compileModuleSync(u),m=Lo(hn(u).declarations).reduce((v,I)=>{const T=qe(I);return T&&v.push(new sf(T)),v},[]);return new Xb(l,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Qe({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Na=(()=>Promise.resolve(0))();function Pm(s){typeof Zone>"u"?Na.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ri{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Vs(!1),this.onMicrotaskEmpty=new Vs(!1),this.onStable=new Vs(!1),this.onError=new Vs(!1),typeof Zone>"u")throw new pe(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&u,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function eT(){let s=Rt.requestAnimationFrame,o=Rt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function rT(s){const o=()=>{!function km(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Rt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,yd(s),s.isCheckStableRunning=!0,qf(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),yd(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,l,d,m,v,I)=>{try{return iT(s),u.invokeTask(d,m,v,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&o(),C0(s)}},onInvoke:(u,l,d,m,v,I,T)=>{try{return iT(s),u.invoke(d,m,v,I,T)}finally{s.shouldCoalesceRunChangeDetection&&o(),C0(s)}},onHasTask:(u,l,d,m)=>{u.hasTask(d,m),l===d&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,yd(s),qf(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,l,d,m)=>(u.handleError(d,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ri.isInAngularZone())throw new pe(909,!1)}static assertNotInAngularZone(){if(Ri.isInAngularZone())throw new pe(909,!1)}run(o,u,l){return this._inner.run(o,u,l)}runTask(o,u,l,d){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+d,o,nT,Gf,Gf);try{return m.runTask(v,u,l)}finally{m.cancelTask(v)}}runGuarded(o,u,l){return this._inner.runGuarded(o,u,l)}runOutsideAngular(o){return this._outer.run(o)}}const nT={};function qf(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function yd(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function iT(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function C0(s){s._nesting--,qf(s)}class Kf{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Vs,this.onMicrotaskEmpty=new Vs,this.onStable=new Vs,this.onError=new Vs}run(o,u,l){return o.apply(u,l)}runGuarded(o,u,l){return o.apply(u,l)}runOutsideAngular(o){return o()}runTask(o,u,l,d){return o.apply(u,l)}}const D0=new Mn(""),S0=new Mn("");let vd,A0=(()=>{class s{constructor(u,l,d){this._ngZone=u,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,vd||(function sT(s){vd=s}(d),d.addToWindow(l)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ri.assertNotInAngularZone(),Pm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Pm(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(u)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,l,d){let m=-1;l&&l>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),u(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:d})}whenStable(u,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,l,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(He(Ri),He(Om),He(S0))},s.\u0275prov=Qe({token:s,factory:s.\u0275fac}),s})(),Om=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,l){this._applications.set(u,l)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,l=!0){return vd?.findTestabilityInTree(this,u,l)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Qe({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Go=!1;let Pa=null;const Ru=new Mn("AllowMultipleToken"),Lm=new Mn("PlatformDestroyListeners"),R0=new Mn("appBootstrapListener");class _s{constructor(o,u){this.name=o,this.token=u}}function cT(s,o,u=[]){const l=`Platform: ${o}`,d=new Mn(l);return(m=[])=>{let v=Um();if(!v||v.injector.get(Ru,!1)){const I=[...u,...m,{provide:d,useValue:!0}];s?s(I):function aT(s){if(Pa&&!Pa.get(Ru,!1))throw new pe(400,!1);Pa=s;const o=s.get(dT);(function Lc(s){const o=s.get(Qb,null);o&&o.forEach(u=>u())})(s)}(function lT(s=[],o){return $l.create({name:o,providers:[{provide:by,useValue:"platform"},{provide:Lm,useValue:new Set([()=>Pa=null])},...s]})}(I,l))}return function x0(s){const o=Um();if(!o)throw new pe(401,!1);return o}()}}function Um(){return Pa?.get(dT)??null}let dT=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,l){const d=function hT(s,o){let u;return u="noop"===s?new Kf:("zone.js"===s?void 0:s)||new Ri(o),u}(l?.ngZone,function Zf(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(l)),m=[{provide:Ri,useValue:d}];return d.run(()=>{const v=$l.create({providers:m,parent:this.injector,name:u.moduleType.name}),I=u.create(v),T=I.injector.get(qh,null);if(!T)throw new pe(402,!1);return d.runOutsideAngular(()=>{const S=d.onError.subscribe({next:A=>{T.handleError(A)}});I.onDestroy(()=>{ho(this._modules,I),S.unsubscribe()})}),function M0(s,o,u){try{const l=u();return TI(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(T,d,()=>{const S=I.injector.get(_d);return S.runInitializers(),S.donePromise.then(()=>(function Fs(s){Je(s,"Expected localeId to be defined"),"string"==typeof s&&(sb=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(zf,Ur)||Ur),this._moduleDoBootstrap(I),I))})})}bootstrapModule(u,l=[]){const d=qr({},l);return function oT(s,o,u){const l=new zv(u);return Promise.resolve(l)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,d))}_moduleDoBootstrap(u){const l=u.injector.get(ka);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new pe(-403,!1);u.instance.ngDoBootstrap(l)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new pe(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const u=this._injector.get(Lm,null);u&&(u.forEach(l=>l()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(He($l))},s.\u0275prov=Qe({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function qr(s,o){return Array.isArray(o)?o.reduce(qr,s):{...s,...o}}let ka=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,l,d){this._zone=u,this._injector=l,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new V.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new V.y(I=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{Ri.assertNotInAngularZone(),Pm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{Ri.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{T.unsubscribe(),S.unsubscribe()}});this.isStable=(0,te.T)(m,v.pipe((0,ae.B)()))}bootstrap(u,l){const d=u instanceof SE;if(!this._injector.get(_d).done){!d&&Zn(u);throw new pe(405,Go)}let v;v=d?u:this._injector.get(vu).resolveComponentFactory(u),this.componentTypes.push(v.componentType);const I=function Fm(s){return s.isBoundToModule}(v)?void 0:this._injector.get(ud),S=v.create($l.NULL,[],l||v.selector,I),A=S.location.nativeElement,U=S.injector.get(D0,null);return U?.registerApplication(A),S.onDestroy(()=>{this.detachView(S.hostView),ho(this.components,S),U?.unregisterApplication(A)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new pe(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const l=u;this._views.push(l),l.attachToAppRef(this)}detachView(u){const l=u;ho(this._views,l),l.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const l=this._injector.get(R0,[]);l.push(...this._bootstrapListeners),l.forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>ho(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new pe(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(He(Ri),He(Ec),He(qh))},s.\u0275prov=Qe({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function ho(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}function je(){return!1}let Ct=(()=>{class s{}return s.__NG_ELEMENT_ID__=OA,s})();function OA(s){return function rt(s,o,u){if(ta(s)&&!u){const l=sn(s.index,o);return new wu(l,l)}return 47&s.type?new wu(o[Ir],o):null}(Or(),Ne(),16==(16&s))}class hr{constructor(){}supports(o){return Dc(o)}create(o){return new Gm(o)}}const et=(s,o)=>o;class Gm{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||et}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,l=this._removalsHead,d=0,m=null;for(;u||l;){const v=!l||u&&u.currentIndex<Yf(l,d,m)?u:l,I=Yf(v,d,m),T=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(u=u._next,null==v.previousIndex)d++;else{m||(m=[]);const S=I-d,A=T-d;if(S!=A){for(let K=0;K<S;K++){const X=K<m.length?m[K]:m[K]=0,ve=X+K;A<=ve&&ve<S&&(m[K]=X+1)}m[v.previousIndex]=A-S}}I!==T&&o(v,I,T)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Dc(o))throw new pe(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,m,v,u=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)m=o[I],v=this._trackByFn(I,m),null!==u&&Object.is(u.trackById,v)?(l&&(u=this._verifyReinsertion(u,m,v,I)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,v,I),l=!0),u=u._next}else d=0,function cv(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Symbol.iterator]();let l;for(;!(l=u.next()).done;)o(l.value)}}(o,I=>{v=this._trackByFn(d,I),null!==u&&Object.is(u.trackById,v)?(l&&(u=this._verifyReinsertion(u,I,v,d)),Object.is(u.item,I)||this._addIdentityChange(u,I)):(u=this._mismatch(u,I,v,d),l=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,l,d){let m;return null===o?m=this._itTail:(m=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,m,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,m,d)):o=this._addAfter(new k0(u,l),m,d),o}_verifyReinsertion(o,u,l,d){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==m?o=this._reinsertAfter(m,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,m=o._nextRemoved;return null===d?this._removalsHead=m:d._nextRemoved=m,null===m?this._removalsTail=d:m._prevRemoved=d,this._insertAfter(o,u,l),this._addToMoves(o,l),o}_moveAfter(o,u,l){return this._unlink(o),this._insertAfter(o,u,l),this._addToMoves(o,l),o}_addAfter(o,u,l){return this._insertAfter(o,u,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,l){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new pT),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,l=o._next;return null===u?this._itHead=l:u._next=l,null===l?this._itTail=u:l._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new pT),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class k0{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Uc{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===u||u<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const u=o._prevDup,l=o._nextDup;return null===u?this._head=l:u._nextDup=l,null===l?this._tail=u:l._prevDup=u,null===this._head}}class pT{constructor(){this.map=new Map}put(o){const u=o.trackById;let l=this.map.get(u);l||(l=new Uc,this.map.set(u,l)),l.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Yf(s,o,u){const l=s.previousIndex;if(null===l)return l;let d=0;return u&&l<u.length&&(d=u[l]),l+o+d}class gT{constructor(){}supports(o){return o instanceof Map||cf(o)}create(){return new Qf}}class Qf{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||cf(o)))throw new pe(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,l),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(d,l);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let l=u;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const l=o._prev;return u._next=o,u._prev=l,o._prev=u,l&&(l._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const m=d._prev,v=d._next;return m&&(m._next=v),v&&(v._prev=m),d._next=null,d._prev=null,d}const l=new mT(o);return this._records.set(o,l),l.currentValue=u,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(l=>u(o[l],l))}}class mT{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function O0(){return new Hi([new hr])}let Hi=(()=>{class s{constructor(u){this.factories=u}static create(u,l){if(null!=l){const d=l.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||O0()),deps:[[s,new rc,new es]]}}find(u){const l=this.factories.find(d=>d.supports(u));if(null!=l)return l;throw new pe(901,!1)}}return s.\u0275prov=Qe({token:s,providedIn:"root",factory:O0}),s})();function L0(){return new zm([new gT])}let zm=(()=>{class s{constructor(u){this.factories=u}static create(u,l){if(l){const d=l.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||L0()),deps:[[s,new rc,new es]]}}find(u){const l=this.factories.find(d=>d.supports(u));if(l)return l;throw new pe(901,!1)}}return s.\u0275prov=Qe({token:s,providedIn:"root",factory:L0}),s})();const fo=cT(null,"core",[]);let jA=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(He(ka))},s.\u0275mod=_o({type:s}),s.\u0275inj=Pn({}),s})();function Xf(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},579:(gt,De,P)=>{P.d(De,{EI:()=>Ce,Gb:()=>Nr,Iv:()=>ai,Kz:()=>Dt,Xd:()=>Gn,lT:()=>mr,xP:()=>He});var p=P(5861),J=P(9681),V=P(1877),te=P(2090),ae=P(4859);P(2833);const de="analytics",ge="firebase_id",ue="origin",G=6e4,W="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Y="https://www.googletagmanager.com/gtag/js",Pe=new V.Yd("@firebase/analytics");function we(R){return Promise.all(R.map(L=>L.catch(q=>q)))}function Te(){return(Te=(0,p.Z)(function*(R,L,q,B,ce,be){const ct=B[ce];try{if(ct)yield L[ct];else{const kt=(yield we(q)).find(nn=>nn.measurementId===ce);kt&&(yield L[kt.appId])}}catch(Pt){Pe.error(Pt)}R("config",ce,be)})).apply(this,arguments)}function Ue(){return(Ue=(0,p.Z)(function*(R,L,q,B,ce){try{let be=[];if(ce&&ce.send_to){let ct=ce.send_to;Array.isArray(ct)||(ct=[ct]);const Pt=yield we(q);for(const kt of ct){const nn=Pt.find(An=>An.measurementId===kt),It=nn&&L[nn.appId];if(!It){be=[];break}be.push(It)}}0===be.length&&(be=Object.values(L)),yield Promise.all(be),R("event",B,ce||{})}catch(be){Pe.error(be)}})).apply(this,arguments)}const Se=new te.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),j=30,Ye=new class We{constructor(L={},q=1e3){this.throttleMetadata=L,this.intervalMillis=q}getThrottleMetadata(L){return this.throttleMetadata[L]}setThrottleMetadata(L,q){this.throttleMetadata[L]=q}deleteThrottleMetadata(L){delete this.throttleMetadata[L]}};function pt(R){return new Headers({Accept:"application/json","x-goog-api-key":R})}function re(){return(re=(0,p.Z)(function*(R){var L;const{appId:q,apiKey:B}=R,ce={method:"GET",headers:pt(B)},be=W.replace("{app-id}",q),ct=yield fetch(be,ce);if(200!==ct.status&&304!==ct.status){let Pt="";try{const kt=yield ct.json();null!==(L=kt.error)&&void 0!==L&&L.message&&(Pt=kt.error.message)}catch{}throw Se.create("config-fetch-failed",{httpStatus:ct.status,responseMessage:Pt})}return ct.json()})).apply(this,arguments)}function _e(){return(_e=(0,p.Z)(function*(R,L=Ye,q){const{appId:B,apiKey:ce,measurementId:be}=R.options;if(!B)throw Se.create("no-app-id");if(!ce){if(be)return{measurementId:be,appId:B};throw Se.create("no-api-key")}const ct=L.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Pt=new it;return setTimeout((0,p.Z)(function*(){Pt.abort()}),void 0!==q?q:G),xe({appId:B,apiKey:ce,measurementId:be},ct,Pt,L)})).apply(this,arguments)}function xe(R,L,q){return Fe.apply(this,arguments)}function Fe(){return Fe=(0,p.Z)(function*(R,{throttleEndTimeMillis:L,backoffCount:q},B,ce=Ye){var be;const{appId:ct,measurementId:Pt}=R;try{yield function $e(R,L){return new Promise((q,B)=>{const ce=Math.max(L-Date.now(),0),be=setTimeout(q,ce);R.addEventListener(()=>{clearTimeout(be),B(Se.create("fetch-throttle",{throttleEndTimeMillis:L}))})})}(B,L)}catch(kt){if(Pt)return Pe.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Pt} provided in the "measurementId" field in the local Firebase config. [${kt?.message}]`),{appId:ct,measurementId:Pt};throw kt}try{const kt=yield function Xe(R){return re.apply(this,arguments)}(R);return ce.deleteThrottleMetadata(ct),kt}catch(kt){const nn=kt;if(!function Je(R){if(!(R instanceof te.ZR&&R.customData))return!1;const L=Number(R.customData.httpStatus);return 429===L||500===L||503===L||504===L}(nn)){if(ce.deleteThrottleMetadata(ct),Pt)return Pe.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Pt} provided in the "measurementId" field in the local Firebase config. [${nn?.message}]`),{appId:ct,measurementId:Pt};throw kt}const It=503===Number(null===(be=nn?.customData)||void 0===be?void 0:be.httpStatus)?(0,te.$s)(q,ce.intervalMillis,j):(0,te.$s)(q,ce.intervalMillis),An={throttleEndTimeMillis:Date.now()+It,backoffCount:q+1};return ce.setThrottleMetadata(ct,An),Pe.debug(`Calling attemptFetch again in ${It} millis`),xe(R,An,B,ce)}}),Fe.apply(this,arguments)}class it{constructor(){this.listeners=[]}addEventListener(L){this.listeners.push(L)}abort(){this.listeners.forEach(L=>L())}}let yn,Yr;function rn(){return(rn=(0,p.Z)(function*(R,L,q,B,ce){if(ce&&ce.global)R("event",q,B);else{const be=yield L;R("event",q,Object.assign(Object.assign({},B),{send_to:be}))}})).apply(this,arguments)}function vt(){return(vt=(0,p.Z)(function*(R,L,q,B){if(B&&B.global)return R("set",{screen_name:q}),Promise.resolve();R("config",yield L,{update:!0,screen_name:q})})).apply(this,arguments)}function Dn(){return(Dn=(0,p.Z)(function*(R,L,q,B){if(B&&B.global)return R("set",{user_id:q}),Promise.resolve();R("config",yield L,{update:!0,user_id:q})})).apply(this,arguments)}function dn(){return(dn=(0,p.Z)(function*(R,L,q,B){if(B&&B.global){const ce={};for(const be of Object.keys(q))ce[`user_properties.${be}`]=q[be];return R("set",ce),Promise.resolve()}R("config",yield L,{update:!0,user_properties:q})})).apply(this,arguments)}function Mr(){return(Mr=(0,p.Z)(function*(R,L){const q=yield R;window[`ga-disable-${q}`]=!L})).apply(this,arguments)}function kn(){return(kn=(0,p.Z)(function*(){if(!(0,te.hl)())return Pe.warn(Se.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,te.eu)()}catch(R){return Pe.warn(Se.create("indexeddb-unavailable",{errorInfo:R?.toString()}).message),!1}return!0})).apply(this,arguments)}function Qr(){return Qr=(0,p.Z)(function*(R,L,q,B,ce,be,ct){var Pt;const kt=function he(R){return _e.apply(this,arguments)}(R);kt.then(ur=>{q[ur.measurementId]=ur.appId,R.options.measurementId&&ur.measurementId!==R.options.measurementId&&Pe.warn(`The measurement ID in the local Firebase config (${R.options.measurementId}) does not match the measurement ID fetched from the server (${ur.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ur=>Pe.error(ur)),L.push(kt);const nn=function En(){return kn.apply(this,arguments)}().then(ur=>{if(ur)return B.getId()}),[It,An]=yield Promise.all([kt,nn]);(function Re(R){const L=window.document.getElementsByTagName("script");for(const q of Object.values(L))if(q.src&&q.src.includes(Y)&&q.src.includes(R))return q;return null})(be)||function Ze(R,L){const q=document.createElement("script");q.src=`${Y}?l=${R}&id=${L}`,q.async=!0,document.head.appendChild(q)}(be,It.measurementId),Yr&&(ce("consent","default",Yr),function Kn(R){Yr=R}(void 0)),ce("js",new Date);const Er=null!==(Pt=ct?.config)&&void 0!==Pt?Pt:{};return Er[ue]="firebase",Er.update=!0,null!=An&&(Er[ge]=An),ce("config",It.measurementId,Er),yn&&(ce("set",yn),function oi(R){yn=R}(void 0)),It.measurementId}),Qr.apply(this,arguments)}class Xr{constructor(L){this.app=L}_delete(){return delete mn[this.app.options.appId],Promise.resolve()}}let mn={},ar=[];const Oi={};let St,Bn,Rt="dataLayer",_t="gtag",tn=!1;function Gn(R){if(tn)throw Se.create("already-initialized");R.dataLayerName&&(Rt=R.dataLayerName),R.gtagName&&(_t=R.gtagName)}function tr(R,L,q){!function er(){const R=[];if((0,te.ru)()&&R.push("This is a browser extension environment."),(0,te.zI)()||R.push("Cookies are not available."),R.length>0){const L=R.map((B,ce)=>`(${ce+1}) ${B}`).join(" "),q=Se.create("invalid-analytics-context",{errorInfo:L});Pe.warn(q.message)}}();const B=R.options.appId;if(!B)throw Se.create("no-app-id");if(!R.options.apiKey){if(!R.options.measurementId)throw Se.create("no-api-key");Pe.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${R.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=mn[B])throw Se.create("already-exists",{id:B});if(!tn){!function nt(R){let L=[];Array.isArray(window[R])?L=window[R]:window[R]=L}(Rt);const{wrappedGtag:be,gtagCore:ct}=function Ie(R,L,q,B,ce){let be=function(...ct){window[B].push(arguments)};return window[ce]&&"function"==typeof window[ce]&&(be=window[ce]),window[ce]=function Ae(R,L,q,B){function be(){return be=(0,p.Z)(function*(ct,Pt,kt){try{"event"===ct?yield function Me(R,L,q,B,ce){return Ue.apply(this,arguments)}(R,L,q,Pt,kt):"config"===ct?yield function pe(R,L,q,B,ce,be){return Te.apply(this,arguments)}(R,L,q,B,Pt,kt):"consent"===ct?R("consent","update",kt):R("set",Pt)}catch(nn){Pe.error(nn)}}),be.apply(this,arguments)}return function ce(ct,Pt,kt){return be.apply(this,arguments)}}(be,R,L,q),{gtagCore:be,wrappedGtag:window[ce]}}(mn,ar,Oi,Rt,_t);Bn=be,St=ct,tn=!0}return mn[B]=function mt(R,L,q,B,ce,be,ct){return Qr.apply(this,arguments)}(R,ar,Oi,L,St,Rt,q),new Xr(R)}function Nr(){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,p.Z)(function*(){if((0,te.ru)()||!(0,te.zI)()||!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch{return!1}})).apply(this,arguments)}function mr(R,L,q){R=(0,te.m9)(R),function Qe(R,L,q,B){return vt.apply(this,arguments)}(Bn,mn[R.app.options.appId],L,q).catch(B=>Pe.error(B))}function ai(R,L,q){R=(0,te.m9)(R),function Pn(R,L,q,B){return Dn.apply(this,arguments)}(Bn,mn[R.app.options.appId],L,q).catch(B=>Pe.error(B))}function He(R,L,q){R=(0,te.m9)(R),function Sn(R,L,q,B){return dn.apply(this,arguments)}(Bn,mn[R.app.options.appId],L,q).catch(B=>Pe.error(B))}function Ce(R,L){R=(0,te.m9)(R),function or(R,L){return Mr.apply(this,arguments)}(mn[R.app.options.appId],L).catch(q=>Pe.error(q))}function Dt(R,L,q,B){R=(0,te.m9)(R),function Et(R,L,q,B,ce){return rn.apply(this,arguments)}(Bn,mn[R.app.options.appId],L,q,B).catch(ce=>Pe.error(ce))}const jt="@firebase/analytics";!function H(){(0,J._registerComponent)(new ae.wA(de,(L,{options:q})=>tr(L.getProvider("app").getImmediate(),L.getProvider("installations-internal").getImmediate(),q),"PUBLIC")),(0,J._registerComponent)(new ae.wA("analytics-internal",function R(L){try{const q=L.getProvider(de).getImmediate();return{logEvent:(B,ce,be)=>Dt(q,B,ce,be)}}catch(q){throw Se.create("interop-component-reg-failed",{reason:q})}},"PRIVATE")),(0,J.registerVersion)(jt,"0.9.4"),(0,J.registerVersion)(jt,"0.9.4","esm2017")}()},3942:(gt,De,P)=>{P.d(De,{Z:()=>Ze});var p=P(2090),J=P(4859),V=P(9681),te=P(1877);class ae{constructor(pe,Te){this._delegate=pe,this.firebase=Te,(0,V._addComponent)(pe,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,V.deleteApp)(this._delegate)))}_getService(pe,Te=V._DEFAULT_ENTRY_NAME){var Me;this._delegate.checkDestroyed();const Ue=this._delegate.container.getProvider(pe);return!Ue.isInitialized()&&"EXPLICIT"===(null===(Me=Ue.getComponent())||void 0===Me?void 0:Me.instantiationMode)&&Ue.initialize(),Ue.getImmediate({identifier:Te})}_removeServiceInstance(pe,Te=V._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(Te)}_addComponent(pe){(0,V._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,V._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function ue(){const nt=function ge(nt){const pe={},Te={__esModule:!0,initializeApp:function Ae(Se,j={}){const Ee=V.initializeApp(Se,j);if((0,p.r3)(pe,Ee.name))return pe[Ee.name];const We=new nt(Ee,Te);return pe[Ee.name]=We,We},app:Ue,registerVersion:V.registerVersion,setLogLevel:V.setLogLevel,onLog:V.onLog,apps:null,SDK_VERSION:V.SDK_VERSION,INTERNAL:{registerComponent:function Re(Se){const j=Se.name,Ee=j.replace("-compat","");if(V._registerComponent(Se)&&"PUBLIC"===Se.type){const We=(Ye=Ue())=>{if("function"!=typeof Ye[Ee])throw de.create("invalid-app-argument",{appName:j});return Ye[Ee]()};void 0!==Se.serviceProps&&(0,p.ZB)(We,Se.serviceProps),Te[Ee]=We,nt.prototype[Ee]=function(...Ye){return this._getService.bind(this,j).apply(this,Se.multipleInstances?Ye:[])}}return"PUBLIC"===Se.type?Te[Ee]:null},removeApp:function Me(Se){delete pe[Se]},useAsService:function Ge(Se,j){return"serverAuth"===j?null:j},modularAPIs:V}};function Ue(Se){if(!(0,p.r3)(pe,Se=Se||V._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:Se});return pe[Se]}return Te.default=Te,Object.defineProperty(Te,"apps",{get:function Ie(){return Object.keys(pe).map(Se=>pe[Se])}}),Ue.App=nt,Te}(ae);return nt.INTERNAL=Object.assign(Object.assign({},nt.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function pe(Te){(0,p.ZB)(nt,Te)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),nt}(),W=new te.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){W.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const nt=self.firebase.SDK_VERSION;nt&&nt.indexOf("LITE")>=0&&W.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ze=G;!function we(nt){(0,V.registerVersion)("@firebase/app-compat","0.2.5",nt)}()},9681:(gt,De,P)=>{P.r(De),P.d(De,{FirebaseError:()=>te.ZR,SDK_VERSION:()=>or,_DEFAULT_ENTRY_NAME:()=>Fe,_addComponent:()=>yn,_addOrOverwriteComponent:()=>Et,_apps:()=>Je,_clearComponents:()=>Pn,_components:()=>it,_getProvider:()=>Qe,_registerComponent:()=>rn,_removeServiceInstance:()=>vt,deleteApp:()=>oi,getApp:()=>Yr,getApps:()=>Kn,initializeApp:()=>Mr,onLog:()=>mt,registerVersion:()=>kn,setLogLevel:()=>Qr});var p=P(5861),J=P(4859),V=P(1877),te=P(2090),ae=P(8766);class ne{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(ot=>{if(function de(He){return"VERSION"===He.getComponent()?.type}(ot)){const Dt=ot.getImmediate();return`${Dt.library}/${Dt.version}`}return null}).filter(ot=>ot).join(" ")}}const ge="@firebase/app",G=new V.Yd("@firebase/app"),Fe="[DEFAULT]",$e={[ge]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Je=new Map,it=new Map;function yn(He,Ce){try{He.container.addComponent(Ce)}catch(ot){G.debug(`Component ${Ce.name} failed to register with FirebaseApp ${He.name}`,ot)}}function Et(He,Ce){He.container.addOrOverwriteComponent(Ce)}function rn(He){const Ce=He.name;if(it.has(Ce))return G.debug(`There were multiple attempts to register component ${Ce}.`),!1;it.set(Ce,He);for(const ot of Je.values())yn(ot,He);return!0}function Qe(He,Ce){const ot=He.container.getProvider("heartbeat").getImmediate({optional:!0});return ot&&ot.triggerHeartbeat(),He.container.getProvider(Ce)}function vt(He,Ce,ot=Fe){Qe(He,Ce).clearInstance(ot)}function Pn(){it.clear()}const Sn=new te.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class dn{constructor(Ce,ot,Dt){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},ot),this._name=ot.name,this._automaticDataCollectionEnabled=ot.automaticDataCollectionEnabled,this._container=Dt,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw Sn.create("app-deleted",{appName:this._name})}}const or="9.18.0";function Mr(He,Ce={}){let ot=He;"object"!=typeof Ce&&(Ce={name:Ce});const Dt=Object.assign({name:Fe,automaticDataCollectionEnabled:!1},Ce),Lt=Dt.name;if("string"!=typeof Lt||!Lt)throw Sn.create("bad-app-name",{appName:String(Lt)});if(ot||(ot=(0,te.aH)()),!ot)throw Sn.create("no-options");const jt=Je.get(Lt);if(jt){if((0,te.vZ)(ot,jt.options)&&(0,te.vZ)(Dt,jt.config))return jt;throw Sn.create("duplicate-app",{appName:Lt})}const zn=new J.H0(Lt);for(const R of it.values())zn.addComponent(R);const H=new dn(ot,Dt,zn);return Je.set(Lt,H),H}function Yr(He=Fe){const Ce=Je.get(He);if(!Ce&&He===Fe)return Mr();if(!Ce)throw Sn.create("no-app",{appName:He});return Ce}function Kn(){return Array.from(Je.values())}function oi(He){return En.apply(this,arguments)}function En(){return(En=(0,p.Z)(function*(He){const Ce=He.name;Je.has(Ce)&&(Je.delete(Ce),yield Promise.all(He.container.getProviders().map(ot=>ot.delete())),He.isDeleted=!0)})).apply(this,arguments)}function kn(He,Ce,ot){var Dt;let Lt=null!==(Dt=$e[He])&&void 0!==Dt?Dt:He;ot&&(Lt+=`-${ot}`);const jt=Lt.match(/\s|\//),zn=Ce.match(/\s|\//);if(jt||zn){const H=[`Unable to register library "${Lt}" with version "${Ce}":`];return jt&&H.push(`library name "${Lt}" contains illegal characters (whitespace or "/")`),jt&&zn&&H.push("and"),zn&&H.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void G.warn(H.join(" "))}rn(new J.wA(`${Lt}-version`,()=>({library:Lt,version:Ce}),"VERSION"))}function mt(He,Ce){if(null!==He&&"function"!=typeof He)throw Sn.create("invalid-log-argument");(0,V.Am)(He,Ce)}function Qr(He){(0,V.Ub)(He)}const Xr="firebase-heartbeat-database",mn=1,ar="firebase-heartbeat-store";let Oi=null;function Rt(){return Oi||(Oi=(0,ae.X3)(Xr,mn,{upgrade:(He,Ce)=>{0===Ce&&He.createObjectStore(ar)}}).catch(He=>{throw Sn.create("idb-open",{originalErrorMessage:He.message})})),Oi}function St(){return(St=(0,p.Z)(function*(He){try{return(yield Rt()).transaction(ar).objectStore(ar).get(Gn(He))}catch(Ce){if(Ce instanceof te.ZR)G.warn(Ce.message);else{const ot=Sn.create("idb-get",{originalErrorMessage:Ce?.message});G.warn(ot.message)}}})).apply(this,arguments)}function Bn(He,Ce){return tn.apply(this,arguments)}function tn(){return(tn=(0,p.Z)(function*(He,Ce){try{const Dt=(yield Rt()).transaction(ar,"readwrite");return yield Dt.objectStore(ar).put(Ce,Gn(He)),Dt.done}catch(ot){if(ot instanceof te.ZR)G.warn(ot.message);else{const Dt=Sn.create("idb-set",{originalErrorMessage:ot?.message});G.warn(Dt.message)}}})).apply(this,arguments)}function Gn(He){return`${He.name}!${He.options.appId}`}class qi{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const ot=this.container.getProvider("app").getImmediate();this._storage=new Xt(ot),this._heartbeatsCachePromise=this._storage.read().then(Dt=>(this._heartbeatsCache=Dt,Dt))}triggerHeartbeat(){var Ce=this;return(0,p.Z)(function*(){const Dt=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Lt=cn();if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),Ce._heartbeatsCache.lastSentHeartbeatDate!==Lt&&!Ce._heartbeatsCache.heartbeats.some(jt=>jt.date===Lt))return Ce._heartbeatsCache.heartbeats.push({date:Lt,agent:Dt}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter(jt=>{const zn=new Date(jt.date).valueOf();return Date.now()-zn<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,p.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache||0===Ce._heartbeatsCache.heartbeats.length)return"";const ot=cn(),{heartbeatsToSend:Dt,unsentEntries:Lt}=function Nr(He,Ce=1024){const ot=[];let Dt=He.slice();for(const Lt of He){const jt=ot.find(zn=>zn.agent===Lt.agent);if(jt){if(jt.dates.push(Lt.date),mr(ot)>Ce){jt.dates.pop();break}}else if(ot.push({agent:Lt.agent,dates:[Lt.date]}),mr(ot)>Ce){ot.pop();break}Dt=Dt.slice(1)}return{heartbeatsToSend:ot,unsentEntries:Dt}}(Ce._heartbeatsCache.heartbeats),jt=(0,te.L)(JSON.stringify({version:2,heartbeats:Dt}));return Ce._heartbeatsCache.lastSentHeartbeatDate=ot,Lt.length>0?(Ce._heartbeatsCache.heartbeats=Lt,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),jt})()}}function cn(){return(new Date).toISOString().substring(0,10)}class Xt{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,te.hl)()&&(0,te.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,p.Z)(function*(){return(yield Ce._canUseIndexedDBPromise)&&(yield function _t(He){return St.apply(this,arguments)}(Ce.app))||{heartbeats:[]}})()}overwrite(Ce){var ot=this;return(0,p.Z)(function*(){var Dt;if(yield ot._canUseIndexedDBPromise){const jt=yield ot.read();return Bn(ot.app,{lastSentHeartbeatDate:null!==(Dt=Ce.lastSentHeartbeatDate)&&void 0!==Dt?Dt:jt.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var ot=this;return(0,p.Z)(function*(){var Dt;if(yield ot._canUseIndexedDBPromise){const jt=yield ot.read();return Bn(ot.app,{lastSentHeartbeatDate:null!==(Dt=Ce.lastSentHeartbeatDate)&&void 0!==Dt?Dt:jt.lastSentHeartbeatDate,heartbeats:[...jt.heartbeats,...Ce.heartbeats]})}})()}}function mr(He){return(0,te.L)(JSON.stringify({version:2,heartbeats:He})).length}!function ai(He){rn(new J.wA("platform-logger",Ce=>new ne(Ce),"PRIVATE")),rn(new J.wA("heartbeat",Ce=>new qi(Ce),"PRIVATE")),kn(ge,"0.9.5",He),kn(ge,"0.9.5","esm2017"),kn("fire-js","")}("")},4859:(gt,De,P)=>{P.d(De,{H0:()=>ge,wA:()=>V,zt:()=>ae});var p=P(5861),J=P(2090);class V{constructor(G,W,Y){this.name=G,this.instanceFactory=W,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const te="[DEFAULT]";class ae{constructor(G,W){this.name=G,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const W=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(W)){const Y=new J.BH;if(this.instancesDeferred.set(W,Y),this.isInitialized(W)||this.shouldAutoInitialize())try{const Pe=this.getOrInitializeService({instanceIdentifier:W});Pe&&Y.resolve(Pe)}catch{}}return this.instancesDeferred.get(W).promise}getImmediate(G){var W;const Y=this.normalizeInstanceIdentifier(G?.identifier),Pe=null!==(W=G?.optional)&&void 0!==W&&W;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(Pe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(we){if(Pe)return null;throw we}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function de(ue){return"EAGER"===ue.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:te})}catch{}for(const[W,Y]of this.instancesDeferred.entries()){const Pe=this.normalizeInstanceIdentifier(W);try{const we=this.getOrInitializeService({instanceIdentifier:Pe});Y.resolve(we)}catch{}}}}clearInstance(G=te){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,p.Z)(function*(){const W=Array.from(G.instances.values());yield Promise.all([...W.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...W.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=te){return this.instances.has(G)}getOptions(G=te){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:W={}}=G,Y=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Pe=this.getOrInitializeService({instanceIdentifier:Y,options:W});for(const[we,Ze]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(we)&&Ze.resolve(Pe);return Pe}onInit(G,W){var Y;const Pe=this.normalizeInstanceIdentifier(W),we=null!==(Y=this.onInitCallbacks.get(Pe))&&void 0!==Y?Y:new Set;we.add(G),this.onInitCallbacks.set(Pe,we);const Ze=this.instances.get(Pe);return Ze&&G(Ze,Pe),()=>{we.delete(G)}}invokeOnInitCallbacks(G,W){const Y=this.onInitCallbacks.get(W);if(Y)for(const Pe of Y)try{Pe(G,W)}catch{}}getOrInitializeService({instanceIdentifier:G,options:W={}}){let Y=this.instances.get(G);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=G,ue===te?void 0:ue),options:W}),this.instances.set(G,Y),this.instancesOptions.set(G,W),this.invokeOnInitCallbacks(Y,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,Y)}catch{}var ue;return Y||null}normalizeInstanceIdentifier(G=te){return this.component?this.component.multipleInstances?G:te:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ge{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const W=this.getProvider(G.name);if(W.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);W.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const W=new ae(G,this);return this.providers.set(G,W),W}getProviders(){return Array.from(this.providers.values())}}},2833:(gt,De,P)=>{var p=P(5861),J=P(9681),V=P(4859),te=P(2090),ae=P(8766);const ne="@firebase/installations",de="0.6.4",ge=1e4,ue=`w:${de}`,G="FIS_v2",W="https://firebaseinstallations.googleapis.com/v1",Y=36e5,nt=new te.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function pe(Z){return Z instanceof te.ZR&&Z.code.includes("request-failed")}function Te({projectId:Z}){return`${W}/projects/${Z}/installations`}function Me(Z){return{token:Z.token,requestStatus:2,expiresIn:j(Z.expiresIn),creationTime:Date.now()}}function Ue(Z,ye){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,p.Z)(function*(Z,ye){const qe=(yield ye.json()).error;return nt.create("request-failed",{requestName:Z,serverCode:qe.code,serverMessage:qe.message,serverStatus:qe.status})})).apply(this,arguments)}function Ie({apiKey:Z}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":Z})}function Ge(Z){return Se.apply(this,arguments)}function Se(){return(Se=(0,p.Z)(function*(Z){const ye=yield Z();return ye.status>=500&&ye.status<600?Z():ye})).apply(this,arguments)}function j(Z){return Number(Z.replace("s","000"))}function Ye(){return(Ye=(0,p.Z)(function*({appConfig:Z,heartbeatServiceProvider:ye},{fid:Ve}){const qe=Te(Z),Jt=Ie(Z),Ht=ye.getImmediate({optional:!0});if(Ht){const Pr=yield Ht.getHeartbeatsHeader();Pr&&Jt.append("x-firebase-client",Pr)}const hn={method:"POST",headers:Jt,body:JSON.stringify({fid:Ve,authVersion:G,appId:Z.appId,sdkVersion:ue})},Ki=yield Ge(()=>fetch(qe,hn));if(Ki.ok){const Pr=yield Ki.json();return{fid:Pr.fid||Ve,registrationStatus:2,refreshToken:Pr.refreshToken,authToken:Me(Pr.authToken)}}throw yield Ue("Create Installation",Ki)})).apply(this,arguments)}function pt(Z){return new Promise(ye=>{setTimeout(ye,Z)})}const re=/^[cdef][\w-]{21}$/,he="";function _e(){try{const Z=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(Z),Z[0]=112+Z[0]%16;const Ve=function xe(Z){return function Xe(Z){return btoa(String.fromCharCode(...Z)).replace(/\+/g,"-").replace(/\//g,"_")}(Z).substr(0,22)}(Z);return re.test(Ve)?Ve:he}catch{return he}}function Fe(Z){return`${Z.appName}!${Z.appId}`}const $e=new Map;function Je(Z,ye){const Ve=Fe(Z);Et(Ve,ye),function rn(Z,ye){const Ve=function vt(){return!Qe&&"BroadcastChannel"in self&&(Qe=new BroadcastChannel("[Firebase] FID Change"),Qe.onmessage=Z=>{Et(Z.data.key,Z.data.fid)}),Qe}();Ve&&Ve.postMessage({key:Z,fid:ye}),function Pn(){0===$e.size&&Qe&&(Qe.close(),Qe=null)}()}(Ve,ye)}function Et(Z,ye){const Ve=$e.get(Z);if(Ve)for(const qe of Ve)qe(ye)}let Qe=null;const Dn="firebase-installations-database",Sn=1,dn="firebase-installations-store";let or=null;function Mr(){return or||(or=(0,ae.X3)(Dn,Sn,{upgrade:(Z,ye)=>{0===ye&&Z.createObjectStore(dn)}})),or}function Yr(Z,ye){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,p.Z)(function*(Z,ye){const Ve=Fe(Z),Jt=(yield Mr()).transaction(dn,"readwrite"),Ht=Jt.objectStore(dn),Zn=yield Ht.get(Ve);return yield Ht.put(ye,Ve),yield Jt.done,(!Zn||Zn.fid!==ye.fid)&&Je(Z,ye.fid),ye})).apply(this,arguments)}function oi(Z){return En.apply(this,arguments)}function En(){return(En=(0,p.Z)(function*(Z){const ye=Fe(Z),qe=(yield Mr()).transaction(dn,"readwrite");yield qe.objectStore(dn).delete(ye),yield qe.done})).apply(this,arguments)}function kn(Z,ye){return mt.apply(this,arguments)}function mt(){return(mt=(0,p.Z)(function*(Z,ye){const Ve=Fe(Z),Jt=(yield Mr()).transaction(dn,"readwrite"),Ht=Jt.objectStore(dn),Zn=yield Ht.get(Ve),hn=ye(Zn);return void 0===hn?yield Ht.delete(Ve):yield Ht.put(hn,Ve),yield Jt.done,hn&&(!Zn||Zn.fid!==hn.fid)&&Je(Z,hn.fid),hn})).apply(this,arguments)}function Qr(Z){return Xr.apply(this,arguments)}function Xr(){return Xr=(0,p.Z)(function*(Z){let ye;const Ve=yield kn(Z.appConfig,qe=>{const Jt=function mn(Z){return tn(Z||{fid:_e(),registrationStatus:0})}(qe),Ht=function ar(Z,ye){if(0===ye.registrationStatus){if(!navigator.onLine)return{installationEntry:ye,registrationPromise:Promise.reject(nt.create("app-offline"))};const Ve={fid:ye.fid,registrationStatus:1,registrationTime:Date.now()},qe=function Oi(Z,ye){return Rt.apply(this,arguments)}(Z,Ve);return{installationEntry:Ve,registrationPromise:qe}}return 1===ye.registrationStatus?{installationEntry:ye,registrationPromise:_t(Z)}:{installationEntry:ye}}(Z,Jt);return ye=Ht.registrationPromise,Ht.installationEntry});return Ve.fid===he?{installationEntry:yield ye}:{installationEntry:Ve,registrationPromise:ye}}),Xr.apply(this,arguments)}function Rt(){return Rt=(0,p.Z)(function*(Z,ye){try{const Ve=yield function We(Z,ye){return Ye.apply(this,arguments)}(Z,ye);return Yr(Z.appConfig,Ve)}catch(Ve){throw pe(Ve)&&409===Ve.customData.serverCode?yield oi(Z.appConfig):yield Yr(Z.appConfig,{fid:ye.fid,registrationStatus:0}),Ve}}),Rt.apply(this,arguments)}function _t(Z){return St.apply(this,arguments)}function St(){return(St=(0,p.Z)(function*(Z){let ye=yield Bn(Z.appConfig);for(;1===ye.registrationStatus;)yield pt(100),ye=yield Bn(Z.appConfig);if(0===ye.registrationStatus){const{installationEntry:Ve,registrationPromise:qe}=yield Qr(Z);return qe||Ve}return ye})).apply(this,arguments)}function Bn(Z){return kn(Z,ye=>{if(!ye)throw nt.create("installation-not-found");return tn(ye)})}function tn(Z){return function Gn(Z){return 1===Z.registrationStatus&&Z.registrationTime+ge<Date.now()}(Z)?{fid:Z.fid,registrationStatus:0}:Z}function tr(){return(tr=(0,p.Z)(function*({appConfig:Z,heartbeatServiceProvider:ye},Ve){const qe=function qi(Z,{fid:ye}){return`${Te(Z)}/${ye}/authTokens:generate`}(Z,Ve),Jt=function Re(Z,{refreshToken:ye}){const Ve=Ie(Z);return Ve.append("Authorization",function Ee(Z){return`${G} ${Z}`}(ye)),Ve}(Z,Ve),Ht=ye.getImmediate({optional:!0});if(Ht){const Pr=yield Ht.getHeartbeatsHeader();Pr&&Jt.append("x-firebase-client",Pr)}const hn={method:"POST",headers:Jt,body:JSON.stringify({installation:{sdkVersion:ue,appId:Z.appId}})},Ki=yield Ge(()=>fetch(qe,hn));if(Ki.ok)return Me(yield Ki.json());throw yield Ue("Generate Auth Token",Ki)})).apply(this,arguments)}function cn(Z){return Nr.apply(this,arguments)}function Nr(){return Nr=(0,p.Z)(function*(Z,ye=!1){let Ve;const qe=yield kn(Z.appConfig,Ht=>{if(!ot(Ht))throw nt.create("not-registered");const Zn=Ht.authToken;if(!ye&&function Dt(Z){return 2===Z.requestStatus&&!function Lt(Z){const ye=Date.now();return ye<Z.creationTime||Z.creationTime+Z.expiresIn<ye+Y}(Z)}(Zn))return Ht;if(1===Zn.requestStatus)return Ve=function Xt(Z,ye){return mr.apply(this,arguments)}(Z,ye),Ht;{if(!navigator.onLine)throw nt.create("app-offline");const hn=function jt(Z){const ye={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},Z),{authToken:ye})}(Ht);return Ve=function He(Z,ye){return Ce.apply(this,arguments)}(Z,hn),hn}});return Ve?yield Ve:qe.authToken}),Nr.apply(this,arguments)}function mr(){return(mr=(0,p.Z)(function*(Z,ye){let Ve=yield ai(Z.appConfig);for(;1===Ve.authToken.requestStatus;)yield pt(100),Ve=yield ai(Z.appConfig);const qe=Ve.authToken;return 0===qe.requestStatus?cn(Z,ye):qe})).apply(this,arguments)}function ai(Z){return kn(Z,ye=>{if(!ot(ye))throw nt.create("not-registered");return function zn(Z){return 1===Z.requestStatus&&Z.requestTime+ge<Date.now()}(ye.authToken)?Object.assign(Object.assign({},ye),{authToken:{requestStatus:0}}):ye})}function Ce(){return Ce=(0,p.Z)(function*(Z,ye){try{const Ve=yield function er(Z,ye){return tr.apply(this,arguments)}(Z,ye),qe=Object.assign(Object.assign({},ye),{authToken:Ve});return yield Yr(Z.appConfig,qe),Ve}catch(Ve){if(!pe(Ve)||401!==Ve.customData.serverCode&&404!==Ve.customData.serverCode){const qe=Object.assign(Object.assign({},ye),{authToken:{requestStatus:0}});yield Yr(Z.appConfig,qe)}else yield oi(Z.appConfig);throw Ve}}),Ce.apply(this,arguments)}function ot(Z){return void 0!==Z&&2===Z.registrationStatus}function R(){return(R=(0,p.Z)(function*(Z){const ye=Z,{installationEntry:Ve,registrationPromise:qe}=yield Qr(ye);return qe?qe.catch(console.error):cn(ye).catch(console.error),Ve.fid})).apply(this,arguments)}function q(){return q=(0,p.Z)(function*(Z,ye=!1){const Ve=Z;return yield function B(Z){return ce.apply(this,arguments)}(Ve),(yield cn(Ve,ye)).token}),q.apply(this,arguments)}function ce(){return(ce=(0,p.Z)(function*(Z){const{registrationPromise:ye}=yield Qr(Z);ye&&(yield ye)})).apply(this,arguments)}function ur(Z){return nt.create("missing-app-config-values",{valueName:Z})}const Yo="installations",mo=Z=>{const ye=Z.getProvider("app").getImmediate(),Ve=function Er(Z){if(!Z||!Z.options)throw ur("App Configuration");if(!Z.name)throw ur("App Name");const ye=["projectId","apiKey","appId"];for(const Ve of ye)if(!Z.options[Ve])throw ur(Ve);return{appName:Z.name,projectId:Z.options.projectId,apiKey:Z.options.apiKey,appId:Z.options.appId}}(ye);return{app:ye,appConfig:Ve,heartbeatServiceProvider:(0,J._getProvider)(ye,"heartbeat"),_delete:()=>Promise.resolve()}},_o=Z=>{const ye=Z.getProvider("app").getImmediate(),Ve=(0,J._getProvider)(ye,Yo).getImmediate();return{getId:()=>function H(Z){return R.apply(this,arguments)}(Ve),getToken:Jt=>function L(Z){return q.apply(this,arguments)}(Ve,Jt)}};(function Xo(){(0,J._registerComponent)(new V.wA(Yo,mo,"PUBLIC")),(0,J._registerComponent)(new V.wA("installations-internal",_o,"PRIVATE"))})(),(0,J.registerVersion)(ne,de),(0,J.registerVersion)(ne,de,"esm2017")},1877:(gt,De,P)=>{P.d(De,{Am:()=>ue,Ub:()=>ge,Yd:()=>de,in:()=>J});const p=[];var J=(()=>{return(G=J||(J={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",J;var G})();const V={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},te=J.INFO,ae={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},ne=(G,W,...Y)=>{if(W<G.logLevel)return;const Pe=(new Date).toISOString(),we=ae[W];if(!we)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[we](`[${Pe}]  ${G.name}:`,...Y)};class de{constructor(W){this.name=W,this._logLevel=te,this._logHandler=ne,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in J))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?V[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...W),this._logHandler(this,J.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...W),this._logHandler(this,J.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,J.INFO,...W),this._logHandler(this,J.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,J.WARN,...W),this._logHandler(this,J.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...W),this._logHandler(this,J.ERROR,...W)}}function ge(G){p.forEach(W=>{W.setLogLevel(G)})}function ue(G,W){for(const Y of p){let Pe=null;W&&W.level&&(Pe=V[W.level]),Y.userLogHandler=null===G?null:(we,Ze,...nt)=>{const pe=nt.map(Te=>{if(null==Te)return null;if("string"==typeof Te)return Te;if("number"==typeof Te||"boolean"==typeof Te)return Te.toString();if(Te instanceof Error)return Te.message;try{return JSON.stringify(Te)}catch{return null}}).filter(Te=>Te).join(" ");Ze>=(Pe??we.logLevel)&&G({level:J[Ze].toLowerCase(),message:pe,args:nt,type:we.name})}}}},5132:(gt,De,P)=>{P.d(De,{Gb:()=>p.Gb});var p=P(579)},259:(gt,De,P)=>{P.d(De,{C6:()=>p.getApps,Mq:()=>p.getApp});var p=P(9681);(0,p.registerVersion)("firebase","9.18.0","app")},9260:(gt,De,P)=>{P.d(De,{Z:()=>p.Z});var p=P(3942);p.Z.registerVersion("firebase","9.18.0","app-compat")},8971:(gt,De,P)=>{P.r(De);var p=P(5861),J=P(3942),V=P(2090),te=P(9681),ae=P(1877),ne=P(655),de=P(4859);const ue={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Y_EMAIL_SIGNIN="EMAIL_SIGNIN",Y_PASSWORD_RESET="PASSWORD_RESET",Y_RECOVER_EMAIL="RECOVER_EMAIL",Y_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",Y_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",Y_VERIFY_EMAIL="VERIFY_EMAIL";const Ze=function Pe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},nt=function we(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pe=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Me=new ae.Yd("@firebase/auth");function Ue(y,...f){Me.logLevel<=ae.in.ERROR&&Me.error(`Auth (${te.SDK_VERSION}): ${y}`,...f)}function Ae(y,...f){throw Se(y,...f)}function Ie(y,...f){return Se(y,...f)}function Re(y,f,g){const E=Object.assign(Object.assign({},nt()),{[f]:g});return new V.LL("auth","Firebase",E).create(f,{appName:y.name})}function Ge(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Ae(y,"argument-error"),Re(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Se(y,...f){if("string"!=typeof y){const g=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(g,...E)}return pe.create(y,...f)}function j(y,f,...g){if(!y)throw Se(f,...g)}function Ee(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Ue(f),new Error(f)}function We(y,f){y||Ee(f)}const Ye=new Map;function pt(y){We(y instanceof Function,"Expected a class definition");let f=Ye.get(y);return f?(We(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,Ye.set(y,f),f)}function he(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function _e(){return"http:"===xe()||"https:"===xe()}function xe(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Je{constructor(f,g){this.shortDelay=f,this.longDelay=g,We(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function Fe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(_e()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function it(y,f){We(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class yn{static initialize(f,g,E){this.fetchImpl=f,g&&(this.headersImpl=g),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ee("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ee("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ee("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Et={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},rn=new Je(3e4,6e4);function Qe(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function vt(y,f,g,E){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,p.Z)(function*(y,f,g,E,C={}){return Dn(y,C,(0,p.Z)(function*(){let M={},Q={};E&&("GET"===f?Q=E:M={body:JSON.stringify(E)});const fe=(0,V.xO)(Object.assign({key:y.config.apiKey},Q)).slice(1),Ke=yield y._getAdditionalHeaders();return Ke["Content-Type"]="application/json",y.languageCode&&(Ke["X-Firebase-Locale"]=y.languageCode),yn.fetch()(Mr(y,y.config.apiHost,g,fe),Object.assign({method:f,headers:Ke,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function Dn(y,f,g){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,p.Z)(function*(y,f,g){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},Et),f);try{const C=new Yr(y),M=yield Promise.race([g(),C.promise]);C.clearNetworkTimeout();const Q=yield M.json();if("needConfirmation"in Q)throw Kn(y,"account-exists-with-different-credential",Q);if(M.ok&&!("errorMessage"in Q))return Q;{const fe=M.ok?Q.errorMessage:Q.error.message,[Ke,at]=fe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ke)throw Kn(y,"credential-already-in-use",Q);if("EMAIL_EXISTS"===Ke)throw Kn(y,"email-already-in-use",Q);if("USER_DISABLED"===Ke)throw Kn(y,"user-disabled",Q);const Ot=E[Ke]||Ke.toLowerCase().replace(/[_\s]+/g,"-");if(at)throw Re(y,Ot,at);Ae(y,Ot)}}catch(C){if(C instanceof V.ZR)throw C;Ae(y,"internal-error",{message:String(C)})}})).apply(this,arguments)}function dn(y,f,g,E){return or.apply(this,arguments)}function or(){return(or=(0,p.Z)(function*(y,f,g,E,C={}){const M=yield vt(y,f,g,E,C);return"mfaPendingCredential"in M&&Ae(y,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function Mr(y,f,g,E){const C=`${f}${g}?${E}`;return y.config.emulator?it(y.config,C):`${y.config.apiScheme}://${C}`}class Yr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,E)=>{this.timer=setTimeout(()=>E(Ie(this.auth,"network-request-failed")),rn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kn(y,f,g){const E={appName:y.name};g.email&&(E.email=g.email),g.phoneNumber&&(E.phoneNumber=g.phoneNumber);const C=Ie(y,f,E);return C.customData._tokenResponse=g,C}function En(){return(En=(0,p.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function mt(){return(mt=(0,p.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Xr(){return(Xr=(0,p.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function mn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function Rt(){return(Rt=(0,p.Z)(function*(y,f=!1){const g=(0,V.m9)(y),E=yield g.getIdToken(f),C=St(E);j(C&&C.exp&&C.auth_time&&C.iat,g.auth,"internal-error");const M="object"==typeof C.firebase?C.firebase:void 0,Q=M?.sign_in_provider;return{claims:C,token:E,authTime:mn(_t(C.auth_time)),issuedAtTime:mn(_t(C.iat)),expirationTime:mn(_t(C.exp)),signInProvider:Q||null,signInSecondFactor:M?.sign_in_second_factor||null}})).apply(this,arguments)}function _t(y){return 1e3*Number(y)}function St(y){const[f,g,E]=y.split(".");if(void 0===f||void 0===g||void 0===E)return Ue("JWT malformed, contained fewer than 3 sections"),null;try{const C=(0,V.tV)(g);return C?JSON.parse(C):(Ue("Failed to decode base64 JWT payload"),null)}catch(C){return Ue("Caught error parsing JWT payload as JSON",C?.toString()),null}}function tn(y,f){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,p.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(E){throw E instanceof V.ZR&&function er({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}class tr{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const C=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,C)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,p.Z)(function*(){yield g.iteration()}),E)}iteration(){var f=this;return(0,p.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&f.schedule(!0))}f.schedule()})()}}class qi{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=mn(this.lastLoginAt),this.creationTime=mn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function cn(y){return Nr.apply(this,arguments)}function Nr(){return Nr=(0,p.Z)(function*(y){var f;const g=y.auth,E=yield y.getIdToken(),C=yield tn(y,function Qr(y,f){return Xr.apply(this,arguments)}(g,{idToken:E}));j(C?.users.length,g,"internal-error");const M=C.users[0];y._notifyReloadListener(M);const Q=null!==(f=M.providerUserInfo)&&void 0!==f&&f.length?function He(y){return y.map(f=>{var{providerId:g}=f,E=(0,ne._T)(f,["providerId"]);return{providerId:g,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(M.providerUserInfo):[],fe=function ai(y,f){return[...y.filter(E=>!f.some(C=>C.providerId===E.providerId)),...f]}(y.providerData,Q),Ot=!!y.isAnonymous&&!(y.email&&M.passwordHash||fe?.length),Mt={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:fe,metadata:new qi(M.createdAt,M.lastLoginAt),isAnonymous:Ot};Object.assign(y,Mt)}),Nr.apply(this,arguments)}function mr(){return(mr=(0,p.Z)(function*(y){const f=(0,V.m9)(y);yield cn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function ot(){return(ot=(0,p.Z)(function*(y,f){const g=yield Dn(y,{},(0,p.Z)(function*(){const E=(0,V.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:C,apiKey:M}=y.config,Q=Mr(y,C,"/v1/token",`key=${M}`),fe=yield y._getAdditionalHeaders();return fe["Content-Type"]="application/x-www-form-urlencoded",yn.fetch()(Q,{method:"POST",headers:fe,body:E})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Dt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){j(f.idToken,"internal-error"),j(typeof f.idToken<"u","internal-error"),j(typeof f.refreshToken<"u","internal-error");const g="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function Bn(y){const f=St(y);return j(f,"internal-error"),j(typeof f.exp<"u","internal-error"),j(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var E=this;return(0,p.Z)(function*(){return j(!E.accessToken||E.refreshToken,f,"user-token-expired"),g||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var E=this;return(0,p.Z)(function*(){const{accessToken:C,refreshToken:M,expiresIn:Q}=yield function Ce(y,f){return ot.apply(this,arguments)}(f,g);E.updateTokensAndExpiration(C,M,Number(Q))})()}updateTokensAndExpiration(f,g,E){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,g){const{refreshToken:E,accessToken:C,expirationTime:M}=g,Q=new Dt;return E&&(j("string"==typeof E,"internal-error",{appName:f}),Q.refreshToken=E),C&&(j("string"==typeof C,"internal-error",{appName:f}),Q.accessToken=C),M&&(j("number"==typeof M,"internal-error",{appName:f}),Q.expirationTime=M),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Dt,this.toJSON())}_performRefresh(){return Ee("not implemented")}}function Lt(y,f){j("string"==typeof y||typeof y>"u","internal-error",{appName:f})}class jt{constructor(f){var{uid:g,auth:E,stsTokenManager:C}=f,M=(0,ne._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=E,this.stsTokenManager=C,this.accessToken=C.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new qi(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,p.Z)(function*(){const E=yield tn(g,g.stsTokenManager.getToken(g.auth,f));return j(E,g.auth,"internal-error"),g.accessToken!==E&&(g.accessToken=E,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),E})()}getIdTokenResult(f){return function Oi(y){return Rt.apply(this,arguments)}(this,f)}reload(){return function Xt(y){return mr.apply(this,arguments)}(this)}_assign(f){this!==f&&(j(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const g=new jt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(f){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var E=this;return(0,p.Z)(function*(){let C=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),C=!0),g&&(yield cn(E)),yield E.auth._persistUserIfCurrent(E),C&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,p.Z)(function*(){const g=yield f.getIdToken();return yield tn(f,function oi(y,f){return En.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var E,C,M,Q,fe,Ke,at,Ot;const Mt=null!==(E=g.displayName)&&void 0!==E?E:void 0,Yn=null!==(C=g.email)&&void 0!==C?C:void 0,rs=null!==(M=g.phoneNumber)&&void 0!==M?M:void 0,pu=null!==(Q=g.photoURL)&&void 0!==Q?Q:void 0,Vh=null!==(fe=g.tenantId)&&void 0!==fe?fe:void 0,wc=null!==(Ke=g._redirectEventId)&&void 0!==Ke?Ke:void 0,gu=null!==(at=g.createdAt)&&void 0!==at?at:void 0,Ps=null!==(Ot=g.lastLoginAt)&&void 0!==Ot?Ot:void 0,{uid:gs,emailVerified:Bh,isAnonymous:jh,providerData:mu,stsTokenManager:ag}=g;j(gs&&ag,f,"internal-error");const py=Dt.fromJSON(this.name,ag);j("string"==typeof gs,f,"internal-error"),Lt(Mt,f.name),Lt(Yn,f.name),j("boolean"==typeof Bh,f,"internal-error"),j("boolean"==typeof jh,f,"internal-error"),Lt(rs,f.name),Lt(pu,f.name),Lt(Vh,f.name),Lt(wc,f.name),Lt(gu,f.name),Lt(Ps,f.name);const $h=new jt({uid:gs,auth:f,email:Yn,emailVerified:Bh,displayName:Mt,isAnonymous:jh,photoURL:pu,phoneNumber:rs,tenantId:Vh,stsTokenManager:py,createdAt:gu,lastLoginAt:Ps});return mu&&Array.isArray(mu)&&($h.providerData=mu.map(Ul=>Object.assign({},Ul))),wc&&($h._redirectEventId=wc),$h}static _fromIdTokenResponse(f,g,E=!1){return(0,p.Z)(function*(){const C=new Dt;C.updateFromServerResponse(g);const M=new jt({uid:g.localId,auth:f,stsTokenManager:C,isAnonymous:E});return yield cn(M),M})()}}const H=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(g,E){var C=this;return(0,p.Z)(function*(){C.storage[g]=E})()}_get(g){var E=this;return(0,p.Z)(function*(){const C=E.storage[g];return void 0===C?null:C})()}_remove(g){var E=this;return(0,p.Z)(function*(){delete E.storage[g]})()}_addListener(g,E){}_removeListener(g,E){}}return y.type="NONE",y})();function R(y,f,g){return`firebase:${y}:${f}:${g}`}class L{constructor(f,g,E){this.persistence=f,this.auth=g,this.userKey=E;const{config:C,name:M}=this.auth;this.fullUserKey=R(this.userKey,C.apiKey,M),this.fullPersistenceKey=R("persistence",C.apiKey,M),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,p.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?jt._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,p.Z)(function*(){if(g.persistence===f)return;const E=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,E?g.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,E="authUser"){return(0,p.Z)(function*(){if(!g.length)return new L(pt(H),f,E);const C=(yield Promise.all(g.map(function(){var at=(0,p.Z)(function*(Ot){if(yield Ot._isAvailable())return Ot});return function(Ot){return at.apply(this,arguments)}}()))).filter(at=>at);let M=C[0]||pt(H);const Q=R(E,f.config.apiKey,f.name);let fe=null;for(const at of g)try{const Ot=yield at._get(Q);if(Ot){const Mt=jt._fromJSON(f,Ot);at!==M&&(fe=Mt),M=at;break}}catch{}const Ke=C.filter(at=>at._shouldAllowMigration);return M._shouldAllowMigration&&Ke.length?(M=Ke[0],fe&&(yield M._set(Q,fe.toJSON())),yield Promise.all(g.map(function(){var at=(0,p.Z)(function*(Ot){if(Ot!==M)try{yield Ot._remove(Q)}catch{}});return function(Ot){return at.apply(this,arguments)}}())),new L(M,f,E)):new L(M,f,E)})()}}function q(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(ct(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(B(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(kt(f))return"Blackberry";if(nn(f))return"Webos";if(ce(f))return"Safari";if((f.includes("chrome/")||be(f))&&!f.includes("edge/"))return"Chrome";if(Pt(f))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function B(y=(0,V.z$)()){return/firefox\//i.test(y)}function ce(y=(0,V.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function be(y=(0,V.z$)()){return/crios\//i.test(y)}function ct(y=(0,V.z$)()){return/iemobile/i.test(y)}function Pt(y=(0,V.z$)()){return/android/i.test(y)}function kt(y=(0,V.z$)()){return/blackberry/i.test(y)}function nn(y=(0,V.z$)()){return/webos/i.test(y)}function It(y=(0,V.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Yo(y=(0,V.z$)()){return It(y)||Pt(y)||nn(y)||kt(y)||/windows phone/i.test(y)||ct(y)}function mo(y,f=[]){let g;switch(y){case"Browser":g=q((0,V.z$)());break;case"Worker":g=`${q((0,V.z$)())}-${y}`;break;default:g=y}const E=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${te.SDK_VERSION}/${E}`}class _o{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const E=M=>new Promise((Q,fe)=>{try{Q(f(M))}catch(Ke){fe(Ke)}});E.onAbort=g,this.queue.push(E);const C=this.queue.length-1;return()=>{this.queue[C]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,p.Z)(function*(){if(g.auth.currentUser===f)return;const E=[];try{for(const C of g.queue)yield C(f),C.onAbort&&E.push(C.onAbort)}catch(C){E.reverse();for(const M of E)try{M()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:C?.message})}})()}}class Xo{constructor(f,g,E){this.app=f,this.heartbeatServiceProvider=g,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ye(this),this.idTokenSubscription=new ye(this),this.beforeStateQueue=new _o(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(f,g){var E=this;return g&&(this._popupRedirectResolver=pt(g)),this._initializationPromise=this.queue((0,p.Z)(function*(){var C,M;if(!E._deleted&&(E.persistenceManager=yield L.create(E,f),!E._deleted)){if(null!==(C=E._popupRedirectResolver)&&void 0!==C&&C._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(g),E.lastNotifiedUid=(null===(M=E.currentUser)||void 0===M?void 0:M.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,p.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,p.Z)(function*(){var E;const C=yield g.assertedPersistence.getCurrentUser();let M=C,Q=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const fe=null===(E=g.redirectUser)||void 0===E?void 0:E._redirectEventId,Ke=M?._redirectEventId,at=yield g.tryRedirectSignIn(f);(!fe||fe===Ke)&&at?.user&&(M=at.user,Q=!0)}if(!M)return g.directlySetCurrentUser(null);if(!M._redirectEventId){if(Q)try{yield g.beforeStateQueue.runMiddleware(M)}catch(fe){M=C,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(fe))}return M?g.reloadAndSetCurrentUserOrClear(M):g.directlySetCurrentUser(null)}return j(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===M._redirectEventId?g.directlySetCurrentUser(M):g.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(f){var g=this;return(0,p.Z)(function*(){let E=null;try{E=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch{yield g._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,p.Z)(function*(){try{yield cn(f)}catch(E){if("auth/network-request-failed"!==E?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function $e(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,p.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,p.Z)(function*(){const E=f?(0,V.m9)(f):null;return E&&j(E.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(E&&E._clone(g))})()}_updateCurrentUser(f,g=!1){var E=this;return(0,p.Z)(function*(){if(!E._deleted)return f&&j(E.tenantId===f.tenantId,E,"tenant-id-mismatch"),g||(yield E.beforeStateQueue.runMiddleware(f)),E.queue((0,p.Z)(function*(){yield E.directlySetCurrentUser(f),E.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,p.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,p.Z)(function*(){yield g.assertedPersistence.setPersistence(pt(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new V.LL("auth","Firebase",f())}onAuthStateChanged(f,g,E){return this.registerStateListener(this.authStateSubscription,f,g,E)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,E){return this.registerStateListener(this.idTokenSubscription,f,g,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var E=this;return(0,p.Z)(function*(){const C=yield E.getOrInitRedirectPersistenceManager(g);return null===f?C.removeCurrentUser():C.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,p.Z)(function*(){if(!g.redirectPersistenceManager){const E=f&&pt(f)||g._popupRedirectResolver;j(E,g,"argument-error"),g.redirectPersistenceManager=yield L.create(g,[pt(E._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,p.Z)(function*(){var E,C;return g._isInitialized&&(yield g.queue((0,p.Z)(function*(){}))),(null===(E=g._currentUser)||void 0===E?void 0:E._redirectEventId)===f?g._currentUser:(null===(C=g.redirectUser)||void 0===C?void 0:C._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,p.Z)(function*(){if(f===g.currentUser)return g.queue((0,p.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,E,C){if(this._deleted)return()=>{};const M="function"==typeof g?g:g.next.bind(g),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return j(Q,this,"internal-error"),Q.then(()=>M(this.currentUser)),"function"==typeof g?f.addObserver(g,E,C):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,p.Z)(function*(){g.currentUser&&g.currentUser!==f&&g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh(),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=mo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,p.Z)(function*(){var g;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const C=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return C&&(E["X-Firebase-Client"]=C),E})()}}function Z(y){return(0,V.m9)(y)}class ye{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,V.ne)(g=>this.observer=g)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function qe(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Ht(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class hn{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return Ee("not implemented")}_getIdTokenResponse(f){return Ee("not implemented")}_linkToIdToken(f,g){return Ee("not implemented")}_getReauthenticationResolver(f){return Ee("not implemented")}}function Ki(y,f){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,p.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:resetPassword",Qe(y,f))})).apply(this,arguments)}function as(y,f){return mi.apply(this,arguments)}function mi(){return(mi=(0,p.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Gt(){return(Gt=(0,p.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:update",Qe(y,f))})).apply(this,arguments)}function Jr(){return(Jr=(0,p.Z)(function*(y,f){return dn(y,"POST","/v1/accounts:signInWithPassword",Qe(y,f))})).apply(this,arguments)}function Li(y,f){return nr.apply(this,arguments)}function nr(){return(nr=(0,p.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:sendOobCode",Qe(y,f))})).apply(this,arguments)}function Ln(){return(Ln=(0,p.Z)(function*(y,f){return Li(y,f)})).apply(this,arguments)}function bs(){return(bs=(0,p.Z)(function*(y,f){return Li(y,f)})).apply(this,arguments)}function us(){return(us=(0,p.Z)(function*(y,f){return Li(y,f)})).apply(this,arguments)}function Zs(){return(Zs=(0,p.Z)(function*(y,f){return Li(y,f)})).apply(this,arguments)}function Ir(){return(Ir=(0,p.Z)(function*(y,f){return dn(y,"POST","/v1/accounts:signInWithEmailLink",Qe(y,f))})).apply(this,arguments)}function Ds(){return(Ds=(0,p.Z)(function*(y,f){return dn(y,"POST","/v1/accounts:signInWithEmailLink",Qe(y,f))})).apply(this,arguments)}class ei extends hn{constructor(f,g,E,C=null){super("password",E),this._email=f,this._password=g,this._tenantId=C}static _fromEmailAndPassword(f,g){return new ei(f,g,"password")}static _fromEmailAndCode(f,g,E=null){return new ei(f,g,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,p.Z)(function*(){switch(g.signInMethod){case"password":return function On(y,f){return Jr.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Ys(y,f){return Ir.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Ae(f,"internal-error")}})()}_linkToIdToken(f,g){var E=this;return(0,p.Z)(function*(){switch(E.signInMethod){case"password":return as(f,{idToken:g,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Cs(y,f){return Ds.apply(this,arguments)}(f,{idToken:g,email:E._email,oobCode:E._password});default:Ae(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function _i(y,f){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,p.Z)(function*(y,f){return dn(y,"POST","/v1/accounts:signInWithIdp",Qe(y,f))})).apply(this,arguments)}class Zi extends hn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new Zi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Ae("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:C}=g,M=(0,ne._T)(g,["providerId","signInMethod"]);if(!E||!C)return null;const Q=new Zi(E,C);return Q.idToken=M.idToken||void 0,Q.accessToken=M.accessToken||void 0,Q.secret=M.secret,Q.nonce=M.nonce,Q.pendingToken=M.pendingToken||null,Q}_getIdTokenResponse(f){return _i(f,this.buildRequest())}_linkToIdToken(f,g){const E=this.buildRequest();return E.idToken=g,_i(f,E)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,_i(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,V.xO)(g)}return f}}function Ba(){return(Ba=(0,p.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:sendVerificationCode",Qe(y,f))})).apply(this,arguments)}function vo(){return(vo=(0,p.Z)(function*(y,f){return dn(y,"POST","/v1/accounts:signInWithPhoneNumber",Qe(y,f))})).apply(this,arguments)}function kr(){return(kr=(0,p.Z)(function*(y,f){const g=yield dn(y,"POST","/v1/accounts:signInWithPhoneNumber",Qe(y,f));if(g.temporaryProof)throw Kn(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Zc={USER_NOT_FOUND:"user-not-found"};function vi(){return(vi=(0,p.Z)(function*(y,f){return dn(y,"POST","/v1/accounts:signInWithPhoneNumber",Qe(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Zc)})).apply(this,arguments)}class cs extends hn{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new cs({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new cs({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function yo(y,f){return vo.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function ea(y,f){return kr.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function yi(y,f){return vi.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:E,verificationCode:C}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:E,code:C}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:E,phoneNumber:C,temporaryProof:M}=f;return E||g||C||M?new cs({verificationId:g,verificationCode:E,phoneNumber:C,temporaryProof:M}):null}}class Hr{constructor(f){var g,E,C,M,Q,fe;const Ke=(0,V.zd)((0,V.pd)(f)),at=null!==(g=Ke.apiKey)&&void 0!==g?g:null,Ot=null!==(E=Ke.oobCode)&&void 0!==E?E:null,Mt=function ta(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(C=Ke.mode)&&void 0!==C?C:null);j(at&&Ot&&Mt,"argument-error"),this.apiKey=at,this.operation=Mt,this.code=Ot,this.continueUrl=null!==(M=Ke.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(Q=Ke.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(fe=Ke.tenantId)&&void 0!==fe?fe:null}static parseLink(f){const g=function ja(y){const f=(0,V.zd)((0,V.pd)(y)).link,g=f?(0,V.zd)((0,V.pd)(f)).deep_link_id:null,E=(0,V.zd)((0,V.pd)(y)).deep_link_id;return(E?(0,V.zd)((0,V.pd)(E)).link:null)||E||g||f||y}(f);try{return new Hr(g)}catch{return null}}}let Yc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,E){return ei._fromEmailAndPassword(g,E)}static credentialWithLink(g,E){const C=Hr.parseLink(E);return j(C,"argument-error"),ei._fromEmailAndCode(g,C.code,C.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Ss{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class wo extends Ss{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class na extends wo{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return j("providerId"in g&&"signInMethod"in g,"argument-error"),Zi._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return j(f.idToken||f.accessToken,"argument-error"),Zi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return na.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return na.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:E,oauthTokenSecret:C,pendingToken:M,nonce:Q,providerId:fe}=f;if(!E&&!C&&!g&&!M||!fe)return null;try{return new na(fe)._credential({idToken:g,accessToken:E,nonce:Q,pendingToken:M})}catch{return null}}}let ju=(()=>{class y extends wo{constructor(){super("facebook.com")}static credential(g){return Zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),zd=(()=>{class y extends wo{constructor(){super("google.com"),this.addScope("profile")}static credential(g,E){return Zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:E})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:E,oauthAccessToken:C}=g;if(!E&&!C)return null;try{return y.credential(E,C)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Wd=(()=>{class y extends wo{constructor(){super("github.com")}static credential(g){return Zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class ls extends hn{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return _i(f,this.buildRequest())}_linkToIdToken(f,g){const E=this.buildRequest();return E.idToken=g,_i(f,E)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,_i(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:C,pendingToken:M}=g;return E&&C&&M&&E===C?new ls(E,M):null}static _create(f,g){return new ls(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ha extends Ss{constructor(f){j(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Ha.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Ha.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=ls.fromJSON(f);return j(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:E}=f;if(!g||!E)return null;try{return ls._create(E,g)}catch{return null}}}let Xc=(()=>{class y extends wo{constructor(){super("twitter.com")}static credential(g,E){return Zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:E})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:E,oauthTokenSecret:C}=g;if(!E||!C)return null;try{return y.credential(E,C)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function $u(y,f){return ra.apply(this,arguments)}function ra(){return(ra=(0,p.Z)(function*(y,f){return dn(y,"POST","/v1/accounts:signUp",Qe(y,f))})).apply(this,arguments)}class Yi{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,E,C=!1){return(0,p.Z)(function*(){const M=yield jt._fromIdTokenResponse(f,E,C),Q=Jc(E);return new Yi({user:M,providerId:Q,_tokenResponse:E,operationType:g})})()}static _forOperation(f,g,E){return(0,p.Z)(function*(){yield f._updateTokensIfNecessary(E,!0);const C=Jc(E);return new Yi({user:f,providerId:C,_tokenResponse:E,operationType:g})})()}}function Jc(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function tl(){return(tl=(0,p.Z)(function*(y){var f;const g=Z(y);if(yield g._initializationPromise,null!==(f=g.currentUser)&&void 0!==f&&f.isAnonymous)return new Yi({user:g.currentUser,providerId:null,operationType:"signIn"});const E=yield $u(g,{returnSecureToken:!0}),C=yield Yi._fromIdTokenResponse(g,"signIn",E,!0);return yield g._updateCurrentUser(C.user),C})).apply(this,arguments)}class ia extends V.ZR{constructor(f,g,E,C){var M;super(g.code,g.message),this.operationType=E,this.user=C,Object.setPrototypeOf(this,ia.prototype),this.customData={appName:f.name,tenantId:null!==(M=f.tenantId)&&void 0!==M?M:void 0,_serverResponse:g.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,g,E,C){return new ia(f,g,E,C)}}function sa(y,f,g,E){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?ia._fromErrorAndOperation(y,M,f,E):M})}function As(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function oa(){return oa=(0,p.Z)(function*(y,f){const g=(0,V.m9)(y);yield Xi(!0,g,f);const{providerUserInfo:E}=yield function kn(y,f){return mt.apply(this,arguments)}(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),C=As(E||[]);return g.providerData=g.providerData.filter(M=>C.has(M.providerId)),C.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g}),oa.apply(this,arguments)}function Qi(y,f){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,p.Z)(function*(y,f,g=!1){const E=yield tn(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return Yi._forOperation(y,"link",E)})).apply(this,arguments)}function Xi(y,f,g){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,p.Z)(function*(y,f,g){yield cn(f);const C=!1===y?"provider-already-linked":"no-such-provider";j(As(f.providerData).has(g)===y,f.auth,C)})).apply(this,arguments)}function nl(y,f){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,p.Z)(function*(y,f,g=!1){const{auth:E}=y,C="reauthenticate";try{const M=yield tn(y,sa(E,C,f,y),g);j(M.idToken,E,"internal-error");const Q=St(M.idToken);j(Q,E,"internal-error");const{sub:fe}=Q;return j(y.uid===fe,E,"user-mismatch"),Yi._forOperation(y,C,M)}catch(M){throw"auth/user-not-found"===M?.code&&Ae(E,"user-mismatch"),M}})).apply(this,arguments)}function Eo(y,f){return rl.apply(this,arguments)}function rl(){return(rl=(0,p.Z)(function*(y,f,g=!1){const E="signIn",C=yield sa(y,E,f),M=yield Yi._fromIdTokenResponse(y,E,C);return g||(yield y._updateCurrentUser(M.user)),M})).apply(this,arguments)}function ti(y,f){return O.apply(this,arguments)}function O(){return(O=(0,p.Z)(function*(y,f){return Eo(Z(y),f)})).apply(this,arguments)}function k(y,f){return z.apply(this,arguments)}function z(){return(z=(0,p.Z)(function*(y,f){const g=(0,V.m9)(y);return yield Xi(!1,g,f.providerId),Qi(g,f)})).apply(this,arguments)}function oe(y,f){return ke.apply(this,arguments)}function ke(){return(ke=(0,p.Z)(function*(y,f){return nl((0,V.m9)(y),f)})).apply(this,arguments)}function xt(){return(xt=(0,p.Z)(function*(y,f){return dn(y,"POST","/v1/accounts:signInWithCustomToken",Qe(y,f))})).apply(this,arguments)}function Cn(){return Cn=(0,p.Z)(function*(y,f){const g=Z(y),E=yield function Be(y,f){return xt.apply(this,arguments)}(g,{token:f,returnSecureToken:!0}),C=yield Yi._fromIdTokenResponse(g,"signIn",E);return yield g._updateCurrentUser(C.user),C}),Cn.apply(this,arguments)}class sn{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?Rn._fromServerResponse(f,g):Ae(f,"internal-error")}}class Rn extends sn{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new Rn(g)}}function zt(y,f,g){var E;j((null===(E=g.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),j(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(j(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(j(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function br(){return br=(0,p.Z)(function*(y,f,g){const E=(0,V.m9)(y),C={requestType:"PASSWORD_RESET",email:f};g&&zt(E,C,g),yield function Va(y,f){return bs.apply(this,arguments)}(E,C)}),br.apply(this,arguments)}function Qs(){return(Qs=(0,p.Z)(function*(y,f,g){yield Ki((0,V.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function ui(){return ui=(0,p.Z)(function*(y,f){yield function ut(y,f){return Gt.apply(this,arguments)}((0,V.m9)(y),{oobCode:f})}),ui.apply(this,arguments)}function Rs(y,f){return za.apply(this,arguments)}function za(){return(za=(0,p.Z)(function*(y,f){const g=(0,V.m9)(y),E=yield Ki(g,{oobCode:f}),C=E.requestType;switch(j(C,g,"internal-error"),C){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(E.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(E.mfaInfo,g,"internal-error");default:j(E.email,g,"internal-error")}let M=null;return E.mfaInfo&&(M=sn._fromServerResponse(Z(g),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:M},operation:C}})).apply(this,arguments)}function qd(){return(qd=(0,p.Z)(function*(y,f){const{data:g}=yield Rs((0,V.m9)(y),f);return g.email})).apply(this,arguments)}function Kd(){return(Kd=(0,p.Z)(function*(y,f,g){const E=Z(y),C=yield $u(E,{returnSecureToken:!0,email:f,password:g}),M=yield Yi._fromIdTokenResponse(E,"signIn",C);return yield E._updateCurrentUser(M.user),M})).apply(this,arguments)}function fn(){return fn=(0,p.Z)(function*(y,f,g){const E=(0,V.m9)(y),C={requestType:"EMAIL_SIGNIN",email:f};j(g.handleCodeInApp,E,"argument-error"),g&&zt(E,C,g),yield function Kt(y,f){return us.apply(this,arguments)}(E,C)}),fn.apply(this,arguments)}function Or(){return(Or=(0,p.Z)(function*(y,f,g){const E=(0,V.m9)(y),C=Yc.credentialWithLink(f,g||he());return j(C._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),ti(E,C)})).apply(this,arguments)}function ua(){return(ua=(0,p.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:createAuthUri",Qe(y,f))})).apply(this,arguments)}function il(){return il=(0,p.Z)(function*(y,f){const E={identifier:f,continueUri:_e()?he():"http://localhost"},{signinMethods:C}=yield function k_(y,f){return ua.apply(this,arguments)}((0,V.m9)(y),E);return C||[]}),il.apply(this,arguments)}function sl(){return sl=(0,p.Z)(function*(y,f){const g=(0,V.m9)(y),C={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&zt(g.auth,C,f);const{email:M}=yield function Ks(y,f){return Ln.apply(this,arguments)}(g.auth,C);M!==y.email&&(yield y.reload())}),sl.apply(this,arguments)}function ol(){return ol=(0,p.Z)(function*(y,f,g){const E=(0,V.m9)(y),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&zt(E.auth,M,g);const{email:Q}=yield function Ts(y,f){return Zs.apply(this,arguments)}(E.auth,M);Q!==y.email&&(yield y.reload())}),ol.apply(this,arguments)}function ci(){return(ci=(0,p.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ca(){return ca=(0,p.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const E=(0,V.m9)(y),M={idToken:yield E.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},Q=yield tn(E,function Gr(y,f){return ci.apply(this,arguments)}(E.auth,M));E.displayName=Q.displayName||null,E.photoURL=Q.photoUrl||null;const fe=E.providerData.find(({providerId:Ke})=>"password"===Ke);fe&&(fe.displayName=E.displayName,fe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Q)}),ca.apply(this,arguments)}function Pp(y,f,g){return kp.apply(this,arguments)}function kp(){return(kp=(0,p.Z)(function*(y,f,g){const{auth:E}=y,M={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(M.email=f),g&&(M.password=g);const Q=yield tn(y,as(E,M));yield y._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class Js{constructor(f,g,E={}){this.isNewUser=f,this.providerId=g,this.profile=E}}class Zd extends Js{constructor(f,g,E,C){super(f,g,E),this.username=C}}class F_ extends Js{constructor(f,g){super(f,"facebook.com",g)}}class Op extends Zd{constructor(f,g){super(f,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class eE extends Js{constructor(f,g){super(f,"google.com",g)}}class U_ extends Zd{constructor(f,g,E){super(f,"twitter.com",g,E)}}function Lp(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function L_(y){var f,g;if(!y)return null;const{providerId:E}=y,C=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},M=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&y?.idToken){const Q=null===(g=null===(f=St(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(Q)return new Js(M,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!E)return null;switch(E){case"facebook.com":return new F_(M,C);case"github.com":return new Op(M,C);case"google.com":return new eE(M,C);case"twitter.com":return new U_(M,C,y.screenName||null);case"custom":case"anonymous":return new Js(M,null);default:return new Js(M,E,C)}}(g)}class xn{constructor(f,g,E){this.type=f,this.credential=g,this.auth=E}static _fromIdtoken(f,g){return new xn("enroll",f,g)}static _fromMfaPendingCredential(f){return new xn("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,E;if(f?.multiFactorSession){if(null!==(g=f.multiFactorSession)&&void 0!==g&&g.pendingCredential)return xn._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(E=f.multiFactorSession)&&void 0!==E&&E.idToken)return xn._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Yd{constructor(f,g,E){this.session=f,this.hints=g,this.signInResolver=E}static _fromError(f,g){const E=Z(f),C=g.customData._serverResponse,M=(C.mfaInfo||[]).map(fe=>sn._fromServerResponse(E,fe));j(C.mfaPendingCredential,E,"internal-error");const Q=xn._fromMfaPendingCredential(C.mfaPendingCredential);return new Yd(Q,M,function(){var fe=(0,p.Z)(function*(Ke){const at=yield Ke._process(E,Q);delete C.mfaInfo,delete C.mfaPendingCredential;const Ot=Object.assign(Object.assign({},C),{idToken:at.idToken,refreshToken:at.refreshToken});switch(g.operationType){case"signIn":const Mt=yield Yi._fromIdTokenResponse(E,g.operationType,Ot);return yield E._updateCurrentUser(Mt.user),Mt;case"reauthenticate":return j(g.user,E,"internal-error"),Yi._forOperation(g.user,g.operationType,Ot);default:Ae(E,"internal-error")}});return function(Ke){return fe.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,p.Z)(function*(){return g.signInResolver(f)})()}}class Up{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(E=>sn._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new Up(f)}getSession(){var f=this;return(0,p.Z)(function*(){return xn._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,g){var E=this;return(0,p.Z)(function*(){const C=f,M=yield E.getSession(),Q=yield tn(E.user,C._process(E.user.auth,M,g));return yield E.user._updateTokensIfNecessary(Q),E.user.reload()})()}unenroll(f){var g=this;return(0,p.Z)(function*(){const E="string"==typeof f?f:f.uid,C=yield g.user.getIdToken();try{const M=yield tn(g.user,function oE(y,f){return vt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Qe(y,f))}(g.user.auth,{idToken:C,mfaEnrollmentId:E}));g.enrolledFactors=g.enrolledFactors.filter(({uid:Q})=>Q!==E),yield g.user._updateTokensIfNecessary(M),yield g.user.reload()}catch(M){throw M}})()}}const zu=new WeakMap,la="__sak";class Wa{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(la,"1"),this.storage.removeItem(la),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Wu=(()=>{class y extends Wa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,E)=>this.onStorageEvent(g,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function qa(){const y=(0,V.z$)();return ce(y)||It(y)}()&&function Qo(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Yo(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const E of Object.keys(this.listeners)){const C=this.storage.getItem(E),M=this.localCache[E];C!==M&&g(E,M,C)}}onStorageEvent(g,E=!1){if(!g.key)return void this.forAllChangedKeys((fe,Ke,at)=>{this.notifyListeners(fe,at)});const C=g.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const fe=this.storage.getItem(C);if(g.newValue!==fe)null!==g.newValue?this.storage.setItem(C,g.newValue):this.storage.removeItem(C);else if(this.localCache[C]===g.newValue&&!E)return}const M=()=>{const fe=this.storage.getItem(C);!E&&this.localCache[C]===fe||this.notifyListeners(C,fe)},Q=this.storage.getItem(C);!function ur(){return(0,V.w1)()&&10===document.documentMode}()||Q===g.newValue||g.newValue===g.oldValue?M():setTimeout(M,10)}notifyListeners(g,E){this.localCache[g]=E;const C=this.listeners[g];if(C)for(const M of Array.from(C))M(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,E,C)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:E,newValue:C}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,E){var C=()=>super._set,M=this;return(0,p.Z)(function*(){yield C().call(M,g,E),M.localCache[g]=JSON.stringify(E)})()}_get(g){var E=()=>super._get,C=this;return(0,p.Z)(function*(){const M=yield E().call(C,g);return C.localCache[g]=JSON.stringify(M),M})()}_remove(g){var E=()=>super._remove,C=this;return(0,p.Z)(function*(){yield E().call(C,g),delete C.localCache[g]})()}}return y.type="LOCAL",y})(),Ms=(()=>{class y extends Wa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,E){}_removeListener(g,E){}}return y.type="SESSION",y})();let H_=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const E=this.receivers.find(M=>M.isListeningto(g));if(E)return E;const C=new y(g);return this.receivers.push(C),C}isListeningto(g){return this.eventTarget===g}handleEvent(g){var E=this;return(0,p.Z)(function*(){const C=g,{eventId:M,eventType:Q,data:fe}=C.data,Ke=E.handlersMap[Q];if(!Ke?.size)return;C.ports[0].postMessage({status:"ack",eventId:M,eventType:Q});const at=Array.from(Ke).map(function(){var Mt=(0,p.Z)(function*(Yn){return Yn(C.origin,fe)});return function(Yn){return Mt.apply(this,arguments)}}()),Ot=yield function aE(y){return Promise.all(y.map(function(){var f=(0,p.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(E){return{fulfilled:!1,reason:E}}});return function(g){return f.apply(this,arguments)}}()))}(at);C.ports[0].postMessage({status:"done",eventId:M,eventType:Q,response:Ot})})()}_subscribe(g,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(E)}_unsubscribe(g,E){this.handlersMap[g]&&E&&this.handlersMap[g].delete(E),(!E||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function To(y="",f=10){let g="";for(let E=0;E<f;E++)g+=Math.floor(10*Math.random());return y+g}class Xd{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,E=50){var C=this;return(0,p.Z)(function*(){const M=typeof MessageChannel<"u"?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let Q,fe;return new Promise((Ke,at)=>{const Ot=To("",20);M.port1.start();const Mt=setTimeout(()=>{at(new Error("unsupported_event"))},E);fe={messageChannel:M,onMessage(Yn){const rs=Yn;if(rs.data.eventId===Ot)switch(rs.data.status){case"ack":clearTimeout(Mt),Q=setTimeout(()=>{at(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),Ke(rs.data.response);break;default:clearTimeout(Mt),clearTimeout(Q),at(new Error("invalid_response"))}}},C.handlers.add(fe),M.port1.addEventListener("message",fe.onMessage),C.target.postMessage({eventType:f,eventId:Ot,data:g},[M.port2])}).finally(()=>{fe&&C.removeMessageHandler(fe)})})()}}function Tr(){return window}function Co(){return typeof Tr().WorkerGlobalScope<"u"&&"function"==typeof Tr().importScripts}function to(){return(to=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const qu="firebaseLocalStorageDb",G_=1,da="firebaseLocalStorage",Ku="fbase_key";class Do{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function th(y,f){return y.transaction([da],f?"readwrite":"readonly").objectStore(da)}function Zu(){const y=indexedDB.open(qu,G_);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore(da,{keyPath:Ku})}catch(C){g(C)}}),y.addEventListener("success",(0,p.Z)(function*(){const E=y.result;E.objectStoreNames.contains(da)?f(E):(E.close(),yield function nh(){const y=indexedDB.deleteDatabase(qu);return new Do(y).toPromise()}(),f(yield Zu()))}))})}function ll(y,f,g){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,p.Z)(function*(y,f,g){const E=th(y,!0).put({[Ku]:f,value:g});return new Do(E).toPromise()})).apply(this,arguments)}function ha(){return(ha=(0,p.Z)(function*(y,f){const g=th(y,!1).get(f),E=yield new Do(g).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Yu(y,f){const g=th(y,!0).delete(f);return new Do(g).toPromise()}const Ka=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,p.Z)(function*(){return g.db||(g.db=yield Zu()),g.db})()}_withRetries(g){var E=this;return(0,p.Z)(function*(){let C=0;for(;;)try{const M=yield E._openDb();return yield g(M)}catch(M){if(C++>3)throw M;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,p.Z)(function*(){return Co()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,p.Z)(function*(){g.receiver=H_._getInstance(function eh(){return Co()?self:null}()),g.receiver._subscribe("keyChanged",function(){var E=(0,p.Z)(function*(C,M){return{keyProcessed:(yield g._poll()).includes(M.key)}});return function(C,M){return E.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var E=(0,p.Z)(function*(C,M){return["keyChanged"]});return function(C,M){return E.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,p.Z)(function*(){var E,C;if(g.activeServiceWorker=yield function cl(){return to.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Xd(g.activeServiceWorker);const M=yield g.sender._send("ping",{},800);M&&null!==(E=M[0])&&void 0!==E&&E.fulfilled&&null!==(C=M[0])&&void 0!==C&&C.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var E=this;return(0,p.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Jd(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:g},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Zu();return yield ll(g,la,"1"),yield Yu(g,la),!0}catch{}return!1})()}_withPendingWrite(g){var E=this;return(0,p.Z)(function*(){E.pendingWrites++;try{yield g()}finally{E.pendingWrites--}})()}_set(g,E){var C=this;return(0,p.Z)(function*(){return C._withPendingWrite((0,p.Z)(function*(){return yield C._withRetries(M=>ll(M,g,E)),C.localCache[g]=E,C.notifyServiceWorker(g)}))})()}_get(g){var E=this;return(0,p.Z)(function*(){const C=yield E._withRetries(M=>function z_(y,f){return ha.apply(this,arguments)}(M,g));return E.localCache[g]=C,C})()}_remove(g){var E=this;return(0,p.Z)(function*(){return E._withPendingWrite((0,p.Z)(function*(){return yield E._withRetries(C=>Yu(C,g)),delete E.localCache[g],E.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,p.Z)(function*(){const E=yield g._withRetries(Q=>{const fe=th(Q,!1).getAll();return new Do(fe).toPromise()});if(!E)return[];if(0!==g.pendingWrites)return[];const C=[],M=new Set;for(const{fbase_key:Q,value:fe}of E)M.add(Q),JSON.stringify(g.localCache[Q])!==JSON.stringify(fe)&&(g.notifyListeners(Q,fe),C.push(Q));for(const Q of Object.keys(g.localCache))g.localCache[Q]&&!M.has(Q)&&(g.notifyListeners(Q,null),C.push(Q));return C})()}notifyListeners(g,E){this.localCache[g]=E;const C=this.listeners[g];if(C)for(const M of Array.from(C))M(E)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function dl(){return(dl=(0,p.Z)(function*(y){return(yield vt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function hl(y){return new Promise((f,g)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=f,E.onerror=C=>{const M=Ie("internal-error");M.customData=C,g(M)},E.type="text/javascript",E.charset="UTF-8",function sh(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(E)})}function fa(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Xu=1e12;class Za{constructor(f){this.auth=f,this.counter=Xu,this._widgets=new Map}render(f,g){const E=this.counter;return this._widgets.set(E,new q_(f,this.auth.name,g||{})),this.counter++,E}reset(f){var g;const E=f||Xu;null===(g=this._widgets.get(E))||void 0===g||g.delete(),this._widgets.delete(E)}getResponse(f){var g;return(null===(g=this._widgets.get(f||Xu))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,p.Z)(function*(){var E;return null===(E=g._widgets.get(f||Xu))||void 0===E||E.execute(),""})()}}class q_{constructor(f,g,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const C="string"==typeof f?document.getElementById(f):f;j(C,"argument-error",{appName:g}),this.container=C,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function oh(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ju=fa("rcb"),Hp=new Je(3e4,6e4);class fl{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=Tr().grecaptcha)||void 0===f||!f.render)}load(f,g=""){return j(function Ya(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Tr().grecaptcha):new Promise((E,C)=>{const M=Tr().setTimeout(()=>{C(Ie(f,"network-request-failed"))},Hp.get());Tr()[Ju]=()=>{Tr().clearTimeout(M),delete Tr()[Ju];const fe=Tr().grecaptcha;if(!fe)return void C(Ie(f,"internal-error"));const Ke=fe.render;fe.render=(at,Ot)=>{const Mt=Ke(at,Ot);return this.counter++,Mt},this.hostLanguage=g,E(fe)},hl(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:Ju,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(M),C(Ie(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var g;return!(null===(g=Tr().grecaptcha)||void 0===g||!g.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ec{load(f){return(0,p.Z)(function*(){return new Za(f)})()}clearedOneInstance(){}}const pa="recaptcha",K_={theme:"light",type:"image"};class uh{constructor(f,g=Object.assign({},K_),E){this.parameters=g,this.type=pa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Z(E),this.isInvisible="invisible"===this.parameters.size,j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const C="string"==typeof f?document.getElementById(f):f;j(C,this.auth,"argument-error"),this.container=C,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ec:new fl,this.validateStartingState()}verify(){var f=this;return(0,p.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(g)||new Promise(M=>{const Q=fe=>{fe&&(f.tokenChangeListeners.delete(Q),M(fe))};f.tokenChangeListeners.add(Q),f.isInvisible&&E.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(E=>E(g)),"function"==typeof f)f(g);else if("string"==typeof f){const E=Tr()[f];"function"==typeof E&&E(g)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,p.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const E=document.createElement("div");g.appendChild(E),g=E}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,p.Z)(function*(){j(_e()&&!Co(),f.auth,"internal-error"),yield function So(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function jp(y){return dl.apply(this,arguments)}(f.auth);j(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ch{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=cs._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function Mn(){return(Mn=(0,p.Z)(function*(y,f,g){const E=Z(y),C=yield Gp(E,f,(0,V.m9)(g));return new ch(C,M=>ti(E,M))})).apply(this,arguments)}function pl(){return(pl=(0,p.Z)(function*(y,f,g){const E=(0,V.m9)(y);yield Xi(!1,E,"phone");const C=yield Gp(E.auth,f,(0,V.m9)(g));return new ch(C,M=>k(E,M))})).apply(this,arguments)}function Y_(){return(Y_=(0,p.Z)(function*(y,f,g){const E=(0,V.m9)(y),C=yield Gp(E.auth,f,(0,V.m9)(g));return new ch(C,M=>oe(E,M))})).apply(this,arguments)}function Gp(y,f,g){return Q_.apply(this,arguments)}function Q_(){return Q_=(0,p.Z)(function*(y,f,g){var E;const C=yield g.verify();try{let M;if(j("string"==typeof C,y,"argument-error"),j(g.type===pa,y,"argument-error"),M="string"==typeof f?{phoneNumber:f}:f,"session"in M){const Q=M.session;if("phoneNumber"in M)return j("enroll"===Q.type,y,"internal-error"),(yield function j_(y,f){return vt(y,"POST","/v2/accounts/mfaEnrollment:start",Qe(y,f))}(y,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:C}})).phoneSessionInfo.sessionInfo;{j("signin"===Q.type,y,"internal-error");const fe=(null===(E=M.multiFactorHint)||void 0===E?void 0:E.uid)||M.multiFactorUid;return j(fe,y,"missing-multi-factor-info"),(yield function ih(y,f){return vt(y,"POST","/v2/accounts/mfaSignIn:start",Qe(y,f))}(y,{mfaPendingCredential:Q.credential,mfaEnrollmentId:fe,phoneSignInInfo:{recaptchaToken:C}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield function Jo(y,f){return Ba.apply(this,arguments)}(y,{phoneNumber:M.phoneNumber,recaptchaToken:C});return Q}}finally{g._reset()}}),Q_.apply(this,arguments)}function Qa(){return(Qa=(0,p.Z)(function*(y,f){yield Qi((0,V.m9)(y),f)})).apply(this,arguments)}let lh=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=Z(g)}verifyPhoneNumber(g,E){return Gp(this.auth,g,(0,V.m9)(E))}static credential(g,E){return cs._fromVerification(g,E)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:E,temporaryProof:C}=g;return E&&C?cs._fromTokenResponse(E,C):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function tc(y,f){return f?pt(f):(j(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class _r extends hn{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return _i(f,this._buildIdpRequest())}_linkToIdToken(f,g){return _i(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return _i(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function zp(y){return Eo(y.auth,new _r(y),y.bypassAuthState)}function nc(y){const{auth:f,user:g}=y;return j(g,f,"internal-error"),nl(g,new _r(y),y.bypassAuthState)}function lE(y){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,p.Z)(function*(y){const{auth:f,user:g}=y;return j(g,f,"internal-error"),Qi(g,new _r(y),y.bypassAuthState)})).apply(this,arguments)}class ga{constructor(f,g,E,C,M=!1){this.auth=f,this.resolver=E,this.user=C,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,p.Z)(function*(E,C){f.pendingPromise={resolve:E,reject:C};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(M){f.reject(M)}});return function(E,C){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,p.Z)(function*(){const{urlResponse:E,sessionId:C,postBody:M,tenantId:Q,error:fe,type:Ke}=f;if(fe)return void g.reject(fe);const at={auth:g.auth,requestUri:E,sessionId:C,tenantId:Q||void 0,postBody:M||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Ke)(at))}catch(Ot){g.reject(Ot)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return zp;case"linkViaPopup":case"linkViaRedirect":return lE;case"reauthViaPopup":case"reauthViaRedirect":return nc;default:Ae(this.auth,"internal-error")}}resolve(f){We(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){We(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const X_=new Je(2e3,1e4);function Xa(){return(Xa=(0,p.Z)(function*(y,f,g){const E=Z(y);Ge(y,f,Ss);const C=tc(E,g);return new en(E,"signInViaPopup",f,C).executeNotNull()})).apply(this,arguments)}function J_(){return(J_=(0,p.Z)(function*(y,f,g){const E=(0,V.m9)(y);Ge(E.auth,f,Ss);const C=tc(E.auth,g);return new en(E.auth,"reauthViaPopup",f,C,E).executeNotNull()})).apply(this,arguments)}function ty(){return(ty=(0,p.Z)(function*(y,f,g){const E=(0,V.m9)(y);Ge(E.auth,f,Ss);const C=tc(E.auth,g);return new en(E.auth,"linkViaPopup",f,C,E).executeNotNull()})).apply(this,arguments)}let en=(()=>{class y extends ga{constructor(g,E,C,M,Q){super(g,E,M,Q),this.provider=C,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,p.Z)(function*(){const E=yield g.execute();return j(E,g.auth,"internal-error"),E})()}onExecution(){var g=this;return(0,p.Z)(function*(){We(1===g.filter.length,"Popup operations only handle one event");const E=To();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],E),g.authWindow.associatedEvent=E,g.resolver._originValidation(g.auth).catch(C=>{g.reject(C)}),g.resolver._isIframeWebStorageSupported(g.auth,C=>{C||g.reject(Ie(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Ie(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var E,C;this.pollId=null!==(C=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==C&&C.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ie(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,X_.get())};g()}}return y.currentPopupAction=null,y})();const Ro="pendingRedirect",st=new Map;class xo extends ga{constructor(f,g,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,p.Z)(function*(){let E=st.get(g.auth._key());if(!E){try{const M=(yield function Ji(y,f){return hh.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;E=()=>Promise.resolve(M)}catch(C){E=()=>Promise.reject(C)}st.set(g.auth._key(),E)}return g.bypassAuthState||st.set(g.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,E=this;return(0,p.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(E,f);if("unknown"!==f.type){if(f.eventId){const C=yield E.auth._redirectUserForId(f.eventId);if(C)return E.user=C,g().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function hh(){return(hh=(0,p.Z)(function*(y,f){const g=gl(f),E=Wp(y);if(!(yield E._isAvailable()))return!1;const C="true"===(yield E._get(g));return yield E._remove(g),C})).apply(this,arguments)}function Ja(y,f){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,p.Z)(function*(y,f){return Wp(y)._set(gl(f),"true")})).apply(this,arguments)}function fh(y,f){st.set(y._key(),f)}function Wp(y){return pt(y._redirectPersistence)}function gl(y){return R(Ro,y.config.apiKey,y.name)}function ml(y,f,g){return function ph(y,f,g){return es.apply(this,arguments)}(y,f,g)}function es(){return(es=(0,p.Z)(function*(y,f,g){const E=Z(y);Ge(y,f,Ss),yield E._initializationPromise;const C=tc(E,g);return yield Ja(C,E),C._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function bt(y,f,g){return function rc(y,f,g){return gh.apply(this,arguments)}(y,f,g)}function gh(){return(gh=(0,p.Z)(function*(y,f,g){const E=(0,V.m9)(y);Ge(E.auth,f,Ss),yield E.auth._initializationPromise;const C=tc(E.auth,g);yield Ja(C,E.auth);const M=yield Ns(E);return C._openRedirect(E.auth,f,"reauthViaRedirect",M)})).apply(this,arguments)}function qp(y,f,g){return function ic(y,f,g){return Fn.apply(this,arguments)}(y,f,g)}function Fn(){return(Fn=(0,p.Z)(function*(y,f,g){const E=(0,V.m9)(y);Ge(E.auth,f,Ss),yield E.auth._initializationPromise;const C=tc(E.auth,g);yield Xi(!1,E,f.providerId),yield Ja(C,E.auth);const M=yield Ns(E);return C._openRedirect(E.auth,f,"linkViaRedirect",M)})).apply(this,arguments)}function _l(){return(_l=(0,p.Z)(function*(y,f){return yield Z(y)._initializationPromise,yl(y,f,!1)})).apply(this,arguments)}function yl(y,f){return no.apply(this,arguments)}function no(){return(no=(0,p.Z)(function*(y,f,g=!1){const E=Z(y),C=tc(E,f),Q=yield new xo(E,C,g).execute();return Q&&!g&&(delete Q.user._redirectEventId,yield E._persistUserIfCurrent(Q.user),yield E._setRedirectUser(null,f)),Q})).apply(this,arguments)}function Ns(y){return mh.apply(this,arguments)}function mh(){return(mh=(0,p.Z)(function*(y){const f=To(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class ma{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(g=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function yh(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ry(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var E;if(f.error&&!ry(f)){const C=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";g.onError(Ie(this.auth,C))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const E=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_h(f))}saveEventToCache(f){this.cachedEventUids.add(_h(f)),this.lastProcessedEventTime=Date.now()}}function _h(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function ry({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===f?.code}function eu(y){return ds.apply(this,arguments)}function ds(){return(ds=(0,p.Z)(function*(y,f={}){return vt(y,"GET","/v1/projects",f)})).apply(this,arguments)}const sc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yr=/^https?/;function oc(){return(oc=(0,p.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield eu(y);for(const g of f)try{if(Wn(g))return}catch{}Ae(y,"unauthorized-domain")})).apply(this,arguments)}function Wn(y){const f=he(),{protocol:g,hostname:E}=new URL(f);if(y.startsWith("chrome-extension://")){const Q=new URL(y);return""===Q.hostname&&""===E?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&Q.hostname===E}if(!yr.test(g))return!1;if(sc.test(y))return E===y;const C=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+C+"|"+C+")$","i").test(E)}const tu=new Je(3e4,6e4);function ac(){const y=Tr().___jsl;if(y?.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Cr=null;const iy=new Je(5e3,15e3),hE="__/auth/iframe",hs="emulator/auth/iframe",ru={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},li=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _a(y){const f=y.config;j(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?it(f,hs):`https://${y.config.authDomain}/${hE}`,E={apiKey:f.apiKey,appName:y.name,v:te.SDK_VERSION},C=li.get(y.config.apiHost);C&&(E.eid=C);const M=y._getFrameworks();return M.length&&(E.fw=M.join(",")),`${g}?${(0,V.xO)(E).slice(1)}`}function Mo(){return Mo=(0,p.Z)(function*(y){const f=yield function nu(y){return Cr=Cr||function Vi(y){return new Promise((f,g)=>{var E,C,M;function Q(){ac(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{ac(),g(Ie(y,"network-request-failed"))},timeout:tu.get()})}if(null!==(C=null===(E=Tr().gapi)||void 0===E?void 0:E.iframes)&&void 0!==C&&C.Iframe)f(gapi.iframes.getContext());else{if(null===(M=Tr().gapi)||void 0===M||!M.load){const fe=fa("iframefcb");return Tr()[fe]=()=>{gapi.load?Q():g(Ie(y,"network-request-failed"))},hl(`https://apis.google.com/js/api.js?onload=${fe}`).catch(Ke=>g(Ke))}Q()}}).catch(f=>{throw Cr=null,f})}(y),Cr}(y),g=Tr().gapi;return j(g,y,"internal-error"),f.open({where:document.body,url:_a(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ru,dontclear:!0},E=>new Promise(function(){var C=(0,p.Z)(function*(M,Q){yield E.restyle({setHideOnLeave:!1});const fe=Ie(y,"network-request-failed"),Ke=Tr().setTimeout(()=>{Q(fe)},iy.get());function at(){Tr().clearTimeout(Ke),M(E)}E.ping(at).then(at,()=>{Q(fe)})});return function(M,Q){return C.apply(this,arguments)}}()))}),Mo.apply(this,arguments)}const wh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Eh=500,Ih=600,Yp="_blank",vl="http://localhost";class Wt{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const iu="__/auth/handler",oy="emulator/auth/handler";function wl(y,f,g,E,C,M){j(y.config.authDomain,y,"auth-domain-config-required"),j(y.config.apiKey,y,"invalid-api-key");const Q={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:E,v:te.SDK_VERSION,eventId:C};if(f instanceof Ss){f.setDefaultLanguage(y.languageCode),Q.providerId=f.providerId||"",(0,V.xb)(f.getCustomParameters())||(Q.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Ke,at]of Object.entries(M||{}))Q[Ke]=at}if(f instanceof wo){const Ke=f.getScopes().filter(at=>""!==at);Ke.length>0&&(Q.scopes=Ke.join(","))}y.tenantId&&(Q.tid=y.tenantId);const fe=Q;for(const Ke of Object.keys(fe))void 0===fe[Ke]&&delete fe[Ke];return`${function ts({config:y}){return y.emulator?it(y,oy):`https://${y.authDomain}/${iu}`}(y)}?${(0,V.xO)(fe).slice(1)}`}const El="webStorageSupport",bh=class Qp{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ms,this._completeRedirectFn=yl,this._overrideRedirectResult=fh}_openPopup(f,g,E,C){var M=this;return(0,p.Z)(function*(){var Q;We(null===(Q=M.eventManagers[f._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const fe=wl(f,g,E,he(),C);return function Ii(y,f,g,E=Eh,C=Ih){const M=Math.max((window.screen.availHeight-C)/2,0).toString(),Q=Math.max((window.screen.availWidth-E)/2,0).toString();let fe="";const Ke=Object.assign(Object.assign({},wh),{width:E.toString(),height:C.toString(),top:M,left:Q}),at=(0,V.z$)().toLowerCase();g&&(fe=be(at)?Yp:g),B(at)&&(f=f||vl,Ke.scrollbars="yes");const Ot=Object.entries(Ke).reduce((Yn,[rs,pu])=>`${Yn}${rs}=${pu},`,"");if(function Er(y=(0,V.z$)()){var f;return It(y)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(at)&&"_self"!==fe)return function sy(y,f){const g=document.createElement("a");g.href=y,g.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(E)}(f||"",fe),new Wt(null);const Mt=window.open(f||"",fe,Ot);j(Mt,y,"popup-blocked");try{Mt.focus()}catch{}return new Wt(Mt)}(f,fe,To())})()}_openRedirect(f,g,E,C){var M=this;return(0,p.Z)(function*(){return yield M._originValidation(f),function ul(y){Tr().location.href=y}(wl(f,g,E,he(),C)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:C,promise:M}=this.eventManagers[g];return C?Promise.resolve(C):(We(M,"If manager is not set, promise should be"),M)}const E=this.initAndGetManager(f);return this.eventManagers[g]={promise:E},E.catch(()=>{delete this.eventManagers[g]}),E}initAndGetManager(f){var g=this;return(0,p.Z)(function*(){const E=yield function fE(y){return Mo.apply(this,arguments)}(f),C=new ma(f);return E.register("authEvent",M=>(j(M?.authEvent,f,"invalid-auth-event"),{status:C.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:C},g.iframes[f._key()]=E,C})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(El,{type:El},C=>{var M;const Q=null===(M=C?.[0])||void 0===M?void 0:M[El];void 0!==Q&&g(!!Q),Ae(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function vh(y){return oc.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Yo()||ce()||It()}};class ay{constructor(f){this.factorId=f}_process(f,g,E){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,E);case"signin":return this._finalizeSignIn(f,g.credential);default:return Ee("unexpected MultiFactorSessionType")}}}class Dr extends ay{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Dr(f)}_finalizeEnroll(f,g,E){return function sE(y,f){return vt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Qe(y,f))}(f,{idToken:g,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function Bp(y,f){return vt(y,"POST","/v2/accounts/mfaSignIn:finalize",Qe(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let No=(()=>{class y{constructor(){}static assertion(g){return Dr._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var Lr="@firebase/auth";class Th{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,p.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(E=>{f(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);g&&(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function bi(){return window}(0,V.Pz)("authIdTokenMaxAge"),function ni(y){(0,te._registerComponent)(new de.wA("auth",(f,{options:g})=>{const E=f.getProvider("app").getImmediate(),C=f.getProvider("heartbeat"),{apiKey:M,authDomain:Q}=E.options;return((fe,Ke)=>{j(M&&!M.includes(":"),"invalid-api-key",{appName:fe.name}),j(!Q?.includes(":"),"argument-error",{appName:fe.name});const at={apiKey:M,authDomain:Q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mo(y)},Ot=new Xo(fe,Ke,at);return function re(y,f){const g=f?.persistence||[],E=(Array.isArray(g)?g:[g]).map(pt);f?.errorMap&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(E,f?.popupRedirectResolver)}(Ot,g),Ot})(E,C)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,E)=>{f.getProvider("auth-internal").initialize()})),(0,te._registerComponent)(new de.wA("auth-internal",f=>{const g=Z(f.getProvider("auth").getImmediate());return new Th(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,te.registerVersion)(Lr,"0.21.5",function bl(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,te.registerVersion)(Lr,"0.21.5","esm2017")}("Browser");const on=2e3;function Dl(){return Dl=(0,p.Z)(function*(y,f,g){var E;const{BuildInfo:C}=bi();We(f.sessionId,"AuthEvent did not contain a session ID");const M=yield function lc(y){return Sl.apply(this,arguments)}(f.sessionId),Q={};return It()?Q.ibi=C.packageName:Pt()?Q.apn=C.packageName:Ae(y,"operation-not-supported-in-this-environment"),C.displayName&&(Q.appDisplayName=C.displayName),Q.sessionId=M,wl(y,g,f.type,void 0,null!==(E=f.eventId)&&void 0!==E?E:void 0,Q)}),Dl.apply(this,arguments)}function Ch(){return(Ch=(0,p.Z)(function*(y){const{BuildInfo:f}=bi(),g={};It()?g.iosBundleId=f.packageName:Pt()?g.androidPackageName=f.packageName:Ae(y,"operation-not-supported-in-this-environment"),yield eu(y,g)})).apply(this,arguments)}function Dh(){return(Dh=(0,p.Z)(function*(y,f,g){const{cordova:E}=bi();let C=()=>{};try{yield new Promise((M,Q)=>{let fe=null;function Ke(){var Mt;M();const Yn=null===(Mt=E.plugins.browsertab)||void 0===Mt?void 0:Mt.close;"function"==typeof Yn&&Yn(),"function"==typeof g?.close&&g.close()}function at(){fe||(fe=window.setTimeout(()=>{Q(Ie(y,"redirect-cancelled-by-user"))},on))}function Ot(){"visible"===document?.visibilityState&&at()}f.addPassiveListener(Ke),document.addEventListener("resume",at,!1),Pt()&&document.addEventListener("visibilitychange",Ot,!1),C=()=>{f.removePassiveListener(Ke),document.removeEventListener("resume",at,!1),document.removeEventListener("visibilitychange",Ot,!1),fe&&window.clearTimeout(fe)}})}finally{C()}})).apply(this,arguments)}function Sl(){return(Sl=(0,p.Z)(function*(y){const f=function ou(y){if(We(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let E=0;E<y.length;E++)g[E]=y.charCodeAt(E);return g}(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(C=>C.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Sh=20;class Al extends ma{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,p.Z)(function*(){yield f.initPromise})()}}function xl(y){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,p.Z)(function*(y){const f=yield au()._get(xh(y));return f&&(yield au()._remove(xh(y))),f})).apply(this,arguments)}function uy(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<Sh;g++){const E=Math.floor(Math.random()*f.length);y.push(f.charAt(E))}return y.join("")}function au(){return pt(Wu)}function xh(y){return R("authEvent",y.config.apiKey,y.name)}function Ml(y){if(!y?.includes("?"))return{};const[f,...g]=y.split("?");return(0,V.zd)(g.join("?"))}const hc=class dc{constructor(){this._redirectPersistence=Ms,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=yl,this._overrideRedirectResult=fh}_initialize(f){var g=this;return(0,p.Z)(function*(){const E=f._key();let C=g.eventManagers.get(E);return C||(C=new Al(f),g.eventManagers.set(E,C),g.attachCallbackListeners(f,C)),C})()}_openPopup(f){Ae(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,E,C){var M=this;return(0,p.Z)(function*(){!function Po(y){var f,g,E,C,M,Q,fe,Ke,at,Ot;const Mt=bi();j("function"==typeof(null===(f=Mt?.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),j(typeof(null===(g=Mt?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),j("function"==typeof(null===(M=null===(C=null===(E=Mt?.cordova)||void 0===E?void 0:E.plugins)||void 0===C?void 0:C.browsertab)||void 0===M?void 0:M.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(Ke=null===(fe=null===(Q=Mt?.cordova)||void 0===Q?void 0:Q.plugins)||void 0===fe?void 0:fe.browsertab)||void 0===Ke?void 0:Ke.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(Ot=null===(at=Mt?.cordova)||void 0===at?void 0:at.InAppBrowser)||void 0===Ot?void 0:Ot.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const Q=yield M._initialize(f);yield Q.initialized(),Q.resetRedirect(),function ny(){st.clear()}(),yield M._originValidation(f);const fe=function ro(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:uy(),postBody:null,tenantId:y.tenantId,error:Ie(y,"no-auth-event")}}(f,E,C);yield function Rl(y,f){return au()._set(xh(y),f)}(f,fe);const Ke=yield function uc(y,f,g){return Dl.apply(this,arguments)}(f,fe,g),at=yield function va(y){const{cordova:f}=bi();return new Promise(g=>{f.plugins.browsertab.isAvailable(E=>{let C=null;E?f.plugins.browsertab.openUrl(y):C=f.InAppBrowser.open(y,function An(y=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(C)})})}(Ke);return function cc(y,f,g){return Dh.apply(this,arguments)}(f,Q,at)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ya(y){return Ch.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:E,handleOpenURL:C,BuildInfo:M}=bi(),Q=setTimeout((0,p.Z)(function*(){yield xl(f),g.onEvent(Nl())}),500),fe=function(){var Ot=(0,p.Z)(function*(Mt){clearTimeout(Q);const Yn=yield xl(f);let rs=null;Yn&&Mt?.url&&(rs=function Rh(y,f){var g,E;const C=function ly(y){const f=Ml(y),g=f.link?decodeURIComponent(f.link):void 0,E=Ml(g).link,C=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Ml(C).link||C||E||g||y}(f);if(C.includes("/__/auth/callback")){const M=Ml(C),Q=M.firebaseError?function cy(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(M.firebaseError)):null,fe=null===(E=null===(g=Q?.code)||void 0===g?void 0:g.split("auth/"))||void 0===E?void 0:E[1],Ke=fe?Ie(fe):null;return Ke?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ke,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:C,postBody:null}}return null}(Yn,Mt.url)),g.onEvent(rs||Nl())});return function(Yn){return Ot.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,fe);const Ke=C,at=`${M.packageName.toLowerCase()}://`;bi().handleOpenURL=function(){var Ot=(0,p.Z)(function*(Mt){if(Mt.toLowerCase().startsWith(at)&&fe({url:Mt}),"function"==typeof Ke)try{Ke(Mt)}catch(Yn){console.error(Yn)}});return function(Mt){return Ot.apply(this,arguments)}}()}};function Nl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ie("no-auth-event")}}const Nh=1e3;function ns(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Ea(y=(0,V.z$)()){return!("file:"!==ns()&&"ionic:"!==ns()&&"capacitor:"!==ns()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Pl(){try{const y=self.localStorage,f=To();if(y)return y.setItem(f,"1"),y.removeItem(f),!function ng(y=(0,V.z$)()){return function pc(){return(0,V.w1)()&&11===document?.documentMode}()||function gc(y=(0,V.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,V.hl)()}catch{return io()&&(0,V.hl)()}return!1}function io(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function kl(){return(function tg(){return"http:"===ns()||"https:"===ns()}()||(0,V.ru)()||Ea())&&!function fc(){return(0,V.b$)()||(0,V.UG)()}()&&Pl()&&!io()}function Ol(){return Ea()&&typeof document<"u"}function uu(){return(uu=(0,p.Z)(function*(){return!!Ol()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},Nh);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Sr={LOCAL:"local",NONE:"none",SESSION:"session"},Ia=j,lu="persistence";function ko(y){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,p.Z)(function*(y){yield y._initializationPromise;const f=fs(),g=R(lu,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function fs(){var y;try{return(null===(y=function cu(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Oh=j;class Ti{constructor(){this.browserResolver=pt(bh),this.cordovaResolver=pt(hc),this.underlyingResolver=null,this._redirectPersistence=Ms,this._completeRedirectFn=yl,this._overrideRedirectResult=fh}_initialize(f){var g=this;return(0,p.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,E,C){var M=this;return(0,p.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(f,g,E,C)})()}_openRedirect(f,g,E,C){var M=this;return(0,p.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(f,g,E,C)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Ol()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Oh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,p.Z)(function*(){if(f.underlyingResolver)return;const g=yield function Ph(){return uu.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function hu(y){return y.unwrap()}function fu(y){return ba(y)}function ba(y){const{_tokenResponse:f}=y instanceof V.ZR?y.customData:y;if(!f)return null;if(!(y instanceof V.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return lh.credentialFromResult(y);const g=f.providerId;if(!g||g===ue.PASSWORD)return null;let E;switch(g){case ue.GOOGLE:E=zd;break;case ue.FACEBOOK:E=ju;break;case ue.GITHUB:E=Wd;break;case ue.TWITTER:E=Xc;break;default:const{oauthIdToken:C,oauthAccessToken:M,oauthTokenSecret:Q,pendingToken:fe,nonce:Ke}=f;return M||Q||C||fe?fe?g.startsWith("saml.")?ls._create(g,fe):Zi._fromParams({providerId:g,signInMethod:g,pendingToken:fe,idToken:C,accessToken:M}):new na(g).credential({idToken:C,accessToken:M,rawNonce:Ke}):null}return y instanceof V.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function Ci(y,f){return f.catch(g=>{throw g instanceof V.ZR&&function Lh(y,f){var g;const E=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f?.code)f.resolver=new hy(y,function iE(y,f){var g;const E=(0,V.m9)(y),C=f;return j(f.customData.operationType,E,"argument-error"),j(null===(g=C.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,E,"argument-error"),Yd._fromError(E,C)}(y,f));else if(E){const C=ba(f),M=f;C&&(M.credential=C,M.tenantId=E.tenantId||void 0,M.email=E.email||void 0,M.phoneNumber=E.phoneNumber||void 0)}}(y,g),g}).then(g=>{const C=g.user;return{operationType:g.operationType,credential:fu(g),additionalUserInfo:Lp(g),user:ps.getOrCreate(C)}})}function Fh(y,f){return rg.apply(this,arguments)}function rg(){return(rg=(0,p.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:E=>Ci(y,g.confirm(E))}})).apply(this,arguments)}class hy{constructor(f,g){this.resolver=g,this.auth=function mc(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Ci(hu(this.auth),this.resolver.resolveSignIn(f))}}class ps{constructor(f){this._delegate=f,this.multiFactor=function Qd(y){const f=(0,V.m9)(y);return zu.has(f)||zu.set(f,Up._fromUser(f)),zu.get(f)}(f)}static getOrCreate(f){return ps.USER_MAP.has(f)||ps.USER_MAP.set(f,new ps(f)),ps.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,p.Z)(function*(){return Ci(g.auth,k(g._delegate,f))})()}linkWithPhoneNumber(f,g){var E=this;return(0,p.Z)(function*(){return Fh(E.auth,function uE(y,f,g){return pl.apply(this,arguments)}(E._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,p.Z)(function*(){return Ci(g.auth,function ey(y,f,g){return ty.apply(this,arguments)}(g._delegate,f,Ti))})()}linkWithRedirect(f){var g=this;return(0,p.Z)(function*(){return yield ko(Z(g.auth)),qp(g._delegate,f,Ti)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,p.Z)(function*(){return Ci(g.auth,oe(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Fh(this.auth,function Z_(y,f,g){return Y_.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return Ci(this.auth,function dE(y,f,g){return J_.apply(this,arguments)}(this._delegate,f,Ti))}reauthenticateWithRedirect(f){var g=this;return(0,p.Z)(function*(){return yield ko(Z(g.auth)),bt(g._delegate,f,Ti)})()}sendEmailVerification(f){return function Mp(y,f){return sl.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,p.Z)(function*(){return yield function xp(y,f){return oa.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function xs(y,f){return Pp((0,V.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Np(y,f){return Pp((0,V.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function cE(y,f){return Qa.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function O_(y,f){return ca.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function Jw(y,f,g){return ol.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ps.USER_MAP=new WeakMap;const _c=j;let Uh=(()=>{class y{constructor(g,E){if(this.app=g,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:C}=g.options;_c(C,"invalid-api-key",{appName:g.name}),_c(C,"invalid-api-key",{appName:g.name});const M=typeof window<"u"?Ti:void 0;this._delegate=E.initialize({options:{persistence:Fl(C,g.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(Ze),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ps.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,E){!function Ve(y,f,g){const E=Z(y);j(E._canInitEmulator,E,"emulator-config-failed"),j(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const C=!!g?.disableWarnings,M=qe(f),{host:Q,port:fe}=function Jt(y){const f=qe(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const E=g[2].split("@").pop()||"",C=/^(\[[^\]]+\])(:|$)/.exec(E);if(C){const M=C[1];return{host:M,port:Ht(E.substr(M.length+1))}}{const[M,Q]=E.split(":");return{host:M,port:Ht(Q)}}}(f);E.config.emulator={url:`${M}//${Q}${null===fe?"":`:${fe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Q,port:fe,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:C})}),C||function Zn(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,E)}applyActionCode(g){return function Ft(y,f){return ui.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Rs(this._delegate,g)}confirmPasswordReset(g,E){return function aa(y,f,g){return Qs.apply(this,arguments)}(this._delegate,g,E)}createUserWithEmailAndPassword(g,E){var C=this;return(0,p.Z)(function*(){return Ci(C._delegate,function M_(y,f,g){return Kd.apply(this,arguments)}(C._delegate,g,E))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Xs(y,f){return il.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function N_(y,f){return"EMAIL_SIGNIN"===Hr.parseLink(f)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,p.Z)(function*(){_c(kl(),g._delegate,"operation-not-supported-in-this-environment");const E=yield function Kp(y,f){return _l.apply(this,arguments)}(g._delegate,Ti);return E?Ci(g._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function wa(y,f){Z(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,E,C){const{next:M,error:Q,complete:fe}=yc(g,E,C);return this._delegate.onAuthStateChanged(M,Q,fe)}onIdTokenChanged(g,E,C){const{next:M,error:Q,complete:fe}=yc(g,E,C);return this._delegate.onIdTokenChanged(M,Q,fe)}sendSignInLinkToEmail(g,E){return function Ne(y,f,g){return fn.apply(this,arguments)}(this._delegate,g,E)}sendPasswordResetEmail(g,E){return function Io(y,f,g){return br.apply(this,arguments)}(this._delegate,g,E||void 0)}setPersistence(g){var E=this;return(0,p.Z)(function*(){let C;switch(function kh(y,f){Ia(Object.values(Sr).includes(f),y,"invalid-persistence-type"),(0,V.b$)()?Ia(f!==Sr.SESSION,y,"unsupported-persistence-type"):(0,V.UG)()?Ia(f===Sr.NONE,y,"unsupported-persistence-type"):io()?Ia(f===Sr.NONE||f===Sr.LOCAL&&(0,V.hl)(),y,"unsupported-persistence-type"):Ia(f===Sr.NONE||Pl(),y,"unsupported-persistence-type")}(E._delegate,g),g){case Sr.SESSION:C=Ms;break;case Sr.LOCAL:C=(yield pt(Ka)._isAvailable())?Ka:Wu;break;case Sr.NONE:C=H;break;default:return Ae("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(C)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Ci(this._delegate,function el(y){return tl.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Ci(this._delegate,ti(this._delegate,g))}signInWithCustomToken(g){return Ci(this._delegate,function jn(y,f){return Cn.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,E){return Ci(this._delegate,function cr(y,f,g){return ti((0,V.m9)(y),Yc.credential(f,g))}(this._delegate,g,E))}signInWithEmailLink(g,E){return Ci(this._delegate,function P_(y,f,g){return Or.apply(this,arguments)}(this._delegate,g,E))}signInWithPhoneNumber(g,E){return Fh(this._delegate,function Ao(y,f,g){return Mn.apply(this,arguments)}(this._delegate,g,E))}signInWithPopup(g){var E=this;return(0,p.Z)(function*(){return _c(kl(),E._delegate,"operation-not-supported-in-this-environment"),Ci(E._delegate,function dh(y,f,g){return Xa.apply(this,arguments)}(E._delegate,g,Ti))})()}signInWithRedirect(g){var E=this;return(0,p.Z)(function*(){return _c(kl(),E._delegate,"operation-not-supported-in-this-environment"),yield ko(E._delegate),ml(E._delegate,g,Ti)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function x_(y,f){return qd.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Sr,y})();function yc(y,f,g){let E=y;"function"!=typeof y&&({next:E,error:f,complete:g}=y);const C=E;return{next:Q=>C(Q&&ps.getOrCreate(Q)),error:f,complete:g}}function Fl(y,f){const g=function du(y,f){const g=fs();if(!g)return[];const E=R(lu,y,f);switch(g.getItem(E)){case Sr.NONE:return[H];case Sr.LOCAL:return[Ka,Ms];case Sr.SESSION:return[Ms];default:return[]}}(y,f);if(typeof self<"u"&&!g.includes(Ka)&&g.push(Ka),typeof window<"u")for(const E of[Wu,Ms])g.includes(E)||g.push(E);return g.includes(H)||g.push(H),g}class vc{constructor(){this.providerId="phone",this._delegate=new lh(hu(J.Z.auth()))}static credential(f,g){return lh.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}vc.PHONE_SIGN_IN_METHOD=lh.PHONE_SIGN_IN_METHOD,vc.PROVIDER_ID=lh.PROVIDER_ID;const ig=j;class sg{constructor(f,g,E=J.Z.app()){var C;ig(null===(C=E.options)||void 0===C?void 0:C.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new uh(f,g,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function fy(y){y.INTERNAL.registerComponent(new de.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),E=f.getProvider("auth");return new Uh(g,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Y_EMAIL_SIGNIN,PASSWORD_RESET:Y_PASSWORD_RESET,RECOVER_EMAIL:Y_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Y_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Y_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Y_VERIFY_EMAIL}},EmailAuthProvider:Yc,FacebookAuthProvider:ju,GithubAuthProvider:Wd,GoogleAuthProvider:zd,OAuthProvider:na,SAMLAuthProvider:Ha,PhoneAuthProvider:vc,PhoneMultiFactorGenerator:No,RecaptchaVerifier:sg,TwitterAuthProvider:Xc,Auth:Uh,AuthCredential:hn,Error:V.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.3.5")}(J.Z)},8766:(gt,De,P)=>{P.d(De,{Lj:()=>Ae,X3:()=>Ue});var p=P(5861);const J=(j,Ee)=>Ee.some(We=>j instanceof We);let V,te;const de=new WeakMap,ge=new WeakMap,ue=new WeakMap,G=new WeakMap,W=new WeakMap;let we={get(j,Ee,We){if(j instanceof IDBTransaction){if("done"===Ee)return ge.get(j);if("objectStoreNames"===Ee)return j.objectStoreNames||ue.get(j);if("store"===Ee)return We.objectStoreNames[1]?void 0:We.objectStore(We.objectStoreNames[0])}return Te(j[Ee])},set:(j,Ee,We)=>(j[Ee]=We,!0),has:(j,Ee)=>j instanceof IDBTransaction&&("done"===Ee||"store"===Ee)||Ee in j};function pe(j){return"function"==typeof j?function nt(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ne(){return te||(te=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(j)?function(...Ee){return j.apply(Me(this),Ee),Te(de.get(this))}:function(...Ee){return Te(j.apply(Me(this),Ee))}:function(Ee,...We){const Ye=j.call(Me(this),Ee,...We);return ue.set(Ye,Ee.sort?Ee.sort():[Ee]),Te(Ye)}}(j):(j instanceof IDBTransaction&&function Pe(j){if(ge.has(j))return;const Ee=new Promise((We,Ye)=>{const pt=()=>{j.removeEventListener("complete",Xe),j.removeEventListener("error",re),j.removeEventListener("abort",re)},Xe=()=>{We(),pt()},re=()=>{Ye(j.error||new DOMException("AbortError","AbortError")),pt()};j.addEventListener("complete",Xe),j.addEventListener("error",re),j.addEventListener("abort",re)});ge.set(j,Ee)}(j),J(j,function ae(){return V||(V=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(j,we):j)}function Te(j){if(j instanceof IDBRequest)return function Y(j){const Ee=new Promise((We,Ye)=>{const pt=()=>{j.removeEventListener("success",Xe),j.removeEventListener("error",re)},Xe=()=>{We(Te(j.result)),pt()},re=()=>{Ye(j.error),pt()};j.addEventListener("success",Xe),j.addEventListener("error",re)});return Ee.then(We=>{We instanceof IDBCursor&&de.set(We,j)}).catch(()=>{}),W.set(Ee,j),Ee}(j);if(G.has(j))return G.get(j);const Ee=pe(j);return Ee!==j&&(G.set(j,Ee),W.set(Ee,j)),Ee}const Me=j=>W.get(j);function Ue(j,Ee,{blocked:We,upgrade:Ye,blocking:pt,terminated:Xe}={}){const re=indexedDB.open(j,Ee),he=Te(re);return Ye&&re.addEventListener("upgradeneeded",_e=>{Ye(Te(re.result),_e.oldVersion,_e.newVersion,Te(re.transaction))}),We&&re.addEventListener("blocked",()=>We()),he.then(_e=>{Xe&&_e.addEventListener("close",()=>Xe()),pt&&_e.addEventListener("versionchange",()=>pt())}).catch(()=>{}),he}function Ae(j,{blocked:Ee}={}){const We=indexedDB.deleteDatabase(j);return Ee&&We.addEventListener("blocked",()=>Ee()),Te(We).then(()=>{})}const Ie=["get","getKey","getAll","getAllKeys","count"],Re=["put","add","delete","clear"],Ge=new Map;function Se(j,Ee){if(!(j instanceof IDBDatabase)||Ee in j||"string"!=typeof Ee)return;if(Ge.get(Ee))return Ge.get(Ee);const We=Ee.replace(/FromIndex$/,""),Ye=Ee!==We,pt=Re.includes(We);if(!(We in(Ye?IDBIndex:IDBObjectStore).prototype)||!pt&&!Ie.includes(We))return;const Xe=function(){var re=(0,p.Z)(function*(he,..._e){const xe=this.transaction(he,pt?"readwrite":"readonly");let Fe=xe.store;return Ye&&(Fe=Fe.index(_e.shift())),(yield Promise.all([Fe[We](..._e),pt&&xe.done]))[0]});return function(_e){return re.apply(this,arguments)}}();return Ge.set(Ee,Xe),Xe}!function Ze(j){we=j(we)}(j=>({...j,get:(Ee,We,Ye)=>Se(Ee,We)||j.get(Ee,We,Ye),has:(Ee,We)=>!!Se(Ee,We)||j.has(Ee,We)}))},5861:(gt,De,P)=>{function p(V,te,ae,ne,de,ge,ue){try{var G=V[ge](ue),W=G.value}catch(Y){return void ae(Y)}G.done?te(W):Promise.resolve(W).then(ne,de)}function J(V){return function(){var te=this,ae=arguments;return new Promise(function(ne,de){var ge=V.apply(te,ae);function ue(W){p(ge,ne,de,ue,G,"next",W)}function G(W){p(ge,ne,de,ue,G,"throw",W)}ue(void 0)})}}P.d(De,{Z:()=>J})}},gt=>{gt(gt.s=2119)}]);